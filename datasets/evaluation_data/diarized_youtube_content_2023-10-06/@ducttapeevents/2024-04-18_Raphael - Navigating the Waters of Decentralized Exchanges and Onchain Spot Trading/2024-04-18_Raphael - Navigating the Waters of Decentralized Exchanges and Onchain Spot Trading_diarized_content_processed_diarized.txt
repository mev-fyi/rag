00:00:00.960 - 00:00:03.154, Speaker A: Let's have a round of applause for Rafael.
00:00:08.734 - 00:00:31.994, Speaker B: All right. Yeah. I want to talk to you about everything around amms and on chain spot trading. No, doesn't work. Yeah, I just use it here. No worries. No, also doesn't work.
00:00:31.994 - 00:00:57.832, Speaker B: Okay, cool. Yeah. So when you want to trade a token, you actually have to make many decisions. You have to decide on the price you want to quote, you have to decide on the volume. You want to have to decide on the execution. So maybe market order, limit order. You have to decide on the time you want to trade, but you actually also have to decide on the trading venue.
00:00:57.832 - 00:01:47.318, Speaker B: So where to go and where to trade. Here you have, in our world, you have three different possibilities to go. You can go to centralized exchanges, being coinbase, binance, and all the other brands you might be familiar with. So then you have the decentralized exchange changes, mainly known as like Uniswap or sushiswap in the ethereum ecosystem. And then you have something like hybrid exchanges. Hybrid exchanges try to combine the architecture designs between centralized exchanges and decentralized exchanges. I decided to compare these three across three different lever, or four different levers, being liquidity, trade, settlement, custody, and market making.
00:01:47.318 - 00:02:35.108, Speaker B: So when you look at the liquidity on a centralized exchange, liquidity is actually settled off chain. So the buyer and the seller are meeting each other off chain in a centralized order book, and then the trade is facilitated, and trade settlement also happens off chain. So this actually means that all the assets on a centralized exchange are pooled in an omnibus wallet. And when you trade party a against party b, you actually do not move any assets. The only thing that's happening is a record in a database that changes the ownership from party a to party b. So with decentralized exchanges, it's a bit different, because here we have liquidity on chain. We have liquidity in a liquidity pool, which is a smart contract on chain.
00:02:35.108 - 00:03:17.768, Speaker B: And also the trade settlement is on chain. With a hybrid exchange, we sort of see a mix of both of it. So you see there's still an off chain order book, and the buyer and the seller are meeting each other off chain, and the quote for the transaction is done off chain. But the transaction itself is then actually happening on chain. So this enables traders to still have self custody when they're trading on hybrid exchanges, as they would do on a decentralized exchange. However, the liquidity. So the LP's liquidity providers in a hybrid exchange are sort of like a centralized market maker.
00:03:17.768 - 00:04:19.844, Speaker B: So here you interact with a centralized party. I want to talk today about automated market makers. Automated market makers are these smart contracts that provide liquidity on chain and that enable like, a decentralization of the maker and a decentralization of the taker. So what are the objectives of an Am? So the objectives of an automated market maker are, on the one hand, price discovery. So finding the price of the assets that are in the pool of the AMM contract, and to provide liquidity at all times. So whenever a trader arrives at the ammo, the amm wants to provide liquidity to be traded against. So price discovery in an AMM works by volume trade volume coming to the pool, and arbitrageurs sort of moving the price into equilibrium.
00:04:19.844 - 00:04:55.796, Speaker B: So when arbitrageurs coming in, sending buy orders, the price moves up. If they are sending sell orders, the price moves down. And these arbitrageurs are sort of capturing profit because they bring in information from outside of the pool. They bring external information to the amm, and in return for this, they basically receive the profit. So they're delivering the information and get a gain of this by receiving a profit. The market maker. So the LP provider, liquidity provider to the pool, is providing inventory.
00:04:55.796 - 00:05:38.382, Speaker B: And in return for this inventory, return for this liquidity, they actually want to get some rewards, because you do not provide liquidity for free. Therefore there needs to be a reward. This is sort of true for all exchanges. So you have this in a centralized exchange, the liquidity provider wants to earn a reward, but ALso in a decentralized exchange. And in the centralized exchange, the reward of the market maker is this spread between the ask, the bid price. We don't have ask and bid price in an amM. So here the reward of the market makers or the reward of the liquidity provider is actually the trading fee.
00:05:38.382 - 00:06:21.414, Speaker B: So you see on amms, there are different pools, and different pools have different trading fees. I'd like to take you a bit on the journey of amms. Amms are quite complex. They've been around for a while, and we started off with the constant product, AMM. So this is a constant function, AMM, and it defines the ratio of the inventory in the pool. So this means you have x, which is the amount of one asset times y, which is the amount of the other asset, and it always has to be constant. So the only way this constant can change is actually by increasing liquidity in the pool.
00:06:21.414 - 00:07:07.172, Speaker B: So if a liquidity provider comes into the pool and injects more liquidity, that means that this curve, sort of this constant function is shifting, is shifting up. When liquidity is added, it's shifting down when liquidity is removed. The constant product, Amm started off by providing liquidity across the entire price range, so it facilitated the complete price discovery. This means that also liquidity is actually placed at zones where there will actually never be traded. So there's liquidity at zero, but there's also liquidity at infinity. So it's sort of quite inefficient in its capital deployment. So the concentrated liquidity changed this a little bit, because now the liquidity provider can choose a range where they want to supply the liquidity.
00:07:07.172 - 00:07:42.438, Speaker B: So they actually have a lot of x times y equals k functions. And on every liquidity band, they have this function to identify the ratio of the assets they are providing. This means that we are much more capital efficient and we can choose the different ranges. We now see since recent times, a lot of new Amm designs. And these new AMm designs are bringing in a lot of new features. So we see it with uniswap V four, bringing in hooks, making it customizable. But also we have a lot of Amm designs which bring in sort of a hybrid structure.
00:07:42.438 - 00:08:37.090, Speaker B: So bringing in elements from a centralized exchange to solve a lot of flaws in the regular AMm design. The rest of the talk will look predominantly at this new design and what floors of Amms we are actually covering. As said, the motivation for change to go from the left, from the constant product amm, to go to the concentrated liquidity, Amm in the middle was predominantly the capital efficiency. So we want to allocate capital more efficiently. We do no longer want to go from zero to infinity of a price, but we actually want to move our liquidity where price is trading. So this means that now every liquidity provider has an active liquidity position in the concentrated amm. So before it was like a passive position, you just inject liquidity, and the Amm trades with the liquidity.
00:08:37.090 - 00:09:21.190, Speaker B: Now, on a concentrated amm, also named Uniswap V three, that was one of the first ones starting. And basically there you have an active liquidity position that you have to manage, meaning you have to rebalance liquidity. And it can also happen that the price moves out of your range of liquidity, and then you're actually no longer providing liquidity. So then you have to rebalance liquidity to be back in range. This also means that LP's are quite subject to still capital loss, because if the price moves out of your range, you actually fully trade it into one direction. So if it moves to the left, basically you are left with asset A. If it's moving to the right, you're left with asset B.
00:09:21.190 - 00:10:08.924, Speaker B: If the price basically leaves your range, you only have one asset left because it's trading all the way up, consuming all the liquidity of the other side. This also means that there's still some loss for potential loss and the risk of capital loss for liquidity providers. The new Amm designs, they are mainly motivated around solving this problem, around the loss. So what they are essentially trying is making LP profitable. So a term you hear a lot about LP ing recently is this term LVR. This describes the loss by a liquidity provider. It essentially means loss versus rebalancing.
00:10:08.924 - 00:10:50.152, Speaker B: And loss versus rebalancing is comparing the portfolio in the pool. So the portfolio of the liquidity provider to an outside portfolio. So the opportunity cost of this pool provider. And if you look at the graph, so if you start off with the initial pool at price a and the price jumps, it jumps up to price b. This means that in the pool the information is still its price a, and arbitrageurs are coming in gradually, moving up towards price b. So this moving up is, so to say, called rebalancing. Because we're changing inventory in the pool, we're rebalancing.
00:10:50.152 - 00:11:41.634, Speaker B: But the price, the average price we are rebalancing at is not price b, it's actually somewhere between price a and price b. So somewhere along the curve, the outside traders, so someone who's holding the opportunity cost portfolio on a centralized exchange, for example, they don't have to trade at price a, they don't have to trade at somewhere between price a and b. They can actually trade as price b, which is the most recent information. The difference between the portfolio outside on the centralized exchange and the portfolio in the AMM, and basically the value they are gaining for rebalancing. This difference here is described as loss versus rebalancing. It is basically the opportunity cost of the liquidity provider providing liquidity. This loss is not only experienced on the way up, it's also experienced on the way down.
00:11:41.634 - 00:12:48.016, Speaker B: So zooming out, this actually means that there is value leaking to arbitrageurs who bringing in this price information, adjusting the price of the amm and moving it gradually from a to b, and to make LP ing profitable, we have to solve this. So we have to make sure that the trading fees earned by liquidity providers are actually higher than the loss versus rebalancing. So there are many attempts to solve this upfront, to say a classical constant product amm, it's impossible to reduce loss versus rebalance. It's just not feasible in the architecture of this constant function design. But there are many opportunities or possibilities to change the amm design by moving more towards the hybrid design. And some are like, for example, introducing price oracles. So you bring in external information of prices, and you do no longer have to do this price discovery, but you can actually jump in prices.
00:12:48.016 - 00:13:28.818, Speaker B: You could also, in theory, change the blockchain, meaning you decrease block times, or you introduce some sort of batch auctions. So you bundle all the trades and then you clear them all at a uniform price. Another way that is now seen is where we mitigate LVR. So we're actually internalizing the LVR and returning some of this LVR. It's still there, but we're returning some of it back to the liquidity providers by introducing dynamic fees. So there are a lot of different spectrums. We had arrived, we have a research team that designed a new amm, and I'd quickly like to introduce that.
00:13:28.818 - 00:14:07.154, Speaker B: So it's the solver order type hybrid Dex design, and it basically internalizes a lot of the LVR. It has two types of swaps. So there are permissionless swaps. So the permissionless swaps work like in the traditional constant function, amm. And everyone, every party can enter and perform the swaps, but we also have permission swaps, and permission swaps are done by, so to say, solvers. So these are registered trusted parties, and they come in and they compete for quotes. So they send quotes to the solver order type.
00:14:07.154 - 00:14:54.992, Speaker B: And once we get these quotes, we can fill a swap, like sort of competing, and the best one receives the swap. And this swap brings in new price information. So we no longer have to wait for arbitrageurs bringing in price information, but we get this information from the solver. So this helps us to move the Amm stale price. So we can now move the price from a to b by the information we get from the solvers. Instead of waiting for arbitrageurs moving the price up, we also introduce dynamic fees, because we are basically bound to block times, and prices can only be updated at the top of the block. So, meaning we are still stuck with the information of the previous block, because swaps can only occur at the block time, so the longer the block is actually lasting.
00:14:54.992 - 00:15:45.864, Speaker B: So in the time during the block, fees are dynamically increasing. Because if there is an arbitrage between a centralized exchange and the amm, we can reduce this arbitrage, make it basically move up the no trading zone, which is essentially the price of the in the amm. So the stale price plus the fee, because an arbitrageur has to pay the price in the amm and the fee. And if that's larger than the outside price, then it's no longer an arbitrage, it's no longer profitable. Summing up our discussions around amms, I think the future is right. We definitely see a lot of innovation there. Recently, cowswap has introduced decentralized exchange that is very well used and solves everything around batch auctions.
00:15:45.864 - 00:16:23.444, Speaker B: So that's a really nice design. Overall, we see the entire innovation around dynamic fees, as for example, the solver order type. We see integration of off chain price information. So the most frequent is oracles, but also the silver order type introduces off chain information. We have the request for quote settlement. So a new way of settling trades. We can discriminate the traders and the order flow, meaning that we basically remove toxic order flow, so orders that actually want to exploit the pool and we can do in protocol auctions, as said with cowswap.
00:16:23.444 - 00:17:14.934, Speaker B: So basically we auction the right to arbitrage and people are competing. Thereby we're paying tips back to the pool because arbitrageurs have to compete against each other quickly. Speaking about me, I'm leading growth and partnerships at Arrakis. We are decentralized, permissionless on chain market maker. We deal with these topics day in, day out. We are providing a lot of liquidity, more than 140 million for different protocols and daos managing their liquidity on chain. We provide infrastructure remaining on Mainnet, also layer twos and we design algorithmic strategies to move capital, do rebalancing on uniswap v three and help protocols thereby to really increase their liquidity and improve the depth of liquidity to reduce arbitrage.
00:17:14.934 - 00:17:39.054, Speaker B: We have a small team here in Zug, so if you're interested in amms and dexs and everything around, feel free to come and talk to me after the talk. So yeah, last words. Thanks for watching. Hope it was interesting. Please follow Iraqis finance and feel free to follow me too. I'm open for some questions if there's still time allowing.
00:17:39.634 - 00:18:04.122, Speaker A: We have time for one or two quick questions. So either everything was crystal clear or nobody understood anything from your presentation. I'm joking of course. I'm pretty sure that everyone got the gist of it, and it was a lovely presentation. So thank you very, very much. Raphael.
00:18:04.258 - 00:18:04.834, Speaker B: Thank you very much.
