00:00:08.840 - 00:00:20.514, Speaker A: All right, so our next speaker is founder and CTO of Arrakis, solving lever in the dex space. So let's give a round of applause for cassandra.
00:00:24.574 - 00:01:24.352, Speaker B: All right, hey, everybody, I'm Cassandra eth online. This girl and this talk today is called usurping the next phase of Dex evolution. We're going to get to an alternate title as well. But I think what I really want to frame for you guys today is the way that decentralized exchanges are moving into a new paradigm, are accelerating the way that they're changing. And hopefully these changes and decentralized exchanges will allow us to compete with centralized players in a new way. So, yeah, if I'm going to get anything across to you in this talk today, it's this idea, which is that I believe we're, for those of you, I mean, how many people here have heard of Uniswap v three and concentrated liquidity just to see where we're at? Okay, good amount. And uniswap in general? Uniswap V two.
00:01:24.352 - 00:02:03.642, Speaker B: Yeah, most people, yeah. Okay, great. Well, I believe that decentralized exchanges, we've come a long way. Right. Decentralized exchanges is a really new concept, and with the advent of protocols like Uniswap, Uniswap V two, we saw an explosion of usage on this new paradigm. And this was really exciting for all of crypto, and I think it sort of solidified our mental models about how we think decentralized exchanges work. So we really believed that this x times Y equals k automated market maker was like this new revolution.
00:02:03.642 - 00:03:09.706, Speaker B: And it was, and it's super exciting, but I think that things are really changing rapidly on the on chain spot trading space. I think both the twin paradigms, right, because decentralized exchanges are a two sided marketplace. They have liquidity providers and they have swappers. I think on both sides. We've asked some really, really hard questions of on the liquidity provider side, does an algorithm like just a constant function actually work and a constant swap fee actually work for liquidity providers at scale? And I think a lot of hard questions have been asked of this amm paradigm on that side. On the other side, does normal users, them encoding a swap payload and just putting that in the public mempool of Ethereum, does this actually work for traders? And I think many hard questions have been asked there. So there was this incredible explosion of excitement around the amm, and then I think the last few years have been this constant question asking.
00:03:09.706 - 00:04:01.558, Speaker B: And we're on the precipice of sort of starting again from the ground up. So if I get across anything to you today, it should be the idea that I believe decentralized exchanges are at this crossroads. We're at a paradigm shifting moment, and we need to start again thinking about, from first principles, how can we build the best on chain spot trading experience that can rival the experience you have on centralized venues? And I think there's a really bright future ahead of us. Things like Uniswap V four very exciting new developments which allow us to crack open and explore this design space a lot. Okay, so this alternate title here, and what I really want to tell you about today, tell you about something new, what we're doing at Arrakis. So, yeah, I work at Arrakis. It's a.
00:04:01.558 - 00:04:54.914, Speaker B: A protocol built on top of decentralized exchanges for automating, for trustless market making on top of decentralized exchanges. So we've been doing a lot of research, and we're really excited about all these possible changes in the Dex design space. And our first contribution of something, a different style of amm, a different idea for how you could approach the ammo is something we're calling the hot amm, or hot. Hot stands for hybrid order types. And the idea is we wanted to create a design for Amms that was MeV aware that allowed us to compete in this new world, this new landscape that is rapidly emerging of on chain trading that we're going to talk about today. So you're also going to hear a good amount about this new design. It's something that we at Arrakis, we built in collaboration with Volantis Labs.
00:04:54.914 - 00:05:26.144, Speaker B: They're creating a new decentralized exchange protocol on top of Ethereum and other EVM chains. So let's take a step back and look at how do people trade crypto assets, and why are we trading on chain. So people want to trade one crypto asset to another, right. This is why we have spot trading and we have these different venues that we might be able to do this. You have centralized exchanges. You can trade on a centralized exchange. You can trade on a decentralized exchange like an amm.
00:05:26.144 - 00:06:18.384, Speaker B: And what people probably don't know as much about is that there are also this new class of exchange protocols emerging, which we're going to call hybrid exchanges here. So what is a centralized exchange? What's a decentralized exchange? So we have some sort of different features of these things that we organized a bit here. And the idea is that, well, on a centralized exchange, everything is centralized. You put your funds into some into some omnibus wallet. Basically, all the funds are custodied by the centralized exchange. And both making and taking, both swapping and being a liquidity provider is entirely centralized. You have sort of central actors like hedge funds and so on, being, playing, doing market making and doing high frequency market making algorithms.
00:06:18.384 - 00:06:59.926, Speaker B: You have people going on there and wanting to swap, but everybody is trusting the centralized exchange to facilitate, you know, facilitate all of this exchange and allow people to place these maker orders, place these taker orders. So everything's happening off chain. You have an off chain central little bit order book and everything centralized on this new paradigm we're talking about today, right? This amms, what you have is this on chain liquidity pool. Everybody has custody of their funds. They only ever put their funds into a smart contract that works with very specific rules. And so you actually have fully decentralized making and fully decentralized taking. And this was, we already says, like an explosive concept.
00:06:59.926 - 00:08:13.244, Speaker B: It allowed bootstrapping of a market formation on long tail assets in a way that was simply not possible at all before in crypto, all kinds of composability benefits as well. So this was really exciting. However, there are some issues with trading on these amms that we're going to get into, and one of them is that getting the best price, one of the easiest ones to understand is that swappers were not as routinely getting as competitive prices as they were on these centralized venues, on a centralized exchange. So if you wanted to trade, if you want to trade on chain, it was super convenient, super composable. All different protocols could tap into this Amm liquidity, but pricing for the trader wasn't so great. And what we have in the middle with these hybrid exchanges, with the rise of intent based trading, is you have this idea that you can still have a totally decentralized swapping experience where you on chain are simply going to, your assets are only going to move out of your wallet based on things that you define. And you never have to allow these assets to be custodied by some central platform like a centralized exchange.
00:08:13.244 - 00:09:41.506, Speaker B: So you as a trader get a similar experience, maybe slightly different, because you're not encoding a swap in the mempool, you're not encoding a raw payload to hit a smart contract. Instead, you're maybe just signing a certain struct and you're going to use this off chain signature that you give for your assets and maybe an approval to a smart contract to work out how your trade will actually get settled. And so the interesting thing is these hybrid exchanges, you can think of them as these private market makers like Wintermute, who are facilitating trade on chain, for instance, you can also think about things like maybe something like dy DX might fit in this hybrid world. But basically, in the end, what you have often is you have a centralized maker. You have central parties, like solvers, or like a hedge fund like financial institution, like a wintermute being the one who's actually going to figure out how to facilitate your trade from one asset to another, or be the counterparty for your trade themselves with their own assets. And so you still have centralized making, but you retain this decentralized taking. And the idea was, if you work in this way, you can get around some of the difficult problems of trying to have a very simple, truly automated market maker where the pricing of your swaps is entirely defined on chain.
00:09:41.506 - 00:10:32.212, Speaker B: Instead, now you can have these sophisticated parties giving you very up to date pricing. You sort of get rid of this beautiful dream of a fully decentralized, two sided marketplace. However, the traders still have this very decentralized experience. They can simply swap on chain, they can sign stuff from their wallet, they get their swaps in, and now they're getting way better pricing. And so there's a large growth of these hybrid exchanges. And we at Arrakis who worry about on chain liquidity providers and helping liquidity providers on chain sort of realize their goals, are noticing this trend and are basically wondering about what's going to happen if more and more trading on the swapper side goes through these intent based systems. What will happen to the retail LP's, to the on chain LP's sitting in liquidity pools.
00:10:32.212 - 00:11:42.652, Speaker B: If all of the flow, all of the good flow coming from normal swaps, not toxic flow, which is just an arbitrage to try to equilibriate the markets, actually gets captured by these much more efficient players. These centralized makers who have now come on chain themselves. They're not just making on centralized exchanges, but they're actually making on chain in this sort of intent based world. And so our response to this new change and how we can try to retain allow retail LP's to compete against this new form here is what we're calling the hot amm. And we're basically trying to bring together some of the great properties you have with Amms and also the really nice properties you have with this new sort of hybrid model and bring them together to allow all sort of long tail of people who have assets who want to provide liquidity on chain, who want to help facilitate trading and make the market that they can do this in a way where they can compete for this intent based order flow as well against these centralized market making actors. Cool. So just for a second.
00:11:42.652 - 00:12:39.558, Speaker B: Yeah, maybe I'm going too slow, so I'm going to skip this slide quickly. Let's look at the evolution of automated market making and automated market makers. So we started, as we said, with this really beautiful, exciting dream, but then now we've asked a lot of questions about which is this constant function market maker, this constant product Amm, like Uniswap, where simply liquidity providers provide liquidity to these decentralized exchange smart contract, and they provide this uniform liquidity wherein there's a certain pricing rule as traders trade against the smart contract. This rule is just that, you have to preserve this quantity, k. So however much of asset x x is in the pool, and however much of access y is in the pool, if you multiply these two amounts, they should always equal k. And so this creates a pricing rule. As traders trade against the smart contract, the price automatically updates.
00:12:39.558 - 00:13:17.974, Speaker B: And you as a maker, you don't decide the price. The smart contract decides the price for you. You take some swap fees. It's super cool. However, there were some major inefficiencies on the liquidity providing side that brought us to a new paradigm. The next idea, which was to take, how can we make this amm more efficient? Because one issue that this had was that people were providing liquidity uniformly from the price zero to infinity. Well, many assets only trade in a much smaller band, and so you had a capital efficiency problem where you were leaving capital in places preserved for prices that you're never going to explore.
00:13:17.974 - 00:13:57.962, Speaker B: So then we came with the idea of concentrated liquidity. This is the idea that people can basically, we quantize this x times y equals k rule into a bunch of buckets, and we allow people to provide liquidity into different ranges. You can decide as a liquidity provider what range you want your assets to be traded against. And once you get out of that range, you're entirely in one asset or the other. Many of you said you've already heard of Univ. Three, so I won't waste too much time just explaining the basics of concentrated liquidity. But the interesting idea here was that liquidity providers got more choices, got more expressibility in the Amm.
00:13:57.962 - 00:14:53.772, Speaker B: It became more complex for them to provide liquidity. This is sort of the birth of our Arrakis project, is the idea that now you as a liquidity provider, you're not all the same. You're not all just providing the same uniform liquidity. You select this price range you want to provide liquidity at, and you might want to adjust this price range as your thesis around the asset pair changes. And so Arrakis is basically a trustless protocol to try to, allows third parties to delegate the management of these ranges to us so that we can help optimize which bands you're providing your assets to the market at on your behalf. So it added new complexity, but it added an order of magnitude more efficiency to these markets, which allowed these markets to have better pricing. Again, what's the goal here? We want to compete with binance, with centralized exchanges, which offer really great pricing for traders.
00:14:53.772 - 00:15:41.914, Speaker B: The issue with this uniform liquidity is that you swap a little bit and the price might move really far. And with concentrated liquidity, if liquidity providers are estimating where the price action will actually be, well, and they bunch that liquidity around those prices, then all of a sudden people can trade a lot more volume without creating so much price impact, without moving prices to weird places, which then mean that the AMM is quoting suboptimally in comparison to these other venues. And most importantly, I think we're on the precipice of tremendous various forms of all kinds of new AMM designs. So the example that's being used here, a bunch uniswap, they had uniswap v. Two, which is this first thing. Uniswap v. Three, which is this next example.
00:15:41.914 - 00:16:35.494, Speaker B: And Uniswap v. Four is sort of an unopinionated platform that allows all kinds of AMM designers to implement custom logic into these liquidity pools. And we're going to see all kinds of variety in terms of on chain liquidity pools, where people add liquidity to these pools, how the pricing of this liquidity pool works, how the automated. The idea is that the smart contract automatically figures out the pricing on behalf of these LP's who are simply providing assets to the market. And we're going to see a tremendous amount of new designs, which is really exciting. So why did we change from one to the next? Well, from the constant product amm to the concentrated liquidity amm, we moved because we wanted to increase capital efficiency. We just wanted to say, okay, this constant product amm, something works about it, everybody's using it, but it's extremely capital inefficient.
00:16:35.494 - 00:17:43.904, Speaker B: All the LP's are the same. This is really cool, but we just want to be able to lower the price impact to make these markets be more efficient, especially markets that maybe only trade in a very small band. The next big question that's been asked of these concentrated liquidity amms over the last couple of years is, is this a good deal for liquidity providers? Are liquidity providers actually profitable, since you are providing liquidity at prices that you don't control, but a smart contract controls it, and you have all these sort of taker actors who are there looking to exploit this pool whenever the pricing is wrong. What they want to do is they want to simply trade against your pool, and then offload their trade on another venue to take a risk free profit. And it turns out that this is a very big issue for liquidity providers. And so the idea, I think, with what these new modular Dexs, all this explosion of innovation around new liquidity pool types is going to do, is it's going to allow us to try to solve some of these problems. One of the main ways that this problem has been formulated for LP's is the loss versus rebalancing problem.
00:17:43.904 - 00:18:41.104, Speaker B: It's just the theoretical framework for how we can understand whether LP's are really being profitable in expectation or not, and whether the AMM has competitive pricing in comparison to other venues. And so this is a major problem. The way that we can solve it is by innovating how these automatically determined price market makers actually function, and add more interesting logic to more interesting logic and designs to these amms to make them compete against these much more low latent actors who can simply decide what price they want to give at any given moment, and thus have much more favorable pricing, both for their LP's and for traders. Cool. So, the last really big thing, like we said, is that there's this rise of this intent based flow. So this chart comes from illuminating the order flow from flashbots. It's super interesting.
00:18:41.104 - 00:19:45.350, Speaker B: You check out that article, by the way. But what you have here is on the left, on the edge here, you have these three protocols, which are basically the three biggest protocols for intent based trading. These are this new design for these hybrid exchanges, right? Where basically, you as a trader, simply sign an intent, and you let central parties figure out how they're going to route your intent to trade through some different venues. Whether it's a bunch of liquidity pools, whether it's amms, or whether it might be some of these private market makers who simply give out off chain quotes that settle on chain and try to get you the best price. And so, this is really cool. Traders are getting way better pricing now, but we're seeing this major evolution and the growth of these private market makers who are doing sort of old fashioned, centralized market making, taking a much larger market share of the on chain trading. So this is one of these, this evolution, this change that's occurring right now in on chain trading, that's super important.
00:19:45.350 - 00:20:15.372, Speaker B: So you can see that uniswap v three. And note that this is only the intent based volume. And the thing about the intent based volume is, you know, that this is coming from real traders, not arbitrageurs, who want to just equilibria, who want to change the price of your Uniswap pool just to take a risk free profit. This isn't toxic arbitrage. This is all the good flow. This is the flow that you want from retail traders. And more and more of this good flow is being eaten by actors like Wintermute, SCP, etcetera.
00:20:15.372 - 00:21:28.482, Speaker B: These actors, which are, have their own assets and simply give off chain quotes to say, hey, I'll let you trade at this price. And then these solver actors in the middle can take these user intents and fulfill them through any on chain venue, including some of these private market makers. So these RFQ systems are growing in relevance on chain, and it's hurting the AMM liquidity provider, who is increasingly being left with just toxic order flow and getting less and less of the good order flow, partially because it can't compete on pricing with these other venues. So, finally, and I only have like five minutes here, so I'll do it really fast, what are we building at Arrakis to deal with this problem? Well, our first approach to try to deal with, to try to help retail lp's compete with these RFQ systems with these private market makers in capturing this intent based flow is what we're calling hot ammo. This is the hybrid order type amm. And the idea is to do a couple of things. We want to help protect the aMMLPs from the toxic arbitrage that hits amms.
00:21:28.482 - 00:22:39.058, Speaker B: Because since amms only move with volume, the only way for the price to change is for some trader to come and move the price. And sometimes traders just move the price for you from a very off price to the real world price, and they take a risk free profit for doing so. So we want to protect LP's from all this toxic flow. We also want to still have a design that's truly a decentralized exchange, truly an amm that's fully live. If off chain components of this design were to all just go kaput, you'd still have a functioning amm where anybody can permissionlessly try to swap against it and LP's can add their liquidity, etcetera. And then what we add to the amm, what we've created with hot Amm is sort of an amm that's both an amm or, sorry, a smart contract, a liquidity pool, which is both a classical Amm and also an RFQ system in one. So we also have this off chain quoting service which people can use to simply ask to get a quote or RFQ type system, and then they can execute this quote against the same liquidity pool that is the amm.
00:22:39.058 - 00:23:17.914, Speaker B: But this quote is guaranteed. The price that they're getting is exactly the price that's inside the quote. So it's basically one of these private market maker contracts and a permissionless amm in one. And the idea is we want to make these two systems work together. So we want to make it so that this quoting service, when we can give off chain quotes to certain actors and allow them to execute against our pool reserves, this should somehow benefit the other side, the other door of this amm, which is the permissionless swappers. Right. So we want to make it so that this should help update the pricing of our amm to be more competitive.
00:23:17.914 - 00:23:51.100, Speaker B: And I'll explain how this works in a moment. So the idea is we basically have two swap types. There are two doors to how you might swap against this new hot amm liquidity pool. One door is the classic one. You simply directly encode a swap payload. You put that in the mempool and then based on the price that the AMm is at, you're simply going to move the price with your volume in the same way that a Uniswap V three pool works. So classical amm swaps entirely permissionless to do this.
00:23:51.100 - 00:24:35.892, Speaker B: However, there is another door now which is optimized for this intent based trading flow. So let's say some solver is solving the cowswap auction and they have a bunch of retail flow that they want to figure out how to get the best price for. And they're querying a bunch of rfqs. They can now also query this Arrakis quoting surface, right? They're querying wintermute, they're checking all the pools on chain. They're querying SCP. They can now ask off chain Arrakis, what price will you give me for this particular swap? And this quoting service does not have to respect the current price of the AMm at all. It, within some bounds, can give exactly the price that it wants to give on a solver by solver basis, on an order by order basis.
00:24:35.892 - 00:25:46.126, Speaker B: And if a solver is given one of these signed quotes from the quoting service, then it can do what we're calling a flash swap here, which will just execute their trade at exactly the signed price against the liquidity pool. But it will do two extra things in the signed quotes that this quoting service emits. It inserts a little bit of metadata. What kind of metadata? Well, an update to the pool spot price, as well as an update to how the dynamic fees on this liquidity pool will work. And so what happens is whenever one of these quotes lands from the quoting service on the liquidity pool, it will also magically zap the spot price to the new trusted spot price that comes from the quoting service without volume. So this should be, this is, this is part of the solution of this LVR protection that this design gives. Because basically we can arbitrarily say, hey, instead of letting a toxic arbitrageur move the price from a to b, we will simply let this solver get his swap at a nice price, and at the same time, we'll magically move the price from a to b.
00:25:46.126 - 00:26:53.070, Speaker B: We'll remove all the liquidity, kick the price over from a to b without taking this toxic volume, and then replace the liquidity back in the liquidity position. So what is the dynamic fee? We're going to look at that in a moment, but basically, this is our design, and we understand this to be somewhat of a half measure. There are some permission components here, but the idea is to mash together the best of truly permissionless, decentralized Dexs, concentrated liquidity amm, and this new emerging category of RFQ based on chain trading together into one contract. So not this. Yeah. What about this dynamic fee? Almost done here, by the way, is basically what happens is every time we see one of these quotes, we also get a new trusted price for the amm. But if we don't land one of these off chain quotes from the Arrakis quoting service for some blocks, it means we're less and less certain that the spot price of our Amm isn't stale, that it's not going to be open for arbitrage.
00:26:53.070 - 00:28:00.470, Speaker B: And so the rule for the swap fees on this pool type is that every single block, the swap fees grow and grow until we observe another one of these updates, until another one of these solver quotes lands on chain, which will update the price to a more trusted, up to date price. And this will reduce the swap fees again so that traders coming through that permissionless door should get better execution with lower fees at more up to date real world pricing for this asset pair. However, if we don't observe more of these quotes landing on chain for some blocks, the fees just linearly increase again. And the dynamic fee update is just about how quick is this linear increase. This is one thing that these solver swaps can also inject in that metadata. And so this is our new liquidity pool design. It's again, as I said, sort of the first thing that we felt could be done to help LP's compete in this new landscape and try to allow Dexs in this new world that is emerging to actually rival centralized exchanges.
00:28:00.470 - 00:28:56.500, Speaker B: What I just want to finally say is that I think the future for on chain trading is very bright but still undecided. So I think there are going to be many this is our first design that we felt was possible right now, how to make some impact right now, but I think there are going to be many liquidity pool designs serving very specific goals for specific LP's and token pairs, specific use cases. We're about to see an explosion of innovation, people working on things like dynamic fees, integration of off chain price information, which in some sense, we're doing some of these too. With the hot amm. We're also, as well as this RFQ. This is, all of these things are sort of similar to what we're doing at the hot amm, but there's also all kinds of other designs. One that's very interesting that we're seeing a lot about is auctions and in protocol auctions to figure out arbitrage rights for arbitraging the pool at the top of the block or allowing the liquidity pool to be only hit with a batch auction.
00:28:56.500 - 00:29:28.170, Speaker B: You see this with the cow amm with Sorella. So there's just this incredible new design space opening up for liquidity pool designers that I think is very exciting and will make a lot of changes for on chain trading and hopefully allow us to usurp binance. So thank you guys very much. This is Arrakis. We do provision less on chain market making. We have these smart contracts which allow you to integrate with Dexs in a very convenient way as well as run all kinds of algorithmic strategies on top of this. So thanks so much.
00:29:28.170 - 00:29:32.814, Speaker B: I'm Cassandra on Twitter and you can follow arrakis as well. Thank you guys.
00:29:38.394 - 00:29:44.034, Speaker A: Unfortunately, we don't have enough time for questions, so if you can make yourself available for sure. Yeah, thanks.
