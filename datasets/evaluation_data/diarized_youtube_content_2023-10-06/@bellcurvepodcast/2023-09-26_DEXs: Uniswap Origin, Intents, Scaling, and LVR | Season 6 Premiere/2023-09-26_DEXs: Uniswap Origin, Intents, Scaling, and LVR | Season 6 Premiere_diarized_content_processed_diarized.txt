00:00:00.090 - 00:00:29.586, Speaker A: Alright, everyone, welcome back to another episode of Bell Curve. Before we jump in, quick disclaimer. The views expressed by my co host today are their personal views and they do not represent the views of any organization with which the co hosts are associated with. Nothing in the episode is construed or relied upon as financial, technical, tax, legal, or other advice. You know the deal. Now let's jump into the episode. All right, everyone, welcome back to another episode of Bell Curve.
00:00:29.586 - 00:00:40.882, Speaker A: This is a special episode because it is the kickoff episode of season six and I'm very excited to be joined by my co host for this season, Gwart I mean Dan. Dan Robinson of Paradigm.
00:00:40.946 - 00:00:41.866, Speaker B: Yeah, thanks for having me.
00:00:41.888 - 00:00:42.394, Speaker A: Welcome in.
00:00:42.432 - 00:00:44.170, Speaker B: Almost revealed my secret identity.
00:00:44.670 - 00:01:08.770, Speaker A: Almost. Almost. I think we salvaged it. I think we salvaged it. So this will be a really fun season. I'm excited to have you joining me because we are going to be going deep on the past, present and future of DEXes. And for those of you who have tuned into the show before, just to give you a little bit of a preview of what you can expect for this episode, dan and I are going to go in and kind of give you an overview of some of the themes and the agenda that we're going to be exploring this season.
00:01:08.770 - 00:01:47.962, Speaker A: So we're going to be talking about that this episode. Throughout the course of the season, we're going to be doing seven interviews with various leaders from the deck space and then we're going to do a wrap up episode to just kind of give you our thoughts. So to kick things off before we even get into the themes, dan, I want to just leave this one open to you because you've been involved, very involved with Uniswap since the early days of the Protocol and have kind of seen it through many different iterations. So can you kind of walk us through either chronologically or by different design decisions or however you think about it? Kind of Uniswap day one, where it found product market fit and just how it's evolved over the years and its successive iterations.
00:01:48.106 - 00:02:49.394, Speaker B: Yeah. And first I want to say thanks so much for having me on the show. I'm really excited, looking forward to this season. But yeah, I think that's a great place to start because I was one of a good number of people who was lucky enough to be sniped by Hayden early on in the pre Uniswap v one days with starting to think about Uniswap. So I met him in the spring of 2018 when he'd been working on Uniswap for a little while and almost on the first day, the first I'd ever heard about AMMS and particularly constant product market maker. And I was immediately kind of sniped by the implications and thinking about it particularly, I remember just not believing on the first day like, oh, if the price goes up and then you sell at a loss and then the price goes back down and you sell at a loss and in fact, you've lost no money. It took a while with a spreadsheet after that first day for me even, just to become comfortable with that.
00:02:49.394 - 00:03:42.500, Speaker B: And of course, that turns out to be, as we'll talk about, a fairly profound question in AMM design. But it was one of the first things that got me captured by it. But also, I think, as were many people early on with Hayden himself and with the idea for Uniswap, not just as a dex, but as a paradigmatic example of what an on chain application could be. And so some of the things that really fascinated me about it early on was from the beginning, I think, had this vision of it as a completely non upgradable, non custodial, decentralized public good that anybody on Ethereum could access. And I think holding to that principle since then has just been really important as a North Star for Uniswap. And it's one of the reasons why so many people, including me, got really excited about it, is I think this really is after a few years of seeing a lot of different kinds of things tried on Ethereum, this is the kind of thing that's really uniquely enabled by technology like this.
00:03:43.190 - 00:04:36.722, Speaker A: Yeah. So my memory of Uniswap in the beginning where it originally found product market fit and where it really started to garner some excitement outside of just sort of nerd sniping was you actually had very good execution for sort of a long tail of crypto assets, so you would still get better execution on a centralized exchange like Binance or Coinbase. But this was around the period of time where tokens were starting to go live again. ICOs weren't exactly a dirty word, and I actually remember talking to I don't want out, he's also a paradigm guy about, hey, there's actually this thing called Uniswap and what you can get on execution here is better than some of the centralized exchanges. And what also strikes me about the early design of Uniswap is that it's really simple. It was just very simple. Now, there are some drawbacks to the simplicity, but it feels like that was intentional from the early.
00:04:36.722 - 00:04:41.970, Speaker A: Am I right about where it sort of found product market fit in the early days? And was simplicity a part of the design choice?
00:04:42.050 - 00:05:43.994, Speaker B: Yeah. So in addition to that security principle and the decentralization that was talking about as a core design choice, I do think simplicity was an essential part of what made early Uniswap work and part of Hayden's approach to designing it. And yeah, I think not just simple in the protocol, which again, yeah, incredibly short 150 line smart contract in Uniswap v one, but also simplicity in the interface. And I think it sort of permeated the whole idea of, okay, this should actually be pretty easy to go on and do this. And I think if you tried using some of the more sophisticated, decentralized exchange interfaces at the time, they were designed to look like centralized exchange, more pro interfaces. And I think if the early Uniswap interface tended to look more like, well, it looked like coinbase consumer in some ways, the experience was going on and be able to buy just put in a number and you see another number. But that interface, of course, that paradigm has come to kind of dominate decentralized exchange interfaces and all kinds of interfaces in DFI, especially because it's so simple and yeah, I agree, unisoft V One incredibly simple.
00:05:43.994 - 00:06:00.800, Speaker B: Unisoft V Two, in some ways even simpler and in some ways stupid, started building on the complexity. And then I think with V Three and V Four, you start saying, okay, how fast can we actually hit the gas pedal in terms of how much complexity we can handle here?
00:06:01.170 - 00:06:25.762, Speaker A: Yeah, can you walk us through? Almost take us through. So V one has launched. It's a success here. And we say, okay. Great. We want to stay to this core of these design decisions of being non, upgradable smart contracts, and we wanted to still be noncustodial. What were some of the big design choices that you made for V Two that was different from V One? Even if you go from kind of V Two to V Three, because I think concentrated liquidity is something that will stick in people's minds, is this was a really different design choice.
00:06:25.826 - 00:07:21.762, Speaker B: Yeah. So I was tangentially involved in helping Hayden with Uniswap V One and really mostly in helping him with one gas optimization decision in the code. But I really got involved in Uniswap research, I'd say after Paradigm invested after I joined in November, and then Paradigm invested in I joined in January 2019, and then we invested in Uniswap about a month after that. And I started getting really deep into helping you hate him with future versions. And I think the key things there we were looking at, okay, what are the things that are missing from this? What's the most urgent things to deal with? And for some reason, I think we landed on one was, ERC, 20 pairs. So the ability to trade, for example, stablecoins against stablecoins or trade assets against stablecoins. And that led to the big change in Unisoft V Two allowing arbitrary, ERC, 20 pairs.
00:07:21.762 - 00:08:04.600, Speaker B: And then another was people were starting to use Uniswap as an oracle, the price on Uniswap as an oracle. But it was really an insecure way to do that. And it seemed unfortunate that there wasn't like, a nice, decentralized oracle the way that Uniswap had provided a decentralized exchange. And so that was the other feature. And I think that's probably the feature I was most involved with in helping on V two and ended up writing the white paper for that with Hayden and Noah. The funny thing is, and Hayden disagrees with me on this, but I sort of think that v two, as an upgrade in terms of the features it added, were actually basically failures. I think V Two actually didn't, the core goals of those features didn't actually end up working.
00:08:04.600 - 00:08:51.960, Speaker B: V Two wasn't the right solution to them. And until we got to V Three you weren't really able to do the things that I would have expected v Two would have enabled. And so I tweeted about this recently. Again, Hayden disagrees. But if you take ERC, 20 EC 20 pairs, right, like a big part of that is the ability to trade stablecoins against each other. And the interesting thing is it actually does not make sense to trade stablecoins with a constant product curve because of capital efficiency, because you're providing liquidity at prices going from like zero to infinity, when in fact, with stable coins, stable pairs, you really want to concentrate liquidity closely around the price of one. But I think maybe when we at least originally working on V Two we're thinking, okay, this would still maybe be useful for these.
00:08:51.960 - 00:09:20.874, Speaker B: But when we started working on V Three that was what actually motivated skipping ahead a little bit. But starting working on V Three thinking, oh actually this is before Utah, V Two launched was like, oh actually maybe this is not going to work. And then indeed, with V Two, stable, stable pairs just never really made sense on it. The other thing that happened in the meantime was curve launched. And that showed that actually a concentrated liquidity pool for stablecoins makes a lot more sense. The other reason is the Oracle. And I think decentralized price oracle is a really cool concept.
00:09:20.874 - 00:09:52.010, Speaker B: But in practice, in order to use it in V two, you actually had to call this if you wanted to get the time weighted average price over a period, the TWAP price, you had to call it at the beginning of a period, end again at the end. And so as it was designed in V Two it was kind of hard to use. And so within the first year after it launched, between when V Two launched and when V Three launched, I think very rarely did people even use this Oracle. So we added this whole feature and it didn't get very much usage until at least V Three launched.
00:09:53.150 - 00:10:15.694, Speaker A: That's super interesting tidbit of history. So you have big ideas for V Two, ERC, 20 pairs and this decentralized, ORC by the way, Oracle is also now I feel like are a hot topic in DFI as well. Some of these products maybe weren't quite as successful. Maybe Hayden would say something different, but in your mind it wasn't super successful at the same time.
00:10:15.892 - 00:10:39.100, Speaker B: To make Hayden's case, to be clear, I think he's right about this. The big change in V Two was a big architectural change to how the contracts are structured. It made it a lot easier to actually interact with. And so there were these necessarily rewriting it in solidity from Viper, fixing a few minor bugs in it. I think there was a lot that made it much easier to build on top of. And those things, rather than the sort of top of line feature changes were really, I think, helped kick off V Two's success.
00:10:39.870 - 00:11:24.642, Speaker A: Okay, that's critically important. Not as sexy as decentralized Oracle is, but extremely important, obviously, to the user experience. So you looked at some of these features, okay, maybe some of these worked, maybe some didn't, quite so well, but at the same time you saw curve and then maybe somewhere there, maybe in your mind or the uniswap team's mind started to say, okay, maybe something like concentrated liquidity makes sense. And now it's sort of been in vogue to question whether or not Lping really makes sense and how profitable is it. We've got measures like impermanent loss and LVR, which we're going to get into. Was that in people's minds at the time? Were people questioning that the idea that this didn't really make sense from a maker perspective, or how much was that in the design decision?
00:11:24.706 - 00:12:12.194, Speaker B: Yeah. So impermanent loss was always from the very beginning and literally from the first day I was looking uniswap, we started we were wrestling with this problem, and it came to the conclusion fairly early on, which I mostly still believe, that impermanent loss isn't a problem that's kind of inherent to market making. And you can chip away at some of the edges of it. But the core idea that in order to market make, you have to actually take some price risk on the price moving against you when you're trading these things, that is actually core to the idea of market making. That was something that was a conclusion we came to fairly early on and led us with V Two and V Three. I know a lot of people were like, oh, are you going to solve impermanent loss at our approach? I think no, I don't think that it is solvable. I think there are things that are very close to impermanent loss that it mitigates.
00:12:12.194 - 00:13:01.942, Speaker B: And so one of those things with concentrated liquidity, which you can talk about, is that you don't have to hold as much inventory in the token as you would if you're providing liquidity on V Two. Right, you don't have to hold as much of the token to provide the same amount of liquidity at a nearby price. And so that reduces your price risk in some sense. But I think we didn't really think of impermanent loss as something that we really solve. So really when we were driven by the upgrades, and I think V Three was a much clearer case where we identified, okay, capital efficiency is this serious problem. And I traced that back to a conversation I had in September 2019 with Martin Coupleman from Gnosis, where he was pointing out that actually if 25% of the assets in a uniswap v two pool or uniswap v one pool, I think it was at the time, are not touched unless the price moves by more than a factor of four in either direction. And so most of the time, unless the price is moving like crazy, you just don't need these assets in there.
00:13:01.942 - 00:13:59.842, Speaker B: And so that kind of woke us up, and then later, when Curve launched, woke us up to this fact of, okay, you actually have a huge potential improvement if you can solve this capital efficiency problem. But we wanted to solve it in this way where it was neutral to the strategy that was actually being done. And so that gets us to this thinking about, okay, are LPs making money or are they losing money? And in my view, it's an important question, and it's one that I'm very curious about, and I don't think I'm the world expert on it, but it's an important question. What is currently happening with LPs? But that's primarily, in some sense, it's up to the LPs whether that happens. And the system is designed in order to reach some equilibrium. And it's possible right now that liquidity is over provided, that there's too much liquidity provided, so that actually there's not enough retail trading fees split up across all of them to make them make money. I think on some pools, from what I've seen, the empirical evidence seems to say that in those cases, liquidity is over provided.
00:13:59.842 - 00:14:26.674, Speaker B: It's a paradox to me that it is still provided because these seem like sophisticated parties, but that seems to be the case. But in my view, what matters is you're designing the system in order to try to preserve as much value for people in it as possible and in order to be as convenient as possible for them. And if people aren't making money, they can provide less liquidity, or liquidity can go up or down based on that. So the goal is to try to design this game and then allow people to play it. Yeah.
00:14:26.792 - 00:15:22.420, Speaker A: So that kind of takes us to v three, where this concept of concentrated liquidity is introduced. And I'm assuming folks will have a basic knowledge of v three, but instead of providing liquidity across an infinite spectrum of prices, it's just you're able to specify the range that you want to LP at. And one of the questions that I have for you, Dan, is as much as you can reveal in the war room, so to speak, at the know at that time, I think there was a lot of the excitement around AMMS that I remember is everyone can be a market maker. Do you remember that? It's kind of a narrative like anyone can market make, and the assumption that this was just going to be retail people just passively LP and making a good profit. Did you think obviously concentrated liquidity and we can get into why it adds a little bit more onus of complexity onto the supply side. So were you already sort of thinking through like, who ultimately is going to be on the maker side of the uniswap protocol and were you thinking about that?
00:15:23.910 - 00:16:17.240, Speaker B: I'll definitely say early on, for at least the first year, that I was thinking closely so on like the year 2019, I was thinking closely about uniswap. I did kind of buy the idea that passive liquidity really changes the game. And so I had this thought that, oh, people are providing and not original to me, but people are providing passive liquidity. There's just so much more that can be provided if it's passive and not just professional market makers. So in fact, what if providing ETH USDC pools is kind of like buying the S and P 500 and people will just do it with some of their money and then they'll actually just be earning fees volatility harvesting these assets and that that could actually really outcompete the professionals. And I still think in the long run that that's possible in some ways. I still think in the long run as possible.
00:16:17.240 - 00:17:17.110, Speaker B: And I think in some sense it was maybe true in 2019. And that's one of the reasons why these am started to take over in 2019 and 2020 is that actually it was a lot more effective to have if you had so much you unlocked so much extra capital from these things that you could and it was certainly true in the long tail of tokens. And you mentioned before. Yes, I think uniswap really unlocked the ability to not have to hire professional market makers too, in order to have if you create a token boom, suddenly there's already a market for it and you can provide a market making for it. I think it's incredibly important for the long tail of tokens, but I think in the short tail with those, like with USDC, I think I underestimated the importance of the microstructure of arbitrage flows and toxic versus non toxic flows, which is something that I think a lot of people at the time were talking about. I thought it just wasn't important yet, and I think probably it wasn't. And in fact, the people who were most focused on those things at the time did not end up building winning AMM and the people who were less focused on it did.
00:17:17.110 - 00:17:39.520, Speaker B: So maybe it was too early to worry about it, but I think they were right. And I think it is actually really important. And this when we get into loss versus rebalancing, once you really zoom in on exactly what the issue is, the fact that passive liquidity could just be arbed could end up only receiving toxic flow and only being arbed is a threat to it in the long run.
00:17:40.210 - 00:17:53.054, Speaker A: Yeah, and I want to just bookmark that answer because this idea of meeting the market. Where it's at in terms of product design is something that I think Uniswap has just done, at least from an outsider's seat, just phenomenally.
00:17:53.102 - 00:18:09.480, Speaker B: Well, it helps to not be that smart. It helps to not actually know that much about market structure as it going. And you're learning it. I've learned it alongside Hayden and sort of from a very D five frizzle first point of view, as opposed to coming in with a lot of preconceptions about what was going to be important.
00:18:10.010 - 00:18:43.666, Speaker A: Well, that's very humble take, but there were plenty of folks, right, who I remember this around 2019 or 2020, as people would point to AMMS and the Uniswaps of the world and say, this is way too simple, it's never going to work. Ultimately, this is what professional traders want. They make up X percent of the volume in TradFi markets. Here are all the features that they're going to need. And they rolled these things out that were just way too ahead of their time. And whether or not that was intentional, it clearly worked out. And maybe that can transition us a little bit to V Four.
00:18:43.666 - 00:19:19.790, Speaker A: So v four is the latest iteration of uniswap, which feels a little bit more. Again, I'll speak from my perspective as an outsider and you can tell me if I'm right or wrong, but it sort of marks a shift for me towards a little bit more of a platform model and a design decision that says, hey, maybe as Uniswap we don't actually know what the best design decks is like. We kind of made these very specific decisions in V Two. We made a very specific move towards concentrated liquidity in V three, but now the market is at a mature enough point where we want to create more flexibility for participants. So am I right or wrong there? Walk us through sort of the design principles of V Four.
00:19:19.860 - 00:20:06.510, Speaker B: I'd say actually, I think Uniswap has been a platform, has had this platform philosophy since the beginning in different ways. And I think V Four is absolutely an extension of that. But I think when you think about Uniswap V One and V Two, for one thing, it's agnostic and permissionless as far as what assets and what pairs it supports, right? It says any pair of assets that you want to support, you can just spin up your own UNICEF decks, right? There aren't sort of rules, they don't make decisions on what kind of assets can be added and what can't. I think that's very important as a platform because it means, yeah, again, you're saying, I'm not going to be opinionated about where volume or where growth is going to come from. It's just going to be whatever users actually want to do. And I think that was important. And we're going to try to pick as unoppinionated a strategy as possible.
00:20:06.510 - 00:20:55.838, Speaker B: And in some formalistic senses, I think the constant product market maker is as unappinionated a rule as possible for making markets, like, if you know nothing about the underlying assets. And there are some reasons to believe that that's the case. And in general, I think we found that it worked for a lot of assets that were traded at time, stable, stable pairs being like the big exception where it really failed. But in general, I think it actually acquits itself pretty well as a market making strategy. And it's one that predates AMMS as far as the idea of market makers just running a rebalancing portfolio as a strategy is kind of a classic idea. So, yes, again, I think it was trying to be as neutral and as platform like as possible. And when liquidity providers are coming in, here you go, we're just going to merge all of your liquidity together, right? We're not going to run some complicated, complex strategy with it.
00:20:55.838 - 00:21:28.614, Speaker B: Again, it's basically you choose what to provide to if you want to provide on one pair and not another. A lot of AMMs, I think, fell off a cliff because they tried to allow somebody to provide liquidity on a bunch of different assets or like they had governance making these decisions. It's like, no, we're just going to be a platform for that. All right, so then getting to V Two I'm sorry, to V Three, I think V Two becomes even more of a platform because it's okay, we allow you to try it at any pairs you want. But we are forcing you into this one strategy. And well, it's kind of a very agnostic strategy. It's not one that probably any particular person usually wants to do.
00:21:28.614 - 00:22:26.006, Speaker B: It's not what they would choose to do ideally. So we'll say, okay, let's allow you to provide different concentrations or different price ranges. And one thing about that is when you look at what AMM design and AMM innovation looked like at the time, a lot of it was based around different shapes for liquidity curves, right? Like, we're going to do this curve, the constant power sum or the constant whatever's the thing. And it's like, okay, well, what is the Er design for all of these? And it's like, okay, it's one, we'll allow you to provide literally whatever liquidity concentration you want at any L prices you can construct from that. And I have a blog post about how to do this construct from any arbitrary reserves curve that you want the right, uniswap V Three pattern to provide liquidity in. And so it becomes a platform for Dex innovation itself. And then I think V Four takes it one more step, which is, okay, where's the innovation coming now? I think it's largely coming from these features that involve doing something before every trade or doing something changing the fees in response to every trade.
00:22:26.006 - 00:23:00.626, Speaker B: And I think some examples are we can talk about some of those, but like trying to do various kinds of auctions to capture mev or trying to change the fees in response to volatility or in response to other kinds of signals. And all these things require a little more innovation, a little more flexibility than Unisoft V Three provided as a platform. And that's what V Four is there for. One interesting thing is it also enables the kind of features we were adding manually in V Two, which is like oracles, right? Like you can actually add and add arbitrary price oracles in V Four to whatever pools you want. Since that wasn't possible. V Two, we said, okay, we're just going to add one to every pool. But now we actually took that out because you don't need it built into the thing anymore.
00:23:00.626 - 00:23:02.680, Speaker B: So it's more agnostic than V Two was.
00:23:03.850 - 00:24:24.462, Speaker A: So to maybe sum up the history part of this and start to move on, we've actually introduced a lot of the themes that we're going to cover this season, but sort of the through lines in terms of Uniswap's history up till this point is that that's really interesting. I hadn't necessarily thought of it like that, but there was always an element of platform to the model, right? And it was always very unopinionated about what the market for swappers and LPs were going to look like even starting at V One. So Uniswap V Four is sort of a natural the most recent iteration on that, you've also got this idea contracts being non, upgradable, noncustodial, those are things that have stuck with Uniswap throughout the years. And then the last thing maybe to end it on before we get into our themes is I feel like I've seen this a couple times in Crypto. Actually a lot in crypto, which is I don't have a more eloquent way of saying you need to meet the market where it's at and not just try to design for the customer that you think might be here in five years. Because then what you end up doing is you end up sitting on your hands for a couple of years waiting and then you get no traction as opposed to starting with something that's a little bit more simple, having the market come to you and then being able to iterate based on some early success. Again, from the outside, it just feels like uniswap has done that super.
00:24:24.516 - 00:24:49.478, Speaker B: Absolutely. And I think it's important to still be kind of pushing the envelope in terms of making things better and always be doing things like concentrated liquidity was this. And I think V four is like this. Unisop X is like this, where some people at the time are like, oh no, we liked it how it was. I think if you're not doing getting a little of that, then you're not pushing forward fast enough. But yeah, very often I think people aren't actually looking at what the needs, being driven by the immediate needs in the market. And I think that's one.
00:24:49.478 - 00:24:51.080, Speaker B: Of the biggest mistakes you can make.
00:24:51.530 - 00:25:21.742, Speaker A: I agree. All right, let's move a little bit into the themes of our season, many of which you introduced, actually, in the first part of this. But the first one we'll talk about, we'll call it value capture in the Dex ecosystem. And really what we mean by this is when we're talking about scaling a Dex, we need to balance the needs of two different stakeholders, which is swappers and LPs. So I know you have thoughts on this, but can you just kind of walk through that idea of sustainably or equitably scaling index between these two parties?
00:25:21.886 - 00:26:09.230, Speaker B: Yeah, so I think if you go back to the early days of uniswap, there were basically two charts that I would just look at all the time on uniswap info, and it was the TVL, just the total amount of value locked in top pairs and across the system, and that's the amount of liquidity that's being provided. And then there's the daily volume. And I think if you asked at the time which one drives the other, I think you'd say there's chicken and egg. Right? They both drive each other. You're not going to get any volume if you don't have significant liquidity. And if you don't have real volume, and I think more than arbitrage, you need to have some actual retail volume on it, then the people aren't liquidity is not going to come. And so I think it's essential during this old bootstrapping phase of a decentralized exchange or any application to be serving both of those constituencies.
00:26:09.230 - 00:26:57.860, Speaker B: If I had to pick what is a Dex for and gotten in trouble for this before, but I think it's true. If I had to pick what is a Dex? I think a Dex is for the swappers. I think the point of a decentralized exchange is to be able to trade noncustodially and to get the best prices. And to some extent, the LPs are there because it is valuable for them to be there for the swappers. I basically don't buy the philosophy that the whole point of this is people should be able to provide retail liquidity, because if there's no swapping going on, then it's not going to make sense for them. What are we even doing here? Right? So I think it's a decent sized exchange and LPs are there for that. But that said, you have to absolutely keep a balance where liquidity providers you can't screw over liquidity providers in order to favor swappers or they're going to leave and you're not going to have a Dex either.
00:26:58.470 - 00:27:45.070, Speaker A: Yeah, I think it's such a good point because people often bring up the Bill Gurley quote of trying to scale two sided marketplaces, and I'm slightly paraphrasing here, but if I have to choose between the supply and demand side, I'll pick the demand, but you still got to do both at the same time. You need the LPs to be there, otherwise there's no one to trade against. So let's talk a little bit, to use the phrase value capture. Right now there's a tremendous amount of value that is leaking out of this ecosystem and it kind of happens in the form of mev in many ways, and there are different types of mev. But you've done a really good job of highlighting some of the value that's flowing out of the Dex ecosystem and sort of mapping that onto some of the most interesting branches of Dex research. Can you walk us through how you see that?
00:27:45.140 - 00:28:16.902, Speaker B: Yeah, so this gets in my perspective, that actually we talk about this LP versus swapper, tension and dynamic. But really what matters is actually growing the size of the pie for both parties. And ultimately it's certainly not a zero sum game between LPs and swappers. And again, if decks are successful, both are going to be very well served. And if you end up killing your decks, then they both end up screwed. What matters actually is where's the value leaking that isn't going to LPs and swappers. I think there's three big ones that I can think of, at least in current DEXes on Ethereum.
00:28:16.902 - 00:29:12.038, Speaker B: One of them is loss versus rebalancing, which is this common research theme recently. And you can think about that as the latency arbitrage that's sufficed by liquidity providers. And what that means is when you're providing liquidity on a Dex and the price changes on a centralized exchange, it changes somewhere else, and somebody arbitrages the Dex to have it match the centralized exchange price. Liquidity providers lose money compared to what they would have happened if they had just executed at the new price, or if they didn't trade at all, because they end up executing this trade with the arbitrageure that the average cost of that trade is worse than the current price that they could be getting for the asset. And so they've lost a little money within this block compared to the cost of Rebalancing. So it's loss versus rebalancing. Imagine if they'd actually traded at the true price, if they were able to rebalance on Binance or this external centralized exchange.
00:29:12.038 - 00:30:04.702, Speaker B: And I know we'll talk a lot about loss rebalancing, but that's one way in which loss leaks out of the system. And I think this is very interesting because back when Hayden and I were thinking about this as impermanent loss, I think in some real sense, impermanent loss is unavoidable. But I think loss versus Rebalancing is not exactly as unavoidable as impermanent losses, because you have to rebalance to be a market maker, but you don't necessarily have to rebalance at a worse price, or at least like a worse price, any worse than Epsilon compared to the current price. In theory, if you were a professional market maker, you'd be rebalancing on binance or something, right? You'd be rebalancing maybe at a better price, and so you'll lose some money, but that's something you can really make a dent in. Whereas again, I think impermanent loss and everyone who's tried to sort of solve impermanent loss I think has catastrophically usually failed, sometimes horrifically so. But I think loss of rebalancing is much more tractable problem. I think we'll talk in the episode about how those two concepts differ.
00:30:04.702 - 00:30:46.826, Speaker B: Another way the value leaks out is for traders just their price slippage, their trade executing at worse than the price than they might have been able to get somewhere else. And I think that most egregiously happens when a trade is sandwiched and a sandwich attack is when somebody trades ahead of you. They see your trade coming on an AMM, they trade ahead of you to cause you to get a worse price. So they front run you first and then they back run you. They trade against the other direction on the AMM in order to lock in a profit for themselves. And I think that's a way to get a risk free profit sometimes. And that's one that again, I think people were talking about since the early days of uniswap but sort of got professionalized over the course of the years.
00:30:46.826 - 00:31:26.760, Speaker B: And I think it's a big problem and one that's important to address. But slippage can happen for other reasons. It may just be your trade doesn't get optimally routed. Sandwiching is just sort of maybe the most egregious example and then the final one is the gas, the transaction fees that the transaction is paying to the platform. And on Ethereum, that's generally in the form of the base fee or the EIP 1559 burn. And so that's a significant cost that uniswap users are paying in order to be able to use the Ethereum platform. And that's another area where I think improvements in that have typically come from trying to gas optimize the implementation and make it as efficient as possible.
00:31:27.450 - 00:31:48.202, Speaker A: Yeah, so to just bookend the first part of this theme, which is value capture. If I'm reading you right, we shouldn't be thinking about this sort of tension in between swappers and LPs because really there's so much leakage that's going out of the system that there's just a lot of wood to chop in order to just secure that all up within the Dex ecosystem.
00:31:48.266 - 00:32:28.278, Speaker B: Yeah, and on all of these, I would say debatably AP 50 and 59, all of these sort of fall into the category of mev minor extractable value or I guess they just call it mev. Now it doesn't really stand for anything like the Sat mev, but I think essentially this is going to the proposers of the blocks as value that's just being extracted out of the system that could be going potentially to swappers or LPs. The one other thing I think is so some value is leaking out, but some value just never comes in right. Because swap fees are so high, because the ETH cost of transaction is so high. A lot of trades just probably don't happen. Like, you might get a lot more volume. And you see on L two S, we start to see like, volume actually goes up a lot once you decrease the fixed costs of trading.
00:32:28.278 - 00:32:53.220, Speaker B: And similarly with liquidity provision, you might get a lot more liquidity provided if you didn't have loss reserve rebalancing. Or you might get a lot more volume if it couldn't be sandwiched or if it wouldn't have slippage. And this is not value that's going to swappers LPs. It's not even value that's going to mev. It's just stuff that isn't actually happening. It's deadweight loss. And I think reducing that deadweight loss by decreasing some of these costs, I think could just benefit everyone in the system, including Ethereum, including the Platform itself.
00:32:53.670 - 00:33:21.466, Speaker A: Yeah. So we've got our three branches of Dex research that we're going to be talking about a lot. LVR, which is a specific measure of some of the value leakage away from LPs towards Arbitrage or people that are trading at a better price. Then there's what we can maybe just call best execution. So the slippage that traders suffer by swapping on a Dex and then there's just the burn. We call it maybe the Platform Tax that Ethereum extracts from apps that are built on its ecosystem. You were starting to just get at that.
00:33:21.466 - 00:33:48.502, Speaker A: So maybe let's tackle those in reverse order here. So the Platform Tax that Ethereum extracts so you were saying that basically there's this concept of dead weight loss, which is that if the transaction costs are high enough, you're just going to get people that don't trade on uniswap or anywhere else on Ethereum and it's going to go to Binance or something like that. So by having that much cost, it's not like, hey, Ethereum's taking too much. That's just so high that that's just trade volume that we're just not going to see otherwise. Right, so that's a big issue.
00:33:48.556 - 00:34:36.482, Speaker B: Yeah. You have this concept from Economics of the Laffer Curve, which is about how government revenue responds to the rate of taxation. And if you imagine, for example, like a 100% income tax, government revenue would actually probably be $0 because nobody would work because there's no incentive to. Or you might imagine maybe like 110%, absolutely nobody would work, even if they gave more than all their money to the government. And then 0% because the government would make no money. So somewhere in between there and you can sort of imagine this curve in between somewhere in between there's some optimal rate of taxation for government revenue. And I think there's something similar for the Platform Tax that's imposed by Ethereum, where if the burn is too high, if the cost of just transacting on Ethereum is too high, then no one will go there, no one will actually use it.
00:34:36.482 - 00:35:06.042, Speaker B: And if it's too low, then Ethereum doesn't capture any value from transactions that happen on it. And so at either of those extremes at $0. And somewhere in between, you imagine we have the maximum. And my guess, and I don't have proof of this or evidence of this, and I'm starting to think maybe I should look into it my guess is that we're higher on the Laffra curve. We're at a point where actually, if you were to lower the base fee, lower that, then actually you would get ultimately more value accruing to Ethereum.
00:35:06.106 - 00:35:46.742, Speaker A: The amount of transactions that happen across different smart contract platforms based on what you know about the fees on that platform, it has not played out how you would thought, right, if I just told you there are platforms out there where you could get charged 0.1 cents or something, or like $20? Just guess where more transactions are happening. It wouldn't have necessarily happened like that. Without getting into specific, I think there's a lot of path dependency when it comes to these ecosystems as well. But I think your point is absolutely very well taken, that I think lower gas cost, there's probably some equilibrium, right, where we can maximize the amount of value that participants in the ecosystem get and that the ecosystem itself can actually extract.
00:35:46.886 - 00:36:23.270, Speaker B: And where it's still Ethereum, where there's a lot of network effects and path dependency, obviously, where people want to trade in Ethereum even if it costs a lot more. And the key here is it might be possible to actually lower those rates and still and lower those rates, increase the actual usage. I think we don't see that exactly on Ethereum now because the max block size actually doesn't increase necessarily. So again, it's hard to see that. But if you were able to basically scale things more and get more usage, I think you might actually see more revenue and therefore a more secure L One as well. So it's kind of a free lunch.
00:36:23.610 - 00:37:03.454, Speaker A: Yeah. Now, the last question I want to ask you about gas is I think kind of interesting is if you're designing especially any app on Ethereum l one, you're designing in a very gas constrained environment. And it limits, for example, the types of strategies that LPs can do. And therefore, it sort of fundamentally limits what you can do in terms of your platform. So can you just kind of like as someone who's probably thought through sort of gas efficiency when you're designing these protocols, I mean, what are kind of the design constraints, right? And we're going to talk to some people from the Solana ecosystem that are building DEXes that don't have these constraints. So be curious to get a compare contrast. But what kind of lessons do you have in terms of building in a gas constraint environment?
00:37:03.502 - 00:38:02.790, Speaker B: Yeah, so a big one. And this was a lesson that was learned fairly early on, but it's that the naive way you might want to build this, which would be an on chain central limit order book just doesn't work. And the primary reason it doesn't work is that the cost of placing and canceling and claiming orders is too expensive. It just costs way too much to and the thing is, on a traditional centralized exchange with professional market makers and everything, I think the average number of times trades are canceled, orders are canceled, is far greater. It's like ten, maybe to 100 times as great as they are executed against. So if you have an on chain order book where you'll have to do a transaction to place an order and then do a transaction to cancel an order, you just can't professionally profitably market make. Even if I think gas costs were a lot lower, even if they're like ten times lower, I think they'd have to be like 100 or more times lower for this to be really worthwhile.
00:38:02.790 - 00:39:02.200, Speaker B: So that model doesn't work. And the two models that have tended to work are AMMS and off chain order books and AMMS with like Bancorp and then uniswap as the early ones. The key innovation here is you don't have to place a new order every time your order gets crossed because it gets automatically flipped for you. Basically, if someone trades against an AMM, instead of everyone has to come back in and place a new order, instead it's automatically placed the AMM automatically makes market back going in the other direction and so that reduces that gas cost. And the other thing is an off chain central limit order book like zero X or in some ways like unisoft Access, although it isn't really an order book where orders are off chain and they only get put on chain when they get executed. And that also depending on how you do it, can really reduces the cost of canceling orders and placing them.
00:39:02.730 - 00:39:51.274, Speaker A: Yeah, well, we'll get into that. What belongs on chain versus off chain in a bit as well and then maybe to just briefly touch on the other. So best execution and LVR LVR is a funny actually, I don't know if I told you this, but before this season I did ask a couple of people, it's like, hey, do you know what LVR is? And people are like, yeah, no, I know what LVR is, and then proceeded to confidently tell me a definition that was completely wrong. And I think the way that sort of my journey in terms of understanding what it is, is just it actually sort of mirrors how market makers in TradFi think about profitability. And the key thing, if you're someone who's familiar with financial statements, profitability is always sort of an expected metric. Like if you look at the P L, that doesn't actually line up with cash coming in and cash going out. It's sort of an expected measure of profit over a certain period of time.
00:39:51.274 - 00:40:25.074, Speaker A: And market makers or anyone that's managing inventory actually have a pretty complicated sort of business under the hood right they're placing trades, they might want to understand their expected profitability after a period of time even though they don't necessarily sell those trades after. So they've developed these techniques in TradFi. I guess the best analogy would be sort of a markout or realized spread and then that has gotten mapped, those concepts have gotten mapped onto LPs. And we've started to ask in a more sophisticated way how can we make sure that these trades are profitable that they're placing? And what we found is that they probably aren't. Right?
00:40:25.272 - 00:40:50.010, Speaker B: Right. That's the takeaway in at least some cases. That's what some of the studies have found. Yeah, that's right. So now there's a very nitpicky in the weeds debate we could have about lever and I think we probably will get into it with the guests that we're planning to have on that episode. But we're actually the first paper that defined lever did so without the concept of fees. There weren't fees on the it was assuming there were no fees on the AMM.
00:40:50.010 - 00:42:03.554, Speaker B: And the second paper added the concept of fees and then came up with a new word to describe loss versus rebalancing basically after fees, which is they just define it with this term ard profit. So lever as defined in the papers only means without fees. But that's an incredibly nippy technical academic point. I think the key idea about lever is at the beginning of every block where if the price is moved somewhere else, liquidity fighters get arbed and then they lose money because that trade happens at a worse price than the true price. And so in expectation, as a result they're losing money relative to if you were just you could just be like Delta Hedge and you could just be trading doing this exact same strategy, the rebalancing strategy on a centralized exchange and make more money than you could be as a liquidity provider. And so there's some subtleties in exactly why this is the thing to measure and I think we'll definitely get into it in that episode. But I think it's important to think about the concept just very in a very microstructured level where it just means at the beginning of every block or at some point during every block there's usually like some net trade that is bad for liquidity providers and everything else has to make up for that.
00:42:03.554 - 00:42:36.000, Speaker B: And I think if you think about things in that way it starts to well, for one thing, it's different from how I was thinking about it in 2019 for sure. And in part that's because I think we had sort of the luxury of basically there wasn't a very sophisticated toxic flow, a lot of toxic flow and there was a lot of nontoxic flow and all of it was coming to us whether it would get the best price there or not. So I think it just wasn't the right thing to worry about at the time. But now it certainly is. And I think as we start to be able to measure it more, we can think about, okay, how can we actually design DEXes to address this problem?
00:42:36.530 - 00:43:02.806, Speaker A: Yeah, I completely agree. I also think I got to give a shout out. This is a very crypto thing to say, but I got to shout out Zero X FBI femboy, who is a member of the now ambient finance X Crocswap team, who originally I think he was one of the first to at least publicly put out sort of empirical studies of impermanent loss on univ three, which were really helpful, and maybe that laid some of the groundwork towards lever them.
00:43:02.828 - 00:43:24.640, Speaker B: I think the Bancorp guys did put out a paper on it. And then I think Vicky Thought on Twitter yeah, again, this is only in crypto, right? Vicky Thought on Twitter, I think, has done some good work on Markouts. I haven't looked closely enough at all the analyses here, and I think there's a lot of subtleties, but yeah, a lot of work especially done on the youth Usuc five bit pool, which I think is important.
00:43:25.410 - 00:44:12.342, Speaker A: Agreed. So we'll be kind of continuously referring back to some we've got our first episode, actually, to tease that a little bit, is a deep dive on lever, which is going to be a ton of fun. But we're going to be kind of referring back to these areas, which is loss versus rebalancing, best execution and sort of gas optimization. Next, I want to get into some tensions that we see in Dex design, and there are three big tensions that I want to call out. So let's call it the active versus passive LP tension that you might see in DEXes. There's the on chain versus off chain, and then there is the retail versus toxic order flow tension. So one thing that you used to hear quite a bit back in 2020 or 2021 maybe, was this sort of AMM versus Dex holy war of like, it's going to be AMMS or it's going to be DEXes.
00:44:12.342 - 00:44:59.450, Speaker A: And at least the way that I've started to see it in preparing for the season is the lines are already starting to blur. Like uniswap V three looks a little bit more like a central limit order book than at least V one did. And a lot of actually what we're really debating here is active versus passive liquidity provision. And in a central limit order book, assuming that gas costs aren't a thing, market makers are very actively placing and withdrawing bids. And in an AMM, it's just super passive. And a lot of the decks design today exists sort of somewhere on this spectrum of active versus passive liquidity provision. So my question to you, Dan, is a, do you also see it like that? And then B, where ultimately, if we're having this conversation 510 years from now, what does the sort of market share look like of active versus passive liquidity provision.
00:45:00.030 - 00:45:52.922, Speaker B: Yeah. So I think it's important not to be too religious about some of these things. And I think maybe I at times maybe have been more, have had more religion around one concept of how a decentralized exchange should work. But ultimately a lot of it, I think, shakes out to just the empirics of and it can depend on these really sort of like niggling details about what is the relative gas cost of so and so operation or what data structure actually works for this. Those aren't the kind of things you'd be able to derive from first principles. And so the idea that, oh, I know that AMMS will win or I know that central limited order books will win just from the idea that you could just come up with that without diving really deep and trying to build one or the other and trying to figure these out. I think it's just not possible because again, it's going to depend on these really detailed in the weeds things about what works from a gas perspective or a UX perspective or how ethereum works, something like that.
00:45:52.976 - 00:45:58.222, Speaker A: But Dan, this is crypto. We get religious about really small technical details. That's what we're doing here.
00:45:58.276 - 00:46:28.550, Speaker B: It's true. Yeah. And again, I think the religion actually does it helps a lot in terms of spurring these big changes that otherwise maybe wouldn't be possible. But I think ultimately you've got to look at kind of the actual costs and some of this specific affordances of the platform and figuring out what will make the most sense. But yeah. So with active and passive liquidity, I do think there was a period yeah, in 2019, 2020, where there was just way more passive liquidity than there was active. There weren't a lot of professional market makers who wanted to touch crypto.
00:46:28.550 - 00:47:36.714, Speaker B: And so at the time, actually, you got not just in the long tail, which is obviously it's still true, I think may always be true that you will have more passive liquidity in the long tail, but in the short tail you could have a lot of liquidity. And where USDC, we've become way easier to trade on uniswap, there's a lot more liquidity for it on uniswap than there is even on these off chain central limit order books. And I think that was sort of an essential thing. At the same time, you do have a lot of inefficiency if you go with passive liquidity. And as you start to see more sophisticated parties actually move in, if you're trying to be fully passive and you're just running the naive strategy that unisoft v one, V two were doing, you probably eventually you get basically outcompeted by liquidity that's more capital efficient, that's able to respond more to prices. And I think that you sort of just had to see the writing on the wall a bit there and say, okay, this is dominating right now, but okay, what's actually the end game. And I think part of it is if we don't want this to go completely centralized, it needs to still be decentralized, but it may need to go more sophisticated.
00:47:36.714 - 00:48:06.200, Speaker B: And it goes, okay, who do we actually want to be? What sacrifice are we willing to make there? And it goes, all right, I would rather count on liquidity providers to be more sophisticated than people just putting in money than just whales putting money into Usop. V two pool. Okay, I'm willing to believe that there's going to be at least some liquidity writers who are going to be able to do that. And so that's the motivation behind V three and it says, okay, and then that's going to keep us from being outcompeted by the aggregators or by the RFQ systems, at least for a while.
00:48:06.970 - 00:48:10.780, Speaker A: Yeah, I agree with that. I feel like it just I'm not sure.
00:48:11.470 - 00:48:11.882, Speaker B: Yeah.
00:48:11.936 - 00:48:31.086, Speaker A: I also am not a huge fan of religious thinking and I do think there are yeah, you got to be pragmatic about it at some point. And I would love it if retail ended up being able to make money passive LP. It doesn't make intuitive sense to me that they really should be and it's certainly not a God given right, not.
00:48:31.108 - 00:48:51.782, Speaker B: In how it's currently designed, I would say. Right. I think before and we'll talk about this, I'm sure there's certain new kinds of designs you might be able to put in that could actually make it a lot more profitable. If you reduce the lever, it starts to make a lot more sense that you might be able to but I think without some kind of solution for lever, it feels tough in the long run for that to happen.
00:48:51.836 - 00:49:23.306, Speaker A: Let's talk about on chain versus off chain. So maybe we could bring this into Uniswap X actually, which is another recent product launch from Uniswap, which is sort of this aggregator layer isn't really the right thing. It's an off chain RFQ system. But kind of walk us through. It's become a bit of a debate because originally all of liquidity sort of existed on chain with uniswap right in the AMM. You just locked up a whole bunch of liquidity there. But now I've actually heard you in interview say maybe it actually doesn't really make sense because it's a little bit of a honeypot.
00:49:23.306 - 00:49:41.954, Speaker A: Right. It's a security concern and we might not be getting best prices for our swappers. So walk us through. Even if you could just imagine kind of like the different parts of a Dex, what are the important parts to maintain decentralization to be on chain and then what is it like? Yeah, we can actually have this part off chain.
00:49:42.002 - 00:50:12.666, Speaker B: Sure. Well, so first I'll say I think when I'm talking about a honey pot, typically I'm talking there and not having on chain liquidity and moving entirely or almost entirely off of onchain liquidity. That's in the context. Of cross chain swapping, I think we'll talk about it in a future episode. And I think with bridges it's a lot more dangerous to have on chain liquidity and so the fully off chain designs seem a lot more appealing to me. I think with single chain liquidity there's a lot of tremendous benefits to on chain liquidity and passive liquidity and I think we will be able to preserve those and I think they're worth preserving. Much less clear to me with cross.
00:50:12.698 - 00:50:51.250, Speaker A: Chain which parts of a dex are important to be like if you just imagine sort of the stack of a like I know for Antonio, what is sort of prompting the question is. I know Antonio. When he moved over to dYdX, a big part of that motivation was the fact that you just could not have an on chain order book, right, based on an ethereum sort of roll up. So I'm just sort of wondering what are the parts of a chain? Again, from an outsider's perspective it started to say well, the guts of an exchange actually we can keep mostly off chain, but as long as settlement is on chain, that's good enough. Whereas I'm sort of wondering where's the nuance in the gray area there and which are the important parts of an exchange to keep on chain.
00:50:51.350 - 00:52:03.374, Speaker B: To me, the essential thing and something that I hope we never have to compromise on is that as noncustodialness and permissionlessness and I think noncustodialness maybe being the most important is that it should never be the case that swappers are trusting anyone or like liquidity fighters or governance or the LPs or anything with their money. And it should never be the case that the LPs liquidity providers, if you're providing liquidity, you shouldn't be trusting like a governance system or something with your money. You should be depending maybe on some properties of the system and that there aren't any bugs in the contract. But in general I think it's important that you still have custody of your money and that nobody's able to rug it from you. So I think those are really important properties to preserve. I think a lot of the other ones are more instrumental to me. I think some like programmability and composability, right? These are really important composability being the ability to do something atomically or atomicity exercise is a better term than composability atomically the ability to do a uniswap at the same time as you do some atomically with some other operation on ethereum, I think that's very important and was really useful.
00:52:03.374 - 00:52:33.546, Speaker B: Like a lot of ethereum of uniswap volume is atomically combined with other actions on chain. And so I think that's really important. It's cool that you can do a flash loan or a flash swap in order to arbitrage some other decks or to do a large borrowing position or something using uniswap. I think that's important. I don't think it's essential. I think in fact many trades don't need to be composed with other things. And so if we can sacrifice that property in favor of another, I think that's potentially valuable.
00:52:33.546 - 00:53:20.678, Speaker B: I think programmability and I would call this maybe visibility of liquidity on chain. Right incredibly important in the early days of uniswap and today for liquidity mining for the property, you're able to pay somebody for providing liquidity when that's provided on chain in a way that you can't really do if the liquidity is provided off chain not trustlessly. And so I think that's very important for a lot of kinds of use cases. It's not necessarily important for everything for the most part. Maybe ETH, USDC volume isn't subsidized and ETH liquidity is not subsidized by anything. Nobody's running liquidity mining campaigns and no one ever has as far as other than DEXes, obviously, but nobody is right now on uniswap. Nevertheless, almost half of uniswap volume is ETH.
00:53:20.678 - 00:54:02.810, Speaker B: So I think it's not an essential property that the liquidity be visible there because it's not being really used in that way. And so I think some of these are there's different applications, different kinds of things you might mean by decks and so different. Yeah. I'm willing to sacrifice some of these, but I think it's really important is when you don't become like a centralized exchange in the terms of you're trusting some company to hold your assets. Just often hasn't worked out well, unfortunately. And I think it is a pretty essential encrypted that it not be I think there's another sense of permissionlessness where it is important to me that you be able to trade, to be able to trade whatever assets you want on this system in some sense maybe with degraded performance. And I think that's why it'll always be useful to have purely on chain exchanges.
00:54:02.810 - 00:54:06.940, Speaker B: But yeah, again, I think the noncustodial list is the most important to me.
00:54:07.470 - 00:55:09.470, Speaker A: Yeah, I think that's well said. And then maybe the last tension is we talked a lot about a lot of people have probably heard this phrase toxic order flow. Just consider that sort of informed order flow, right? There's broadly two groups of traders. There are retail traders like you and me who are, well, maybe not you, but me, who's a dumb retail trader and generally is not trading on market edge. And it's just like, hey, I feel like buying some ethereum today and that's really good from the perspective of a market maker or an LP, right? Because I'm probably wrong or there's a good chance that I'm wrong. And so you can actually quote me in TradFi, you could quote me a really good price and then there's toxic order flow which again in the TradFi analogy would be like Goldman Sachs, right? So if Goldman Sachs wants to sell you $100 million worth of some stock, you should probably be pretty concerned that they're going to run over you because they're pretty smart guys and they might know something that you don't know. So from the profitability of a maker or an LP standpoint, it's very important to get an understanding of who are your retail traders and who are the informed sort of toxic order flow.
00:55:09.470 - 00:55:38.022, Speaker A: And the question, I guess, is how do you segment those out? Is it appropriate to charge toxic order flow more, for instance, which might make sense. But then if you think about overall volumes for an exchange like Uniswap, I would guess it's probably mostly at this point what you would call toxic order flow. So what does that end up doing to your volume? So I just spit a bunch of words at you, but how do you kind of think about that tension of balancing out retail order flow versus more toxic order think?
00:55:38.156 - 00:56:21.800, Speaker B: Yes, I think my understanding is that probably a majority of volume on Uniswap is arbitrage volume in some form or another. And then some percentage of it is probably like sandwich volume or something that you don't want it to happen even if it isn't technically arbitrage volume. So if you were to solve some of the problems we were talking about before, in some sense volume on these probably goes down if you just remove these. But at the same time, if you remove toxic order flow. Imagine you say, like, you get no toxic order flow. Or rather, it's sort of tough to figure out what that even means on an AMM, but really would be like that. It rebalances at the true price rather than at the price that the Arbitrage person would want to trade on the pool at.
00:56:21.800 - 00:57:09.126, Speaker B: Suddenly it becomes more profitable to be an LP and as a result, you might get a lot more liquidity on the pool. And as you get more liquidity now, you can actually get more natural, more retail trading volume. And I think it's a sign dex volume estimated around 10% to 15% of centralized exchange crypto volume, if you say, okay, but actually maybe half or more of that volume actually shouldn't really count because it's arbitrage volume. It's stuff that doesn't even show up on the Binance volume, arguably, because on Binance it might show up as just people canceling orders. That means actually that's good news because it means, in fact, we have more room to grow. There's actually more possibility for growth, and we're more likely to get there if we actually cut out the toxic volume. So I think ultimately it's something we should welcome and the Curly virus should welcome it.
00:57:09.126 - 00:57:30.170, Speaker B: Swappers, uninformed swappers should all welcome this. And Uniswap as a platform, it just would be good. Yeah. And again, I don't think it behooves us at all to be deluded about that fact that a lot of the volume is volume extra. You might not want to actually be happening it's unprofitable effectively.
00:57:30.510 - 00:57:38.046, Speaker A: Yeah. What do you think? And this will come up, I think, in our discussion of LVR as well. But one of the big topics in Dex land right now is dynamic fees as well.
00:57:38.068 - 00:57:38.206, Speaker B: Right.
00:57:38.228 - 00:58:14.822, Speaker A: You could consider this at a very high level, almost like surge pricing for market makers. Market makers tend to usually do well when spread. They make money by charging a spread right now. Sometimes you can end up taking warehousing a lot of risk and take a big loss. But in general, market makers like it when there's volatility, the spreads get higher. But one of the problems in AMMS, from my understanding, is you don't really have that differential pricing option. So how do you kind of think about appropriately charging arbitrageures for what they're doing and also in times of extreme market stress, right? Like how do you crank up the surge charge?
00:58:14.886 - 00:59:10.070, Speaker B: Yeah, so I think a lot of this comes down to just to the lever reduction strategies that we'll talk about more in that episode because a lot of what people currently use fees for right now is to protect against that initial arbitrage. And if you imagine raising the fee so that in times of volatility, that's typically, I think, because otherwise you'll lose a lot more in those times to arbitrage trades. And so if you have a solution potentially for lever or a good mitigation for that, it may reduce the need to do that. But in some other sense, picking an optimal fee does depend on this function that we just have no idea what it is. And that's just the demand curve for retail trading volume as a function of fees. And I've talked to some academics about this and some practitioners, nobody has any idea what that demand function looks like. And I think market makers do a lot of different strategies basically partly in terms of how they market make in order to try to maximize revenue.
00:59:10.070 - 00:59:38.070, Speaker B: But I don't think that's anything you just put into you can't just plug it into a formula and put it on chain. So a lot of the ideas that I've seen and some that I've working on a paper around this actually, right now, but those ideas are more around trying to align off chain parties to pick your strategy for you and get them to be incentivized to be able to pick. Okay, what should these fees be or what trade should happen by sort of having them be aligned with liquidity providers?
00:59:38.730 - 01:00:07.502, Speaker A: Yeah. All right, I want to introduce our next set of topics here, which is order, flow, auctions and intents. So intents is something that has been a buzword for a little while. I feel like that's generally well understood at this point, but could you give us a sense of just define intents for us and then talk about how I think Uniswap X is a really good example of this. Cowswap is another really good example of this. What does it mean to design sort of an intent first architecture, so to speak, and how's that going to impact DEXs, I think.
01:00:07.556 - 01:01:02.862, Speaker B: I'm not going to give the best explanation of intents, in part because I'm not really as up to date on the lore and what standard thing people call it. I'll use sort of my own terminology. The way I would think about it is that a transaction, an Ethereum transaction, is this exact message format where you sign and has the TX origin and it has some call data and it has a two address and has some priority fee and base fee and everything, right? And there's this format you can sign a message, and an intent is literally anything else. An intent is just any message that you're signing that isn't an Ethereum transaction in this context is what I would say. That's an intent. And so when you think about intent based designs, I think of the original Zero X protocol as being like one example where you're signing off chain limit orders. But a lot of other things are, I think, in general.
01:01:02.862 - 01:01:49.486, Speaker B: And the idea, I think, of an intent is you're signing a message that expresses not how you want to do something, which is what an ethereum transaction effectively does, but what you want to do what you want to. Be done. And then you leave it to others to potentially solve this, figure out how to get it to you, and then your transaction, your order for a limit order, I think is a great example of an intent. It's not the only kind, but it's one that probably is what we'll mean usually when we talk about intents in this context, it'll be some kind of limit order or maybe a market order. It's an intent to say, I'm willing to trade at this price or better, but if not, don't even include my transaction. I don't even want to be heard from. And my order, my signed intent, will only be ever included and executed against in a transaction that successfully actually gives me what I want from it.
01:01:49.486 - 01:02:19.590, Speaker B: And what I like about intents is, like I said, the vast majority of all possible designs for things don't involve I signed exactly an Ethereum transaction that gets submitted as an Ethereum transaction on the chain, right? And so it's just an incredibly more flexible way of designing a decentralized exchange. And what I love about Unisopx, which is this intense base protocol that Unisop launched recently, is that it moves us into intense space. It moves us into this incredibly much more flexible design space and allows you to do a lot more potentially.
01:02:21.690 - 01:03:13.910, Speaker A: You know, the simple explanation of Intense that made a lot of sense to me was just to put it in really high level terms, is you're hard coding the output, not the input, right? So you have the flexibility to do whatever you really want as long as we get this guaranteed output. And it sort of changes the architecture of DEXes to be able to actually execute this more nebulous sort of structure for input. So Uniswap X would be a really good example of that. Cowswap zero X. I'm less familiar with zero X is what I'm talking about. It less but basically the idea would be instead of like a transaction getting placed on uniswap and then some mevbot comes and sends that into a bundle and sends it off to mevboost and it gets put into a block instead. There are these much more nebulous sort of flexible intents that also get passed down to called fillers or solvers.
01:03:13.910 - 01:03:32.510, Speaker A: But my understanding is that there'd be builders and they manage and abstract away a lot of the cross chain complexity and then end up sort of executing those transactions for you. Right. So if you're an Intense first app, then you have to think about how am I going to recruit this network of hopefully permissionless builders?
01:03:33.170 - 01:04:24.046, Speaker B: Exactly. So it depends on a lot more off chain infrastructure, generally intense based architectures. Do and one of the cool things is, I think in the past couple of years, we went from having relatively unsophisticated off chain actors and when were designing protocols? In 2017 or 2018, you might design this beautiful protocol that incentivized somebody, anyone, to come and do something and then just they wouldn't show up and do it. No one would show up and take this free money that you were leaving on the ground. And then I think with the mev revolution in 2020, 2021, you actually started to see, okay, actually people will take this money and so now we can actually depend on them to do this and we can design our protocols with that in mind. And with Intense, I think, yeah, there's ways to do it with more centralized systems, but there's ways to design intense based system that don't. Yeah, and I think Unisoft X is designed partly in this way where you don't actually have to depend on anyone, any trusted party, because you just sort of depend on the market to do this.
01:04:24.046 - 01:04:28.400, Speaker B: And that's what the Dutch auction component of Unisoft X is designed to do.
01:04:28.850 - 01:04:34.020, Speaker A: Yeah, we're going to get into dan, I know you're a big fan of the Dutch auction and.
01:04:36.950 - 01:04:37.538, Speaker B: We'Re going to.
01:04:37.544 - 01:05:15.054, Speaker A: Do a whole episode on order flow auctions for the ofa nerds out there. But I want to keep moving through these themes. So one big one that is a little bit less in the weeds of DEXes but more high level strategy is sort of the vertical versus horizontal scaling approach. And what I mean by that is when I look at something like Uniswap, whether this is intentional or not, there are kind of these layers to it, right, which is maybe like the front end or wallet layer. Got uniswap the wallet, uniswap the front end, then there's an aggregation layer which would be Uniswap X. You can correct me if I'm technically wrong on some of these. The liquidity layer in the form of Uniswap v four.
01:05:15.054 - 01:05:54.366, Speaker A: And ultimately, then maybe at some point down the road, there would be a settlement layer, right, in the form of could be like the much touted uni chain that people love to write blog posts about. But those are sort of the layers. And at least in terms of the liquidity layer, the aggregation layer, and the front end wallet layer, it seems like Uniswap is pursuing that, which I would call sort of a more vertically integrated approach, as opposed to, I guess in an alternative world, you could have been like, I'm going to pick one layer. Right? Like MetaMask has a very horizontal sort of approach or horizontally integrated approach where they're trying to be a wallet across multiple different chains. So can you kind of just walk us through the internal strategy as much as you can share in terms of the uniswap side of things?
01:05:54.468 - 01:06:20.006, Speaker B: Sure. Well, so first, yeah, I think definitely I can give some my thoughts. I think it's not going to be speaking for Uniswap or even Paradigm or others on it. And generally on this whole series in general, whenever I'm talking, I think I'm giving my own views. And again, full disclosure, we're invested in Uniswap, invested in some other companies we may discuss in this podcast, but none of this is investing or legal advice, needless to say. But yeah, but I think on this.
01:06:20.028 - 01:06:21.846, Speaker A: Happy to have good disclaimer to give an hour in.
01:06:21.868 - 01:06:22.840, Speaker B: Yeah, I know, right?
01:06:23.450 - 01:06:24.694, Speaker A: We've got one at the top, too.
01:06:24.732 - 01:06:25.560, Speaker B: Okay, great.
01:06:27.450 - 01:06:27.862, Speaker A: Yeah.
01:06:27.916 - 01:07:23.820, Speaker B: So I think on this strategy, speaking just for my own view and how I see this on all those layers, except arguably with the front end and the wallet, okay, that's a fairly integrated single product that Uniswap provides. And I think the Uniswap Labs interface and the wallet are products in these layers. When you think about the other layers, I think it gets back to the thing we were talking about with platforms, right? And the way that they approach these. I think it is essential that these be more like platforms than individual products that are competing against others. And so when you think, for example, about the liquidity layer with Uniswap before, it's not here. We have the solution to liquidity, we have the solution to lever, we have the solution to these systems. It's let's build a platform on which anybody who wants to build a Dex connection and come up with cool new solutions for this can build it and compete within this system.
01:07:23.820 - 01:08:11.042, Speaker B: And I think that's important. When you think about that layer, it's like, it's not we're just trying to force everybody into the particular solution, but rather, how do we actually enable the right one to the people who are best able to design a good system or to provide that to do it? And so thinking about it as a platform even more, again, than v three or v two already were. And then when you think about it, the aggregation and routing layer, again, the solution uniswap X is not an aggregator, right? It's a competitive system. It's not an aggregator, it's not a router. It's a competitive system for routing trades. And one way I like to think about it is when you think about on chain liquidity right now, getting Arbed, the market for Arbitraging on chain liquidity is incredibly competitive right now. If you just put an AMM on chain with a low fee.
01:08:11.042 - 01:09:22.880, Speaker B: Even if you don't have good docs, even if you don't have an SDK or an API, even if it's like the source code isn't verified on ethereum and ether scan. If it's an AMM, someone's going to go arbit atomically against other AMMS because that's just like free money. And people will go to the trouble of integrating it, but they're not going to route volume to it because it's actually really annoying to integrate somebody as a router. And there's not as strong an incentive to give users the best possible price such that I can't make necessarily that much more money if I design a slightly better aggregator and have to go unless I work at one of the companies that runs aggregators, right, or I have to somehow find that order flow. But I think with Uniswap X, the idea is, can we make it a really open competitive market to give users as good execution as possible and make that have just like the brutal competition in that sphere? And I think if you do, then that makes the uniswap routing complexities that uniswap before introduced is a lot simpler. Because then now you can count on if somebody wants to just put in a trade that it's going to be routed to the best pools and you don't have to depend on some aggregator building exactly the right aggregator because you'll be a competitive market to do so.
01:09:23.410 - 01:09:38.034, Speaker A: So it's almost like in order to give users the experience, the best possible experience for them, there are all these different challenges that need to be solved here. And it makes just a lot of sense. We feel like we have the capability of doing it, so it just makes sense to try to solve all of those.
01:09:38.072 - 01:10:36.486, Speaker B: That's right. And then I think in the long run and this I don't have as clear a vision for as I would like in the long run, I think it could be possible to return to a more integrated right now, the layers are kind of are separating a bit, right? And you do have these people who compete on the front ends and people compete on the routing layer and people compete for the liquidity layer. But in some sense, what we're trying to do here is often we're trying to help uninformed flow, like retail order flow, unsophisticated flow, and we're trying to enable we want to bring in some of the original vision here, we'd like to bring in unsophisticated passive liquidity people who don't have to be running this really complicated strategy. And we think you can unlock a lot if you can serve both those users well. And one thing might be like, what if we just match them against each other and we say, you're only going to trade against passive liquidity, right? And I don't think that would work today. I don't think we have the perfect system for that. And I think you need a lot of sophisticated actors in the system.
01:10:36.486 - 01:10:49.020, Speaker B: I think in the long run you will need these sophisticated actors to make the whole thing flow smoothly. But I wonder if we could have a system ultimately that actually reintegrated. So that's a bit more pie in the sky though.
01:10:49.550 - 01:11:49.518, Speaker A: No, it's a super interesting idea and honestly sometimes we talked about this last season and the liquid staking season where there's a tension in between making things super permissionless versus getting the outcome that you might ultimately want and the community decides is better. So we talked about this a lot within the context of Lido and whether or not it would be a better outcome even for ethereum node operator decentralization. Like if you had just left it up to the free market, right? And was just like, we're going to have no perspective over this. As opposed to Lido gathering a lot of stake, they put it in a small number of node operators, but they say, hey, we're going to distribute the stake. You can't all just have it on AWS, that kind of thing. So that's the through line that I would draw to what you just described, which is technically it's a more integrated system, it's a rebundled system, but if you have that control, then you can actually ensure an outcome that is better.
01:11:49.684 - 01:13:01.938, Speaker B: And it's a real tension. And I think there is always this tension where actually this concept of mechanism design, of the cost of anarchy, where if you just have parties that aren't coordinated, you might end up with just like a worse outcome than if you were able to set rules for the whole system. I think it's a really uneasy balance because obviously you don't want to give someone that power to be able to just set the rules for the whole system and you may not end up with the best ideal possible benevolent dictatorship if you end up giving someone that power. But yeah, you do get a lot of benefits potentially from something being designed, a system being designed in order to optimize something. So it's a really complex and interesting tension there. And yeah, I think a responsibility that Unisoft takes and I take fairly seriously while at the same time recognizing you still actually have to compete in the real world and it's a privilege to be right now like a market leader and I think everybody and I think Lido and Uniswap and others and ethereum. Others in this position always do and have to keep in mind that they have to remain competitive within this competitive system in order to be able to have that privilege of being able to sort of top down design things the way they might want or the way that might be theoretically efficient.
01:13:02.114 - 01:13:18.490, Speaker A: I think cost of anarchy is an extremely good way to put it. And sometimes I have a little bit of a knee jerk reaction when people are like, well, let's just turn it right over to governments on day one. It's like, how do you think that's going to work, my man? Just open it up to something perfectly. Yeah, good luck with that. But at the same time I also.
01:13:18.640 - 01:13:20.314, Speaker B: Price of anarchy is the term I meant to use.
01:13:20.352 - 01:13:57.382, Speaker A: Yes, price of anarchy. Yeah, it's a good concept to keep in mind. All right, last thing we'll close on, you and I are going to touch a little bit. We're going to be mostly talking about this within the context of sort of spot exchanges, but we're also going to talk a little bit about on chain derivatives, so perps and options this season. And maybe just like we could, I would love to get your thoughts on how you see the market structure playing out. Obviously, if we look to TradFi as an example or even CFI within crypto, already the market for futures and options has exceeded spot volume. So just kind of walk us through.
01:13:57.382 - 01:14:05.370, Speaker A: How do you think about that market playing out on chain? Do you think the mix of different derivatives is going to be relatively similar or what are your thoughts on chain options in general?
01:14:05.520 - 01:14:39.734, Speaker B: Yeah, so I think it's something I've thought a lot about and I don't feel like I have a really firm theory on some observations. So one is, I think you do see, say, in equity markets, you see, like, retail usage of options. But I think that might be almost entirely because they don't have perps. And for various historical and regulatory reasons, we don't have perpetual swaps in us, especially like US. Equities. And you don't generally have futures in US. Equities either.
01:14:39.734 - 01:15:27.378, Speaker B: And so the main way to trade with leverage is using equities. For retailer trade, leverage on equities is options. And I think it sort of doesn't really make sense. And you saw a lot of people with GameStop or whatever like getting into options trading with equities and it has all these weird properties. You're buying a lot of stuff vega or whatever that you actually maybe don't have use for or don't really want if you're actually just looking for leverage. And so I do think it's a weird historical artifact that equities, that retail options trading is a thing at. So I'm not that surprised it hasn't taken off as much as Perps have in crypto, in CFI crypto trading in part just because I think for retail perps kind of.
01:15:27.378 - 01:16:28.386, Speaker B: Make more sense as a product to me. That said, I think there are a lot of things that options are used for and useful for, for professional traders. And so I do think there will still be a professional options market but in crypto and potentially on chain long term. As for what makes sense on chain now in current on chain environments, leverage is dangerous, right? I think primarily because of liquidation is that if you have these highly leveraged positions you might actually end up getting liquidated, the position may end up being insolvent. Now there are some incredibly high profile examples of centralized perp exchanges having a similar problem made worse by the fact that they do not have transparent on chain collateral. And so I wonder if actually the upside of putting things on chain may well end up outweighing the downsides. But I also think we're going to get better in terms of just what can be enabled on chain.
01:16:28.386 - 01:17:31.754, Speaker B: Latency is going to get lower long term, throughput is going to get higher cost, these costs of doing things on chain and you may with some amount of privacy be able to have perps be a little more practical on chain. I don't see a reason why perps couldn't be a big thing on chain. I also think I want to talk a little about squeath which is this interesting product that we worked on with the portfolio company called Open, where squeath in some sense is a I think it's a very cool way to get convexity to get this product. One of the things that options provide, but in a more perpetual without the expirations, without some of the properties that options have and the way squeath works is that it's like a perpetual that always trades at the price of ETH squared. And so what that means is that when ETH moves by a dollar, it always moves by $2 basically. And so it gives you kind of this like two x levered exposure to ETH, but that continues to remain two x levered as the price of ETH goes up or down, which is a beneficial property called convexity. But I think it's a really interesting product.
01:17:31.754 - 01:18:24.410, Speaker B: It's one that as far as I know, doesn't really exist in traditional finance and it's one that was invented because you get a lot more innovation in crypto because of you have this permissionless environment to figure out these things. But it's one that I'm not really sure whether it will make sense long term on chain. But it's one example of like we might see weird things that happen. I think this happened with perpetual swaps. Perpetual swaps were invented not in DeFi but in centralized crypto trading in a way that hadn't really existed as a product in any other market before. I think in part because you had just companies like BitMEX innovating on inventing these new things kind of outside of the regulatory environment where people were allowing people to have more creativity in what they invent.
01:18:24.770 - 01:18:36.946, Speaker A: Yeah, actually, Perps, although they were first popularized in crypto, they existed outside of crypto before they were first proposed by Robert Schiller in the 90s, I'm pretty sure.
01:18:36.968 - 01:18:38.834, Speaker B: That is so interesting. That is news to me.
01:18:39.032 - 01:19:08.442, Speaker A: That's very cool. It just never really took off and I can't 100% remember why. But actually the old uncommon core hasu. And Suzu actually did a really good episode on the history of perps, and that was one of the takeaways is that it did exist in TradFi before as a structure, but it found product market fit in crypto. And it is interesting. I hadn't really thought about it from that perspective, but there's probably some path dependency just in terms of financial products that exist in TradFi. And we're starting with something of a blank slate here.
01:19:08.442 - 01:19:29.834, Speaker A: So maybe, yeah, there will be different products that ultimately make sense. Although, man, people really do seem to like leverage. Doesn't really matter where it is. So, yeah, you can probably expect a riproar and on chain derivatives market to take place. But Dan, we covered a ton of ground here. I'm just so excited for this season. We're going to get into some very in the weeds topics.
01:19:29.834 - 01:19:38.230, Speaker A: I hope to talk about some very interesting sort of deck strategy and maybe we can reason a little bit about the market structure moving forward and get into the weeds and should be a ton of fun.
01:19:38.300 - 01:19:40.054, Speaker B: Absolutely. I'm really excited for it.
01:19:40.092 - 01:19:49.430, Speaker A: All right, to tease our first episode, we are going to be getting deep on lever with two, let's just say very qualified guests. So that'll be a ton of fun. And Dan, I will see you next week.
01:19:49.500 - 01:19:50.020, Speaker B: See you next week.
