00:00:00.250 - 00:00:27.078, Speaker A: One analogy you can maybe think of is like the government regulating radio spectrum. The point of that regulation and charging for spectrum is not actually for the government to like to take in revenues. I mean, that's a great side product, but they actually need to carve out specific regions and make that non contentious so that the radio spectrum is actually functional for commercial and public interest.
00:00:27.164 - 00:00:56.746, Speaker B: All right, everyone, we will be back to the program in just a moment. But before we do, I want to share something that blockworks has been cooking up for these last couple of months. March of this coming year in London, blockworks is hosting Das London, the largest institutionally focused conference in all of crypto, Goldman, JPMorgan, zero 72, all in one room. So you can know what the big money is doing. So click the link at the bottom of this episode, it'll take you right over to the homepage and use Bell 20 for 20% off. And I will see you in sunny London town in March. All right, everyone, welcome back to another episode of Bell Curve.
00:00:56.746 - 00:01:27.522, Speaker B: Before we jump in, quick disclaimer. The views expressed by my co host today are their personal views, and they do not represent the views of any organization with which the co hosts are associated with. Nothing in the episode is construed or relied upon as financial, technical, tax, legal or other advice. You know the deal. Now let's jump into the episode. All right, everyone, welcome back to another episode of Bell Curve. Today I am joined by Pranav Garimidi of a 16 Z and Sam Hart of Skip.
00:01:27.522 - 00:01:29.080, Speaker B: Guys, welcome to the show.
00:01:29.610 - 00:01:33.206, Speaker C: Hi. Thanks for having me. Great to talk about few markets.
00:01:33.398 - 00:01:35.706, Speaker A: Yeah, happy to be here. Thank you.
00:01:35.888 - 00:02:36.506, Speaker B: Yeah, this is a fun episode. This is going to be hitting folks when they're most likely in between their sort of Christmas and New Year's holidays, and we can leave you without content. So we wanted to discuss honestly, this episode Sam knows has been building for a little while. It's been sort of a passion project. But I want to talk about fee markets because I feel like they're extremely critical when it comes to being a component of different blockchains and they're not particularly well covered or even invested in from sort of technical resources from various foundations. So we're going to sort of just give you a basic overview of what it is that it means when we talk about fee markets and their various components. Actually going to take you through the development of fee markets in major blockchains, sort of the first early primitive of bitcoin fee markets, 1559 and Ethereum, and then kind of take you through to Salana and some of the interesting questions that they're starting to ask around rejiggering their fee market, and then finally explore some very kind of cool new themes, like multidimensional fee markets or fee credits that are being exploited in different ecosystems.
00:02:36.506 - 00:02:45.970, Speaker B: So before we get to all of know, Pranav or Sam, whoever wants to take this, can you guys just give us sort of an overview and a definition of what it means when we talk about a fee market within a blockchain?
00:02:46.710 - 00:02:56.050, Speaker A: Yeah, I'm happy to take that. We have a Christmas present for the listeners. The most boring subject in blockchain.
00:02:56.970 - 00:02:59.254, Speaker B: This is a podcast for nerds, my man. Yeah.
00:02:59.292 - 00:04:10.410, Speaker A: So it's interesting, the kind of origin story of the term fee market obviously comes from bitcoin. The role that the fee market plays in bitcoin encompasses a couple of different things. So the idea is that users want to transact on the network. They want to submit transactions. They typically submit them to the miners, although the miners may not be the one who select the block, so they want to circulate the transactions, and there's this kind of cooperative process of distributing transactions throughout the minor network. And the fee market is the process by which miners would take in transactions and include them in in the block. So it's the fee that's included along with the user transaction to the miner that allows them to select those transactions for inclusion.
00:04:10.410 - 00:04:44.150, Speaker A: However, the role that the fee market has played and kind of how it's conceptualized has changed a bit. So for anyone familiar with Ethereum fee markets or Solana fee markets, that definition doesn't quite jive. And what's kind of come to mean is a way to price network resources, and it touches on a kind of ephemeral resource, which is block space or inclusion within the block.
00:04:45.930 - 00:05:22.130, Speaker C: Yeah, I think maybe to add a bit on that. I think the way I think about fees is for first reason, of why you can have fees. It really comes down the fact that just block space is scarce in the first place. And so if you imagine we had infinite compute, we get to every transaction on chain, then it'll actually be fine if we had zero fees. But really, there is like a core economic problem you have to solve of we have lots of people who have transactions that want to end on chain, but different blockchains can only handle so much throughput. So you have to somehow solve this problem of what transactions actually lend up in a block. And kind of the most natural way to do that is just via charging fees.
00:05:22.130 - 00:05:46.060, Speaker C: And as we'll probably get into. There's lots of ways you can do this, but in some sense, kind of like the amount of users willing to pay for a transaction in some sense correlates how economically valuable the transaction is in terms of their overall blockchain. And so these have kind of grown and evolved in some way just kind of solve this core economic coordination problem of how do we decide which transactions actually should lend on.
00:05:48.990 - 00:06:13.010, Speaker B: I think, you know, that's just a very good summary, both Sam and Fernandov there. But maybe to just describe how fees I feel like are sometimes normally talked about is you've probably seen something like A-P-L of Ethereum, and people talk about fees as being revenue for the network. I have sort of an opinion on that framing. How appropriate is it to view fees as revenue for these networks?
00:06:13.590 - 00:07:05.154, Speaker A: Yeah, it's a good question. It's hard to answer. From the protocol designers perspective, I don't think that they are necessarily intended to be revenues. However, when you look at bitcoin, the long term security budget of the network is dependent on fees, at least notionally, that's what they're trying to achieve. So in that case, a connection between the fee revenue or the fees taken in and the sustainability of the network. But the miners are the ones that are receiving those fees directly. So the bitcoin network itself is kind of a pass through.
00:07:05.154 - 00:07:08.550, Speaker A: It's really concerned with operator sustainability.
00:07:09.370 - 00:07:42.826, Speaker C: Yeah, I think one tricky thing with this question is that defining who the network even is, is a bit tricky of like, is the network all token holders? Is it all stakers? Is it validators? And so in practice, the way fees have evolved, there's lots of decisions you have to make about who fees go to. Exactly. And so I think there's like two different ways you can think about fees. And at one extreme, it's literally just at a single block level of like, next block is going to be proposed in Ethereum. You have 12 seconds. We have to decide what transactions get in. We want to have payments to facilitate that coordination.
00:07:42.826 - 00:08:11.820, Speaker C: And then you can kind of forget about the long scale effects. On the other end of the extreme is kind of, okay, let's look at how much we're charging over 100 blocks, 1000 blocks over a few days. How much are we burning? How are the fees playing with the monetary policy in some sense of the kind of network as a whole and token as a whole. And so I think those two questions are kind of related, but the kind of goals you want for them are not necessarily the same and kind of require different ways of thinking about them to figure out what you want.
00:08:13.070 - 00:09:08.714, Speaker B: Yeah, I think one theme of this, especially when we get to 1559, is maybe the rewriting of narratives, I would say, and I think originally how fees were thought of, especially in a proof of stake context, and see how this very interesting sort of maybe have a slightly different function than a proof of work network like bitcoin, as opposed to proof of stake. But it's really rate limiting. Right. It's sort of spam prevention, denial of service, attack prevention, because blockspace is a scarce resource which is dependent on this shared network of different, basically computing hardware. So to make sure that people aren't flooding the network with spam transactions, then you have the concept of fees. And so somewhere along the line that got rewritten, as this is the revenue of the network, and people construct ethereum P ls. And to me, that just doesn't make an enormous amount of sense, because as you rightly point out, it's hard to even define who the network really is.
00:09:08.714 - 00:09:41.030, Speaker B: And actually Miles and I, who's a co host on this program, pretty often we have these debates and our analysts debate about it all the time. But probably my current method of thinking is if blockspace is a commodity, then that's something like oil. You would never call oil having A-P-L. There are sets of actors that are involved in the oil ecosystem that have p ls that depend on the price of oil. But ultimately oil in itself, or eth block space in itself, can't really have revenue. So I feel like that's a little bit of a reframing away from its original intention, which is spam prevention.
00:09:41.690 - 00:10:16.510, Speaker A: Totally. One analogy you can maybe think of is like the government regulating radio spectrum. The point of that regulation and charging for spectrum is not actually for the government to take in revenues. I mean, that's a great side product, but they actually need to carve out specific regions and make that non contentious so that the radio spectrum is actually functional for commercial and public interests.
00:10:17.410 - 00:10:58.670, Speaker C: Yeah, I think we're seeing this even as ethereum is evolving today, of kind of different discussions around me, v burn and this type of stuff of kind of trying to almost in some sense normalize the amount of transaction fees and kind of application level kind of fees that go to validators. You can argue about what the ideal thing is here, but one thing you can imagine is you want to actually have a fixed reward to certain participants in network that shouldn't be kind of probabilistic. Then you want this kind of variability to all be burned and in some sense, that is revenue towards holders, but it gets a lot more complicated. And it's really just, I think there's different ways you can redistribute kind of the gains from trade to some extent to different parties, depending on what goals you're trying to achieve.
00:11:00.210 - 00:11:35.654, Speaker B: Yeah. And I think this framing is important because there's a pretty long standing debate within crypto about fees. And this typically comes down to, or at least in the current moment, it's like, are the high fees on ethereum bad? And there are sort of two camps, and in my opinion, they sort of talk past one another. And in the one camp is, look, high fees mean high demand. And then usually revenue for the network is kind of brought in, and that's ultimately a good thing. And then there's this other camp of, hey, this actually isn't a good thing at all, really. What users want is low fees.
00:11:35.654 - 00:11:50.320, Speaker B: And eventually people are going to move off this sort of high fee environment. And I have kind of thoughts on this before we get into sort of our history in 1559 example. But where do the two of you sort of fall within this debate? Or how do you think about that?
00:11:54.050 - 00:12:56.594, Speaker C: Yeah, I think for me to define what's good and bad, you really do have to kind of first define what your objectives of the mechanism are. Right. So in some sense, if you do want the highest secured kind of block space that you can totally rely on to some extent, then maybe that is like, high fees is the cost of that, of like, you do have to actually pay some parties to be incentivized to be providing the service to some extent. In that case, high fees really makes a lot of sense. In other cases, if you do want disk users to be submitting kind of simple transactions that don't require the same level of guarantees in the block space to perform well, and you really just want clean ux, then low fees do make sense. And so I think there's different environments where saying high fees and low fees are better, worse. I mean, I think in general, you can say lower fees are better, but that comes to trade offs of like, if you are having less revenue to certain parties, then those parties are less incentivized to invest in certain infrastructure, to kind of ignore malicious attacks and kind of all these types of things.
00:12:56.594 - 00:13:03.400, Speaker C: And so I think you have to just be very careful what exactly the trade offs you want and adjust what you think is optimal based off that.
00:13:04.570 - 00:14:03.782, Speaker A: Yeah, I'd agree with that. In bitcoin, these are kind of intrinsically connected to security because they have kind of committed to not having perpetual issuance. You could imagine issuance being modulated such that you always know that the operators of the network are going to be sufficiently compensated. And other networks have tried to decouple those things. They have other objectives potentially. Maybe they have different kind of resources available, maybe they have different application behavior, maybe they want to subsidize fees early on in order to acquire users. So you may even change kind of your outlook on fees as the network matures.
00:14:03.782 - 00:14:07.980, Speaker A: So there's a lot that kind of goes into that one number.
00:14:09.150 - 00:15:16.862, Speaker B: Yeah. One other framework that at least I've been thinking about it recently is there's an element of almost like dead weight loss optimization, I think, and here's like a sort of a silly analogy that is sort of imperfect, but if you think about a blockchain as like a factory, as like a resource that's sort of fixed, and what you're trying to do if you have a factory is you have a target utilization for your resources within the factory. It's probably not 100%, because then if there's any fluctuation in demand, you're kind of shit out of luck. So maybe different factories might have different utilization targets of say 85%, something like that. So, okay, in this instance, are really high fees good? Well, it means you have a lot of demand for your factory, but on the other hand, it means you're probably surrendering some demand, right? There's probably a lot of demand that you're not ultimately satisfying if fees are super low. Well, guess what? Your factory probably isn't viable over a long period of time and you're going to be flooded with tons of useless stuff. So I would almost use that as like a mental model of having this scarce fixed resource.
00:15:16.862 - 00:16:02.350, Speaker B: And there should be almost like a target utilization most likely. And maybe that's going to lead us into 1559, actually. And 1559 is like an extremely interesting period, I would say, in overall crypto development. I think outside of the merge, it was probably the single largest upgrade or update to a blockchain. And it's just very interesting historically. So maybe I'd love to actually start with Sam. You were giving us a little bit of an overview of the fee market in bitcoin, but if you could just kind of rehash for listeners like how did the fee market in bitcoin work? And then let's take us through to how it initially worked in ethereum and why we started to talk about 1559 as this big overall.
00:16:03.430 - 00:17:25.878, Speaker A: Yeah, happy to. So I mentioned that there's this thing, the mem pool, which is kind of this subjective view of transactions that a miner or a validator has that they can pull from in order to include transactions in the block, and they need to apply some local rule to include transactions. And so in bitcoin, the way that miners select the transactions that are in the block is they look at the transactions with the highest fees, and then those fees go to the miner. So that is their payment for creating the block, particularly in this kind of perpetuity case, where the issuance is diminished. So that model was, there's a couple of things about bitcoin that are worth understanding. One is that because bitcoin is sufficiently constrained in what it can do, you can basically just transfer tokens around. We had said previously that fees are kind of a way to price resources.
00:17:25.878 - 00:18:23.710, Speaker A: Well, all the resources or the utilization of those resources looks very consistent. You're making a transaction, you actually kind of know ahead of time how much it's going to cost the network. For an individual transaction, there's no notion of, you don't have to have a resource abstraction itself. You don't have to kind of name that resource. When you move into Ethereum, you're going into this kind of generalized platform where you can do smart contracts, you can really do any kind of programmable logic, and this requires the introduction of something called gas. And gas is a really kind of squishy object. It is really a kind of composite of many different resources that exist in the network.
00:18:23.710 - 00:19:18.894, Speaker A: So that's like network bandwidth, network storage, computation. There's actually a couple of different flavors of storage that are included there. And basically those are all kind of combined in a somewhat magical way to create a single unit gas. And any computation will utilize gas. So to perform a transfer in Ethereum, it costs x amount of gas. However, what you pay in Ethereum is not gas, it is eth, right? You pay eth to transact on the network. And so there needs to be an exchange rate between gas and e.
00:19:18.894 - 00:20:37.480, Speaker A: So this is what's called the gas price. And this is the core variable in EIP 1509, as well as the former b market in Ethereum. Basically, where Ethereum started was by copying bitcoin one to one with this one kind of change with the introduction of gas. And then as the network kind of was sufficiently utilized, we kind of discovered additional dynamics, like emergent behavior, which a lot of it has to do with the applications that are built on top. And it was kind of one of the things that if you were transacting on the Ethereum network, you would realize is that oftentimes. So three years ago, if you're trying to use the Ethereum network, you'd submit a transaction and you'd be kind of like guided by metamask. You'd submit it, and then you'd wait like 10 minutes, and you'd just be kind of in this limbo place where you don't know what's going on.
00:20:38.030 - 00:20:39.270, Speaker B: It was horrible.
00:20:39.430 - 00:21:34.406, Speaker A: It's just out there somewhere. Is it ever going to land? And then there was like an advanced menu where you could resubmit with a different nonce in order to kind of override. But then you didn't know if your first transaction was going to make it in before the other. Just really just head scratching. And it was terrible ux, it just did not feel good. It was clearly not the future of finance. And so that was really the core issue that EIP 1559 was trying to solve, was giving users additional certainty that they were going to make it in the block within a reasonable amount of time, and being able to select a price that was just, okay, this is what it costs.
00:21:34.406 - 00:21:43.200, Speaker A: I can read it off the network. It's telling me this. If I submit this, I think I'm going to get in the next block or two blocks, and that's sufficient for me.
00:21:44.530 - 00:22:38.782, Speaker B: I just want to underscore that for folks who might not have been around or transacting on chain or using Ethereum three years ago, like just exactly how bad it was. I know you just kind of gave this example, but yeah, you would log on, you sort of have your metamask, and you want to trade something on uniswap. And there was a mechanism which is basically like a first price auction where you had to select how much gas you wanted to pay, essentially, and you got no guidance, right. Usually the way that this would work in practice is at least this was what it was for me when I was trying to do my first swaps, is I talked to a friend, I was like, hey, how much gas should I be giving? And someone would tell me something and I would just put that much gas, that's such a hilariously bad user experience, because you had no information about whether or not that was good or bad. There was real surges in demand, wherein sometimes you could pay x amount of gas and it would actually work. Sometimes it just wouldn't work. You'd have no idea why.
00:22:38.782 - 00:23:24.654, Speaker B: You were paying an enormous amount in gas fees for transactions that weren't even landing. And so I think that idea of copy pasting the mechanism that administered the fee market and priced resources from bitcoin to ethereum is the thing to underline here. So obviously, ethereum has a very different value proposition. It's a general smart contracting platform. There's much more that you can do with it, but it introduces a very difficult pricing and optimization problem around resources that bitcoin doesn't necessarily have. So we had kind of a first whack at the apple with our first price auction that didn't really work as a mechanism. And to your point, Sam, I think in when was probably, I mean, I know you were involved, but 2020 sort of time frame said, hey, we need a major user experience.
00:23:24.654 - 00:24:01.050, Speaker B: Update the UX. Just to again underscore that was the main driver for why we needed 1559. So walk us through, I think people, when they think about 1559 today would be like, yeah, the token burn and ultrasound money, right? That's what people sort of think about. But walk us through what were some of the early conversations around Ux in 1559. And I got to shout out Tim Roughgarden, who's basically holding up the entire burden of producing content around fee markets on his shoulders here. But walk us through kind of the innovations, like the three different innovations, I suppose, or features that 1559 introduced.
00:24:01.870 - 00:25:06.778, Speaker A: Yeah, just before that. I feel like it is worth mentioning that because Ethereum also introduced the full programmability, what that also created was state contention in a way that bitcoin did not have. So this is kind of adjacent to fees. But historically, basically, the network started getting used more and more. And this problem of waiting for fees was exacerbated by what were called priority gas auctions. And when there was an NFT drop or someone was using a Dex or whatever, basically this is mev, like early mev, the user experience would just degrade entirely. So the way that validators would, or miners at the time would select transactions would be based on the fee.
00:25:06.778 - 00:25:32.854, Speaker A: They would get the fee, and the mem pool would just be flooded with these iterative bids that were for trading on dexes specifically. And it would just mean that a normal user would have no idea what's going on and just be kind of waiting there for minutes, who knows how long.
00:25:32.972 - 00:26:28.934, Speaker C: Yeah, just one first point that I think it points out, like a very interesting thing where there's kind of like two things fees do. Like the first is guaranteeing inclusion to some extent. And the other thing is also kind of guarantee priority for state. And so I personally think it's very tricky to make the same fee mechanism do both things, like kind of optimizing for one, necessarily almost degrades the experience for the other. If you kind of design your fees in a way where people can express very fine grained preferences over I want exactly like the third transaction in the block or something, or something like this, then it makes the people who are just kind of making bids or submitting fees, I just want to express, I want to get inside of a block kind of tricky to interpret what else is happening that same block. For example, if four people are submitting, I only want to be included like only in the third spot, and those are all the fees there. Then, as a user who just wants to get inclusion, if I see all those fees, I now have to interpret, oh, that's not actually four transactions taking up block space.
00:26:28.934 - 00:27:27.494, Speaker C: Maybe it's only one that the block producer will include or something. And so I think that's kind of why on the Ethereum side, we've seen this part of these move off chain for the most part of kind of, this is what's been happening with PBS and kind of builders and proposers doing all this type of stuff is basically one of like the early goals of flashbots is to just make this kind of auctions for state contention happen off chain, let the femix in itself kind of only happen, or only kind of worry about inclusion. And so I think that is kind of to start talking about yip one five nine. That is kind of the guarantee it gives you. It doesn't give you any kind of guarantee really over. Even though there are ways to access priority freeze, there's no kind of explicit guarantee that, oh, if you submit a much higher fee, you're going to get higher in the block. I think when I'm thinking about fees, there's kind of two main important properties of the first one kind of in academic literature we call DSIC, which basically stands for dominance strategy incentive compatible.
00:27:27.494 - 00:28:16.662, Speaker C: And this basically says, from a user's point of view, if they value a transaction getting included at, say, x dollars, then they can simply tell the mechanism, I'm willing to pay up to x dollars for this transaction and game. Theoretically, that's the best they can do. And that doesn't mean they'll always be charged x dollars, they'll actually be charged much less usually. It just basically means that it's very easy for the user to interact with the protocol from a game theory point of view. And so in this prior world, where we effectively had these first price auctions, kind of happening. This wasn't the case. From the game theory perspective, from a user, you're kind of trying to do this calculus in your head of, oh, I don't want to pay that much, but maybe I won't get included, so maybe I'll pay a bit more and kind of like work out for yourself what the minimum amount you're kind of willing to take a risk on is for kind of how much money you might save by not bidding too high.
00:28:16.662 - 00:29:15.854, Speaker C: And so kind of one primary goal of EIP one five of nine is that shouldn't be the case. The kind of, you see this base fee, you place that base fee, you should basically get included. There's no game theory's part. The other important part is that what was previously called MMiC, and has been called kind of mic, and I've seen called BPIC in a recent paper of mine, is basically saying that the block producer, the person kind of running this mechanism, should have their incentives aligned to run this mechanism correctly. It's all well and good to have this kind of very nice mechanism that from a user's point of view looks great. But if the person running the mechanism, in this case for Ethereum, is the person constructing the blocks, the proposal gets more messy these days. But kind of going back to 1559, this person introduced at least kind of the miner creating the block if they aren't incentivized to actually follow the protocol as stated, and if they start kind of messing with the game through the mechanism, kind of all the guarantees can break down.
00:29:15.854 - 00:30:37.682, Speaker C: So that's the second thing that's also very important for the person running the mechanism to actually want to run the mechanism in the proper way. And then there is also kind of a third goal, vap one five of nine, which is called oca proofness, which stands for off chain agreement kind of proofness. And the idea here is that if your mechanism is kind of doing this very suboptimal stuff, like kind of these first two properties, you can trivially guarantee in some kind of weird mechanisms of say like, oh, we'll always randomly select what transactions get included, kind of like this kind of trivial stuff to obviously be really bad kind of. This third property says basically that there should be no way for the people participating in the mechanism in this case would be kind of the users and the block producer to basically just do something else off chain, make some agreement off chain and say, we'll just post all those bids on chain, or they'll post some different bids on chain. But in reality, kind of we'll just guarantee this allocation that's been kind of given off chain. And so it's kind of like a form of collusion, proofness of saying there shouldn't be ways for groups, people to kind of collude off chain and through some tricky way bypass the mechanism. It turns out with these three constraints, that eip one five nine is kind of almost the best you can do in this setting.
00:30:37.682 - 00:30:49.340, Speaker C: And kind of, it actually manages to do a very good job of kind of targeting all three of these concerns and making a feasible mechanism that kind of gets all the properties you'd want.
00:30:50.510 - 00:32:01.378, Speaker B: Yeah. So just to sum up, basically when you're designing one of these mechanisms, you're doing it in an extremely adversarial environment, and there are all these game theory considerations that you have to take into account when you're designing it to make sure that it doesn't get abused in various ways. To summarize, and I'll turn it over to you here, Sam, the basic components, from how I understand 1559, is the introduction of a base fee, right? So instead of before, where you had to guess the amount of gas, you were just told in your meta, like right now, if you trade on Ethereum, you're told this is what the base fee is going to be. That base fee, one of the big changes of 1559 as well is you made blocks dynamic in size, right? So there's kind of a target and an actual amount of gas. The actual is twice the amount that the target is. And so basically what you get with this sort of dynamically adjusting base fee is you get an on chain sort of indicator for demand for block space, which is also extremely useful. And then finally what you have is a sort of first price auction that's layered on top of that so that you can still express this preference of like, I want to get included first.
00:32:01.378 - 00:33:16.166, Speaker B: And the other extremely important components that we'll talk quite a bit about, because I feel like it co opted the narrative a little bit, is this idea of the burn. So the burn, which I think now has been sort of understood as this like, ultrasound money revamping of Ethereum's tokenomics, it was actually to prevent this exploit and make it game theory compatible, which is basically that, let's say if the amount of gas was going to be $90, right, $90 equivalent in Gui, what you could do very easily is to create some sort of off chain agreement between the miner at the time, I guess now a validator and whoever's going to pay and said, look, I know that I'm being quoted on chain $90 equivalent here, but I really want to pay $60. So you just rebate me the $30. And so by burning that fee instead, what you actually do is like the fee has got to be burned, so there's really no reason to do it off chain. Now I would say, interestingly, I think to make this, I can't remember which game theory component compatible, but the only thing that it dictates would be that the current miner of the block doesn't get the payment. So there were talks in 1559 to pay the next minor validator or something like that. We didn't have to go down this burn route.
00:33:16.166 - 00:33:27.486, Speaker B: That was just one way to make it compatible. But it is interesting because that's what we ended up settling on. Yeah, I don't know, Sam, if you had anything to add there, that was.
00:33:27.508 - 00:34:57.910, Speaker A: A great, really, really well elaborated. Mike. Yeah, the burn is just like a direct consequence of this desire to have a base fee. You don't want an off chain agreement because it doesn't allow you to have this property where you can read off an accurate measure of demand pricing. And so you really need to have the primary market exist on chain so that the burn prevents the off chain agreement. The market is now on chain, and now you can use the base fee as an accurate representation to kind of compute the price to be included in the next block. Yeah, so like you were saying, these three components kind of like work in harmony to allow you to have both equilibrium behavior that has good ux and predictability and consistency, and prevents some of the adversarial behavior where there would be off chain agreements or mispricing that would kind of degrade the quality of the mechanism.
00:34:57.990 - 00:35:29.554, Speaker B: All right, everyone, we will be back to the program in just a moment. But before we do, I want to share something that blockworks has been cooking up for these last couple of months. March of this coming year in London, Blockworks is hosting Das London, the largest institutionally focused conference in all of crypto. We are gathering 1200 of the world's largest asset managers. So think tradfi, macro funds, crypto native funds, big allocators and financial institutions. So banks, payment processors, et cetera, all in one spot. It's very rare to get the likes of Goldman, JPMorgan, zero, 72, whatever, all in one room, so you can know what the big money is doing.
00:35:29.554 - 00:35:54.442, Speaker B: We're diving into the themes that they care about. So we're talking about the intersection of macro and crypto, where we are in the cycle real world assets. So everything from stablecoins to onchain treasuries to tokenized assets, it's going to be a blast. But the other reason you really want to go is London, baby. Center of the world at one point. You got pub culture, you got fish and chips, great beer, it's going to be a blast. So because you're such great listeners to bell curve, there's a code, bell 20, that's going to get you 20% off.
00:35:54.442 - 00:36:37.754, Speaker B: So click the link at the bottom of this episode, it'll take you right over to the homepage. You'll see all of our speakers and use Bell 20 for 20% off. Ticket prices are going up soon. Make sure you go use that code. I will see you in sunny London town in March 1. Of the interesting things that I feel like, I'm honestly surprised that it ended up getting passed with this was the idea of burning revenue to miners, which at the time must have seemed just really funny because that was their entire revenue source. And I went back and listened to a couple of the Tim Roughgarden episodes that he produced and he said, actually what people really wanted was like some sort of studies to make sure that this mechanism is compatible and that all their revenue isn't going to go away.
00:36:37.754 - 00:37:00.740, Speaker B: And I don't have these stats offhand, but clearly ethereum miners and proposers have done extremely well in the post 1559 era, and that's from increasingly the desire to bid for state, where there's quite a bit of contention. So we're starting to get into Mev land. But, yeah, it's just very interesting that that passed, frankly, looking back.
00:37:01.350 - 00:38:01.110, Speaker A: Totally. So I was in this very early group chat that was talking about vip one, five nine, and for a year and a half, it was just completely hopeless. It was like, we're doing this, talking about this mechanism, how we're going to test it, whatever, and everyone's just like, yeah, this is an uphill battle. One of the things that. One of the kind of social dynamics that was really useful here, I guess, in getting it passed, was the plan was for the Ethereum network to fire all miners eventually. So the ultimate responsibility really lied with a set of participants that didn't exist yet, who didn't really have a voice in the decision. Miners were still pissed, but it was kind of tolerated, particularly because Mev revenue was popping.
00:38:03.450 - 00:38:47.554, Speaker B: It's just an interesting. I completely forgot about that dynamic that, yeah, Ethereum was about to fire its miners transition to proof of stake, which makes it in some ways easier, but also in some ways even more complicated because you're dealing with this. And that is, I think when it comes to fee markets wide, so it's necessary to upgrade at times, but so difficult because it's just a redistribution of value that the system is ultimately creating, even if it's a Ux upgrade for all. One thing that's also interesting that maybe I just point out and would love to get your guys response to is even in real time, if you go back, I don't know if there are other nerds like me. I like to go back and listen to podcast episodes from previous periods of time. It's just very interesting to see how people were thinking about an idea and how it might have changed over time. It gives you good views into the zeitgeist of different eras.
00:38:47.554 - 00:39:20.094, Speaker B: And you can go back and listen to early 1559 episodes and they talk about it from this Ux upgrade perspective. And it was, hey, this is unusable. This would be really great for the users. Yada yada. And then I think as the burn mechanism became the preferred mechanism for prevent making it game theory compatible, people started to talk less about the Ux part and more about the burn, and it started to shift into this discussion of tokenomics and ultrasound money. And the narrative was sort of rewritten in real time. And you can go back and listen to podcasts over the.
00:39:20.094 - 00:39:43.880, Speaker B: This happened over about a six month time period, and it's really fascinating. And I would love to get from your guys sense, like, how much do you agree with that sort of narrative in the current moment in time? Is that ultimately a good thing for Ethereum to be talking about it as a revamp of Tokenomics? Or in your mind, is this just, this was ultimately a UX and a fee market change, and we kind of lost the message a little bit.
00:39:44.730 - 00:40:11.034, Speaker C: Yeah. At least for me, I think of it mainly as a fee market change and kind of the impact it has in the actual long term. Tokenomics isn't even kind of well defined. There's different instantiations of how this could play out where it's not actually necessarily being deflationary. It's just like kind of how the parameters have played out over time. This is what's happened. If the demand goes down, then it's still inflationary.
00:40:11.034 - 00:40:34.440, Speaker C: So I think it's like in the kind of short run, just designing this mechanism, at least personally, mainly like a UX thing, mainly just like get the game theory incentives really right to make this like a really robust mechanism, kind of just block by block by block, and then long term dynamics are always really hard to predict, and I think narratives change and people care about different things. But I definitely view it as more of a game theory ux thing than a tokenomics thing.
00:40:35.450 - 00:41:32.634, Speaker A: Yeah, I can add a couple of notes on this. There was some discussion of sending the revenue to public goods dow, and that was batted down because it was thought that there were certain actors who thought that that was going to be just a whole kind of corruptible partisan entity. So it kind of ruined the credible neutrality of the system in cosmos. People are just kind of do whatever. So a lot of the talk is about like, yeah, let's put it into a treasury and do something with it. I believe near also does they have eap one five of nine, and they burn half of it and put half of it into a treasury. So there's like a lot of different flavors to this.
00:41:32.634 - 00:42:41.166, Speaker A: You could also distribute it evenly among all validators. That's an option, although there's some computational constraints around that. So yeah, there's some interesting things that you could do with regard to the deflationary aspect. Yeah, it certainly just came out of nowhere at the time. I can't say one of the things that was nice about EIP one five nine is like when you contrast it with bitcoin, you could imagine validators actually having a lot more certainty around their revenues because you're getting it from the inflation rather than this spiky, inconsistent, probably kind of hard to model fee intake. So that was good. But the actual protocol using this as a way to decrease supply, I don't know.
00:42:41.166 - 00:43:21.840, Speaker A: I'm not as married to that concept, if I'm being honest. This seems to be kind of lost. People aren't actually talking about the issuance policy of Ethereum at all. I don't think many people could even reel off what that is, but that is the dominant determinant of the amount of ETH in circulation. So you kind of want like a more holistic view of how ETH is created and destroyed together.
00:43:24.450 - 00:43:53.334, Speaker B: Yeah. I don't want to go too far off on this, but I do think that this topic is going to reenter the Vogue in general this year. I actually just came off of a predictions episode. I don't mean this to sound like it is an attacking sort of way. I've never been a fan of the ultrasound money narrative. I actually think ETh gets a new narrative. This year was a prediction, and that doesn't have to be a bad thing.
00:43:53.334 - 00:44:08.810, Speaker B: By the way, bitcoin has gotten many narratives over the years. I actually think it's a sign of strength. Right. Ultimately, we've invented a new commodity, which is block space, and people are going to try to jam it into a whole bunch of different things. I've always thought it was like a little. We read a little too much into like, is this money? Or a like. It's just useful.
00:44:08.810 - 00:45:20.530, Speaker B: But I do think that ETH gets maybe a new narrative this year around ultrasound money. I want to move on to Solana, and Solana is obviously a much newer blockchain than certainly bitcoin and Ethereum as well. It has a very different construction, both in terms of how it thinks about validator costs and hardware requirements, the role of the validator, the way they come to consensus as opposed to continuous versus discrete block building, and have kind of an entirely different north star. And I think one of the upcoming challenges is, I think the Solana community is generally starting to think about maybe to confront the idea that the way that they price resources internally, their fee market is not at its end state, and that there needs to be an improvement. And it's starting to heat up as kind of a spicy issue within the Solana community. So, Pranav, can you give us an overview, maybe just for folks who might be a little bit less familiar with how Solana works under the hood? No need to go super in the weeds, but just a little bit about how Solana is different from Ethereum, and then give us a state of the overview of the fee markets today and where it might be broken.
00:45:20.870 - 00:46:41.114, Speaker C: Yeah, so I think the main relevant differences between and ethereum in terms of fees is the first thing is that you're forced to declare kind of access lists upfront for every transaction in Solana, you have to list kind of every account that transaction might interact with. And if the transaction doesn't interact, or if the transaction tries to interact with an account that's not as part of that list, then it will be invalid. And the reason for that is basically that Solana uses a parallel execution environment compared to Ethereum's single kind of threaded execution environment. And so kind of in order for Solana to process transactions in parallel, it has to make sure it's kind of creating conflicts between these transactions that's processing at the same time. And the way Solana decides to go about this is that it uses these account lists as kind of a safety measure of saying that if two transactions are being processed at the same time, then they better not have overlapping account lists. And then you kind of get these safety guarantees and execution. And so kind of what that means from a fee perspective is that when transactions are getting included, they're not kind of only bound by the fee the kind of user submits, they're also bound by this account list, basically.
00:46:41.114 - 00:47:41.578, Speaker C: So in an Ethereum world, we're kind of, if your transaction pays the base fee, they're spaced in the block, it can be included. That's not necessarily true in Solana, in the case that if there's too much kind of contention on certain accounts that you might want to interact with, even if you're paying kind of their base fee, you might still not get included. And I guess one other detail is that whereas Ethereum has a base fee that's basically kind of charging you per kind of gas unit you're using, in Solana, they call gas cu, but there's not a similar thing as it's a base fee per cu. And so there's kind of just a fixed base fee per the amount of signatures a transaction verifies. The idea being that kind of this signature verification is kind of one of the costliest overheads of actually executing a transaction. So charging for just that is kind of a good proxy. This has some unintended side effects, which I think is kind of part of the reason the community is kind of discussing ways to kind of build upon the fee mechanism.
00:47:41.578 - 00:48:23.398, Speaker C: But kind of just like at a very high level, the way the fee mechanism works today is that there kind of just is a static fixed space fee. So it's also not dynamic like Ethereum's is. It's not kind of shifting up and down based off of current demand. It's kind of a fixed fee per signature your transaction verifies if you pay this kind of, that's all you need to be considered valid. And then there is still an optional priority fee per c unit you use. And so in times of contention, users might decide to actually utilize this kind of priority fee to have a higher chance of being included, to kind of incentivize the person building the block to pick up their transaction. And so at a high level, the fee mechanism is actually very simple in that sense.
00:48:23.398 - 00:49:12.362, Speaker C: If it's only doing these two things, it only consists of a static base fee that's not changing, pushing your verification, and an optional priority fee per cu that you use. I think the tricky thing is kind of some of the things you mentioned about how someone actually builds blocks in a continuous manner and in a parallel manner, and so kind of, to start with, some of the initial constraints come from building in a parallel manner in order to actually make sure that every block is kind of full. Utilizing the parallelization, Solana has an additional constraint from just kind of the total amount of Cu a block uses to an additional constraint on the total amount of Cu any account can actually use. So for some concrete numbers, kind of every sonic block is 48 million cu. And they say no account can have more than 12 million cu kind of use it in a block.
00:49:12.426 - 00:49:12.990, Speaker A: Right.
00:49:13.140 - 00:50:30.962, Speaker C: And so the idea being that sonic kind of expects its value to have at least four threads to be used for execution. And so by kind of capping out any individual count at this kind of one fourth of the total block space, kind of to some extent guarantee that you can still execute this full block in parallel. And not, you can imagine some kind of very adversarial blocks where if every transaction was interacting with the exact same piece of state, it might have to be processed serially and you kind of lose all these benefits of parallelization. And so that's why I still want to add some of these different constraints on kind of different accounts, and not just have only kind of a little block space constraint, but this then has some effects on fees. And so to one extent it's kind of helpful and that it's kind of what causes this phenomenon of local fee markets that kind of sana has discussed before kind of informally, in that when a validator is solving their optimal block packing problem, since they have to respect these additional constraints on per accounts, for certain accounts like say for an tea drop or something, if this account is getting tons of hits, maybe above its 12 million limit, then the kind of person building that block is going to start wanting higher fees to kind of get in the queue for that account compared to the rest of the block. Maybe that's not as contentious. Maybe it's just kind of payments and transfers back and forth.
00:50:30.962 - 00:51:19.286, Speaker C: So there actually is ample block space there where there's not as much contention, and then users don't need to pay the same kind of priority fee. And so I'd say kind of the way it's implemented today is a bit ad hoc and kind of, kind of just relies on the validator or the person building the block, kind of following these vague incentives to solve the block packing problem somewhat optimally, to kind of infer these prices. I think there's ways you can improve on how you can do this to make kind of a more explicit market to some extent. Like kind of how the same way, kind of vip 1559 says here's kind of like a base fee that you can pay this, you can definitely get in. That's not really the case in sonic because of these kind of accounts that might be more less contentious. And you can imagine different models that say, here is actually an explicit fee for certain accounts. And if you pay this fee for this account, you'll definitely get in.
00:51:19.286 - 00:51:44.400, Speaker C: And here's this menu of fees that you can add or choose or pick from, basically depending on what accounts you might want to interact with. And so basically, just the fact that kind of this thing is happening, the thought has to work in a parallel execution environment, makes this whole problem. How do you allocate block space a lot more complicated and in turn has effects on the fee market. That is a big reason why the community is kind of looking to see if there's ways we can improve upon the current state.
00:51:46.370 - 00:52:32.366, Speaker B: Yeah, I would say I've got a lot more to dive in there. But for folks, folks might be, if they're not as familiar with some of the mechanisms of Solana, that spam is a massive problem. Right. This is the sort of, okay, if you don't have a more sort of granular and restrictive policy for pricing your compute, you lower the fee, then ultimately when you're going to get is a lot of spam. So for the last two years, what Solana has spent their time doing is trying to design a system where you can keep the fees low, but still get all the benefits of an extremely fast blow. So that's where you have things like local fee markets, which are, because you have to specify state upfront, then a bunch of the transactions that aren't touching contested state can kind of just go through in their regular cheap way. But you could almost imagine sort of mini auctions that are happening.
00:52:32.366 - 00:52:39.070, Speaker B: Time for those contested pieces of state. But as you were alluding to. Oh, sorry. Go Sam.
00:52:39.810 - 00:54:04.860, Speaker A: I just want to interject one little thing about spam, which I think is missed sometimes, but ends up being kind of crucial, which is we kind of listed out a number of resources that the network provisions, and in those were block space itself, kind of inclusion and bandwidth. And these are actually separate resources. They're kind of like related, but separate. And so performing a DDoS attack on a specific validator costs nothing actually, in any blockchain, really, it just costs whatever cost the botnet cost, because you can ping their RPC with anything. So the way that validators typically try to defend against that is by having some degree of redundancy or like setups in multiple locations using caching and there's like a number of different defensive measures. There's also spam for inclusion in the block and access to state. And this is what Solana has really been laser focused on.
00:54:04.860 - 00:54:22.960, Speaker A: But it's just important to kind of disentangle these two, because they can't be solved by the same mechanism. They actually need to be treated independently and priced as such.
00:54:23.330 - 00:55:23.460, Speaker C: I think also, one interesting thing sauna does on kind of the first of those tax and network club, it actually does require. I'm not as familiar with kind of the network details of sauna, but they do require kind of rpcs to stake a certain amount to some extent, or that details aren't quite like that, but basically validators kind of distribute transactions based off kind of stake weighted, or the network topology of how networks kind of propagate through different nodes. Nodes with kind of higher stakes get more messages. And so if you're like a fully unstaked RPC or something, you can't actually spam a validator, because a validator might only open say like 5% or 10% of their kind of bandwidth towards listening to you versus listening to the other people who actually have staked to some extent. So I think there's a different mechanism Salana uses to kind of use some economics around staking to get around the spam problem. But yeah, there definitely is a separate concern of kind of mev type spam of people looking at the back of a block or something.
00:55:24.070 - 00:55:57.994, Speaker B: That's interesting. I want to just bookmark that exact concept and that will sort of be not exactly related, but you can squint at it and see something very similar to this idea of fee credits. Actually, that'll come later. All right, walk us through. There's a lot of sort of agitation around builders to revamp fee markets within Solana. And we talked about how it doesn't necessarily make sense. And one of the ways that Ethereum, I don't know if it's fair to call aired, it was always going to be trial and error.
00:55:57.994 - 00:56:32.986, Speaker B: But when there was a one to one copy of bitcoin's fee market, to Ethereum's fee market, it didn't work, because the blockchain had a very different vision for what it wanted to be. Proof of work versus proof of stake, all this stuff. Right, so walk us through kind of what are the key pain points from the perspective of builders and entrepreneurs on the salana blockchain? And then how can we start to solve that? Which parts of 1559 do we want to borrow, if any? Which parts would break or be less applicable and kind of like guide us through towards solution land a little bit.
00:56:33.168 - 00:57:16.198, Speaker C: So I think one key part of how the markets end up looking like from UX perspective is how hard they make the block production problem. And so this also the difference between the fact that sauna has 400 milliseconds versus Ethereum. You have 12 seconds to build a block for Ethereum. When you're building a block as a block producer, and you just want to kind of include every transaction that hits your base fee and kind of the highest number of those, this isn't too hard algorithmically. You can kind of just say, okay, I have until maybe 8 seconds in the slot to finally propose something. Let me just listen here, I'll sort everything, I'm just tracking this one compute number. As long as I'm below the maximum number it's fine.
00:57:16.198 - 00:58:17.498, Speaker C: And so it makes kind of just adhering to the EFP one five nine mechanism not too hard and kind of in something compatible and all these kind of nice things on Salana, that's not the case at all, just because of this kind of. So first of all, it's 400 milliseconds with a much higher kind of throughput. So you're having to just pack transactions way more quickly. And the second thing is you do have to respect this kind of like parallel execution environment. And so what that means is the block production actually has this thing, the scheduler basically, that's kind of baked into the client today, but you can imagine different ways to do this. And so the scheduler basically has to listen to incoming transactions and then kind of just pack them immediately and kind of maintain some state of what accounts are currently locked because transactions being processed, writing to those accounts, what transactions aren't locked, use different kind of priority queues and different types of on transactions touching different accounts and making sure they get scheduled. And this is all happening very fast.
00:58:17.498 - 00:59:16.160, Speaker C: And so you can imagine sometimes things fall through the cracks of somebody sets a very high fee. But kind of the scheduler was like in between cycles and kind of blocked that transaction for some reason, because some other transaction came in just half a second before that's being processed now. Just has to wait a bit. So things like this can happen just because it's more technically kind of demanding to build these blocks and it has to happen much quicker. And so the same kind of guarantees that you might get from just simply saying have a base fee, stick a priority fee on it. And the principality makes money to definitely include it a bit tricky to reason about on Solana, I think especially this local fee market thing definitely makes things harder too. You can't actually just say like, look at this base fee, pay it and get in you as a person kind of submitting transaction, whether that's like a DaP developer kind of figuring out how they should structure a smart contract, or like a user kind of submitting some type of trade, you have to kind of be cognizant of, hey, look at the network right now.
00:59:16.160 - 00:59:57.286, Speaker C: There's not a team happening on this exchange, or maybe there's some other thing happening. People are very active in this kind of local state. I better put some priority fee on it to make sure it gets through. And I think kind of the way that just because of how hard the underlying block production problem is, the way that production problem actually respects how much you're putting on fees is not super great. So kind of in sonic world, we're almost like in Ethereum in the pre 1559 world, where people are kind of having to guess in the first price auction sense of how much priority fee really should I put to actually get it included. And one nice thing is kind of the absolute amount of these fees in dollar terms is way lower. So it's not as much of a concern.
00:59:57.286 - 01:01:07.730, Speaker C: It's not like, oh, do I have to pay $10 or $20 for a swap? It's like, oh, maybe, do I have to pay like one 10th of a cent versus two tenths of a cent? And so that's why it's not quite as painful and that as a user may be usual until kind of like Max click this priority fee. But I think we still haven't seen kind of all the different kind of ecosystem players in Solana in terms of wallets and different dapps to this extent, kind of fully kind of figure out how they're dealing with priority fees. I think there's some kind of default set which influences this kind of behavior of if everybody else is setting these relatively low priority fees, then I also have to set that much of a higher priority fee. But you can imagine games start to emerge once everybody starts really fully playing the first price auction, then things start to break down. And so I think things have generally worked fine with Ux annoyances. But yeah, it's part of the reason I think the community is trying to revamp these is to kind of foresee these problems that might come ahead with people starting to play various games with priority fees and different ways to kind of abuse the fact that the block production problem is harder to get an advantage and to figure out how we can make mechanisms ahead of time that kind of can stop some of these concerns.
01:01:11.110 - 01:01:51.982, Speaker B: So do you get the sense that Sam and I talked a little bit about this actually before the episode, but in 1559, which now I think with the benefit of hindsight, is one of the most successful upgrades to a live major blockchain in history, there was a period of kind of despondence, right. For a while in that group chat. Right, Sam, you said it got pretty bleak there. And there was even Batolik, right, himself, was like, I don't think we're ever going to get this passed. This is just way too know. That's, that's one of the challenges of know. The whole value proposition of a blockchain is that it's supposed to be, if not immutable, very difficult to change, like the constitution of the United States.
01:01:51.982 - 01:02:23.354, Speaker B: The value is that it's changeable. But the threshold, the activation threshold is very high. So what's your sense, Pranav? Maybe on the Solana front, and then we can get into some other sort of cool areas where people are like multi dimensional fee markets, things like, like what is your sense of the urgency? Know, rejiggering the fee market? Like how likely are we to get a major upgrade? Is it going to happen next year, years from now? I know that's a really difficult sort of leading question, but what's your sense.
01:02:23.392 - 01:02:35.840, Speaker A: Of the priority when something goes wrong, when there is a delay? I'd be interested to know the material impact of that. Are you waiting a second now? What does that look like?
01:02:36.450 - 01:03:49.218, Speaker C: Yeah, so just to answer the delay part first, quickly, I think it depends on exactly what type of adapter you're using because it's also up to kind of how your wallet or something deals with this, of like, does it just send it and it fails and nothing happens? Does it actually somewhat tell you to resend these things? Honestly, I'm not that plugged into the execution layer details of how different apps deal with it. So I think for some people it's annoying. For some people it gets fixed and it's kind of fine. I think it's definitely like a pain point, but it doesn't make the chain unusable by any means. It just makes certain dapps kind of hard to deal with at certain times in terms of the urgency of kind of upgrading the fee market, I think as of the past few months, there's been kind of a rise in the community thinking this is more of an issue and kind of talking and discussing kind of in their discord and figuring out how we can kind of update this stuff. Honestly, timelines, I not very sure. I personally focus up from a more academic angle a lot of times, honestly of kind of just thinking about what are the properties you want? And can we just figure out the vector design really well and then leave implementation up to others.
01:03:49.218 - 01:03:58.760, Speaker C: So that's probably more responding a labs question, but the time span of like a year, a couple of years seems reasonable to me, but really not quite sure.
01:03:59.930 - 01:05:02.138, Speaker B: This is such a funny human thing, but the time that it's easiest to fix this would be right now, today, when the ecosystem is still relatively small and before it's a huge problem. But this is just how human nature works. We're probably just going to have to wait for something to break or for it to become a massive problem, and then the community will come together and fix it. I would say if I had to make a prediction there, I want to expand and maybe use the rest of our time to talk about some cool new ideas around fee markets that haven't necessarily come into practice yet, but they are in the fore, and it feels most obvious to start here around this idea of multidimensional fee markets. And this has been an idea that's been kicked around for a little while. So Vitalik has wrote about the potential for multidimensional 1559, and Tarun recently gave a really great talk. He actually wrote a larger paper with Theo Demondis on the subject as well, of multidimensional fee markets.
01:05:02.138 - 01:05:26.120, Speaker B: And it's basically maybe, Sam, I could poke at you to give us a description of this, because you described gas, like the bundling of these sort of orthogonal resources magically into this one resource called gas. And now people are talking about actually unbundling that and charging more granularly for different resources. So you just give us an overview of what multidimensional fee markets mean.
01:05:26.810 - 01:06:48.798, Speaker A: Yeah, 100% unbundling is exactly the right lens to bring to this. Take storage, for instance. Storage is a resource that is super important to the Ethereum network. So state growth and the amount of storage that the protocol believes that ethereum validators should maintain impacts the block size, the amount of gas, so that it's crucial element to how gas is computed. That happens over this like a timescale of years, decades. We want the Ethereum network to be able to manage its state growth indefinitely. When you're talking about inclusion or like a network resource, it's like an instantaneous resource, and so you need to price the gas abstraction is like a singular object that is trying to incorporate all of these different elements that happen over many different timescales and impact actors in different ways.
01:06:48.798 - 01:08:26.830, Speaker A: So multidimensional fee markets, the main concept is to try to break up the pricing model and say, okay, well, what if we can just more directly pinpoint storage and say, this is what it costs the network to grow state at this rate. And then we can look at networking and say, okay, this is the kind of immediate cost that's induced by demand here. And then we can create a kind of composite value in this kind of more granular, so we can create abstractions over them. And the direction that this paper that you're alluding to, Mike, the multi dimensional femarcus paper, is basically about creating some kind of optimization function across these different allocation schemes in order to kind of best price individual resources. But yeah, one of the important things to take away from this is that from the protocol designer's perspective, there actually is a preference mechanism that's baked into the protocol. In Solana, you actually see this, there's a preference for utilization of all cores at once. And Solana could actually charge for serialized transactions.
01:08:26.830 - 01:09:09.130, Speaker A: The network might actually be able to pull in more revenue or pull in more transaction fees by doing that. But that is kind of not the allocation preference of the protocol. We want to actually push utilization into these port cores at once. So that kind of general direction of identifying specific resources and creating really a more opinionated or a larger space of allocation mechanisms is kind of like the general theme that I would identify.
01:09:11.630 - 01:09:38.580, Speaker B: Yeah. What sort of struck me is if you go back to 1559, what they were optimizing for is a Ux upgrade, but there wasn't much thought to how can we efficiently allocate resources within the network? And this is the multidimensional aspect of it is how can we optimize for using all of our resources in the most efficient way and price as such?
01:09:40.150 - 01:10:48.860, Speaker A: Sorry, just funny anecdote, which is I have heard that many of the Ethereum opcode gas prices are based on Vitalik just basically doing benchmarks on his laptop at the time. And these cannot be recreated because the laptop doesn't exist anymore. And it's very specific to a model of machine with specific configuration. A few of them have been updated over time. There's eips to do this kind of thing, but a lot of this, why is it priced this way? Is just based on this crazy artifact of like, yeah, Vitalik just benchmarked it on his machine and that's what it was, and it's actually kind of the same in cosmos. Dave Woja did a bunch of benchmarking and a lot of the gas pricing. I think Dave and Chris did a bunch of the benchmarking and a lot of that's just kind of stayed because nobody's revised it.
01:10:50.030 - 01:11:39.210, Speaker B: That's an awesome anecdote. I used to be a management consulting or management consultant actually, in a past life, and there's a lot of theory about pricing in general. But what I sort of figured out is most pricing is just and what feels good. That is my very scientific description of how most pricing ends up happening. I don't have it up on, but if you go and listen to the. Watch the Tarun talk on YouTube, I think they have this in the paper as well. But you can actually very clearly see, they show you the picture like a very simplified sort of example where you can imagine a utility function for users, let's just call it arbitrarily, like three, right? And in this block there's two different resources called compute and storage.
01:11:39.210 - 01:12:27.130, Speaker B: And let's say the utility function for whatever action requires the storage versus the compute is very different. And you could imagine gas having to be an average, that the utility isn't necessarily maximized, where if you can price those resources differently, you can actually sort of use those resources more efficiently. This isn't going to make sense until you look at the picture. Go look at the picture. But it's a very interesting problem. And one question that I have for the two of you, and maybe Pranava, I'll start with you first, is it's very interesting you could imagine in an Ethereum context. I don't know how this might work, but just I feel like if you combine the local fee markets on solana with the multi dimensional fee markets, does that unlock some kind of new design space or what is possible to do in a solana context? That might be more difficult.
01:12:27.130 - 01:12:29.626, Speaker B: From an Ethereum context, I would actually.
01:12:29.648 - 01:13:35.600, Speaker C: Say that local fee markets are multidimensional fee markets. And they're kind of just like a different way of saying the same thing of what's really happening with local fee markets is you can imagine that every account is a different resource, basically, and we have to meter account usage basically to get the parallelization properties we want. And in that way, kind of having your transaction be priced not only in terms of how much compute uses, but in particular about what parts of state and what account it's touching is the multidimensional nature of it. I think that's also what makes it a bit harder to get all the incentives right, is that you can imagine two different versions of this multidimensional theme market. And then the first one is where your resources are like really non fungible things like compute, storage bandwidth. There's ways you can rewrite transactions or smart contracts to use these different things in different ratios, but there are certain things that have to go in storage, there are certain things that have to be computed, and you can't get around this. Whereas when your resources are actually just different accounts, that's not quite the same of like this should be something you have to use certain accounts, but you can use accounts much more creatively than you can.
01:13:35.600 - 01:14:30.814, Speaker C: You can manipulate accounts much more creatively than you might be able to manipulate kind of storage. And in some sense, when you only have maybe like say three or four different resources in Ethereum world, maybe that you're doing multidimensional fees over these, just like three base resources, the demand for those resources should be fairly stable. They'll shift over time, and as things happen, you can adjust those prices. But when you go to a kind of per account basis, this looks much harder. And that the demand for just certain parts of state can shift dramatically over the course of a second. When an sq drop happens, all of a sudden there's just one account that has tons and tons of demand on it in a way that's like, you wouldn't really go from like, oh, there's no storage now there's tons of storage. I mean, maybe things like inscriptions or something happen, but generally you wouldn't expect these kind of basic resources to have this massive fluctuation where you might have for accounts.
01:14:30.814 - 01:14:49.690, Speaker C: And so I think kind of sauna has basically already agreed to do multidimensional fees by going down this local fee market route. And the question is, how can they really tune this to be as good as possible when your resources are explicitly every separate account and not these kind of more base level, compute level type resources?
01:14:50.990 - 01:16:16.258, Speaker A: Yeah, that actually sets up this b credits concept quite well if you squint at. It's actually kind of the same thing, but there's really two differences. So this is a concept that some of the osmosis team published on recently, Dave and Alpin from osmosis, and it's really a local fee market where each user has their own fee market, and there is a dynamic allocation scheme or pricing scheme based on specific application behavior. And really the main idea is, okay, I am creating kind of like a non transferable NFT, this is my singular account. I can build up credits by performing certain transactions, and those can be used within the pricing calculation for my specific transaction. So if you want to give specific NFT holders kind of free transactions for a day, you could do that. There's like Black Friday sale.
01:16:16.258 - 01:17:23.366, Speaker A: This is obviously not something that a kind of global smart contract platform would implement. It's very application specific, it's very opinionated, but it is about kind of like tuning the allocation scheme to elicit certain user behavior. So you could imagine actually negative fees, you could say, okay, I get some rebates by performing certain transactions and induce user behavior. That way you can make it so that users don't actually need the gas token. They actually get a free transaction if they meet certain criteria. So there's ways that you can kind of tune this to encourage repeat behavior that may be useful to the application. So the allocation scheme here is like, maybe I want to use the Dex.
01:17:23.366 - 01:17:29.830, Speaker A: And that's really the thing I'm trying to optimize for, is just utilization of the decks, not utilization of the chain.
01:17:29.990 - 01:18:49.222, Speaker B: No, it's really interesting, Sam, because this is why I just think it's so important to pay attention to multiple ecosystems, because you can kind of squint and see everyone's trying to solve very similar problems. And you brought up the idea of a rebate. So one idea actually, this is a sort of controversial, it's getting a lot of attention within the Salana community is SIMD, and the title is program rebatable account write fees or pro fees. And basically the idea is that right now you could basically mandate that there's a fee by writing to a certain, right, locking a certain account, and then the owner of that account can decide to rebate the fee if they want, and they can decide to do that to organic users, but the fee would still be applicable even for failed transactions. So you could punish spam users. So a very similar concept, also very similar to a QoS weighted stake, where basically this is a form of spam prevention, where the Solana network says, hey, I'm only going to open up my bandwidth to other rpcs that have x percentage of stake. You can kind of squint at it and see it's all the same sort of thing, actually, and it's all about maybe to bring it home.
01:18:49.222 - 01:19:47.502, Speaker B: I think one of the other optimization problems that doesn't get talked about enough within the context of fee markets is optimizing for organic fees as opposed to spam type fees. And that's another massive design principle that you can see throughout each of these ecosystems as well. But I find it so interesting, it sort of blurs the line as well. Like, Sam, you and I have talked about this quite a bit in between this kind of spectrum of, right where you have kind of like on Ethereum, like a dap on Ethereum and then a full stack Cosmos app chain. And then maybe in the middle you have the op stack law of chains or whatever they're calling it. And then maybe a sovereign roll up fits somewhere on there that settles down to celestia. And then maybe there's like almost account level sovereignty where if Solana, on a generalized basis wanted to grant more discretion to the owners of accounts and the powers that are afforded to them, it all sort of just exists on this spectrum.
01:19:47.502 - 01:19:48.666, Speaker B: It's super interesting.
01:19:48.848 - 01:20:17.650, Speaker A: Pro fees look a lot like lanes that we've been doing in cosmos. And Ethereum is kind of looking at as well. But I guess pros, as far as I understand, is like a little bit more of a generic solution. And at least how we've been doing it is much more enshrined like, okay, you have a Dex chain. You want your Dex transactions to be here, you want your undelegation transactions to be in this lane.
01:20:19.270 - 01:21:04.530, Speaker B: Well, maybe we could end this. I know we've got like 5 minutes left here before we got to wind down, but Sam, you've been dealing with perhaps the most complex optimization problem within cosmos of many different chains that have different fee markets, many different currencies. I guess in the limited time that you have, can you kind of walk us through any lessons learned and I guess just sort of broad implications of what we're talking? How important is it for different chains or protocols or however you want to define it, to maintain sovereignty over their own fee markets? Are there going to be a million different fee markets across a million currencies? And it's all going to be abstracted. Are we going to have more global solutions? How do you see this sort of evolving?
01:21:05.350 - 01:22:00.894, Speaker A: Yeah, I don't know how I see evolving across all ecosystems, but I can't speak to cosmos. Cosmos is one thing for listeners to know is that obviously cosmos is like a set of independent blockchains, common networking protocol. But each of those blockchains typically has their own staking token, and they use that staking token for fees. And then not only because they're sovereign, they also get to select their own fee mechanism. So in order to abstract across all these things, you need to solve a multi domain payment solution. So you have tokens on one chain. I want to use those to pay tokens to pay a fee on the other chain.
01:22:00.894 - 01:23:12.700, Speaker A: But my tokens aren't on that chain. So there's like, a chicken and egg problem there. And then. Not only that, but the tokens that I have on this chain aren't the required tokens for fee payment on the other chain. So I actually need to do an exchange at the same time. Once you've solved that problem, which Cosmos has not done sufficiently, it's like, a lot of the stuff that I'm working on, it's just figuring out the plumbing of how to make that work. Once you have gotten to that point, then you can say, okay, well, given the exchange rate of x and actually being able to pay in the right domain, what is the pricing scheme? And I need to know how that chain has set up their fee market or how some of the things that I've been trying to think about is like, can we unify these at all? Can we make it so that there is a way for.
01:23:12.700 - 01:24:13.520, Speaker A: You could almost imagine kind of like a free trade zone or something like that, where there's unified mechanism of payment, or I'll let your users pay at this rate, if you let my users pay at this rate, and we can do business together in order to kind of solve this altogether, there's a combination of several different features, technologies that I imagine will be kind of blended together. And a lot of people have been kind of flowing into cosmos recently, which has been really fun. A lot of them are like, damn, this is really complicated. What the hell is going on? But, yeah, we know. And there's kind of, like, solutions in the pipeline. It's kind of amazing that it works at all. Right.
01:24:13.520 - 01:24:22.510, Speaker A: You know, if anybody wants to talk about that more, like, has issues, you should come and chat.
01:24:23.650 - 01:25:04.042, Speaker B: Sam and skip are putting the entire team on their back. So big ups to you, Sam, and what you're doing at skip. Guys, I know in our last couple of minutes, anything that we missed that you wanted to leave listeners with about fee markets, or we can just wind down a huge. This was really fun for me. Sam knows I've been trying to put this together for, like, a month, so this has been great from my perspective. I hope that we maybe added a little bit of nuance to the two camps that tend to talk past each other on fees and just made people think a little bit more critically about it going forward. But Pranav or Sam, you guys are both great.
01:25:04.042 - 01:25:09.326, Speaker B: If folks want to find out more about either the work you're doing or follow you or whatever. What is the best way to do.
01:25:09.348 - 01:25:23.778, Speaker C: That yeah I think for me just twitter basically so just handle is at pgarimity just p and then my last name and yeah I'll be posting papers different thoughts blog post papers in the.
01:25:23.864 - 01:25:53.370, Speaker A: Yeah awesome yeah and same for me if you want to find me on twitter at hxrts. And if you do have some inclination to play around with cosmos, I would recommend visiting IBC bun which is kind of our demo experience which I think at least does a pretty good job of abstracting over many chains, many tokens. So it is doable.
01:25:54.190 - 01:25:55.114, Speaker B: Yeah it does.
01:25:55.152 - 01:25:56.300, Speaker A: Thank you for having me.
01:25:56.850 - 01:26:11.358, Speaker B: You bet guys. This one was a lot of fun. Hope everyone you're full of whatever holiday food you celebrate. Eat full bellies and you get to listen to some nerds talk about fee markets. That's what it's all about all right guys, this is a ton of fun. Thank you both for coming on.
01:26:11.444 - 01:26:11.742, Speaker A: Great.
01:26:11.796 - 01:26:15.360, Speaker C: Thanks having me all.
