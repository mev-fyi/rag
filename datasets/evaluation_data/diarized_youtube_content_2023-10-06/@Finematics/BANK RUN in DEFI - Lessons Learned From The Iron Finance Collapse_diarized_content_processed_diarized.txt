00:00:00.170 - 00:00:50.086, Speaker A: So what was the first large scale bank run in DeFi all about? Why is it so hard to create a working algorithmic stablecoin, and what can we learn from the Ion Finance fiasco? You will find answers to these questions in this video. Before we begin, if you want to learn more about decentralized finance and the technology behind it, make sure you subscribe to my channel, hit the Bell icon and enable all notifications. You can also consider supporting us on Patreon and joining our DeFi community on Discord. Ion Finance initially launched on Binance Smart chain in March 2021 and aimed at creating an ecosystem for a partially collateralized algorithmic stablecoin. As we know, building algorithmic stablecoins is hard. Most projects either completely fail or end up in a no man's land by struggling to maintain their peg to the US. Dollar.
00:00:50.086 - 00:01:25.506, Speaker A: Because of this, building an algorithmic stablecoin has become one of the holy grails in DeFi. Achieving it would clearly revolutionize the DeFi space as we know it today. The current ecosystem relies heavily on stablecoins that come with major trade offs. They maintain the peg to the US. Dollar at the cost of either centralization or capital inefficiency. For example, the custody of USDC or USDT is fully centralized. On the flip side, stablecoins like Dai or Rye require a lot of collateral, which makes them capital inefficient.
00:01:25.506 - 00:02:20.442, Speaker A: Ion Finance tried to address these problems by creating a partially collateralized stablecoin ion. Despite a few hiccups along the road, such as short periods of time when ion unpegged from USD, or when value DeFi exploits affected some of the Ion Finance users, the Protocol kept marching forward. In retrospect. Recovering from these issues most likely built a false level of confidence in the Protocol design as its users thought they were dealing with a battletested project. In May 2021, Ion Finance expanded to polygon and started gaining more and more traction. Total value locked in the Protocol quickly went from millions to billions of dollars, surpassing 2 billion before the final collapse. The value of Titan Protocol's native token on polygon went from ten dollars to sixty four dollars just in the last week, leading to the bank run.
00:02:20.442 - 00:03:16.730, Speaker A: This parabolic growth was mostly driven by extremely high yield farming rewards and subsequent high demand for both the Titan and the ion. Tokens yield. Farmers were able to benefit from around 500% Apr on stablecoin pairs ionusdc and around 1700% Apr on more volatile pairs like Titan matic. To add even more fuel to this parabolic growth, Ion Finance was mentioned by a famous investor, Mark Cuban, in his blog post. This further legitimized the project and brought even more attention to it. On 16 June 2021, the Protocol experienced a massive bank run that crashed the Titan price to zero and resulted in thousands of people experiencing major financial losses. Before we start unfolding all of the events that led to the collapse of Ion Finance, let's try to understand how the Protocol was built.
00:03:16.730 - 00:04:28.690, Speaker A: It's worth noting that reviewing the design of projects, including the ones that failed, is important, as it allows us to better understand what works and what doesn't work in DeFi. It also makes it easier to assess new protocols that very often reuse a lot of elements of the already existing systems. The ion finance protocol was designed around three types of tokens its own partially collateralized stablecoin ion that should maintain a soft peg to the US. Dollar its own token titan on polygon and steel on BSc, an established stablecoin used as collateral USDC on polygon and BUSD on BSc. The combination of USDC and titan on polygon and busdc and steel on BSc was supposed to allow the protocol to decrease the amount of stablecoin collateral over time and in turn making ion partially collateralized, leading to a greater capital efficiency. The protocol, although using different tokens on polygon and BSc, worked in an analogous way on both platforms. So in order to simplify this video going further, I'm going to skip the BSc tokens BUSD and steel in the explanation.
00:04:28.690 - 00:05:34.630, Speaker A: In order to achieve price stability of the ion token, the protocol introduced a mechanism for minting and redeeming ion that relied on market incentives and arbitraries. Whenever the price of the ion token was less than $1, anyone could purchase it on the open market and redeem it for approximately $1 worth of value paid in a mix of USDC and Titan. Whenever the price of the ion token was greater than $1, anyone could mint new ion tokens for approximately $1 worth of USDC and Titan and sell the freshly minted ion tokens on the open market, driving the price of ion back to $1. To understand the process of minting and redeeming better, we have to introduce the concept of target collateral ratio. TCR and effective collateral ratio ECR. Target collateral ratio is used by the minting function to determine the ratio between USDC and Titan required to mint ion. As an example, let's say the TCR is at 75%.
00:05:34.630 - 00:06:23.122, Speaker A: In this case, 75% of collateral needed to mint ion would come from USDC and 25% would come from Titan. The protocol started at 100% TCR and gradually lowered the TCR. Over time, TCR can increase or decrease depending on the ion price. On one hand, if the time weighted average price of ion is greater than $1, TCR is lowered. On the other hand, if the time weighted average price of ion is less than $1, the TCR is increased. Effective collateral ratio is used by the redeeming mechanism to determine the ratio between USDC and Titan. When redeeming ion, ECR is calculated as current USDC collateral divided by the total ion supply.
00:06:23.122 - 00:07:08.642, Speaker A: If TCR is lower than ECR, the protocol has excess collateral. On the flip side, if TCR is higher than ECR, it means the protocol is under collateralized. As an example, if the ECR is at 75% each time ion is redeemed, the user would get 75% of their collateral back in USDC and 25% in Titan. What is important is that every time someone mints ion, the Titan portion of collateral is burned. If someone redeems ion, new Titan tokens are minted. As we can see, the whole mechanism, although a bit complicated, should work, at least in theory. Now, let's see how the events leading to the collapse of ion finance unfolded.
00:07:08.642 - 00:08:03.222, Speaker A: But before we do this, Phinematics is participating in round ten of Gitcoin grants, where even the smallest contribution matters, thanks to the Quadratic funding mechanism. If you enjoy our videos and would like to support the channel, check out the link in the description box below. Let's get back to the video around 10:00 a.m. UTC on the 16 June 2021, the team behind the protocol noticed that a few larger liquidity providers, aka whales, started removing liquidity from ionusdc and then started selling them Titan to ion. Instead of redeeming ion, they sold it directly to USDC via liquidity pools. This caused the Ion price to unpeg from the value of the US dollar. This, in turn spooked the Titan holders who started selling their Titan, causing the token price to drop from around sixty five dollars to thirty dollars in approximately 2 hours.
00:08:03.222 - 00:08:54.050, Speaker A: The Titan price later came back to $52, and Ion fully recovered its peg. This event, although quite severe, wasn't that unusual considering that the protocol had a history of native tokens sharply dropping in value and ion unpegging for a short period of time. Later on the same day, a few whales started selling again. This time it was different. The market panicked, and users started redeeming ion and selling their Titan in masses. Because of the extremely quick and sharp drop in the Titan price, the time weighted price Oracle used for reporting Titan prices started reporting stale prices that were still higher than the actual market price of Titan. This created a negative feedback loop as the price Oracle was used to determine the number of Titan tokens that have to be printed while redeeming ion.
00:08:54.050 - 00:09:40.242, Speaker A: Because Ion was trading off peg at under $1, the users could buy Ion for, let's say, ninety cents and redeem it for $0.75 in USDC and $0.25 in Titan and sell Titan immediately. This situation created a death spiral for Titan that drove its price to pretty much zero, as the lower the Titan price was, the more Titan tokens would have to be printed to account for the correct amount of redeemed capital. The Titan price, hitting almost zero, exposed another flaw in the protocol users being unable to redeem their Ion tokens. This was later fixed by the team, and users were able to recover around $0.75 worth of USDC collateral from their Ion tokens.
00:09:40.242 - 00:10:51.862, Speaker A: Unfortunately, Titan holders didn't get away with only a 25% haircut and instead took heavy losses. This also included Titan liquidity providers. This is because when one token in a 50 50 liquidity pool goes to zero, the impermanent loss can reach pretty much 100%. Liquidity providers end up losing both tokens in the pool as the nontitan token is sold out for Titan that keeps going lower and lower in value. This situation exposed a major flaw in the ion finance mechanism that resulted in what we can call the first large scale bank run in DeFi. Similarly to banks with fractional reserve systems, when there are not enough funds to cover all depositors at any one time, the ion finance protocol didn't have enough collateral to cover all minted iron, at least not when the Titan tokens used as 25% of the overall collateral became worthless in a matter of minutes. The ion finance fiasco also shows us why DeFi protocols shouldn't fully rely on human coordination, especially when under certain circumstances, incentives work against the protocol.
00:10:51.862 - 00:11:35.580, Speaker A: In theory, if people just stopped selling Titan for a short period of time, the system would recover as it had previously done in the past. In practice, most market participants are driven by making a profit, and the arbitrage opportunity present in the protocol caused them to fully take advantage of this situation. This is also why all DeFi protocols should always account for the worst case scenario. As with most major protocol failures in DeFi, there are always some lessons to be learned. In the case of ion finance, there are a few important takeaways. First of all, we always have to consider what would happen to the protocol in the worst case scenario. This usually involves one of the tokens used in the protocol sharply losing its value.
00:11:35.580 - 00:12:41.498, Speaker A: What happens when the protocol stops expanding and starts contracting? What if the contraction is way quicker than expansion? Another important element of the protocol design that always has to be fully understood is the usage of price oracles. Could they report stale prices or get manipulated by flash loan attacks? If so, what basic protocol mechanisms rely on these oracles, and how would they behave when the oracle is compromised? Next lesson providing liquidity in a pool where at least one asset can drop to zero means that we can lose pretty much all of our capital, even if the second token doesn't lose any value. Another lesson following celebrities and their investments might be risky. With great power comes great responsibility. And unfortunately, even a single mention of a certain protocol or a token can cause people to invest in something they don't fully understand. Don't be that person, and always make sure you do your own due diligence. One good indicator of high risk protocols is extremely high Apr in yield farming.
00:12:41.498 - 00:13:32.222, Speaker A: If something looks too good to be true, there are usually some risks that have to be accounted for. Last but not least, building algorithmic stablecoins is hard. I hope one day we can see a fully functioning algorithmic stablecoin competing in size with USDT or USDC, but this will most likely take a bit of time and hundreds of failed attempts. If you want to become an early adopter of such a coin, it's great. But keep in mind that the numbers are not on your side. So what's next? When it comes to ion finance and algorithmic stablecoins? At the moment, the team behind the protocol is planning on conducting an in depth analysis of the situation in order to understand the circumstances which led to such an outcome. It's hard to say if the team behind Ion Finance will decide to fix the shortcomings of the existing protocol and relaunch it.
00:13:32.222 - 00:14:09.300, Speaker A: Historically, second versions of failed protocols usually don't get nearly as much traction as their original versions. Yam Finance was a good example of such a protocol. After the collapse of Ion Finance, there's still a lot of capital sitting on the sideline looking for other high risk opportunities. It will be interesting to see where this capital goes next. So what do you think about the Ion Finance fiasco? Are you optimistic about the future of Algorithmic stablecoins? Comment down below. And as always, if you enjoyed this video, smash the like button, subscribe to my channel and check out Phinematics Grant on Gitcoin. Thanks for watching.
