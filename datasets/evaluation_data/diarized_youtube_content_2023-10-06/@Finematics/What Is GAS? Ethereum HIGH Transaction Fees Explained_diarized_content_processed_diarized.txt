00:00:00.250 - 00:00:53.870, Speaker A: So what exactly is gas? Why are transaction fees so high at the moment? And what are some of the ways to make the transaction cost lower? You'll find answers to these questions in this video. Before we begin, if you want to learn more about decentralized finance and the technology behind it, make sure you subscribe to my channel, hit the Bell icon and enable all notifications. You can also consider joining us on Patreon and learning even more about DeFi. Let's start with what Gas actually is. Gas is a unit used for measuring the amount of computational effort required to perform specific actions on the Ethereum blockchain. The name itself hasn't been chosen by accident. Similarly to gasoline, fueling a car and allowing it to drive gas on the Ethereum network fuels transactions and allows them to perform different operations.
00:00:53.870 - 00:01:49.066, Speaker A: Every operation on the Ethereum blockchain, or to be precise, on the Ethereum virtual machine, has an associated gas cost. For example, adding two numbers cost three gas getting the balance of an account 400 gas sending a transaction 21,000 gas. Smart contracts usually consist of multiple operations that together can cost even hundreds of thousands of gas. What is interesting is that the gas cost by itself doesn't tell us how much we have to pay for a particular transaction. To calculate the transaction fee, we have to multiply the gas cost by gas price. The gas price is measured in Gui, a smaller unit than Ether, where one GUI equals zero point 80. We can think about it as a major and minor unit similarly to dollars and cents.
00:01:49.066 - 00:02:36.814, Speaker A: As an example, let's say we want to send a simple Ethereum transaction and the ETH price is at one $800. Most of the popular Ethereum wallets, such as MetaMask, estimate necessary gas prices and allow us to choose between fast, medium and slow transaction confirmation speed. Let's assume that the wallet estimated the gas price to be set to 100 guay. If we want to have a chance of having our transaction confirmed within the next minute, we can quickly calculate that we have to pay $3.78 for such a transaction. We multiply the gas cost for sending a transaction 21,000 gas and the gas price 100 guay. This is equal to 2.1
00:02:36.814 - 00:03:24.640, Speaker A: million guay, which is zero point 21 ETH. At the ETH price of 1800, that gives us $3.78. It's worth mentioning that Gas is only an abstract unit that exists only inside the EVM, and the user always pays for the transactions in ETH. The main reason for having a separate unit for measuring computational effort is to decouple it from the price of ETH. This means that the increase in the ETH price should not change the cost of transactions. If the network activity stays the same and the price goes up, we should see the gas price going down. So the final transaction cost measured in ETH stays the same in dollar value.
00:03:24.640 - 00:04:20.286, Speaker A: Saying this, a price increase of ETH is very often correlated with an increase in the activity on the Ethereum network, something that indeed increases the cost of transactions. Now let's see how exactly an increase in network activity causes the transaction costs to go up. To start, with all transactions sent to the Ethereum network land in the Mempool. This is a place where all pending transactions are waiting for the miners to pick them up and include them in the next Ethereum block. Miners are incentivized to pick up transactions with the highest gas price first, as they are basically doing a fixed unit of work for a better price. Miners are also limited to how many transactions they can include in one single block. This is determined by the maximum gas limit per block at the time of creating this video.
00:04:20.286 - 00:05:29.094, Speaker A: This limit is set to twelve and a half million gas. As a quick example, let's assume there are only simple ETH transactions in the Mempool, each one costing 21,000 gas. A miner can include around 595 such transactions. If there are, let's say, 1000 pending transactions in the Mempool, the miner would choose transactions by sorting all pending transactions by the gas price and choosing 595 most profitable ones. The current fee model is based on a simple auction mechanism, and the users who want to have their transactions picked up by miners first have to essentially outbid other people for the space in the block. This, in turn drives the gas price higher, especially at times when a lot of users have urgent transactions that they want to confirm to wrap up the gas explanation it's also important to understand why gas has to exist in the first place. EVM as a Turing Complete machine allows for executing any arbitrary code.
00:05:29.094 - 00:06:46.174, Speaker A: Although this is one of the main reasons that makes Ethereum so powerful, it also makes it vulnerable to the halting problem. The halting problem is the problem of determining from a description of an arbitrary computer program and an input whether the program will finish running or continue to run forever. Without gas, a user could execute a program that never stops, either by making a mistake in their code or just by being malicious. To prevent this, Ethereum introduced a gas cost associated with each operation that would prevent a program from running forever and bringing the whole network to the grinding halt. Besides the gas price, each transaction also has a gas limit that has to be equal or higher to the anticipated amount of computation needed for successfully executing a particular transaction. EVM, before executing each operation within a transaction checks if there is enough gas left for that operation. In case there is not enough gas left, the whole transaction is reverted with out of gas exception and all state changes are rolled back.
00:06:46.174 - 00:07:28.170, Speaker A: The user would still pay the transaction fee for the amount of work that has been done by the miner. Even if the transaction fails. This is again to avoid attacks on the network. If the transaction consumes less gas than initially anticipated, the remaining amount of gas is converted to ETH and refunded to the sender. It's also really important that all operations on Ethereum have the correct gas cost in relation to each other. Otherwise, that could be another attack vector. One of such attacks took place in 2016 and resulted in a hard fork that repriced certain low level operations.
00:07:28.170 - 00:08:36.834, Speaker A: Now, as we know a bit more about gas, let's have a look at the recent period of high transaction fees and a few solutions that can lower the transaction costs now and in the future. But before we discuss that, if you made it this far and you enjoyed the video, hit the like button so this kind of content can reach a wider audience. With record volumes on decentralized exchanges, the highest total value locked on DeFi lending platforms, multiple yield farming opportunities available, and minting more and more NFTs, the Ethereum network is as busy as ever. This popularity results in high demand for block space, which in turn results in high transaction cost. It's not uncommon anymore to pay more than $10 for a simple era C 20 transfer, or $50 to $100 for a uniswap transaction. This, of course, is not ideal, as it makes it really hard for smaller players to participate in the Ethereum ecosystem. Fortunately, there are multiple solutions either already available or being actively worked on.
00:08:36.834 - 00:09:35.586, Speaker A: Let's go through some of the most important ones. Layer two scaling is a collective term for solutions that help with increasing the capabilities of the main Ethereum chain. Layer one, by handling transactions off chain, besides improving transaction speed and transaction throughput layer two solutions can greatly reduce the transaction fees. Loop Ring is a good example of a decentralized exchange built on layer two that is getting more and more popular. The exchange has recently hit $200 million in total value locked and over $10 million in daily trading volume. Another project, Matic, that has recently rebranded to Polygon, also hit over $200 million in TVL under Plasma plus Postchain. A more general purpose solution, optimism that is based on optimistic rollups is also being rolled out.
00:09:35.586 - 00:10:30.198, Speaker A: This is important as it will allow DFI smart contracts to interact with each other in a similar way to how they interact on layer one. One of the missing pieces that can increase the adoption of layer two solutions even further is direct onboarding to layer two. This could decrease the cost of transactions even further, as users would be able to transfer their ETH directly from an exchange to a layer two solution like Loopring. If you want to learn more about layer two scaling, check out this video here. Besides layer two scaling, another solution that can decrease the transaction cost in the long run is ETH Two, which introduces sharding and proof of stake. You can learn more about these concepts here. EIP 1559 is another solution for optimizing the transaction cost.
00:10:30.198 - 00:11:29.798, Speaker A: Although the proposal will not have a direct effect on lowering the transaction cost, it will allow for optimizing the fee model by smoothing fee spikes and limiting the number of overpaid transactions. This will make transaction fees more predictable. From the timeline perspective, it looks like EIP 1559 could be implemented in early 2021. Here is a separate video that explains EIP 1559 in depth. Besides using layer two, scaling solutions, and waiting for other improvements, there are a few other tricks that can help us with lowering our transaction cost on layer one. First of all, if we don't have any urgent transactions, we can try to find times of the day when the gas prices are the lowest. Besides this, we should always double check the gas cost estimated by our wallet with a separate reliable source such as Ethgasstation info.
00:11:29.798 - 00:12:24.090, Speaker A: Another trick used by One Inch Exchange allows for lowering transaction fees with Qi tokens. These tokens must be burned alongside the primary operation, which allows for reducing the total amount of gas spent in a transaction. This can be achieved by leveraging an EVM mechanism that refunds gas when storage space is freed. When Qi tokens are minted, dummy smart contracts on the Ethereum blockchain are created. Burning Qi destroys these contracts and results in a gas refund. So how about other chains besides Ethereum? There is no doubt that the recent period of high transaction fees on Ethereum resulted in a few other chains capturing a meaningful amount of users and volume. At this point, it's hard to say how much of this will be a short term play versus a longer term user acquisition.
00:12:24.090 - 00:12:58.580, Speaker A: Saying this, we have to keep in mind that some of these chains are not fully decentralized and permissionless. This basically creates a fake DeFi ecosystem. That may be fun to play with, but it's actually not that much different from using a centralized exchange. So what do you think about gas and high transaction fees? What is your favorite way of lowering it? Comment down below. And as always, if you enjoyed this video, smash the like button, subscribe to my channel and check out Filmatics on Patreon to join our DeFi community. Thanks for watching.
