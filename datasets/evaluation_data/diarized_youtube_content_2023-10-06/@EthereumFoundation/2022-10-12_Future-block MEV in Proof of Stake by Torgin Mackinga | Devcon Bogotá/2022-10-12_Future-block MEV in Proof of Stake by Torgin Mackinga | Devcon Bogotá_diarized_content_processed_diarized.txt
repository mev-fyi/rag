00:00:14.730 - 00:00:55.040, Speaker A: Hello everyone. My name is Torgan. I also work at Chain Security and today I'm going to be talking about what I call Future block Mev in Proof of Stake. So what the hell is future block Mev supposed to be? To understand that first we have to talk about block production and how it changed with the merge that happened a couple of weeks ago. So in Proof of Work every miner tries to mine every single block. And what that means is at no point can you know who the next block producer is going to be. But in Proof of Stake that's a little bit different.
00:00:55.040 - 00:01:50.830, Speaker A: And there we actually decide ahead of time who the proposer for which block is going to be. And in particular for Ethereum we use the randow value together with the current validator set to do this. And that means that you can always know all the block proposals for the current epoch and for the next epoch. And since two epochs in Ethereum take about twelve minutes that means that if you are a validator on Ethereum you will know up to twelve minutes ahead of time when you will actually be the one that is able to produce a block. So now what do you do with this information? This is what I call future. Block mev. So if you are the block producer for a block you can control the transactions that are included and the ordering of the transactions.
00:01:50.830 - 00:02:51.186, Speaker A: So if you know that in some block N plus one you are going to be controlling that block you can do some weird stuff in the block before that in block N which you wouldn't do usually. So one example of that would be that if you want to do an Oracle manipulation on uniswap, the way that you do that is you buy some asset. Like here we have some asset that is worth one and then you buy enough of that to let's say move it to six. And then the uniswap Oracle will always record the price in between two blocks. So it will record this price of six at the end and will take that into its average that it reports. Now usually this would be very expensive to do because everyone would see that this price is incorrect. So there's obviously a really big arbitrage opportunity that somebody could take to sell this asset at a higher price than what it is actually at.
00:02:51.186 - 00:04:07.740, Speaker A: And that means that for the attacker this would be really expensive. But because now we're assuming that the attacker is actually the block producer for block N plus one they can just put their own transaction at the very beginning of the block N plus one and they can guarantee that they themselves are going to be the one that takes this arbitrage instead of anybody else. So essentially they are able to hide the mev from the other searchers. And here we're assuming that there is some mechanism in which they can make that first transaction in block N without going through the public mempool. So maybe they put it like through Flashbots or something. And that means that people will only see the transaction on chain at the point where it's already too late, because the next block is going to be produced by the attacker, and nobody is going to have any time to react before that happens. And so, one example of what you could do is if there was a lending protocol that used such a uniswap Oracle, you might be able to manipulate it enough to get something into the liquidation level where it can get liquidated, but it wasn't able to before.
00:04:07.740 - 00:05:08.302, Speaker A: And then that liquidation will be available in block N plus one. And again, because you control it, no other searcher is going to be able to compete with you for it, because you can just put your transaction, like in second position, for example, in that block. So then you can trigger a liquidation without having to compete with all the other searchers out there. So what are the main takeaways? First of all, the block proposals in proof of stake are known in advance, and that is different than it was in proof of work. And second of all, this information is valuable. So, for example, you can use it through doing manipulations or creating mev and hiding it, like I said here. But you could also imagine that you could maybe sell future block space and guarantee that to people, or you could even incentivize people to create a lot of mev in a block that you will control.
00:05:08.302 - 00:05:42.820, Speaker A: Like you can imagine if there's some NFT project, they might not care exactly in which block they're going to be launching. So you could just tell them to launch in the block that you create. And then all of the gas that is going to be spent on minting those NFTs early is going to be in your block instead of somebody else's. So, I wrote a paper on Oracle manipulation and a blog post on how that changes after the merge. So if you guys are interested in learning more about the Oracle manipulation side of it, I highly recommend checking it out.
