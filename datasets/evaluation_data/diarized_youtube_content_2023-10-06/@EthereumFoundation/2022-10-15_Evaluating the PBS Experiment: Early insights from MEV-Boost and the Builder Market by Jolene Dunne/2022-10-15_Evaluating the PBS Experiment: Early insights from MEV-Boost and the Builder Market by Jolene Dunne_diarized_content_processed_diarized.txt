00:00:13.450 - 00:01:33.898, Speaker A: Hi, everyone. My name is Jolene and I work at Flashbots Research. And today I'm going to be talking to you about evaluating the architecture called Proposer Builder Separation, given the things that we've learned and the insights that we've gained since the deployment of Mevboost. And I'm also happy to take some questions at the end if we have time. So, as a brief introduction, what's the point of this? How are PBS and mevpus linked? Or how are they different? So probably most of you are familiar with these ideas already, but just to make sure that we're all on the same page, proposer Builder separation refers to an architecture that separates the functions of block building and block proposing within the core Ethereum protocol. So instead of the block proposer, in this case the Validator going to the Mempool and building their own block, which they would then propose to the rest of the network, all block construction would be outsourced to actors that we called block builders. So the idea is that the only thing that the Validator would have to do under full PBS would be to choose the highest value block that's presented to it when it's time for its thought.
00:01:33.898 - 00:02:40.526, Speaker A: Block building is you can think of it as like a revenue generating activity. There are economies of scale involved in it and opportunities for things like private order flow that might give you an advantage over other builders. So basically, there are incentives for block builders to centralize and to become more powerful as time goes on. So that's a trade off that was kind of known about and made and accepted at the time that PBS would take this centralizing force out of the Ethereum consensus layer and put it into the builder market. And then logically, the only kind of interface point would be where the Validator is sending these calls to the builder market and picking the best block that comes back. Like I said, so the idea is that kind of stuff can get very ugly in the builder market, but we don't care because the core of Ethereum, the consensus layer, is safe from the effects of mev. So where does Mev Boost come into this and how is this related? So Mevboost allows validators to engage in an experimental version of PBS and this builder market.
00:02:40.526 - 00:03:36.078, Speaker A: So it's completely optional. But if you have a Validator and you're now running Boost, you can outsource your block building to a kind of a burgeoning market of block builders relays, searchers that are all competing to give you the best block. And the reason that this happened was because if you're familiar with the old Flashbots auction, this wasn't going to work after the merge. So we knew that we needed to kind of upgrade it and do something different. And so Flashbots worked with the Ethereum Foundation to make this piece of open source software that could act as a prototype for this longer term Mev solution. For ethereum, which was PBS. So in this way we are able to test this idea of PBS through mevpooost rather than kind of putting it in the protocol and then being in trouble if it doesn't work or something bad happens.
00:03:36.078 - 00:04:27.540, Speaker A: Here is a quick diagram of what I'm talking about when I say the builder market. And I really just want to go through this quickly just to make sure that we're all on the same page, because the later things will be a little confusing if you don't understand this. So what we have right now, kind of on the left hand side is a Validator runningboost allows it to connect to this builder market. If the Validator is not running mouthboost officially, it should not be participating in this builder market. So in order for this to work, there are certain roles that need to be carried out in the builder market. So over on the right hand side, we start with the users. So they originate transactions and those transactions either go to the public mempool on the top or maybe some private mempool that searchers or builders are allowed to access.
00:04:27.540 - 00:04:58.598, Speaker A: And then we have searchers who would be monitoring the public mempool as well as any private sources of transactions that they have. And they would be forwarding their bundles along to these specialized actors that we call block builders. Block builders will be receiving bundles from searchers. Maybe they're also monitoring the public mempool. Maybe they also have their own private sources of transactions too. And they will be trying to build the most profitable block for a slot. So they'll forward blocks to relays.
00:04:58.598 - 00:06:01.518, Speaker A: And the relays here it's different to if you're familiar with the Flashbots architecture before, the relay here kind of has a different role. So it allows Validators to register with it. And then when a Validator requests a block for a particular slot, the relay will forward the block that has the highest payment attached to it and then that Validator will receive that payment for proposing this block to the rest of the network. So when I say the builder market experiment with mevboost, this is what I mean. And when we talk about full in protocol PBS, we are trying to figure out a version of this that has the important bits that enable this market kind of baked into the Ethereum protocol. So that means no mevboost and probably no relays as well. So the question that I wanted to ask and kind of try to answer in this presentation is how is this experiment going? So mevboost and this early version of the builder market have been alive for about a month now.
00:06:01.518 - 00:07:50.142, Speaker A: So can we tell if things are going the way that they thought we would? Would it be safe to put PBS in the core protocol today as this experiment is without any further features or enhancements? And are there any warning signs or maybe early indicators of things that we should be worried about. When I was thinking about this question like how could we tell if the experiment is working? I started thinking about PBS as a kind of an organizational principle. So it seems to be very widely accepted that this kind of clean separation between the mev activity and the rest of ethereum with only this market in between as an interface point is desirable and also possible. So it's probably not very helpful that the idea of PBS is, I think, relatively simple and easy to understand. And sometimes we can be biased towards things that are like that when the real problem that we're trying to address is much more nuanced and complicated. So the previous question kind of turned into these questions is abstracting the mev away from the core protocol a good abstraction or does it leak? Are there more interface points between where the mev is happening and the core protocol than people would lead you to believe? And if things get very, very bad in the builder market, maybe imagine a very small number of very powerful, very centralized actors that dominate blockbuilding. Are there really no knock on effects on core ethereum? Assuming at some point in the future we have full in protocol PBS? In this in Protocol PBS world, I started thinking about what parts of ethereum are still influenced by mev and I came up with kind of two families of effects.
00:07:50.142 - 00:08:55.766, Speaker A: So the first order effects are kind of the direct effects on the core protocol. So these are places where even though this mev is supposedly over on the other side of the room and it doesn't affect ethereum, it still influences part of it and the other type are more kind of second order effects. So how are actors incentivized to try and influence the base layer if it meant that they could gain more favorable conditions for themselves? So my idea for this was to try and identify a few concrete examples of these effects and then kind of check data to see if there is any indication that these things are happening already. And then if these effects were to get more pronounced as the builder market develops, are these really an issue? And if so, what kind of mitigations might we need? So let's have a look at the first kind. What parts of ethereum are still affected by mev under full in protocol PBS? So there might be more than this, but these are the main ones that I came up with for now. So the first one is the contents of the block. So we are now getting these blocks from the builder market.
00:08:55.766 - 00:09:35.546, Speaker A: So now all transactions in the block can be directly influenced by mev. And this wasn't the case before because it was possible for miners or validators to kind of opt out of using mevmoost or mevge if they really wanted to. So in the future, if most or all of the blocks come from the builder market, the purpose of the builders is to reorder and rearrange transactions. Their block can be as profitable as possible. So hopefully that one's kind of straightforward, this kind of idea of losing control of block content. The second one is maybe not so obvious. So the contents of the public mempool are influenced by mev under full PBS.
00:09:35.546 - 00:11:07.538, Speaker A: So how can that be? Well, in a world where we have full in protocol PBS, builders are incentivized to have private sources of transactions that we talked about earlier and we call this exclusive order flow. So if builders are competing just on the contents of the public mempool, and there's no difference between the kinds of transactions that they have available to them, then their success comes down to maybe their algorithm or their trading strategies. However, the more order flow that they have access to that other builders do not, the more likely it is that they can build a better block with that. And at Flashbots we generally think that order flow is going to be a big differentiator in how successful block builders are going to be. And if this order flow is exclusive in that it's going to a private mempool instead of the public mempool, it's not going into the public mempool. So you could have this situation where as there is more mev activity, because what is happening with the builders is associated with this mev than the contents of the public MEMP pool might get smaller. And then the last one, which kind of relates to the first, but maybe a little bit of a different focus block proposers used to have control over what the contents of their block would be.
00:11:07.538 - 00:12:08.734, Speaker A: So under full PBS there used to be, sorry, the big difference would be that Validators will now accept full blocks from the block builders. And that didn't happen before. So in the old kind of Flashbots model, you would never have full blocks coming from external sources. And then the second thing is that I'm not sure if this is for certain yet, but we think that under full in protocol PBS, there may not be an option for builders to or for Validators to opt out of that. So you might have no choice but to get your blocks from an external market and then kind of going on to the second family effect. So how are actors in the builder market incentivized to mess with the base layer, the consensus layer, in order to gain an advantage? And the big issue that I see with this is that the builder market is actually out of protocol. So there's nothing enforcing participants in the builder market to stick to the structure that we saw in the diagram earlier.
00:12:08.734 - 00:13:08.514, Speaker A: The mevboost architecture that exists is kind of a template for what is safest for independent ecosystem aligned parties like Flashpots to run. And there are a certain number of assumptions baked into it. In reality, we can't stop anyone from using, for example, their profits to buy, validators their profits from building, creating their own private version of mevoost, or offering services around builders or other parts of the system. And as we're about to see, measuring what comes through a relay might not necessarily be the full picture of what's happening in the builder market. So the only part of the builder market that's in the core protocol is this builder specification, which defines the API calls and sequence between the validator and some software that looks like mevboost. And outside of that kind of anything goes. By now, we have identified a few kind of concrete areas where we think that mev might still affect the core protocol under full PBS.
00:13:08.514 - 00:13:58.146, Speaker A: So what can we do with this? Well, there have been a lot of really awesome data collection efforts by various parties in the ecosystem in the last few weeks since the merge. What if we took a look at some of these and see if there are any clues based on these areas that we've identified that this prototype builder market via mevboost is starting to affect the core protocol in an undesirable way. And so the first question that we want to ask is going back to what we identified previously. How much block content right now is currently decided by the builder market. So here is a graph that measures how many blocks have come from relays since the merge. So, as you can see, as of today, we're up to 60% of blocks coming through relays. And I looked at this graph last week, and it was about 45%.
00:13:58.146 - 00:14:46.758, Speaker A: So it's increasing quite quickly. And again, it's important to note here that this might not be the full picture. So many of these dashboards measure what comes from relays, and this might not be an accurate reflection of what blocks are coming from the builder market as a whole. So it's probably best to think of this as a lower bound on how much block content is coming from the builder market that seems to be increasing over time. And then onto the second question. So is the public mem pool changing since Memphis launched? So here's a graph of the count of unconfirmed transactions in the Mempool over the last 30 days. And if we look back at when the merge happened, September 15, it looks like something may be different.
00:14:46.758 - 00:15:33.506, Speaker A: The baseline seems to be a little bit lower. And what I would expect to see over time, if my speculation is correct, is this baseline kind of trending downwards. However, I don't think I could say at this point that this is definitely because of mev. My plan is to keep monitoring this and look into other things that might be affecting the Mempool since the merge. And the next question is linked to the idea of things kind of getting nasty in the builder market. And if there are actors with big advantages that they might be in a position to use those to start to influence the base layer. So are there early indicators that builders are centralizing? So this chart measures block builder success since the merge.
00:15:33.506 - 00:16:44.586, Speaker A: So percentage of blocks that landed that came from a particular builder. So if we think of that 60% that we saw in the diagram a few slides ago, how many of that 60% came from a particular builder? The orange one is Flashbots, so that doesn't really look great right now. However, if you look closely, it does seem like Flashbots is losing its lead a little bit as time goes on. Or as some other people have pointed out to me, that the non Flashbot slice looks as though it might be kind of diversifying a little bit. But the point that I'm trying to make with this is that it doesn't look like Flashbots as the dominant builder has a lead that's growing and growing over time. But this is probably another good thing to keep an eye on. And so when I talked about actors trying to influence core Ethereum in ways that we haven't thought of yet, I think the big one for me is whether builders and Validators will eventually decide not to bother with the out of protocol builder market and just start making deals with each other directly.
00:16:44.586 - 00:17:42.880, Speaker A: And this is the kind of activity that's much more difficult to see. We really need to keep in mind that the builder market, so this thing that Validators are able to send their requests to at the moment and what goes through mevboost and the relays is not the same thing. So what we would need to find out here is if there is a way to tell if there are blocks produced via some external source that are not going through mevboost or a relay. And I think this is possible, but I didn't manage to do it in time for this talk. But by examining this number over time, we could deduce that perhaps builders are being connected directly to Validators and bypassing the relay components entirely. Because if you're a big party with a lot of order flow and either access to a lot of Validators or perhaps the means to acquire Validators, you don't need to participate in all this relay and builder competition business. So I think we want to keep as much of this activity in the light as possible.
00:17:42.880 - 00:18:53.650, Speaker A: This is something that I think is really important and we'll continue to work on. So, looking at the indicators that we found, are these things actually problems? If the trends that we identified continue and possibly become more pronounced, what negative effects on Ethereum could we expect? So we saw previously that we are currently around 60% of Ethereum blocks now coming from the builder market. So extrapolating from this, should we be worried if 90% of blocks are coming from the builder market? And I think the main problem with this is censorship. And hopefully you can see by now why censorship is the big kind of topical issue with PBS that a lot of people are talking about. If the centralizing dynamics that we are expecting start to play out, it's possible that 90% plus of blocks start to come from a few actors. And as we know, it's easier to censor at the block builder level than it is to censor at the consensus level. We also saw that there seems to be a decrease in transaction volume in the public mempool post merge.
00:18:53.650 - 00:20:33.154, Speaker A: And if that speculation is correct and it turns out that this is a symptom of transactions being diverted from the public mempool and into private pools, what implication might this have? And one of the solutions that people propose, or maybe one of the kind of additional features that people want to see for mevboost or full PBS, is this idea of a fallback solution. So that would be know if something goes wrong, you allow your validator to build blocks locally and then compare those to builder market blocks that have been produced and then you would only accept the builder market blocks under certain circumstances. So the issue here would be if the public mempool maybe got so small that effective fallback solutions like this either weren't possible or relied on the validator being altruistic in that building from the public mempool alone is completely not competitive compared to the builder market. And for this so we still don't know if this is happening yet. But if it did happen that we end up with builders that have outsized profits, it might make sense for builders to start staking their profits and running validators. And there might be entities that own a lot of validators already that want to start block building and there's likely to be a business model where builders can offer services based on how many validators that they own. So I don't know if anyone saw Alex Stokes talk yesterday on blockbuilding after the merge, but he had a slide with a giant list of different ways that Block builders could monetize this kind of relationship and decentralizing.
00:20:33.154 - 00:21:50.560, Speaker A: The builder role itself might not be feasible here, as we're kind of out of protocol at this point and therefore limited in what we can force builders to do. We have identified a few different things that if left unchecked, might cause us problems down the road and I think there's good awareness around most of these already, especially the censorship resistance schemes, which is very topical. But there are a few other things that given these early indicators, might also be a priority. So censorship resistance, I think we know about that already. Something called transaction inclusion lists I believe is being actively worked on by Flashbots and other people in the ethereum ecosystem. So for the other things, many of the effects that I talked about can be lessened if we take steps to ensure that things can't get very centralized and ugly in the builder market. So trying to figure out how to effectively decentralize the builder role might be important while also keeping in mind that a decentralized builder has to be competitive compared to a centralized builder in order to make any difference.
00:21:50.560 - 00:22:47.922, Speaker A: Another thing that I think is important are mechanisms to ensure that under full in protocol, BBS Validators can still build their own block or perhaps augment blocks that they receive. And the reason that this is important is that a lot of these kind of extreme effects that we extrapolated assume that under full PBS, 100% of proposers will be getting blocks from the builder market. So this would be a way to kind of get back control of that block content and then if at all possible, reducing incentives from Validators and block builders to work together is something else that I think is important. And following on from that, working on the ability to monitor the builder market as a whole by putting something in the protocol that can tell whether blocks have been built locally or not. So that's pretty much it. Thank you very much for coming.
00:22:48.056 - 00:23:00.486, Speaker B: I'm wondering if there's a method where some of these solutions could be made by the community and be somewhat attached to something like Mevboost, kind of almost like a module that you can add if you opt in.
00:23:00.588 - 00:23:38.050, Speaker A: Yeah, I think that's a really great idea. I think it depends on the solution. Mevboost at the moment is a fairly lightweight piece of software and we have thought of these things. A lot of the things that we want to do with transaction lists and other things like that require knowledge of state, of the ethereum state and Mevboost just doesn't have that. But I think that there are definitely maybe some other things and other ways that Boost can be improved. And you may have already seen we're also trying to make boost more of a kind of community effort as well and take solutions in from other parties.
00:23:39.590 - 00:24:01.046, Speaker C: Hi, Jolene. Thank you. That was a great talk. Just wondering the solution where you allow builders, sorry, Validators to augment the block, doesn't that still require or still rely on them being altruistic? Isn't there a situation where it just doesn't make sense because it's so much more profitable and not much goes into public men pool perhaps?
00:24:01.158 - 00:24:52.500, Speaker A: Yeah, I think you're completely correct about that in terms of incentives and I generally think that it's really important for us to kind of design these things in a way to make sure that people aren't missing out by doing things that are good for the protocol. But I think maybe one example of where this has actually worked well is around the time of the merge when there were some problem with mevboost or something and a lot of people said that they weren't going to run mevboost. So it was more kind of like a social altruistic thing. So I think ethereum is kind of special enough in that it does happen that people have an interest in the protocol and want to do the right thing by it. But you're completely correct. Yeah. If it got to the case where it's just not profitable to augment your block, we'll have to think of something else.
