00:00:17.200 - 00:01:01.876, Speaker A: Good day to y'all. Buenos Diaz. My name is Ken Smith. I'll be talking about does it make sense to aggregate an average fee recipient rewards, commonly referred to as mev, using a smoothing pool? And very glad to talk about a number of things. I'm with a firm of my own called NextBlock Solutions, but I'm also a rocket scientist with the rocket pool protocol and most importantly, a member of the Node Operators Association. So one of the things you can do is you could download a copy of this report that was published early summer. There's a QR code here in the corner that you can grab, but this presentation will cover the highlights of that report or at least give you a good orientation to read it.
00:01:01.876 - 00:02:16.300, Speaker A: But I do encourage you to go there for more additional information that I can't cover in 24 minutes and 9 seconds here. So to begin with, let's spend just a short second talking about the taxonomy of mev. Right? You've heard a lot of talks about it. One of the first things you might be asking is why would it make sense to aggregate rewards in a smoothing pool? This is something that kind of comes from the mining industry, right, where the chances of you actually solving a cryptographic hash and being rewarded is so rare that it makes sense to go in collectively with other individuals to have a constant income stream. This here is a graph that shows the probability over five years of receiving a block proposal, right? So if you have a single validator and sometimes I might refer to those as mini pools and rocket pool terminology, but validators over five years, given 4025 validators, we're a little bit more than that. Now, on the blockchain, you will receive on average about 30 proposals over that five year period. Now, again, that's just an average, right? You can see in the probability histogram you might be unlucky and might only receive twelve proposals over that five years.
00:02:16.300 - 00:02:52.360, Speaker A: You might also receive 50 or so. Right. And it scales linearly. If you have two validators, you can see here that the average is going to be 60. You would think that there's no advantage to having more validators in there if each proposal was rewarded uniformly with the same amount of beacon rewards. But obviously, in addition to getting beacon rewards, you also get a chance at mev, right? So let's just take a little bit at looking at mev, you know the definition, right? I think one of the things we lose a little bit, though, is that it's viewed somewhat as a theoretical limit. It's the maximum extractable value.
00:02:52.360 - 00:03:17.360, Speaker A: And I would argue, and I think a lot of the data supports that we're not actually extracting that full amount. Right. So the Flashbots team has used this term, I don't think it's quite as catchy, called rev, which is the actual amount that we're able to extract from the block right. And there's some amount of earnings that is not captured. Right. It's just left on the blockchain for the next block. I'm just going to call that Eulog until somebody comes up with a better name.
00:03:17.360 - 00:03:46.532, Speaker A: Right. There's some really great metrics coming out now post merge about if we look at this rev, how much of it is actually going to the searcher, right? How much of it is going to the block builder, right. What part of it may go to the relayer? Right? Now the relayers seem to be providing that as a no fee service, right. But there's a potential they might capture some revenue from there. And most of it, from the metrics we're seeing right now, is going to the block proposer. Right. That's the validator.
00:03:46.532 - 00:04:20.068, Speaker A: And so I've been calling this term in my report here, the proposer payment value. It's the amount paid to the validator to put those transactions into the block. One of the things that we did is performed a Monte Carlo simulation. Looking at it pre merge, we looked over a period of 60 days. We looked at the amount of mev that was extracted by miners. Now, this was done in the kind of May June time period, but mev seems to be about pretty much stable in that time period. It's not maybe declining slightly, but pretty much in there.
00:04:20.068 - 00:05:02.080, Speaker A: And it is this long tail distribution. Most of the mev, this line right here, this is the median value, right? So 50% of the blocks received a value that's less than zero five ETH in their block. Right. 50% of the blocks had ETH payments and mev payments or proposer payment values that are greater than that. The average is actually quite a bit higher than the median. And the reason for that is of this long tail distribution, in fact, it's so much that in looking at some of these metrics, if we just look at the top 0.1%, right? Let me get it here.
00:05:02.080 - 00:05:18.444, Speaker A: 30% of all the ETH values is in that top 0.1% of the blocks there. Right. And it's because it's just so long tailed here. I mean, that ends right here at one ETH, but it actually continues on. Right. We heard earlier that some of the blocks would be near three digits ETH.
00:05:18.444 - 00:05:21.784, Speaker A: Right. Adds tremendous value to it.
00:05:21.982 - 00:05:22.536, Speaker B: Right.
00:05:22.638 - 00:05:42.944, Speaker A: So because of that long tail right, even the top 1% have 45% of the proposer payment value in there. Right. It creates these very rich ETH blocks right. That we've been calling lottery blocks. Right. And if you win a lottery block, it could be very rewarding in terms of an income stream. Right.
00:05:42.944 - 00:06:36.208, Speaker A: So this is why it makes sense to start aggregating them into a smoothing pool. So one of the things we did pre merge is we started looking at okay, I think this was originally proposed by Flashbots. There was a dev on the rocket pool team that actually came up with an ideal and a mechanism to implement it. Joe Kaplas and so what we did is I created a Python program and you can get it from the GitHub that went ahead and it went through a Martin Carlos simulation. And so just briefly, what it did is it said, okay, let's figure out some time period. And that's important, right? Because the way that this works is that if you validate for an indefinite period of time, you all approach the average, but we're not going to validate for an indefinite period of time. There's some investment, right? Maybe you start staking, you earn income, but maybe it's a five year, maybe it's a ten year or 20 year.
00:06:36.208 - 00:07:20.850, Speaker A: There's some limitation of time. Perhaps it's even much shorter with proposer builder separation, right? Maybe that will come in three years or four years, right? Or as we heard in the other talk, maybe there are other technologies that could prevent a lot of this from occurring. So there's some finite determination. The software goes ahead and it performs a try, it grabs a validator, it makes a guesstimate about the number of proposals that it will get over that five year period. For most of my graphs, it then for each of those proposals, randomly assigns an amount of mev based upon that 60 day historical period. Because mev seems to be somewhat random. We don't know when the NFTs are going to drop, when the Arbitrage is going to happen.
00:07:20.850 - 00:08:20.256, Speaker A: It then goes ahead and does that for a validator or a set of validators that you have. It then also compares another set like type set A, set B. Set B is where that validator, instead of running by itself, something I call a solitarius mode, is now running as part of a smoothing pool. And the size that I chose for the smoothing pool initially was about 3000 validators that are working collectively sharing their proposer payment values. And then it did that for the entire validating period and it simply compared, it said, okay, would you in this case, in this try, did the solitarius mini pool earn more income in proposer payment value than if it was in a smoothing pool, right? And so we've got some results that we could share about this. It records it and then it repeats it a whole bunch of times. And you can set that number for anything, but you get enough power at about 1000 tries running through this thing here.
00:08:20.256 - 00:08:50.996, Speaker A: And then finally it produces a lot of neat graphs. So let's go ahead, let's take a look at those graphs. So let me walk through it with you a couple of times. Let's just start with one. We have one validator who over the course of five years produces on average about 60 blocks, right? And you can see here that it runs for a period of time, it gets a block and it receives a small amount of mev here. It proposed again and received a larger amount. And you can see as it steps up here, it's not receiving any blocks.
00:08:50.996 - 00:09:35.144, Speaker A: It was never selected to be a block proposer. Here it's a block proposer. And it went up. And so it just goes up every period, right? And I had the periods kind of slice in 28 day periods. And at the end of it, you can see over that five year period, this run of this single validator earned about 2.5 ETH in mev. We could run it again and we could say, given that same performance, what about if it was in a group of 2999 other validators? And so therefore, the mini pool had 3000 validators, and we could see here that if I put both of those slides together, that it outperformed, right? It was much better to get a small, constant share of a larger pool over time.
00:09:35.144 - 00:10:45.788, Speaker A: Now, this was just one run, right? Maybe it just so happened I picked one that it outperformed it. We need to repeat that a little bit more, right? So let's look at that a little bit more here, right? So again, I said, well, try it ten times, right? And you can see here, back to the solitarius validator, that maybe it only earned two ETH. Maybe over here in this trial, it earned about six ETH, right? There's greater variance because of just the long tail randomness of the mev. But if it's part of a smoothing pool, you could see here, even at ten tries of a smoothing pool, the variance is much less, because now we're averaging a share over 3000 validators, right? And when you put them together on the same chart and the same axes here, you can see that at least in this trial of ten runs, that nine times out of ten, being in a smoothing pool, you earned more income over that five year period than if you had just ran independently. Only in one time, you had a very lucky Solitarious mini pool that had actually outperformed the smoothing pool. Right. So this is just another chart that's looking at it where I normalized.
00:10:45.788 - 00:11:54.160, Speaker A: If you were by yourself and you could see that most of the runs you earned, in this case about three east more over that five year period than if you had ran Solitariously, that's the red line. Well, again, ten times is not a lot. You need to start increasing that very large to get your orders of power in terms of your ability to see resolution. So here I ran it again. All these lines start to overlap, and it looks like from here, again, the blue lines here are the smoothing pool. And you might say, wow, look at all these here that are up here earning hundreds of ETH over the smoothing pool, right? But it's a little bit of an optical illusion, right, because the majority of the lines are here in this very dark purple at the bottom, right? In fact, how many of those are there? We can start looking at it, right? And I'll just point to this one spot here. If you had one mini pool of your own and you were enjoying a smoothing pool of only 100 other mini pools, 78% of the time in this run of 1000 tries, 78% of the time, the smoothing pool outperformed a solitarius mini pool.
00:11:54.160 - 00:12:59.076, Speaker A: Right. We could show the same chart here, just shown on a line here, and you could see that it will underperform in kind of a unique case when you are the smoothing pool. If you join a smoothing pool before you reach the 50% mode, right? So don't join a smoothing pool if you have one validator, don't join until there's at least two or three validators in the pool, right. But as soon as you become the small fish in the pool, right, if you join a pool of, let's say, 3000 mini pools and you only have ten or 15 validators, right, you can join you could expect about 80% of the time that that smoothing pool will outperform your solitarius mini pool. So it does provide that the kind of takeaway here is that a fractional share is going to outperform most of the time. Now, another rocket scientist in rocketpool Valdroff, I think, looked at the report when it was in the early phases and he said, Ken, that was pretty interesting stuff, I love the code, but he says, I think I could show it in one graph. And so he put together this graph.
00:12:59.076 - 00:13:59.356, Speaker A: I got to give him the full credit. And what it shows here is it shows the probability of you earning an amount of ETH given whether or not and we'll just look here at the blue line, which is one validator versus joining the purple line of 3000 validators. And so in this blue line, you can see that there's some probability that you might even get up to ten ETH over the five years. But most of your probability is that you are going to get less than five E versus if you're in a smoothing pool, you're in the purple line, you're almost assured not to get these low values. Most of your probability is getting some value close to five or six ETH over that period of time. And then again, it becomes very unlikely that you're going to win the lottery, right, because the pool won the lottery and you're just getting a share. It's also shown down here, lower below here, which is that if you're in the pool, you are nearly guaranteed to get at least one ETH, two E, three E, fourth, five E, five E, six E, and then it starts dropping down to almost a negative probability, right.
00:13:59.356 - 00:14:51.736, Speaker A: Versus the blue line. You can see that, yes, the chances are I'm going to get much less than five, but I give up some chance of winning the lottery, right? So it does provide. The takeaway here is that if you participate in a smoothing pool, you are more likely to receive larger monthly ETH rewards, especially if it pays out on a monthly process, than running your own mini pools by yourself. Now, why is this important kind of post merge? Well, let me share a couple of things. Post merge, I mentioned that rocketpool already has a smoothing pool for its node operators. They can opt in to it, right? You're not required to. And there's a great tool, again, you can scan the QR code, a great tool called Rocket Scan by another rocket scientist, Peteris, that actually shows the Rocket pool validators.
00:14:51.736 - 00:15:49.740, Speaker A: And I did this last night when I was putting these slides together and you could see what proposers or what blocks they proposed. And if they have a little looks like a smoothie, they're in the Smoothing pool. And you can see here, this person got pretty close to a lottery block, right? But they're in the Smoothing pool, so we all benefited from it. But you can see most of them here are these just smaller mev amounts. And you can see what mev relay won that block auction in there, right? There's also another great dashboard here by GenX, another rocket pool member, who put together a dune dashboard that was showing since the smoothing pool launch, which was a few days, I think, after the merge happened, so about 30 days ago or so, that it is trending very close to our model predictions, right? We have a median of about 0.6 e. So if you were a solitarius, that is what you would expect in terms of your rewards.
00:15:49.740 - 00:16:26.572, Speaker A: And then if you were in the Smoothing pool, you can see the performance enhancement from it, right? In the Smoothing Pool, you get the average. If you run by yourself, you get the median, basically kind of how it works. And they're adding about 1.5% if you're in the Smoothing pool in terms of your Apr to have a validator in the smoothing pool because of mev, they're tracking it very much like our model predictions that we can see. Most of the mev are these very small amounts that occur, but you may not see it here. But I'll just kind of point there's one around four, one around five. And the biggest mev block we've got so far in the last 30 days is about 8.4
00:16:26.572 - 00:16:48.516, Speaker A: e. That was right after the merge. There was a very fortunate block proposal that came in and got bidded, but it models very close to our prediction, so that's good to see. Now we only have 30 days of data. It needs to go. There's a great command here in the Rocket pool discord the invis bot. It actually shows the number of Rocket pool nodes that have opted in.
00:16:48.516 - 00:17:30.512, Speaker A: It seems to be very popular with about 70% of the node operators in the network joining it. We've been told, or at least seen chance, that one of the reasons some of the larger nodes are not joining yet is they do not require yet that Mev boost be running on these things. But that is the plan to make it that if you're in this smoothing pool, it's a Mev boost smoothing pool, but already it's performing quite well and it pays out every 30 days. This is only in the last 14 days. We're about halfway through the reward cycle. It's already generated 70 e among these participating 4000 mini pools that are in there right now. Obviously, this is a model that kind of showed how it works.
00:17:30.512 - 00:18:09.292, Speaker A: It's an example from the Rocket Pool protocol about how a smoothing pool can work. But I actually think it's of value to other staking services. Right. I can certainly see a need for solo Validators to perhaps aggregate in a smoothing pool of their own. I could see other protocols begin to create their own smoothing pools. One of the interesting things is I know that the Ethereum Foundation and the research side is looking as one of the possible solutions to proposer builder separations is the establishment of a protocol, including smoothing Pool, that redirects those mev rewards. And so this could be an excellent model for them to look at in terms of getting data.
00:18:09.292 - 00:18:38.010, Speaker A: And that was one of the reasons I wanted to present it here at DevCon, because I think it does offer some example on stuff. Last but not least, so I have time for questions. I would like to thank the Node Operators Association with their financial support that I was able to attend here and present this paper and shout out to all those in the Rocket Pool trading discord. That gave me a lot of support to actually submit and present this and write the paper. So with that, I'll conclude my prepared talk and open it to questions.
00:18:45.660 - 00:19:02.140, Speaker B: Hi there. Thank you. Great talk. Simple question. What's the right number of Validators to have in a smoothing pool? At what point does the probability of rewards begin to approximate your 3000 validators? Would you get the same effect at 3300?
00:19:02.290 - 00:19:33.880, Speaker A: Yeah, I think the numbers on a slide maybe I can pull it back up here. Well, maybe not, but if you look at the slide that shows it even at a mini pool of about 100 mini pools. Right. As I go back for it, you start to get it right even at 3000 and so forth, the numbers maybe this is a better slide over here. I mean, look, you're at 78, 80%, right? Which is pretty close to it. It does not take that much to start getting those rewards. Obviously, the more you have in the pool, the less variance you get and it becomes a very predictable stream of income.
00:19:33.880 - 00:20:07.430, Speaker A: I'll wait for the mic to get back there. Well, it does. I'll add over here that certainly if you join where you're a small part and you can see the numbers, they start moving more and again, it's a Monte Carlo simulation. So if you see little variances as to why this is lighter shade or not, it's just you run it again on another thousand, you get a slightly different picture. But it all looks this in my report. There's a really nice one where I let it run over the weekend and generated a number of Monte Carlo tries.
00:20:11.050 - 00:20:32.270, Speaker C: Is there anything special about Rocket Pool that makes it only work for them, a smoothing pool? Or could potentially other home stakers join the Rocket Pool smoothing pool? Or could they have their own? Do you need Oracles for it to check participation of the Validators?
00:20:33.090 - 00:21:00.342, Speaker A: Yeah, no, the math and the mechanism works regardless of the protocol. Right. So just if you get enough Validators together working collectively to share the rewards, the math all follows. Right now I understand it's actually come up a couple of times. I understand from the rocket pool community if they would open the rocket pool smoothing pool. Right now they have it only to Rocket Pool Validators that are with their protocol. But I know it's been talked about.
00:21:00.342 - 00:21:41.730, Speaker A: You'll have to ask some of the Dev team in the front row about what their current thoughts are, but it doesn't surprise me if others start creating similar approaches. You mentioned that joining is voluntary and I was wondering, of the people that know about it, how many people actually join, would you say? Yeah, I think my slide said that there was about 70% of the existing node operators. So a little bit of terminology here. A node operator is an individual who has a single piece of hardware maybe I guess it would be a single piece of hardware. And about them, 70% of them have joined. Right. So out of the 1600 node operators in Rocket Pool, just a little bit more than 1100 have joined.
00:21:41.730 - 00:22:24.960, Speaker A: We do think that from some of the other node operators, I think they are waiting for mev extraction to be required. Like right now, I believe it's about 90% of those in the smoothing pool have mev boost on, but 10% don't. And so you can kind of think of it if somewhat as a strain on it, right? Because they're not actually going after any mev, but they are getting a share of the rewards. The plan in Rocket Pool is to make it mandatory as part of joining the pool. But because of the merge and the new technology on mev and the relays, right now it's just truly an opt in. But most of the node operators are obviously profit seeking and they are turning on the mev boost. But excellent question, by the way.
00:22:24.960 - 00:22:33.100, Speaker A: All right, well, I don't see any more questions, so I thank you very much for allowing me to present here at.
