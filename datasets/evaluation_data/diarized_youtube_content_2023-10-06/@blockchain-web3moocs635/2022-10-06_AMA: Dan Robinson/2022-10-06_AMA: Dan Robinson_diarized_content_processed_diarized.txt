00:00:07.210 - 00:00:35.430, Speaker A: All right, I believe we can get going. So thank you very much, everyone, for showing up to today's AMA. We have a very special guest for you, dan Robinson, research partner and Head of Research at Paradigm, quite involved in Uniswap as well. So he was so kind to help us in the deeper MOOC with DEXs and Uniswap in general. So a warm welcome for Dan.
00:00:36.970 - 00:01:03.338, Speaker B: Thanks, Arthur. Yeah, so hi everyone. I'm head of research paradigm. Paradigm is crypto asset investment firm. But I should say that I'm here representing my own views and not those of the firm, and that nothing I'm saying here is investment or legal advice. I did warden's work as a lawyer, but left to become an engineer. And then for the past couple of years, I've been working as a protocol researcher in a lot of areas, including decentralized finance and particularly in decentralized exchange.
00:01:03.338 - 00:01:27.080, Speaker B: So I've worked with Uniswap on V Two and V Three of their protocol, as well as designing some custom AMMS for other projects like yield that are specialized particular kinds of assets. So I spend a lot of time thinking about the future of decentralized exchange, how it relates to other areas like L Ones and mev. And yeah, I love talking about decentralized exchange. So, looking forward to answering some questions.
00:01:28.090 - 00:01:58.590, Speaker A: Yeah, it's truly wonderful what kind of cross disciplinary experiences and expertise you have, and you're clearly stellar in all of them. So thank you for joining us today and dear students, feel free to ask any questions in the chat. So we have a list of questions that we prepared. We will try to take as much as we can. Also from the live chat. We can't guarantee all of them, obviously, but we'll do our best. So today's AMA, we have structured in three big sections.
00:01:58.590 - 00:02:30.410, Speaker A: So we were thinking to discuss decentralized trading and strategy as the first section, followed by risks and vulnerabilities of DEXes and finally having an outlook on the future of DeFi. Right. So having said that, let's start with the very first question from our audience. And this would be so how can we address the problem of slippage that exists within AMM based DEXes? So, for example, that occurred due to a lack of liquidity.
00:02:31.550 - 00:03:31.914, Speaker B: Yeah, so I think first, maybe worth clarifying because I think this is a very common and important terminology distinction. When we say slippage, typically what we're talking about is price movement that happens before your trade is included. So if you send a trade to an exchange or to a decentralized exchange, if somebody trades before you, it's possible you get a different price from the one that you were looking at at the moment you sent your trade. That's what we typically refer to as slippage. And that tends to have less to do with the amount of liquidity on the exchange and more about how your trade is confirmed there and who else can see your trade while it's in flight separately, there's a question of how much price impact your trade has. So if the price moves that's price movement, that happens as a result of your trade during your trade. So we say slippage to mean price movement before a trade, price impact to mean the movement in prices caused by your trade.
00:03:31.914 - 00:05:02.426, Speaker B: And so when you talk about low liquidity, typically you're talking about price impact, which is if there's not a lot of liquidity on an exchange and you have a big trade on it, you might move the price a lot and you get a worse price than you might have gotten with a smaller trade. So for liquidity, Gordon Liao, who was at Uniswap, and I actually wrote a paper a few months ago studying the amount of liquidity available on Uniswap B Three, as well as other decentralized exchanges and other centralized exchanges. And actually we found that for many of the top trading pairs, there was more liquidity available on Uniswap V Three at most times than any other spot market for which we had data, and that includes Finance and Coinbase and other major exchanges. So as far as liquidity, actually, there's some caveats to exactly how we measure those numbers, but generally, liquidity on decentralized exchanges has been pretty good. Potentially, it could be higher. But it's sort of a question of whether the issue that you're looking at is actually low, whether it actually would be a good thing to have more liquidity beyond a certain point, and then for slippage for the pricement before a trade, that I think is a pretty significant problem right now. On Unisoft V three, almost 25% of trades execute at a worse price than they would have if they'd been at the beginning of the block they were included in.
00:05:02.426 - 00:05:23.780, Speaker B: And I think that's a sign that you're not actually getting ideal execution when you're submitting trades to Uniswap. And so I think there's a lot of ways to potentially address that, but they involve there's some simple things you can do like setting lower slippage limits on your trade. But I think it is a tough research problem, and that's one where I think a lot of people are thinking a lot about right now.
00:05:24.310 - 00:05:48.250, Speaker A: Wow, what a great answer. Thank you. Then I also noticed Uniswap open sourced a router, right? A router that you're using in the UI. So if a user is trading on a pair with low liquidity, then you would still improve liquidity, so to speak, with different pools that you have. I believe that's across V two and V three, if I'm not mistaken.
00:05:48.590 - 00:06:00.046, Speaker B: I believe that's right. And so, yeah, if there's liquidity on other versions of Uniswap and you're trading on the Uniswap interface, then typically your trade could be split between multiple of those pools. Perfect.
00:06:00.228 - 00:06:05.870, Speaker A: So next question. Are there any existing mechanisms for hedging against impermanent loss?
00:06:07.430 - 00:07:13.430, Speaker B: So impermanent loss, this sort of weird term that we use for adverse selection in decentralized exchanges, particularly with automated market makers. Typically, what happens when you're providing liquidity on a decentralized exchange is in some sense you're providing free options to the world where you're letting them trade with you if the price changes and they get to lift your offer. And this is true, I mean, if you're using any order book and you place an order that in some sense somebody has an option to hit it from you. And so the perfect hedge for one particular order would be buying an option. And the perfect hedge for providing liquidity across a particular range, or the closest hedge that you could approximate with it is buying a series of options. So you'd buy a lot of call options or a lot of put options based on in a particular price range, based on the concentration of your liquidity. I think that may tend to be a fairly expensive hedge.
00:07:13.430 - 00:07:43.390, Speaker B: And I think in practice, a lot of liquidity providers might be fine with essentially they're short that option like they're unhedged. But that would be the potentially the way to get a perfect hedge. There are other imperfect hedges that you could do anything where you're buying what's called like convexity anything where you're basically buying something like an option around the current price will act like a hedge on Uniswap. It may be some level of perfect or imperfect.
00:07:44.930 - 00:08:30.750, Speaker A: Very good. The next question we have revolves around flash loans. So flash loans are just to recall, right, a method to execute multiple I mean, to, to borrow a substantial amount of coins or USD wealth from a pool, then do some actions with these coins and then repay the loan by the end of the transaction. If the repayment fails, then the entire transaction fails, and it's as if you have never taken the loan and uniswap is offering flash loans through its liquidity pools. And do you believe there's any other application for using flash loans other than arbitrage?
00:08:33.090 - 00:09:28.130, Speaker B: Yeah. So flash loans, they're useful for arbitrage, but they're also useful for anything on chain where you're trying to mess with the order of operations that an application is expecting you to do. If you want to do two steps but do them out of order, and in some cases you might have to because you don't have the assets to do the steps in the order that was expected, it can be really useful. So a classic example of that is leverage. If you have some USD and you're trying to create a levered long position on ETH, what you might do is use your USDC to buy ETH. Deposit that ETH into a lending protocol, borrow more dollars against it, use those dollars to buy ETH, deposit that new ETH into the lending protocol. Borrow dollars against the new ETH you just deposited, buy ETH with it, and then just do a loop with that until you've maxed out your leverage by buying as much ETH as you can and borrowing as much against that total pile of ETH that you've bought.
00:09:28.130 - 00:10:16.894, Speaker B: That's how people actually used to do this. Max leverage position on Ethereum is often you would just do a loop and it's kind of inefficient from a computational perspective that you have to do essentially multiple iterations on this transaction to get this to enter this position. With a flash loan, you could just flash borrow one of those two assets. You could flash borrow all the ETH you were going to buy, and then borrow all the dollars against it, use those dollars to buy the ETH, and then repay your flash loan. Right. And so that allows you to enter into this position in a simpler way and in a way that costs less gas. And there's a few other cases like that where you're trying to do something on a protocol where it expects you to already have the assets that you were basically planning to get out of entering this position.
00:10:16.894 - 00:10:22.240, Speaker B: And so flash loans can help just smooth some of that process out.
00:10:22.770 - 00:10:45.590, Speaker A: Well, it's quite a use case I haven't thought about yet before. Indeed, I mean, some use cases I thought about were you can just do collateral swaps, right? I think people have done that before. If you want to swap to a less risky asset, maybe a less legit application would be wash trading. If you want to afford the fees.
00:10:46.830 - 00:11:11.246, Speaker B: An even less legit, maybe application is for a lot of attacks. They require having some hacks, require having a comically large amount of ETH, but you get it all back or USDC or something, but you get it all back at the end of the transaction. And so this allows, unfortunately, some exploits to be done that might be capital innovation that might require you to show up with like $10 trillion of e at the beginning of a transaction otherwise.
00:11:11.438 - 00:11:21.240, Speaker A: Right, but this is kind of like not the fault of a flash loan, right? It's rather the issue of, well, yeah.
00:11:21.690 - 00:12:09.534, Speaker B: If applications are well designed right, then, and they're secure, then it shouldn't matter how much ETH you can require to attack it. That's totally true. But again, in some cases, it would normally be a safe assumption that nobody can ever have like 10 trillion wrapded or something. But if the wrapdef function had a rapt contract, had like a flash mint function or something, then that assumption would be broken. So in some sense it's a faulty assumption on the part of someone building the application, but it does mean that the application designer has fewer there's fewer assumptions they can rely on. So that is sort of unfortunate. I think flash borrowing is I think it's very useful and I think it's not a good security assumption in general to assume that nobody rich is going to be attacking your protocol.
00:12:09.534 - 00:12:14.950, Speaker B: So I think ultimately it's kind of inevitable and we should just design around it.
00:12:15.100 - 00:12:51.250, Speaker A: Very nice point. Just to briefly repeat, so Dan mentioned Flash minting. It's kind of the same process as Flash loan. The technical difference is that we mint coins out of thin air and then destroy them by the end of the transaction. So they're technically not lent, but they're kind of just created and destroyed. Great. I mean, speaking of Flash loans and attacks, I think what's actually quite related is one of our questions on Oracles, because attacks often attack price Oracles.
00:12:51.250 - 00:13:08.040, Speaker A: So do you know about any ways in which Uniswap could be improved as a price Oracle? Our students asked. So V Two is limited as an Oracle since it doesn't store any time weighted average price history. But is there any way to fix this?
00:13:08.490 - 00:13:50.690, Speaker B: Right, well, on that specifically, V Three actually did make that improvement. So in V two, it doesn't store any of the history of price observations. So you have to actually look at the Oracle both times. At the beginning of the period you want to measure a time weighted average price for. And at the end in V three, we actually did change that, where it now can record a history of, I think, like up to nine days of these observations and then you can just look back at it later and look at a historical TWA price over some period there. So that particular movement was made in V Three. I think there are definitely still ways it can be improved.
00:13:50.690 - 00:14:40.318, Speaker B: And one issue that I've been thinking a lot about recently is the manipulation resistance of the Oracle, particularly under the new Ethereum Consensus Protocol. So when Ethereum did its merge a few weeks ago, it opted as proof of stake consensus protocol. A lot of benefits to that, but one potential cost is it's easy to know ahead of time if you are a staker on this network. If you're a block proposer, you'll know that when you're going to propose a block, like five to 10 minutes ahead of time. And so this might actually make certain attacks easier. So the way that this attack, this manipulation attack on Uniswap works is you trade. So Uniswap only measures the price at the beginning of each block.
00:14:40.318 - 00:15:33.282, Speaker B: This is uniswap. V Two and V Three measures the price at the beginning of each block. So manipulating the price during a block doesn't really help if it gets armed. But if you are, say, able to control two blocks in a row, one thing you can do is trade the price way up at the end of block N, have a measurement taken at basically a very absurdly high price and then trade back down. And by trading back down in the beginning of the next block, you've avoided the cost that would otherwise happen if someone else were to ARP. You've basically taken back most of the money that you spent on trading the price up to that level by trading back against the liquidity providers. So that's an attack that's expensive to do in a proof of work blockchain because it's hard to guarantee that you get two blocks in a row unless you're doing something like selfish mining.
00:15:33.282 - 00:16:29.638, Speaker B: But in proof of stake knowing that you get one block in a row. So if you're able to get a transaction included at the end of block N and you know that you're going to control block N plus one, that becomes an easier attack. And it becomes an even easier attack if you're able to somehow control two blocks in a row, which will happen with some probability if you control a lot of stake, eventually this might happen. And so this allows you to manipulate one reading on this Oracle, which with a T wop, with an average price when you got a mean one outlier, can potentially influence the price somewhat significantly over even like a T wop of a few minutes. And so figuring out how to make it less manipulation resistant to that kind of attack I think becomes increasingly important in a proof of stake age because that attack becomes a little easier and I think we're measuring exactly how much easier it becomes. But that's a big question. There some ways it might be possible to improve it.
00:16:29.638 - 00:16:49.230, Speaker B: And this we think might involve require building something into the core protocol. So it wouldn't happen on like uniswap v two or v three. But if you had a median price Oracle, if you had some way to basically compute the median price over this period, throw out outliers, that makes it a lot harder to manipulate, but unfortunately that's a lot harder to calculate, often on a rolling basis.
00:16:50.130 - 00:17:21.638, Speaker A: Wow, that's an attack I haven't thought about. It really exciting. I mean, there are probably more such implications then, right, that we should investigate in general that haven't implications have proven at stake. Yes. Your implication is now due to the nonexistence of the secret leader election, right. So we can anticipate who is going to be the leader in an epoch which is this six minute time frame that you mentioned. There's also another difference.
00:17:21.638 - 00:17:43.882, Speaker A: Now blocks are much more regular, I mean the time frame between blocks. But that's probably not affecting the Oracle. Right. Because it just means when a block comes, but it doesn't impact the actual block logic itself. Right. Because in proof of work we had like, I mean, you didn't really know when the next block would come. It was a poisson process here now it's much more regular.
00:17:43.946 - 00:18:04.134, Speaker B: So to someone, I think Pintail wrote an article looking at that question of whether that affects the Oracle manipulation. And ultimately I think the effect is relatively small in part because the variance is not all that high of block arrivals. But yeah, that has changed as well. Nice. And for other applications it may have an impact. Yes.
00:18:04.332 - 00:18:05.640, Speaker A: Butterfly effect.
00:18:06.330 - 00:18:06.838, Speaker B: Yeah.
00:18:06.924 - 00:18:21.210, Speaker A: Cool. All right, so regarding still decentralized trading and strategy. So we were just wondering in general, on the blockchain, what kind of different derivative strategies are you aware of and how would they compare.
00:18:23.070 - 00:18:24.634, Speaker B: Derivatives for what?
00:18:24.672 - 00:18:35.790, Speaker A: I'm sorry, I think like derivative trading strategies. If you know of any, how can you compare them to some degree?
00:18:38.850 - 00:18:45.166, Speaker B: What kind of derivative trading strategies? Like for Hedging impairment and loss or just for speculative trading.
00:18:45.278 - 00:18:54.486, Speaker A: I guess in general, really, it could be perpetuals or any kind of derivative trading. I'm personally not really aware of many.
00:18:54.588 - 00:19:30.638, Speaker B: Yeah, one area my colleagues and I have spent a good amount of time looking at is studying perpetuals and different things that can be done with them. And I think it's a very powerful tool. So a perpetual is a kind of derivative. It just targets basically any number, any price that you want to target. And if you choose different things to target, you can actually get interesting products out of those. And so a few that my colleagues have worked on include if you target. So one is basic thing is if you just target the price of ETH or something, then you get like the ETH USD or the price of Bitcoin.
00:19:30.638 - 00:20:31.294, Speaker B: You get the Bitcoin USD perp that is offered by a lot of major exchanges, but you can target any value you want with it. So with one interesting example is something like Rye, which is a project, I should disclose that we're invested in this, but Targets is a price of $1. But it's wrapped in a particular way on chain to basically produce a stablecoin that is an interest bearing stablecoin and it's a fully synthetic dollar on chain. And so it's using what's basically the same technology behind a perp to Target to create a kind of decentralized stablecoin and maker. The Dai, one of the most popular decentralized stablecoins out there, uses a similar tech. Then if you target sort of more interesting things, there's a lot of different products you can end up with. So one thing that my colleagues worked on with a portfolio project of ours called Open was a product called Power Perpetuals or Squeef.
00:20:31.294 - 00:21:07.658, Speaker B: And we wrote a paper on this last year. But the idea is instead of targeting the price of ETH, which call it like some variable x, you target instead the price of ETH squared x squared. And what does that give you? It gives you this different looking curve where the higher the price of ETH goes, the more ETH exposure you have. And the lower the price of ETH goes, the lower the less ETH exposure you have, essentially. And that's a useful thing to have. That's what I would refer to for called convexity. It's sort of like this kind of same kind of thing you get from options, but a normal perp will give you leverage.
00:21:07.658 - 00:21:45.520, Speaker B: It lets you have more ETH goes up by a dollar, your thing goes up by $2. But this actually gives you convexity, where the more ETH you have, the more ETH exposure you have, the more ETH goes up, the more ETH exposure you have, which is sort of an interesting property there. And then one thing that we explored with power perpetuals is you can do something interesting by combining a lot of them, where if you have some ETH cubed and ETH to the fourth and ETH squared, by holding a different portfolio of these, you can simulate any payoff curve that you want using, like, the Taylor series approximation of that function. So that so far, I think, is just kind of a fun thought experiment. But there's a lot of interesting insight you can get from studying things in that way.
00:21:46.770 - 00:22:03.010, Speaker A: Very good. So still on the topic of strategies, so one of the questions we have from the audience, are there any true delta neutral strategies, meaning strategies that are indifferent to directional price movement?
00:22:06.150 - 00:22:43.422, Speaker B: I mean, the most perfectly delta neutral strategy, I guess, is just like holding USD, and then in crypto that might correspond to holding, I guess, USDC. And then you still expose, I suppose, some custodial risk or other risks of holding any custodial stablecoin. And then there's other strategies. I've seen on Chain that basically they target some trying to be stable. But again, there's potentially some tracking error there. There's potentially risks that you're exposed to with any strategy. I mean, literally holding your money in anything.
00:22:43.422 - 00:22:56.100, Speaker B: It's basically even cash under the mattress. You have some risks, I suppose. But yeah, if you want really, delta neutrality, that means, I think, just cash. Right? It means just holding the safest, stable coin you can find.
00:22:56.630 - 00:23:35.710, Speaker A: Right. Okay, fair enough. Then let's move forward to the second category for today, which are risks and vulnerabilities of DEXes. So one of the questions that we have from our audience was regarding fake contracts on uniswap. So we have these ERC standards that everyone can implement. This is an interface, so the actual implementation can be somewhat arbitrary. And there have been instances of fake contracts in general where users lost coins.
00:23:35.710 - 00:23:55.590, Speaker A: I guess they did not inspect the code behind those ERC tokens. What do you think? How can users protect themselves on uniswap in particular, and given that anyone could add a token there that could potentially lead to a loss of funds?
00:23:56.730 - 00:25:23.570, Speaker B: Yeah, so ultimately, if you're buying a token on a dex or on anything, you should check to make sure that the thing that you are buying is the thing that you want to buy. And there's no way to know in anything that this is like a safe investment or that this is a good investment when buying any particular thing. But you can check and double check if you're buying a token that is named something, did someone who sent you the address and who's telling you that it's named that? And are you really buying, like, USDC are you actually buying some fake token that somebody called USDC. There are interfaces out there sometimes do filter for things like this and they have warnings on imported tokens. But ultimately, I think if you interact at all with crypto, it's just a good idea to have as much defense and depth as possible and as many layers of double checking, especially if you're spending a large amount of money double checking that you're actually interacting with a contract that you want to interact with, that what you're doing is safe. And yeah, that's certainly part of being in crypto right now, is you're in an environment where there's not quite as many guardrails as you might be used to in other areas. And so the assumption that somebody else is going to stop you before you make a mistake is less often correct in crypto than it is potentially in other areas.
00:25:24.630 - 00:25:26.258, Speaker A: Very great, or that your mistake will.
00:25:26.264 - 00:25:27.940, Speaker B: Be reversible if it happens.
00:25:28.390 - 00:25:36.520, Speaker A: Oh, right, yeah, it's true. There has been a proposal I've seen from Stanford on reversible ERC standard.
00:25:37.690 - 00:26:24.694, Speaker B: Well, yeah, but that's tough, right? Because if your transaction is reversible but other people's aren't, now suddenly you're in this bubble where you can't really interact with the Irreversible part of the financial system, part of the Irreversible part of crypto. So as a challenge, I think with that and the traditional financial system and traditional wire transfers made, the choice of we're basically going to have everything be reversible to some extent for a little bit of time to try, not in every case, but we're going to make that compromise. But then that basically has just a lot of implications for how people interact with it and what assurances it can provide. And the costs of figuring all that out are relatively high. And so crypto for the most part has picked the other extreme on that.
00:26:24.892 - 00:26:54.800, Speaker A: So a keyword you mentioned was defense and death, right? So that's what's really key in security as well in information security and in general in managing risks in anything in particular in Texas as relevant for today's lecture. So how do you think, can we evaluate risks in DEXes or in general? Can we translate some of the understanding from CFI to DeFi in terms of.
00:26:56.450 - 00:26:58.494, Speaker B: What do you mean by mean?
00:26:58.532 - 00:27:18.920, Speaker A: Is there anything, any risk management framework from CFI that we can translate over to DeFi? So any lessons learned, so to speak? I mean, you mentioned the revisibility, right? It has quite a lot of negative implications, mostly in DeFi. We don't want reversibility at this stage, at least it might.
00:27:20.970 - 00:28:30.430, Speaker B: I mean, I do think a lot of safeguards can and are put in at the interface layer that kind of mirror some of what you have in the controls that are used in centralized finance. And so if you have something, you could have something on a central exchange website. I'm not sure which ones do this, but that basically will check if you're making a fat finger error. One common mistake people make is accidentally listing an NFT on an NFT exchange for the wrong price. Potentially the interface again can give you warnings about that and I think that makes a lot of sense and is a good idea especially for things where somebody is accidentally they're sort of shooting themselves in the foot and making a mistake that will ultimately cost them. I think there's a lot that can be done improving interface to protect people from themselves or from scammers. I mean, a lot of what happens in crypto there are efforts to try to prevent to take down scam websites.
00:28:30.430 - 00:29:04.242, Speaker B: MetaMask has a registry that they use of phishing websites where anyone who is running MetaMask it'll give you a warning. If you go to one of those websites by the way, this website is going to steal your money. Right? And so I think there's a lot of the same conventional tools that people use taking down websites, giving people warnings, giving people better tools for detecting fraud that I think are totally applicable in crypto and I think are starting to help potentially in reducing the incidence of scams.
00:29:04.386 - 00:29:29.890, Speaker A: Yeah, it's great to see that wallets are getting more and more smart, so to speak. I mean we're still at very early stages I believe, so some of our entrepreneurial students here feel free to disrupt the wallet industry if you want. So still speaking about security, so what are the security benefits of using decentralized exchanges over centralized exchanges?
00:29:31.830 - 00:30:32.478, Speaker B: So the biggest benefit in my view is if the decentralized exchange doesn't have any bugs or backdoors and the platform that it's running on is working and you don't make any mistakes. Some of these are potentially big assumptions in some cases, but under those conditions, if you are trading on a decentralized exchange, you don't have any counterparty risk where if you're trading on a centralized exchange, you generally have to deposit your assets with some custodian for it to be used in trading on the centralized exchange. And there's some risk that the custodian gets hacked or that they exit scam with all your money. There's some risk that they freeze your money for potentially regulatory reasons or other reasons. Whereas, if you're trading on a decentralized exchange, you have complete custody of your assets in between trades. You're not depositing them or holding them with anyone. And so, unless you lose access to your private keys, you're just safe.
00:30:32.478 - 00:31:10.370, Speaker B: And during the trade, you're guaranteed, again, assuming you don't make any mistakes and the exchange doesn't have any bugs, you're guaranteed that if you pay in the assets that you wanted to sell, you will get the assets exactly the ones that you agreed to buy. And so if again you do everything right, there's much higher cryptographic level security over those that protects those assumptions of safety there. Whereas with a centralized exchange, even a reputable one, you. Might have some risk that there's a hack or backdoor or something like that and your funds get stolen.
00:31:11.190 - 00:31:38.860, Speaker A: Very good. Let's assume the user is doing everything correctly, the platform is secure, there are no bugs in the smart contract, and let's assume the trader has set, like the default slippage, but the amount that is being transacted is still non negligible and still profitable for a sandwich attacker to try to attack. How can users protect themselves from sandwich attacks then?
00:31:39.550 - 00:32:24.662, Speaker B: Yeah, so a sandwich attack is one of the things that causes the slippage issue that I was talking about before this negative slippage, you got a worse price than you might have at the beginning of the block. One way to try to protect it is to set a strict limit on slippage. Right. It's a 0% slippage tolerance, which means your trade will fail if it is included. And the price is different from the one that you saw at the beginning of the Block and that prevents anyone from sandwiching you at least causing you to get a worse price than the one that you were expecting at the beginning of the Block. It won't help you get a better price if the price actually improves during that time. Someone else might get that better price than you, but at least it avoids that.
00:32:24.662 - 00:33:29.854, Speaker B: One of the costs of that is that in uniswap, what happens is if your trade gets included and it didn't meet that slippage tolerant, your trade fails and you still pay some gas for that failure. So you're still paying a penalty and you don't even get your trade included. So if you set too aggressive a slippage limit, that can cause that problem. I think one thing that we've been thinking a lot about is, is there a way to actually get better slippage or better sandwich attack mitigation without that risk of failed transactions. And one example of how you can do that is by submitting your trade through a private relay. This is the one that Flashbots, another portfolio company of ours, but Flashbots runs a relay where you're able to, called Flashbots Protect, where you're able to submit a transaction that nobody sees, nobody in Memphis sees, and as a result, nobody's assuming that miners and Flashbots don't collude in order to front run your transaction. Nobody even gets the opportunity to actually see your transaction and front run it.
00:33:29.854 - 00:33:48.690, Speaker B: Additionally, Fresh Project also attempts to guarantee that your transaction is not included at all if it fails. So you don't have to pay the penalty unless it actually succeeds. So it allows you to set a more aggressive slippage tolerance without risk of paying gas and not having your transaction included or not having to succeed.
00:33:49.130 - 00:34:07.930, Speaker A: Right. So in the case of failure, there's no penalty. Right. Okay. Do you think these kind of private relay service will somewhat change a bit with this block proposal, builder separation proposal? Will there be change for the users.
00:34:11.310 - 00:34:53.662, Speaker B: I believe it's still working and they just sort of use now mevboost or other things. Yeah, I think as of today, I believe Flashbust is still working and yeah, it just gets included in those blocks. I'm not entirely sure it's possible that these will result in taking it longer for your transaction to be included, but I think maybe they'll all work that out. So I'm not sure. I think the private relay landscape is still evolving pretty rapidly. So I think that the hope is that we figure out some way to do it and one that minimizes trust assumptions but allows the transactions to still be included privately.
00:34:53.826 - 00:35:06.560, Speaker A: Indeed, yes. One of these trust assumptions is that the miners are not executing sandwich attacks and they could very well do so, at least those that are finally making the block. Right, yeah.
00:35:10.450 - 00:35:40.760, Speaker B: Sorry. Oh, go ahead. The way it used to work, at least in proof of work land, is essentially there was this group of miners that received Flashbots transactions, but if they were to start front running them or abusing their access to that to see those transactions that they could basically just be cut out from, they would stop. So there's sort of a social element to it, whereas we'll just agree to stop sending you those transactions. I think that tended to work.
00:35:43.690 - 00:36:01.310, Speaker A: We're seeing the emergence of multiple relayers right now. I mean, there's also just a bunch of relays. So if this market gets more scattered, then maybe the social construct won't work that well anymore. But let's hope it will last for a while to allow users to make transactions without being sandwiched.
00:36:02.370 - 00:36:04.014, Speaker B: Yeah, very good.
00:36:04.052 - 00:36:41.660, Speaker A: So the next question is a bit unrelated, but it's still on the vulnerabilities risks regarding DEXs. So it's more about the governance tokens. So we have many DApps, like Uniswap, they have a governance token to create a governance structure. What we see, however, that few of these token holders actively participate in voting. So how do we make sure to incentivize token holders to participate in order to prevent also single actors of kind of monopolizing the decision making? What do you think in general?
00:36:42.750 - 00:38:17.382, Speaker B: Well, I think the most important thing you can do to protect a protocol from a governance attack is to minimize the service area of what governance controls to what is absolutely minimal, minimally required for what you want from governance and just leave the rest to other kinds of mechanisms that are non governance mechanisms. Because I think we still don't know, and it may just be literally impossible how to design a fully secure governance mechanism that perfectly gets the results that we would want at every time. I mean, it's been a problem for centuries in political science and I think there's a lot of impossibility results around creating governance mechanisms that aren't subject to capture or are collusion resistant among rotors. Right, so the best thing you can do is minimize the amount of power that governance has over your protocol. And that's, for example, like Uniswap, there's a governance system for it, but governance does not control, is not able to confiscate all the money in the protocol. It's not able to stop to shut down any of the contracts that are part of the protocol. In general, people can use the protocol fearlessly, generally without really worrying about whether governance will make good decisions or not, because just governance decisions don't actually affect most of what goes on in the protocol.
00:38:17.382 - 00:38:57.080, Speaker B: And mostly they're not exposed to a significant amount of risk from governance. And I think that's the most important thing you can do. And generally I worry about protocols where you try to design the perfect governance system and then you say, and then governance can just upgrade every single piece of this, right? Well, then if someone wants to put in their money into this protocol, they then have to evaluate, like, oh, who controls governance here? How good is this governance mechanism? And that's a lot of things that you may just not want to worry about when you're trying to participate in DeFi. And I think things that minimize governance tend to do a better job of that than ones that try to design a complicated governance system that's supposed to be perfect.
00:38:58.330 - 00:39:01.080, Speaker A: Simplicity is key for security. Very good.
00:39:01.630 - 00:39:02.380, Speaker B: Yeah.
00:39:03.310 - 00:39:37.380, Speaker A: So the last question for today's risk and vulnerability section is regarding stablecoins. So, stablecoins are a non negligible fraction of assets in liquidity pools. As such, they may sometimes be less or more stable, which causes certain issues for DEXes in general. Right? So how do you think they impact the trust indexes overall and how do you think, should we handle stablecoins in general indexes if we can?
00:39:39.050 - 00:40:56.590, Speaker B: One interesting thing that's happened with DEXes is that on ethereum, the medium of exchange or end unit of account, typically that DEXes operate on the usual asset that they trade against is ETH more often than it is stablecoin for most non ETH, assets are generally being traded against ETH. And I think we may not have expected that five years ago, before and Uniswap V one launched with ETH pairs for everything, but maybe it would have been predictable because I think in a lot of crypto, bitcoin used to be the base pair, typically for assets. But I think one of the reasons why ETH is a good base pair, there's others, it's potentially more correlated with most crypto, most volatile crypto assets more correlated with them than dollars are. So there's some possibility that's slightly better, like lower volatility for that reason. But another reason is just it's neutral. It doesn't depend on an assumption about some particular stable coin. And I think that's getting at the same thing where if you had every single dex pair be a pair against a stablecoin, like, well, a which stablecoin, there are a few options, and people might have different assumptions about which one is safer or more liquid or more reliable.
00:40:56.590 - 00:42:14.446, Speaker B: And if one of those stable coins were to go down, then were to fail in the way that, say, catastrophically UST failed earlier this year, you might have a lot of harm befall those who are providing liquidity on those DEXes or trying to use those DEXes. One answer is just using ETH pairs or on other pool chains. Often it's the native asset of that chain, I think is one possible solution for that. You still have a lot of stablecoin volume on decentralized exchanges is between stablecoins, right? There's some exchanges that are entirely designed for stablecoin, stablecoin pairs like Curve, for example. And for those, I think they're generally designed to allow some volatility in the price or liquidity or demand for each of these stablecoins unisoft v three. Also, I think is designed to allow very tight market making in a particular stablecoin pair without making too many normative assumptions, that both of these are worth a dollar. And so it allows a lot of price discovery, discovery within this very narrow range that's I think where we see more of the stablecoin volume.
00:42:14.446 - 00:42:47.940, Speaker B: And yeah, and generally the answer to that has just been make it really concentrated liquidity like you have in curve and unisoft V three, but still allow some room for price discovery. And then you just can then pick which stablecoin you want and trade into it, ideally with a lot of liquidity that is on these pairs. And then, yeah, use whichever stablecoin you want. But ideally this would all be abstracted from the user, like the user just wouldn't have they could use whatever stablecoin they want and there's just the pools of concentrated liquidity for each of those pairs that if they want to pay someone who only wants to accept a different stablecoin, just go to uniswap and trade those.
00:42:48.710 - 00:43:27.070, Speaker A: Okay, great. Moving on to the future of DeFi. So many projects or many DeFi applications are open source, which is great, so we can all inspect their code. Some of the downsides, if you think it's a downside, it might not be, is that they're kind of like at a risk of being disrupted. You can judge yourself whether you like this or not, but how do you kind of create a good balance between, so to speak, customer loyalty and liquidity in DeFi?
00:43:29.970 - 00:44:46.754, Speaker B: Well, so I think customers, if we think of customers and users generally as traders, as people who are swappers, those are in some sense, I think, and this is not a completely uncontroversial opinion, but I think when you're designing decentralized exchanges, you should really care about what is best for people who are trading. And ultimately everything kind of boils down to that. I think the assumption that there is loyalty, that someone because they'll treat it like a team sport, and if somebody really likes sushi swap, that they'll go trade on sushi swap, even if they're getting a worse trade than they would on uniswap or vice versa. I think that can be true in the very short term, but ultimately doesn't make sense. Ultimately this is a competitive market. You can have things like aggregators that are automatically routing people's volume to wherever they'll get the best price. And so the idea that on this how good your memes are as a decentralized exchange has any impact on ultimately whether you will get a lot of volume, I think that's sort of probably already outdated notion.
00:44:46.754 - 00:45:43.674, Speaker B: And so I think there's some amount of stickiness, especially at the interface layer on exchanges, on decentralized exchanges. But I think, yeah, this idea and it was tested by things like Sushi where it's like, oh, if you have a really strong community then it's fine that you don't really have any liquidity or volume. I think we're starting to test that assumption. I think this is true for uniswap as well. I think uniswap, some people have suggested that uniswap should do things like I have a talk recently about just in time liquidity, which is a phenomenon I won't get into much into it right now, but people basically think uniswap should make certain protocol changes in order to benefit liquidity providers at the expense of swappers. And I think that is based on an assumption that you are entitled as this decentralized exchange, you're entitled to your users volume and if you give them bad volume, they're just going to keep coming to you and trading at bad prices and that's better for you and your liquidity providers. And I think that's just not necessarily true.
00:45:43.674 - 00:46:02.110, Speaker B: I think we don't deserve volume if we're not giving people this protocol is not giving people the best possible trade execution that they can get. And so I think ultimately maximizing that is the way to actually continue to keep getting volume.
00:46:02.690 - 00:46:44.490, Speaker A: Yeah. And the competitive nature of DeFi also extends beyond the smart contracts as you have implemented this routing algorithm that we discussed earlier. So you can make quite some significant changes on the UI side that will offer even better prices for your customers at the end of the day, which will differentiate you then. Excellent. So regarding the future of DeFi still, so what do you see as kind of the next steps in DEXes? So what are the primary improvements that we want to make in the next Dex implementations to achieve whatever properties you're seeking, whether that's scalability market adoption, better prices.
00:46:46.850 - 00:47:40.110, Speaker B: I think addressing the slippage issue is very important. Like I said before, almost 25% of trades are executing at worse than the price they would have been executed at if they were included at the beginning of the block they were included in. And that seems somehow suboptimal. Some of that value is potentially going to minor extractable value to mev. Some of it might just be a result of poor routing or inefficient transaction ordering or bad luck. But generally, I think addressing that seems like somewhat of a lower hanging fruit and a big priority. I think the free lunch here is improving the cost of transactions, just reducing the gas cost, making transaction execution more efficient, because that's just the cost that right now is falling on users that isn't really going to anyone.
00:47:40.110 - 00:48:02.600, Speaker B: It's kind of going to the miners. But generally we want just the computational cost to be as efficient as possible. Yeah, I think ultimately trying to improve the situation for slippage, reducing slippage and reducing transaction costs seems, I think, like maybe the next big battleground there.
00:48:04.170 - 00:48:22.410, Speaker A: Great. So still regarding IP and open source. So do you think there's any way or any potential future event where you would see decentralized protocols merge or acquire one another? I mean, similar to M A in TradFi?
00:48:23.390 - 00:49:00.280, Speaker B: Yeah, I think the record to date of Protocol M A has been very messy, kind of understandably. It's a very complicated thing even for companies to do, and they've been doing it for hundreds of years. It's a messy process to try to integrate multiple projects, to try to negotiate with a Dow over a purchase. Right. There's a lot of agency problems involved. There's a lot of misaligned incentives. Sometimes it just doesn't make sense.
00:49:00.280 - 00:49:59.210, Speaker B: There's some conglomerate discount, potentially, where if you have, like, two independent tokens and you see this in traditional corporate finance as well, but if you have two independent tokens, they might just trade at ridiculously high prices independently and to merge them, like, they wouldn't necessarily double in price if you were to merge them together into one protocol. And so that's something known as a conglomerate discount in corporate finance. But I think you see it a lot in crypto, where a lot of these assets are. It's very speculative about whether this protocol will end up being good or winning. Protocol M-A-I think just right now doesn't always make a lot of sense. I think we may see it we probably will see it eventually at some point, but I think it's hard to exactly predict what will enable that. But right now, it seems like it's historically been messy.
00:49:59.790 - 00:50:08.620, Speaker A: Thank you. And we have a short follow up question on that in the chat. So Matthew is asking, do you think smart contracts can help streamline this process of.
00:50:10.450 - 00:51:05.566, Speaker B: I mean, I think in some cases, for example, if you want to implement vesting provisions, you can do that with a smart contract, potentially easier, more easily. And in fact, a lot of the simple stuff in M-A-I could imagine you controlling with smart contracts and making it easier and cheaper. That's not really where I think the big costs come from. The big costs come from just misaligned incentives. They come from these things that are hard to adjudicate with a smart contract. So if you take, like, right now, the biggest piece of M A litigation going on some of the biggest M A litigation in history is going on right now with Musk and Twitter. And for those in the future, I'm sure you guys are all laughing at, I think I think I just saw this morning, and it seems like there may be a possible settlement there.
00:51:05.566 - 00:52:08.206, Speaker B: But the issues being debated there are not really about whether it's not something that could be resolved by a smart contract. It's about whether this particular statistic that was used in the filing is fraudulent. It's like, I don't know how a smart contract would determine that, whether there's been a material adverse event. I don't know how a smart contract is going to determine that. What a smart contract would do potentially is it could shift the burden where right now in some, like a Delaware court could order Elon Musk to complete this purchase, right? But he's in some real sense still has this money. So Twitter has to go drag him into court and make him spend the money and borrow money and do other things to buy Twitter. So the burden's in some sense on Twitter, whereas if it was a smart contract and maybe somehow he'd put all this money up in escrow in a smart contract, then they could have arranged it so that by default, Twitter gets the money and Twitter gets bought.
00:52:08.206 - 00:52:28.620, Speaker B: And then he has to go through some whatever process and try to get it back. And so that's this concept that possession is nine tenths of the law is that what a smart contract can do is tell you, here's the default. The default is you're going to be paying for this, and then you're trying to get out of it. You're suing potentially to get out of it or to reverse the transaction rather than having to be sued. And that can matter a lot.
00:52:29.470 - 00:53:04.120, Speaker A: Lovely to conclude for today, we have two more questions for you. One is what is kind of like your favorite resource, whether that's a book, YouTube or TikTok channel, whatever for our audience, just what's your general recommendation as an interesting resource, whether that's in your private life or crypto or anything. And the second question is, what kind of projects or specific projects or project else in DeFi, are you the most excited for the foreseeable future?
00:53:06.330 - 00:54:35.518, Speaker B: For an interesting resource, I cannot recommend highly enough Matt Levine, who is a financial columnist at Bloomberg, and he just writes a daily newsletter called Money Stuff. It's a free newsletter, highly recommended. He covers crypto issues but a lot of other high finance issues as well, including things like M A, and I think just for understanding the financial system as it actually works and for getting a very funny perspective on that. I think Matt Levine is the best in the industry and everybody in finance and law and a lot of people in government and ridic regulators read him for good reason, and that is very funny. So I would highly recommend subscribing to Melavin. He has fantastic coverage of crypto as well from a sometimes slightly more skeptical perspective, but one that's warranted I'm sorry, could you remember the other areas that I think that I think could be interesting? I do think infrastructure just like technical infrastructure often during I don't know if I would call this a bear market or what a bear market is, but during periods where the market has been on the whole going down often it can be worthwhile to put some time into trying to build the fundamentals, trying to build foundational technical infrastructure. And I think a lot of that was and has been built during down periods.
00:54:35.518 - 00:55:18.126, Speaker B: I think if you're technical and you want to start a company, I might consider just starting an open source project, building some critical piece of infrastructure, doing it fully open source, not worrying about business model yet. And it's especially true if you're in college. Maybe you don't need to hire a lot of people. You can just go out and start coding on this today. I think that as far as a way to start a company and then just work from there and take step by step, I think that is an underrated way to start a company in crypto. And because in part there's been so much easy money in this space, it maybe hasn't been as appealing to just sort of bootstrap and build your own open source stuff rather than immediately trying to commercialize and grow. I think that's something that I would consider looking at.
00:55:18.126 - 00:55:47.180, Speaker B: And that's true. If you're looking for an area to build technical infrastructure in, it feels like zero knowledge proof tech right now. The core tech has had a ton of brilliant innovation being done on it. And the interface layer to it is really lagging behind people, the sort of languages, the ability to actually write applications for it. And so building good frameworks for writing applications on ZDP I think would be a really for a technically minded person, could be an awesome area to look.
00:55:48.190 - 00:56:09.690, Speaker A: Dan, what a lovely conversation. I guess the last keyword from you is start today. That should motivate everyone here. You mentioned start today, right? Don't wait for tomorrow. Start coding. Yes. So, yeah, thank you very much for your time again today and for your help in this big DeFi MOOC.
00:56:09.690 - 00:56:12.606, Speaker A: Really appreciate it. Thank you.
00:56:12.628 - 00:56:14.160, Speaker B: Yeah, thank you for having me back.
00:56:14.850 - 00:56:18.300, Speaker A: Thank you, Dan. And then I wish you everyone a great day.
