00:00:00.810 - 00:00:32.710, Speaker A: Welcome to the future of DeFi Fiveside chat series, a series of conversations with thought leaders in blockchain and DeFi. The fiveside chat series is also part of the free and open DeFi MOOC class available at defi learning.org. To complement the technical nature of the course, it is co hosted by Ether Javis, professor of computer science, Imperial College of London, and me Dong Song, professor of computer science at AUC Berkeley and founder of Oasis Labs.
00:00:33.130 - 00:00:49.750, Speaker B: The following is a conversation with Michael Igorov, CEO and founder of Curve Finance. Curve is a decentralized exchange and one of the biggest in existence, with almost 20 billion U. S. Dollar of total value locked TVL.
00:00:49.910 - 00:01:29.638, Speaker A: In this conversation, Michael shares unique designs of Curve, including its strong support for multiple chains, its mission to maintain a non custodial DAO, its biggest crisis to date, and other valuable insights for DeFi and entrepreneurship. Here is our conversation with Michael Igroff. Michael, thanks a lot for being with us. You have done a lot of really great work in DeFi. So looking at future of DeFi, then, I think the first question is, what is really DeFi? So can you talk to us a little bit about what in your mind is DeFi?
00:01:29.814 - 00:02:53.730, Speaker C: Well, one can define DeFi as some basically financial instruments which work in an autonomous fashion on a public blockchain. Right? Well, meaning that at least you don't need to run your own infrastructure. You have this decentralized infrastructure which cannot be even stopped, like Ethereum blockchain. But I think it gets more interesting when you get into details like which projects are decentralized and which not. Like, for example, if admin has control over funds or admin does not have control of funds, or like admin doesn't have any control whatsoever. And who is this admin? Is it a DAO? Is it a company of a person? Is it multisig? So there is all this sort of spectrum of decentralization. But I think one common thing is that all these DeFi projects run in a fully autonomous fashion on public blockchain.
00:02:54.550 - 00:03:30.334, Speaker A: Interesting. Okay, great, thanks. In your mind, Defi, as you said, it's autonomous. So essentially it's this programmable, you can call it programmable money, programmable contracts that essentially provide financial instruments, and you are seeing nonstoppable, essentially, for example, it's censorship resilience, and essentially can continue to operate essentially under any circumstance, I guess.
00:03:30.532 - 00:04:08.166, Speaker C: Well, I mean, that depends on degree of decentralization. For example. Well, let's say if someone, let's call it an admin, right, wants to stop the service, can the admin stop it, right? Well, for some projects, admin can. For some other projects, admin cannot. And for some other projects, it's kind of in between. Like sometimes yes, sometimes no. So it really depends.
00:04:08.166 - 00:05:06.190, Speaker C: And there could be reasons for being able to stop something. For example, let's say if some fatal flow is found. And you would need to be able to stop a smart contract in such a case, for example, that, or let's say some projects make smart contracts upgradable and they need to be able to, let's say they want to fix something to be able to do that. But then, of course, the question is, how is this upgrade power guarded? Like, who is having that? But yeah, that's kind of, I guess no single answer. So for some projects are fully unstoppable. I would say curve is pretty much that. Or let's say uniswap is also pretty much that.
00:05:06.190 - 00:05:27.750, Speaker C: But some other projects, I think are not necessarily unstoppable because they want to still be able to fix things because let's say, they don't yet think their code is ready enough to be failing fully autonomously.
00:05:28.810 - 00:05:46.780, Speaker A: Yeah. Thank you. So essentially there's a spectrum essentially, on this degree of decentralization, in particular in terms of the governance. I guess it depends on the stage, what stage the project is.
00:05:48.190 - 00:06:21.560, Speaker C: Yeah. But we always also still call all these projects defi, more or less. And I think one other important feature is that DeFi projects are composable. So you could use one project in another project. Like we have a pool which takes stable coins, and while they are sitting in the pool, they are also being deposited to Avi, for example, or to compound. So stuff like.
00:06:22.890 - 00:06:37.530, Speaker A: Right, great. Yes. Thank you. So this leads to the next question. So then why should people care about defi? Why is Defi even developed? What purpose does it serve?
00:06:38.190 - 00:07:09.218, Speaker C: Right. Yeah. Well, I mean, I don't know, how about different users? But for myself, for example, some time ago, like I think in 2018, well, for me, it started from basically borrowing against crypto. I didn't want to sell crypto, but I wanted to spend while holding. Right. So I just opened a dow, how it was called CDP and borrowed Dai. Right.
00:07:09.218 - 00:07:58.998, Speaker C: And then later on, let's say I returned Dai. So pretty much something like that. But then of course there was a problem that, okay, when I have die, I need to exchange it to something which redeems to real us dollars. And I started doing that on Coinbase, which worked pretty well, but then kind of, well, the pricing wasn't as great. And then I found this algorithm for curve and launched it basically to be a user of that myself. First of all, you of course would ask, why wouldn't one do that in a centralized setting, like, let's say, on an exchange or centralized source of lending. Right.
00:07:58.998 - 00:08:51.218, Speaker C: And basically with lending, I'm not sure I would trust cryptocurrency. With cryptocurrencies to centralized entities, they are not always 100% auditable, and they are not running autonomously, so they can do things. And basically I would trust them. I wouldn't be comfortable with that. Right. And another thing, if you started doing something in a decentralized world, it makes sense to do other things in decentralized world, so that you are not like jumping between this decentralized and centralized setting all the time. You can do everything decentralized, and then, well, all of a sudden more and more services work decentralized.
00:08:51.218 - 00:09:29.490, Speaker C: So I now pretty rarely exchange tokens on centralized exchanges. It really goes on decentralized ones just because, well, it's more convenient. Pricing is often better. And also, when it comes to lending, somebody is holding crypto for a long time, which is kind of a collateralizing this lending, and I'm not very much trusting centralized platforms, but decentralized ones, they have different risks, I would say, and I'm more comfortable with those risks.
00:09:31.190 - 00:10:11.040, Speaker A: Great. Yeah. Thank you. So further, you can share this. So if we look at the history, essentially the history is about, a big part of it is how technologies, advances and so on. You mentioned in 2018, you were trying to write, for example, using make it out to borrow money now to have to sell your crypto and so on. So I think a bigger picture is at that time, even before then, maybe you participate in the blockchain space already.
00:10:11.040 - 00:10:39.166, Speaker A: Did you expect that DeFi will be such an important application for blockchain? And even broader question. So essentially we can consider humanity as like a hive of collaborating, non collaborating individuals. So why did this collective intelligence essentially come up with something like Defi? Do you think that's.
00:10:39.218 - 00:11:53.490, Speaker C: Well, I mean, it's just when you have programmable money, you will have people coming up with all sorts of innovations, and because it's permissionless, then it's much easier to iterate on those innovations. Like imagine iterating on innovations in a bank. Let's say you found a new algorithm, how to handle, I don't know, foreign currencies. How quickly will you deploy it in a bank? It would be very slow. In decentralized finance settings, yes, you need to ensure that everything is super safe, but it's pretty much like self served innovation, so people just do it and multiple things get tested. And as for expecting the size, actually yes, I did expect exactly about this size. Well, I mean, it's a little bit surprising that what I've kind of planned was for the company and for the project, that what I planned for the project actually turned out to be true.
00:11:53.490 - 00:12:40.800, Speaker C: But it's not like shockingly surprising because I just felt that, let's say for stablecoins, for example, looked at what are the trading volumes like stablecoin to stablecoin on centralized exchanges, and thought that, well, if the algorithm will be so much better than on centralized exchanges, it's pretty much possible that everything will. Stablecoin to stablecoin exchanges migrate on chain and then apparently the numbers appear to be like exactly what they are. And of course the other defi grew as well. And yeah, it makes total sense. I think.
00:12:42.530 - 00:13:01.400, Speaker B: This is such a nice story that you have laid out here, right? Like you kind of saw an issue yourself that you wanted to solve for yourself. That's why you build something, because by nature you can create as an engineer, like new protocols, and then you empower even more users beyond yourself, right?
00:13:02.650 - 00:13:03.960, Speaker C: Many more.
00:13:04.410 - 00:13:21.262, Speaker B: Exactly. That's so beautiful. And also the way you're kind of touching on centralized finance, CFI and DeFi. So in what way do you believe they actually complement each other? So you're saying right now you're mostly staying in DeFi because you get cheaper price.
00:13:21.316 - 00:14:51.802, Speaker C: Well, I mean, it also depends on what you call CFI, right? Well, if you call CFI centralized exchanges like binance, I still use those for, let's say not for large amounts of money, but for smaller amounts of money because I'm using that as something substituting lack of scalability on Ethereum. Every ethereum transaction is too expensive. But I think that is going to change pretty quickly with layer twos and whatever other chains which are more scalable, for example. But also there are things like banks which don't go away. I'm just not keeping much money in banks, but I do use them as fired on ramps and off ramps and ways to interact with real non decentralized world. And I think they are not going away. At least it doesn't look like, like with centralized exchanges, I think they feel competition, right? And well, that's why binance is doing binance smart chain, because they thought maybe what if we ourselves will compete with ourselves? Why not? That's a smart decision, I guess.
00:14:51.802 - 00:15:29.110, Speaker C: But I think centralized exchanges really feel the heat. And while Ethereum is not super scalable. They have some reason to be used. But also actually, if some traders work in order book kind of setting, it also works better on a centralized exchange. So they do have their applications, but they do also have a big portion of the market eaten up by DeFi.
00:15:29.850 - 00:15:35.400, Speaker B: Very interesting. And do you think this trend will continue? Do you think Defi will be eating up more of this?
00:15:37.050 - 00:16:31.690, Speaker C: I think so. Like what we have, let's say, if we have more efficient cryptocurrency exchange algorithms, exchange between currencies of different denominations, not cryptos, but let's say fiat currencies, us dollar to euro to whatever. Right. That's kind of another thing, right. And also another thing which defi is currently kind of suffers from is so called impermanent loss, which is not necessarily a loss, but an artifact of automated market makers. When you have, let's say, constantly balanced portfolio, pretty much like you have an AML which balances your portfolio and makes money on top of that. Right.
00:16:31.690 - 00:17:31.086, Speaker C: And when you balance your portfolio, apparently the value of this portfolio, when the prices change, is smaller than the value of all the coins which you had initially if you didn't keep them in this portfolio. But amms, of course, earn fees on top of that, so they can kind of overcome this sort of loss. But anyway, for many people, it would be nice to just deposit one asset and make fees on that asset. That's probably why curve finance is so popular, because you basically exchange between US dollar and US dollar pretty often, and then your portfolio is just uS dollar and doesn't really have impermanent loss. But when you have different sort of currencies, you have this artifact. And it would be nice to kind of somehow get rid of it. And yeah, there are ways, I think so.
00:17:31.086 - 00:17:52.500, Speaker C: I'm kind of thinking about those. But there are many things which need to be solved, and there are many applications which can be launched there, and I think that's all possible. And there is still a lot of room for inventing something new.
00:17:54.070 - 00:18:01.334, Speaker B: I guess our students will love to hear this and future young researchers. Yes, there's a lot of room for new things.
00:18:01.372 - 00:19:08.700, Speaker C: Yeah. And really coming to that from research perspective is really, I think, the right way to do it. For example, I just thought of some way, like when you can exchange from one coin to another slowly, like, well, when you have really many points, and this feels extremely similar to so called avoided crossing in quantum physics, or how it's called Landau zener transition. But this is like physics and this is like mining. So what's the similarity. Apparently there are many similarities, and if you are exposed to something seemingly unrelated but deeply mathematical, you may find something really similar in cryptocurrency world and also apply this and experiment with that. Well, I mean, if it's a safe experiment of.
00:19:11.170 - 00:19:44.690, Speaker A: Great, great. Yeah. Thank you. So, going a little deeper on DeFi. So everyone knows today the way DeFi protocol is measured is mostly by TVl total value locked, which essentially measures how much asset has been deposited in the DeFi protocol. So do you think TVL is an appropriate metric to rank the popularity of DeFi protocols?
00:19:44.770 - 00:20:15.122, Speaker C: Right. Well, I think partly not necessarily 100%, because you can imagine this. Imagine that you have, I don't know, you have ETh, right? And let's say you make a protocol called ETH holder. You can deposit ETH and it just sits there. And then you make another protocol ETH holder holder, which deposits money to ETh holder. And you can make this ten times. And here we go.
00:20:15.122 - 00:20:33.030, Speaker C: You have, I don't know, ten ethers sitting in your d five ecosystem while it was actually really one ether deposited. And really this ether is doing nothing. So just TVL is probably not super great of a metric, but it's relevant in many cases.
00:20:33.690 - 00:20:46.410, Speaker A: Yeah, this is a great example. And I wonder, when people calculate the overall TVL in DeFi, like, how much of this actually happens. We do see that the same asset essentially is being amplified.
00:20:47.150 - 00:21:12.260, Speaker C: Yeah, that's a good question, really? Because I think some statistics websites actually subtract when they calculate the total value in defi. They subtract these cross references. I think DBank did something like that. Yes. So I don't remember. What's the defi size? If you remove that application?
00:21:14.870 - 00:21:19.218, Speaker B: I think it was about 20% smaller. Only, if I'm not mistaken.
00:21:19.394 - 00:21:27.400, Speaker C: Okay, so it's only 20%, which is redeposited in the material. Interesting. I thought that would be more, but yeah.
00:21:28.430 - 00:21:39.660, Speaker A: Right. So since TBl has these various issues, what do you think? What other metrics would you consider appropriate alternatives to?
00:21:40.850 - 00:22:07.766, Speaker C: Like. Not that one metric should be looked and other not. It's more like. Well, one metric is obviously like four exchanges could be trading volume. Right? Another metric could be like protocol revenue. It could be a revenue of the whole system or could be revenue just over dow. And that's actually, they are not the same thing.
00:22:07.766 - 00:22:51.106, Speaker C: Because if you think about it, for example, on curve, you have curved dow and curve pools. Liquidity providers earn pretty much 50% of what the pools earn, and another 50% is going to curve dow. And also. But liquidity providers, in addition to fees they earn, they also earn the curved dow tokens. Crv. Right. Anyway, so this revenue, which is coming from fees, it's going to both DaO and liquidity providers, whereas on uniswap, dao gets zero.
00:22:51.106 - 00:23:43.966, Speaker C: And everything is going to liquidity providers. The admin fee is zero. And that's kind of a little bit different. But the amounts earned are pretty good to measure. But also they are not always easy to measure because, for example, let's say we have crypto pool, right? Which if you measure by fees, it actually would be showing numbers much bigger than what it actually earns. Because apparently it has some interesting mechanics. When you adjust price where the liquidity is maximum, and when you do that, you experience some loss.
00:23:43.966 - 00:24:28.354, Speaker C: So this loss is subtracted from profit, and profit is actually less than what you have from just measuring fees. And, well, of course, we are all accounting for all of that inside the smart contract. But, for example, uniswap three doesn't account for that. So if you measure just fees, it will be like really big fees, but also there is a big loss when you move out of range. And what money are people actually making? Well, that's a good question. So in principle, it would be a really nice way of thing to measure, but it's sometimes hard to measure. Sometimes you may measure that the protocol is making only losses and not no profits, but maybe not.
00:24:28.354 - 00:24:56.170, Speaker C: Because who knows? Maybe users are doing something on the side which makes this operation profitable. But in principle, it would be a good metric. Like, for example, if it's a lending protocol, which is taking fees, it's clear that all these fees go to revenue of the protocol. And, yeah, this is kind of no brainer. Right. So sometimes it's easy to measure.
00:24:56.990 - 00:25:15.494, Speaker A: Great. Thank you. So a follow up question. So it appears that the majority of the defi activity is concentrated among a set of whales, essentially the really large token holders, and also flashback style high frequency traders.
00:25:15.562 - 00:25:16.082, Speaker C: Right.
00:25:16.216 - 00:25:18.100, Speaker A: That's your experience, do you agree?
00:25:18.950 - 00:25:52.238, Speaker C: Yes, that's actually true, I think, because especially on Ethereum. On Ethereum right now, there are. Transaction fees are pretty large. They can be like $50, $100, $200. And when a transaction costs $100, you probably wouldn't exchange $1,000 if you lose $100 to fees. So then only big swaps start making sense. Let's say $100,000 plus.
00:25:52.238 - 00:26:58.900, Speaker C: Right. And those transactions can be done only by whales, by these bots and whatever. And the bots, they actually could do arbitrage let's say they can arbitrage with centralized exchanges where gas fee is not an issue, right? And small traders trade on centralized exchanges. The price moves over there, and if it moves really much, then arbitrage bot, for example, makes an exchange on both platforms, centralized and decentralized, and basically making profit on that. And those transactions are extremely common, especially with pools of different denomination like Ethereum to bitcoin to USD. Right. If you look at our three crypto two pool, and like ERC 20 transactions, you may see that maybe like 95% of the transactions is someone labeled as some sort of math bot or something.
00:26:58.900 - 00:27:07.400, Speaker C: I think that's mainly because of ethereum scalability issues.
00:27:08.810 - 00:27:15.426, Speaker A: Thank you. So then how do you think, how could we make defi more inclusive?
00:27:15.618 - 00:28:11.610, Speaker C: Right. I think like development of layer twos, blockchains more scalable than Ethereum. That all help on this regard. For example, if you look at, we are now launched on polygon Phantom arbitrum, which is layer two. So if you look at all those blockchains, you may notice that the average transaction size is actually really much smaller than on ethereum. But transactions go much more frequently, and that's because they are much cheaper over there. And that's because either the blockchain is more scalable than ethereum, or maybe it is more centralized and that's why it is more scalable.
00:28:11.610 - 00:28:32.720, Speaker C: Also there is binance smart chain, but it's kind of already not that cheap as those chains or layer twos, but it's also not as expensive as Ethereum. Right. But clearly for inclusiveness, the question of transaction cost is probably the key question.
00:28:34.150 - 00:28:42.290, Speaker A: That's great. Do you think besides transaction fees, are there other factors that impact the inclusiveness?
00:28:42.710 - 00:29:59.846, Speaker C: Yeah, I think it's also complexity of how you interact with the system. Because let's say, what do we do if we use metamask, for example, to interact with the blockchain, then you have all sorts of UX issues. And I don't know if it's good for people or not, if they like it or not, but I think sometimes I need to bump transaction four times before it actually gets broadcasted, stuff like that. And yeah, I think lots of UI issues have to be fixed to achieve mass adoption. And not to mention that hardware security modules like hardware wallets are not so easy for a mass user to use, especially when you connect it to, I don't know, through your computer. And then it appears that it's not so easy to make it working in your browser because also all sorts of issues. So it's like a little clunky at the moment.
00:29:59.846 - 00:30:01.630, Speaker C: And that's another factor.
00:30:02.210 - 00:30:06.954, Speaker B: And at the same time, you want to use your hardware wallet and not store everything. Metamask.
00:30:07.082 - 00:31:13.442, Speaker C: Yeah. And another thing is that there is a lot of fraud in this space. It's pretty much low key fraud, like scammers approaching people on telegram and impersonating someone, announcing some bonuses, airdrops, whatever. All that's happening on Twitter is also very common for an experienced user. It's not a problem when they see great news or when they see bonus or when they see giveaway. That kind of almost immediately means that some scammer is trying to scam someone. But for users who are new to blockchain, they see, oh, I can get about 20% on top of what I have.
00:31:13.442 - 00:31:46.350, Speaker C: That's great, right? And then they lose 100%. So that kind of stuff. Also, of course, there are sometimes not so good projects starting who eventually steal customer money. That's also happening sometimes. But I think probably that requires some, how to say when the ecosystem grows up, this probably goes away to some degree.
00:31:48.610 - 00:32:16.120, Speaker B: So congratulations, right, on having deployed curve on so many second layer or side chains. I think you've been quite pushy towards this more inclusiveness of other chains and to help users with their adoption, which is beautiful. Can you tell us a bit more about the story? So what were your hurdles? What was easy and how you plan this going forward in the future?
00:32:17.950 - 00:32:19.500, Speaker C: You mean just in general.
00:32:21.870 - 00:32:26.902, Speaker B: What was kind of easy or what was difficult when deploying on alternative chains?
00:32:26.966 - 00:33:12.246, Speaker C: Okay, yeah. So what we need for deploying on alternative chains is, well, first of all, we want to connect all of that to the curved dao. We don't want just an independent deployment, which is totally like a fork of curve on a different chain. We want everything to go to the Dow and benefit all Dao participants. So for that we need two things. We need, well, at least at the minimum, we need, first of all, the fees, admin fees from that chain to go back to Ethereum, where they get distributed. And we want crv token emissions to be able to go from Ethereum to the other chain.
00:33:12.246 - 00:33:51.462, Speaker C: That also needs to happen in a noncustodial manner. So we don't want to be touching any funds for like, there are different reasons, like safety reasons, range attack reason, right. Regulatory reasons, many reasons. Well, many bridges, they actually support this feature. So what you need for that is just to be able to send tokens from inside a smart contract to a different chain. Pretty much. Right.
00:33:51.462 - 00:34:13.260, Speaker C: And not all bridges support that. So if you take for example, I don't know, an official binance chain bridge provided by binance. It's, I think, targeting users. So it cannot really have a smart contract bridging funds. But some other bridges they allow to do.
00:34:15.790 - 00:34:26.210, Speaker B: Mean those bridges, how do you realize them in a secure manner? And how do you do this emission from governance token curve from the main chain to.
00:34:26.280 - 00:35:30.662, Speaker C: Yeah, that's actually pretty easy. Well, we have system of gauges which measure, I don't know, measure things, right? And also depending what they measured, they distribute their emissions. And each kind of pool, each pool gets a certain portion of total emissions voted on by governance, right? Let's say you define that some pool on another chain gets this much of emissions, right? And what we do, we simply collect this proportion how much it can change every week. So we collect these tokens for a week and then we fund a smart contract transfers these funds to another chain. Right?
00:35:30.796 - 00:35:32.486, Speaker B: When you say we, it's not you, right?
00:35:32.508 - 00:36:38.140, Speaker C: It's the DAO. Yes. So it's like anyone can execute kind of thing when a smart contract which collected crv tokens sends them to a different chain via the bridge to another smart contract, which is like how we call it a streamer, right? And then once the tokens appear there, if they came there, the streamer can start streaming and then it's just streaming rewards over a week or something. And that all happens because it all happens between smart contracts, even though there is a bridge in between, which is always scary, right? But yeah, it can be operated, can run in a noncustodial manner, and like whoever executes these few transactions which need to happen, it still works. And whoever executes doesn't touch the money.
00:36:38.590 - 00:36:43.150, Speaker B: So on the ethereum side, are these tokens burnt or are they locked?
00:36:44.850 - 00:37:06.710, Speaker C: Well, when you bridge them in. Well I think it's actually the bridge locks these tokens, but when somebody receives those tokens and withdraws them using the bridge, these tokens which were locked go to that guy. But that's about how the bridge is constructed, pretty much.
00:37:06.860 - 00:37:07.894, Speaker B: All right, beautiful.
00:37:08.012 - 00:37:24.170, Speaker C: So we don't build bridges ourselves, by the way, because it's not our speciality. It's like the whole different world. We think that those who are good at bridges should be building bridges and we will just use them.
00:37:24.320 - 00:37:53.090, Speaker B: And it's a beautiful composable defi world. Exactly. So security is quite a major concern. Also in high list on your priority as far as I can tell. So you've seen recently compound accidentally paid out comp tokens through an upgrade of the protocol or a proposal. Can you tell me more about how you handle security in general?
00:37:53.240 - 00:39:29.700, Speaker C: Right, I guess our approach to security of smart contracts is very different from what compound does or from what most projects do. Well, first of all, most projects use solidity and we use Viper, and the difference is solidity is a bit more mature language, so in principle the compiler should be more developed, should be safer, but the language itself is much less readable. So viper reminds Python and solidity reminds, well, I don't know what c maybe, maybe not quite. Well, some sort of also gives a feeling of Javascript trip sometimes, but not really anyway, so it's less readable, I would say, and it's much better to have something more readable and also with all the immediate dependencies not being scattered across different contracts, but basically being in front of you. Of course you can say yeah, well if you have a good ide it will jump between contracts and you will be fine. Well, I guess not really, because it still hurts auditability when you have everything in front of you, it's more readable. And also the code actually is shorter usually, but that's one thing.
00:39:29.700 - 00:40:31.560, Speaker C: And we compromise a little bit on how well developed the compiler is, but we win on the side of how easy it is to check the code with your eyes and how easy it is for developer to not make mistakes. Right. But of course mistakes can happen. And we also write like a super extensive set of tests. It's not like even getting 100% coverage, which is important. It's also important to kind of really do all sorts of integration tests, fuzzing, whatever. So you need to really check, not just make sure that you ran this piece of code once, you need to make sure you ran it in the broad range of parameters which could happen in the system.
00:40:31.560 - 00:41:35.866, Speaker C: So it's like just exchanging one dollars to one dollars in a test is just, well it's great, but it's not giving you this safety guarantee as if you try to all the amount and not just exchange but also like deposits, withdrawals on like in random order, whatever, some so called stateful tests. And that helps a lot to achieve smart contract safety. Also our contracts, just for the sake of reducing complexity, are not upgradable. And that's another, I would say, compromise. When contracts are upgradable the complexity is much higher. And also you are in control in a way, or, I don't know, somebody is in control, maybe a dow, right, or maybe some operator. If there is a bug in a contract you can fix it.
00:41:35.866 - 00:42:45.374, Speaker C: If it's upgradable, and if it's not upgradable, you cannot fix it. But at the same time, if the smart contract is not upgradable, then, well, at least in compound case, I think the problem was in kind of upgradability mechanism, right? More or less. And if it's not upgradable, it's less complexity, less probability to make this mistake. But if you've made a mistake somewhere else, you cannot fix it. You need to make sure really well in advance that the smart contract is doing what it is supposed to do. And if you already have users in the smart contract, if you discovered that something is wrong, you need to somehow ask users to migrate funds to a safer smart contract. Also for this particular case, every smart contract we deploy, it's actually killable for first two months of existence.
00:42:45.374 - 00:44:03.980, Speaker C: So it can be like, well, if it's killed, users can only withdraw money, but everything else stops working. And that really helps because let's say if there is something, it can be killed, and then users have all time in the world to migrate funds from contract to contract. The very first contract we had, it was actually the very first version of compound pool. It actually had a flaw which would have allowed to be exploited. White Hat Samsung approached us and basically telling this floor, and that contract did not have this freeze feature, so users had to be told to migrate funds, but in such a way that a hacker wouldn't find what the error is. Well, fortunately that was pretty early and users were aware that it could be scary, so they migrated all funds within three days. And I think it was, I don't know, $4 left after that or something.
00:44:04.990 - 00:44:07.594, Speaker B: What an amazing story, right?
00:44:07.712 - 00:44:17.550, Speaker A: It's a great story. And also Sam will be giving the security lecture.
00:44:19.010 - 00:44:28.740, Speaker C: He's really great. He is like helping to keep everything secure and hopefully make good money from that.
00:44:30.790 - 00:44:58.486, Speaker B: That's amazing. So defi security is certainly a multilayered problem, right? So you've now mostly spoken about the smart contract layer, but there might be the network layer, which is maybe more low level. There might be the consensus layer, there might be the web interface layer. You're hosting a web app, right, that people kind of. So how do you handle, what kind of user protections do you have on the UI side, for instance?
00:44:58.598 - 00:45:36.630, Speaker C: Well, I mean, in UI actually, there are not many possibilities to lose if there is a bug in UI, usually it's like, usually just the transaction is malformed and doesn't work. And yeah, you really need to do it totally wrong to do something bad. So it's much, much easier to make it safe on UI. If something is wrong there, it's more annoying than unsafe.
00:45:38.330 - 00:45:39.118, Speaker B: It depends.
00:45:39.154 - 00:45:39.354, Speaker C: Right.
00:45:39.392 - 00:45:45.014, Speaker B: If, for example, you don't have a good slippage protection there, or the somehow faulty.
00:45:45.062 - 00:45:46.154, Speaker C: Yeah, true.
00:45:46.352 - 00:45:48.314, Speaker B: Then you might get squeezed, right? Quite a bit.
00:45:48.352 - 00:46:20.710, Speaker C: Yeah, that's true. So we do have some slippage protections. Maybe it's good to try to integrate this way of submitting transactions when they don't appear in a public mempool and get mined privately. That's kind of the latest fashion which we didn't integrate yet, but we have this protection where, you know, if the price appears below something, don't execute.
00:46:22.170 - 00:46:52.590, Speaker A: Great, thanks, Michael. So talking a little bit more on the DeFi adoption side. So, as we know, many new launches of DeFi protocols give huge incentives to users to attract liquidity and to get higher TBL, also known as yield farming. So what do you think, how effective this method is and does it cause a problem for TDL?
00:46:54.070 - 00:48:00.360, Speaker C: Yeah, this method is actually extremely effective and we do use that. But there is one thing about this method. If you distribute a token which is doing nothing, which doesn't have any reason to be valuable apart from speculation, then when you distribute this token, people obviously sell it. Well, I mean, not everyone wants to hold it and I think majority will be sold and the price of this token obviously goes down. So to make that not happen, you need to somehow connect the token to the kind of value accrual part. Right. And just governance, I think it's not quite the right way to get value to the token because it's like what sort of value does the governance power have? I don't know, maybe not so much.
00:48:00.360 - 00:49:09.046, Speaker C: Maybe it is, but I think it's much better to have something else in addition. So we have this kind of, the Dow has the fee distribution mechanism. It's not going directly to the token, it's going to those who locks the token, but indirectly it's kind of creating this not upwards pressure when you have downwards pressure. So in our system it's important that we have two streams. We have token going one way and admin fees going the other way, and only then it can be kind of a self sustained system. Otherwise, if you distribute a token and people do something and it goes down, well, somebody, I don't know receives buys a token or what happens? Like, it's strange. But another great example, actually, our token, it has a voting power and ability to receive these dow revenues only when it's locked.
00:49:09.046 - 00:50:41.498, Speaker C: Right. And the longer it's locked for the more voting power and more revenue it gets, right? So it's something we call the ECRV. So if, let's say one day is left before unlocking, you maybe have 365 times less voting power and fee accrual power than something locked for one year. So this locked crv is actually a really valuable thing. So a project called Convex, they did actually a very smart thing, I would say they started distributing their token in exchange for this ve CRV, essentially. So people give crv to the conduct smart contract, which locks crv and boosts crv farming, gets all sorts of perks which VeCRV has. And the thing is that maybe that token is initially looking like a short term temporary thing, but when they exchange it for something which is long term, which is VeCRV, then they have something powerful in their protocol and that can translate to kind of value for their protocol, value for their token and whatever.
00:50:41.498 - 00:51:04.720, Speaker C: And that was actually an interesting smart play. But the thing is that if you distribute token, you need to have something going back to your system in exchange for this token. Because if it's just distributed, I guess then it may not work. It will just suppress the price of the.
00:51:10.630 - 00:51:54.014, Speaker A: Talking about this. Also in DeFi has so many great ideas, and also it's great that it's open and transparent. So then one thing I think we have seen also that it's easier for people to copy the ideas, right? And also in this case, given that the code is available and so on, then people don't just copy the idea, they can actually copy plus token and then paste, forking many versions of this. So how do you think the DeFi project should practice a healthy balance between open source code and.
00:51:54.132 - 00:52:34.800, Speaker C: True? Well, I mean, one thing is that for safety of the code, you just cannot have smart contract code not available. Right. So that's the most important thing. And of course, when it is available, yes, people can copy, people can launch sort of similar products. And yeah, I mean, in our code it's kind of copyrighted, so it cannot really not allow legally to be copied. But we didn't enforce this. And there are some projects which did fork it.
00:52:34.800 - 00:53:56.440, Speaker C: Well, one thing is that we specifically kind of designed our system with the dow to make it like self sustained. And it's actually the whole system which sort of protects itself. So even if the code is copied, it's actually not easy to grow comparable to what curve is, because curve has this well established feedback loop, which is like not easy to stop and not easy to build something like that as well. Not easy to spin it up to this degree, I would say. So it turns out that this system, with the token inflation and dow revenues going kind of this way, it's sort of self sustaining. It allows the system to fight competition without asking lawyers to do that.
00:53:58.110 - 00:54:05.450, Speaker B: So speaking of lawyers and maybe regulations, do you think DeFi is currently under regulated?
00:54:07.550 - 00:55:17.058, Speaker C: Yeah, well, good question. I would say that. Not sure about DeFi, but I think that traditional finance is overregulated, at least. And also, I think that regulators kind of, they started forgetting what these regulations are for initially. They are supposedly to protect customers, right? And I think DeFi is extremely different from traditional finance. Like in traditional finance, it was not a question that operator of some financial service can take money or do something bad, right? It was just natural. Like, if you hold money you like, how can you not take it? So then some measures should be done to prevent malicious actors from taking money, right? That's why these regulations appeared to start with.
00:55:17.058 - 00:56:42.442, Speaker C: And then they discovered, okay, maybe there are some other malicious actions. For example, if a trading platform does something bad with the orders, then, I don't know, whatever, flash crash, right? And in Defi, you can make things such that you don't actually trust any operator at all, right? And this never existed before. In Defi, we sometimes call protocols where admin can take money ruggable, right? So the admin can rug pool and take money and disappear, right? And by this terminology, traditional finance is just all ruggable, right? And that's how it was. And that's why regulations were so much needed here. I think regulations, first of all, they still need to protect customers rather than anything else. And instead of trying to pit old regulations, probably regulators should think who they are protecting and how to do that. And in DeFi, to protect customers, the main thing, I think, is to ensure code safety, right? To make sure that unsafe code doesn't get marketed while it's unsafe.
00:56:42.442 - 00:57:38.814, Speaker C: Right? At least maybe that. Or maybe customers should be informed about which DeFi project is really fully decentralized and which is so called ruggable, right? And when it's ruggable, I don't know what measures, what sort of protections should be in place, but I think those are the lines I would be thinking in how to approach DFI regulations. But I've never seen regulators doing that. I think regulators try to think a different way. Like they say, we have old laws which worked for 100 years and they protected customers in equity world, so they should be applicable here. And we just should find analogies with traditional finance world and apply here, because this is the law after all. Right.
00:57:38.814 - 00:57:46.114, Speaker C: And I think that approach doesn't quite work here. I think it needs to be rethought. Yeah.
00:57:46.152 - 00:58:04.774, Speaker B: You're taking a particular effort in really decentralizing curve, for instance. Right. I mean, with the factory contracts, pools now that everybody can deploy. I think this is an often underestimated difficulty and effort that goes into really trying to be noncustodial, as you mentioned.
00:58:04.812 - 00:58:08.874, Speaker C: Also earlier regarding, it's not easy sometimes. Yes.
00:58:08.992 - 00:58:22.586, Speaker B: It's very hard to make this in a secure manner. So the concept of decentralization, I guess there are many shades of gray of decentralized protocols.
00:58:22.618 - 00:58:22.766, Speaker C: Right?
00:58:22.788 - 00:58:38.702, Speaker B: So some are not at all decentralized. Some are more. I guess it's a nice insight for you to kind of suggest that regulators should maybe certify to what degree someone or some project is decentralized.
00:58:38.846 - 00:59:08.198, Speaker C: I think it makes sense even just from informational perspective. Just users have to know what the admins of the project can potentially do. Like what is the worst they can do if they turn bad. Right. Well, another question is, like, what is done to you so that they don't turn bad? I think if regulators just start from informing people, but I think they don't.
00:59:08.214 - 00:59:32.222, Speaker B: Do that because as you said, if we go from the stance we want to protect users, which regulations should, then it's natural to realize that having the power of a noncustodial wallet comes with a lot of responsibilities, of course. So the regulators could, for instance, educate users on how to use these wallets in a secure way, et cetera.
00:59:32.366 - 01:00:04.800, Speaker C: Yeah, that's another thing. And also, at some point, I don't know, how about now? I have all my ads blocked in my browser, but if I don't block ads and I search for any defi project, all the ads are scams. So all Google Ads are scams. And I don't think advertisers take any responsibility for that. Neither does Google, and that's bad.
01:00:05.250 - 01:00:34.710, Speaker A: These are great ideas and great points. So we talk a little bit about your general thoughts on Defi and so on. So maybe now let's talk a little bit about your actually day to day life, your personal experience in Defi. So I'm sure a lot of students and a lot of the audience wants to know, for example, how does your day look like in Defi?
01:00:38.430 - 01:00:43.050, Speaker C: Like a user or like a developer of the protocol?
01:00:43.790 - 01:00:46.570, Speaker A: Let's see more from the user.
01:00:50.850 - 01:02:15.734, Speaker C: Yeah, I do use defi every day, and it often looks like, well, one of the major things is what I usually did like borrowing money against crypto and, well, could use those money to make more money, could spend those money. And apparently right now there are interesting opportunities because when you have crypto, you don't have to have it passive. You can have crypto making sitting in an automatic market maker and then you apparently can borrow some stable coins against crypto in automatic market maker. So while you have crypto over there, it makes money, pretty good money, in fact. And when you borrow, well, you borrow, but apparently while you have the loan, let's say the fee for the loan is smaller than the money you make on, let's say crypto you borrowed against because it's sitting in an automatic market maker. That stuff is kind of fun, I think. I'm not much into NFTs, I'm more like into just deFi, I would say.
01:02:15.734 - 01:02:43.460, Speaker C: But also it all comes to kind of, I don't know, different opportunities or different things being more effective. In principle, it could be passive, but for me, maybe it's not that much passive because I do kind of sometimes discover opportunities which I didn't see before and I don't know, that's just fun, I would say this.
01:02:44.150 - 01:02:50.850, Speaker A: And also, what are your favorite tools in DeFi that helps?
01:02:51.270 - 01:03:24.718, Speaker C: Right, right. Well, I mean, obviously caro finance is a good tool for other things. For exchange. I actually like to go through aggregators, and there are decentralized exchange aggregators like one inch and paraswap. I think recently one inch restricted United States users. So it's more like Pariswap for the US at the moment, I guess. But still you aggregate multiple sources, which is great.
01:03:24.718 - 01:04:14.074, Speaker C: And also, what else do I use often? I use landing protocols a lot. So I used, well, started with makerdao, then I started using compound Avi. There are also different stable coins which you can mint against cryptocurrencies or against money in pools. Such as. Well, there is unit protocol, there is meme, which is a funny name. There is Lusd. So all of these I kind of tried for essentially borrowing sake.
01:04:14.074 - 01:04:19.760, Speaker C: And yeah, they all have their own pros and cons.
01:04:21.970 - 01:04:28.802, Speaker A: Great. And then besides these defi protocols, are there other tools that you find helpful for you?
01:04:28.936 - 01:05:05.482, Speaker C: Yeah, well, there are actually good tools to interact with Ethereum blockchain itself. Right. And of course, everybody knows wallets and metamasks and whatever, but I also like very much like tool called brownie where you can interact. Well, you can test smart contracts there, but you also can interact with ethereum or other blockchains right from the terminal. So you can say pool equal this, right. And pool equal contract from explorer or whatever address. And then pool, I don't know, deposit.
01:05:05.482 - 01:05:34.370, Speaker C: Right, or whatever. And it does introspection. It shows you what you can do with this smart contract. Much easier than what you could see on Etherscan. But that's not in the browser. This is like a command line application, I would say. So you can have an interactive console, but that's also cool because it's for engineers.
01:05:34.370 - 01:05:35.080, Speaker C: Right?
01:05:36.490 - 01:05:39.626, Speaker B: For engineers, we need better tools still.
01:05:39.808 - 01:05:50.118, Speaker C: Yeah, of course, for sure. It's like, what's not so many good debuggers, right?
01:05:50.304 - 01:06:11.060, Speaker B: Right. So what kind of breakthroughs do you think do we need? Whether it's now on the engineer, on the developer side, or whether it's on the solving the implemented loss issue side, what breakthroughs do you think does defi need to grow further and how can we get there?
01:06:11.910 - 01:07:35.594, Speaker C: I think solving an implement loss would be great. I think like, well, I think it's good that we do collateralized lending, but I think it's probably important to somehow try to reduce reliance on external oracles to have the financial data, like price data being generated and recorded on chain without any third party service for that. And I guess we probably want to support different sorts of assets. Like, that's why we think about markets between stablecoins of different fiat denominations, because I think something good is possible there. Yeah. So I guess these things come to mind. But also if we talk about exchanges, there are many other things which are a little bit niche for people who want to do to, let's say, buy or sell large amounts of coins.
01:07:35.594 - 01:08:01.894, Speaker C: Apparently this can result into interesting products. I didn't look much into derivative products like, you know, futures, options, whatever. I'm not much of a specialist in there, so I couldn't really comment of what can be done there, but I'm sure something can be great.
01:08:01.932 - 01:08:13.260, Speaker A: Yeah. Thank you. So, since we are talking about future of Defi, so if you have a magic wand, what would you like the DeFi world to look like in five years?
01:08:16.350 - 01:08:37.780, Speaker C: Well, I don't know if it's possible in five years, but I can quite see DeFi more or less modernizing their world financial system. It's maybe a little bit optimistic to say that, but I think that might happen.
01:08:38.950 - 01:08:41.906, Speaker A: In what sense? Can you elaborate a little bit?
01:08:42.088 - 01:09:33.120, Speaker C: Well, I think in a sense that, well, if you look at how banks work, they have really antiquated back end systems, I would say. And not only banks, like, it's like many traditional finance things. So if we have some global blockchain layer doing that task, and also that layer being permissionless so that everyone can participate. Well, I think still banks have place over there. They would sit on top of that, but not necessarily. It could be interacted with directly. So I think that sounds like a sensible future, but I don't think it's going to be in five years.
01:09:34.210 - 01:09:50.342, Speaker A: Great. Any other financial functions or services, you think Defi is going to play a much bigger role in five years? Again, if you have a magic wand, how do you think, how the world.
01:09:50.396 - 01:10:49.210, Speaker C: Will be different than different functions? It would be more about convenience of using defi. I think right now it's pretty clunky. I wouldn't say that my grandmother would easily use that, no. So that's something to greatly improve on. But these things are hard to formulate because there are many small things which all come together in overall experience, whether it's convenience, whether it's safety, certain things like that, even automatic market makers. Automatic market makers started from, I think more or less from Bancorp and then uniswap shortly after, and Kyber. Right.
01:10:49.210 - 01:11:36.730, Speaker C: And at first, these tools were not super effective. Right. But they were first, and they were really much needed. And after that, it was mostly like improving efficiency of the same function. Right. And I think we will probably have more of efficiency improving, whether it's algorithms, whether it's user experience or whatever. But many of the functions of defi, I think they have been prototypes, at least, I would say.
01:11:36.730 - 01:11:52.880, Speaker C: Right. So it's just matter of getting them working well or improving algorithms, but it's hard to say it all in one word.
01:11:54.150 - 01:11:56.580, Speaker A: Great. Yeah. Thank you.
01:11:59.510 - 01:12:21.306, Speaker B: I was quite impressed by the novelty of stableswap. So by the bonding curve. Right. Which really lowers slippage in particular for stablecoin, or packed assets in general. Can you tell us a bit how you got there? What was kind of your thought process?
01:12:21.488 - 01:13:13.018, Speaker C: Yeah, well, I thought about liquidity in terms of liquidity density, and translated that to the language of bonding curves. So if you think that, what would you need to achieve good efficiency of stablecoin swaps, you need to concentrate liquidity in a narrow range, close to one. Right. And then it should hopefully gradually fall down to the edges. Right. And what sort of bonding curve would be for that? Well, in uniswap, you have just a hyperbola, which is kind of the same everywhere. Right.
01:13:13.018 - 01:14:05.290, Speaker C: And if you have, for example, a line, straight line, it will be a constant price bonding curve. Right. But when you start bending it a little bit, it means that it starts supporting multiple prices, because the price is actually the slope or the derivative of the bonding curve. Basically, I first imagined how the bonding curve should look like. I drew it, and then I started thinking what sort of formula would have those properties? And maybe after a couple of weeks thinking, I arrived at an invariant which gives that sort of shape without being too difficult to solve in a smart contract.
01:14:06.510 - 01:14:13.950, Speaker B: So naturally, your background is quite heavily math based, but you're actually physicist, right?
01:14:14.020 - 01:14:16.894, Speaker C: I am, yes. I'm experimental physicist, in fact.
01:14:17.092 - 01:14:27.570, Speaker B: Right. So in what way did this experience or this background shape you as a person and also gives you kind of a competitive edge in defi?
01:14:28.950 - 01:15:57.214, Speaker C: Yeah, I guess one thing is, well, having mathematical, I would say analytical background, I guess, allows to invent things which are deeply mathematical, and, well, mathematicians like to prove things. I'm not good at that. When you are a physicist, you have a little bit of, how to say, relaxed requirements on proving things. So if you prove that, not strictly, but if you just prove that in your own words, that's enough, and that's kind of good. Also, this world of bonding curves, because we talk about invariants, and we say that derivative of invariant is price and whatever, it very much reminds theoretical mechanics where you also have invariance, where you define momentum or like whatever, and then start working with that. So you can actually apply some similar concepts or maybe whatever other similarities you see. Right.
01:15:57.214 - 01:17:04.094, Speaker C: And from the point of view of experimental physicists, it's very important to be able to experiment. So it's important to have your experimental set up having certain tunable parameters which you actually can try to tune and see what happens. And also you can make it safe. You can say, okay, if I tune this, it doesn't affect safety of the funds. It actually affects just how effectively the system is working. And that allows to, even after deployment, to be sort of in experimental mode and bring the system to more effective state in production, even when it's already working, without having ability to upgrade code and or change everything. And that actually pretty much reminds how I worked on experimental setup during my PhD.
01:17:04.094 - 01:18:12.490, Speaker C: It was cooling atoms to the state when they behave like waves and become bose Einstein condensates. And those are like a special state of matter when the lens of the matter wave becomes as big as the whole object you are dealing with. And that was an experimental physics. So it was happening in vacuum with lasers, whatever, and this held by magnetic fields or other lasers. And that was quite a set up with really many tunable parameters. And the problem was that these parameters work very low level, like current over there or like laser power or frequency over here. And like, 100 tunable parameters, and only a very small region in this parameter space gave this new state of matter.
01:18:12.490 - 01:19:06.330, Speaker C: So you had to understand what it's doing in how it's manipulating those things before you actually get to that new state of matter. Because if you will just search in the parameter space, it's, like too big. You will not find it. And here, it's actually the same thing here, especially with the new type of pools, we have somewhat bigger than usual parameter space. And the good kind of state is good efficiency of the pool, right, when it has good liquidity. So we need to find a set of parameters where it really performs. And for that, you kind of need to understand intuitively really well what it is doing.
01:19:06.330 - 01:19:28.210, Speaker C: So need to develop intuition in this. And that's somewhat similar, although it's like, well, in physics, you model real world. In here, you model this interesting world you have created with this invariance. But, yeah, after all, it's all about developing intuition.
01:19:30.230 - 01:19:38.374, Speaker B: So they're both kind of systems where you cannot change too much. Right. I imagine these physics experiments, I mean, they must be very.
01:19:38.412 - 01:20:20.882, Speaker C: Yeah, the experimental setup is kind of. Well, I mean, you first build it, but when you built it, it's built. You cannot change much. Yeah, maybe you can add a new laser, but rebuilding everything is like total rebuilding, because it's like you have these metal chambers with glass windows with ultra high vacuum. It's baked like it was heated and then cooled down to basically release all the gases which could be trapped inside so that there is no gas left. So the vacuum is good. And then you have coils on top.
01:20:20.882 - 01:21:11.140, Speaker C: You have lasers, you have optical systems with many mirrors and prisms to actually manipulate lasers. And rebuilding that, it's possible you can rebuild certain things, but you don't usually do that. You usually have a system, you manipulate some parameters, and only when you say, okay, it's not good enough because, I don't know, because it should be done totally differently, then only then you rebuild it. But without that, you just have what you have and you tune it. And you, from the very beginning, build it to be tunable so that you don't have to, I don't know, replace everything.
01:21:11.830 - 01:21:14.938, Speaker B: Flexibility in a restricted setting.
01:21:15.134 - 01:21:32.038, Speaker C: Yes, I would say that. I would say that. And in our case, dao can tune parameters. Right. But Dao cannot replace the code. Right. And here in experiments, you had an experimental setup.
01:21:32.038 - 01:21:39.180, Speaker C: You could tune parameters, but replacing the whole experimental setup, well, it's like a building new one.
01:21:40.830 - 01:21:54.286, Speaker B: Dawn, actually, has a physics background. I'm sure she would be quite excited to hear this, but yeah, she will hear it later. So thanks for sharing this. This is fascinating. So you did your phd, right, in Australia, if I understood correctly?
01:21:54.318 - 01:21:54.514, Speaker A: Yes.
01:21:54.552 - 01:21:55.442, Speaker C: Correct. Yes.
01:21:55.576 - 01:21:58.980, Speaker B: Okay. Why did you leave Australia, such a beautiful country?
01:21:59.350 - 01:23:05.880, Speaker C: Well, I mean, I thought to actually do some. Well, firstly, the thought was to do some startup, and I didn't know which, but I went to Silicon Valley and I also was attracted by cryptocurrency. That's why at the time I was living Australia, I learned about cryptocurrencies more or less a little bit earlier than that. And in the US, I started new cipher. And after would say. I would say, like, while being in the US, I kind of was a little bit concerned about how things get developed in us economy, what us regulators are trying to do and stuff like that. And then I thought, well, also with visas, if I wanted my relatives to enter the United States, that would be a little difficult.
01:23:05.880 - 01:23:44.180, Speaker C: And if you take all of that together, I thought maybe it's better to live somewhere else. Australia, in principle, is a great country, but it's far away from everything. And right now, actually, with COVID you cannot actually, almost cannot leave Australia. Right. They restrict people from leaving it, but even without it, it's really far. So when you want to fly somewhere, well, maybe flying to Asia is all right, but flying to Europe from Australia is really hard.
01:23:46.890 - 01:24:15.630, Speaker B: Makes sense. Great. So there were a few things I wanted to touch on that we discussed earlier. I think in particular, the curve model, which you came up with, and I've recently looked at some statistics, and it seems like over 75% of the curve in circulation are being locked.
01:24:18.930 - 01:25:09.630, Speaker C: That's actually, to be more precise, it's 75% of crv in circulation without counting the locked tokens. Right. So it could be confusing, because you could think that if you lock 100%, you locked everything. Right? But in that definition, it's actually, if you lock 100%, it means that you have, let's say, I don't know, let's say 100 million tokens circulating and 100 million tokens locked. Right? So it's like, not that 75%, you may think of. It's like 75% of what's currently not locked.
01:25:09.970 - 01:25:16.930, Speaker B: Very well. I mean, thanks for clarifying. It's quite important. But still, this is quite an astonishing number. Right?
01:25:17.000 - 01:25:53.870, Speaker C: Yeah, I think that's clear. It's like, because of this positive feedback loop which we created, we distribute fees only to those who participate in governance. Who locks. Right. And vicarve also gives you ability to vote. Also because it does automatically snapshots, because it's ERC, it's minimetop token. Right? Immovable minime token.
01:25:53.870 - 01:26:57.758, Speaker C: Minime is a standard proposed by Aragon, which essentially allows you to get a snapshot at any block in the past. Okay? Yeah. And that's important for voting, but also it is very convenient for any source of airdrops. So imagine that you start some project which wants to, I don't know, to give their token to CRV token holders, right? Instead of giving it to CRV token holders, they could give it to ve CRV. And then they don't have to do anything special to find these ratios of balance to total supply. They don't need to iterate in a script. They can write a smart contract which basically says, this is balance off at this block, and this is total supply at this block for VecRV.
01:26:57.758 - 01:27:44.930, Speaker C: And then the amount to be airdropped to this guy is total airdrop multiplied by balance off at that block, divided by total supply at that block. And that's it. And you don't have to do any iteration because iteration was actually, it was indexed by this mini metalken standard. And it's not great, by the way, to have it in a real token because it starts eating gas to be transferred. And that's not great. But VecRV is not transferable. So then it kind of makes sense to have this property over there which simplifies airdrops and then airdrops happen to typically VecRV.
01:27:44.930 - 01:27:57.590, Speaker C: So VecRv holders get all sorts of perks like airdrops, but right now they even get bribed to vote.
01:28:00.570 - 01:28:17.482, Speaker B: Right, so you found this. Maybe if we simplify like a scalable way to airdrop, right, to the rewards to the b curve holders, which is important. Otherwise the fees might eat up quite a lot of this.
01:28:17.616 - 01:28:29.200, Speaker C: Right? Yeah. But also they of course get the fees which the platform gets and whatever. So it's like they get all sorts of stuff.
01:28:29.890 - 01:28:51.240, Speaker B: And earlier you went into a little bit of details about the tree pool. Initially you started as a stablecoin platform, and now you do support more flexible, or let's say non packed assets as well. Can you tell us a bit more about this? What was the experience in doing so?
01:28:51.850 - 01:29:44.360, Speaker C: Yeah, that's actually still an experiment ongoing, I would say. And the idea is pretty interesting. Imagine that you have probably easy to think in liquidity density terms. Imagine uniswap two bonding curve, like the hyperbola. Then in that you have more or less the same liquidity density everywhere. Right? And the idea of three crypto pool is that you have liquidity density going up somewhere in some narrow range of prices, right? So it's kind of going like that, smoothly. And then this high liquidity region, you can move, right? So when the price moves, you can actually move their high liquidity towards the price.
01:29:44.360 - 01:30:53.440, Speaker C: And apparently, moving high liquidity towards the price causes a loss. Right? And that's inevitable. Like, well, I'm not a mathematician, I will not prove it, but if the price went there and you move liquidity density towards us, you lose money. Right? But we agreed with that, that, okay, it's losing money to move this liquidity density. But maybe we can try find such parameters, such size of this liquidity density region, that if it follows their average price, then maybe the losses will be less than profits. And actually, we enforce that. We move liquidity density only when the loss is smaller than half of the profits we've made.
01:30:54.130 - 01:30:58.590, Speaker B: Interesting. But then you need a time frame, right, where you measure the profit. I suppose.
01:31:00.690 - 01:31:03.520, Speaker C: We actually measure it from the bonding curve itself.
01:31:04.050 - 01:31:06.382, Speaker B: The profit or the anticipated profit?
01:31:06.446 - 01:31:07.730, Speaker C: No, the profit.
01:31:08.390 - 01:31:12.100, Speaker B: But the profit is coming from the trading fees, right?
01:31:12.470 - 01:31:57.474, Speaker C: Yes, it is coming from the trading fees, but we are not measuring trading fees. We are measuring properties of the curve. Okay. It's a little bit like. That's why we call it virtual price, like we call it in stablecoin pools. So what virtual price is? Well, essentially. Well, first of all, what's the physical meaning of invariant in that system? The physical meaning of invariant is basically, if you have everything balanced in a stable coin pool, of course, then how much money the pool will have when you have everything balanced, prices of all tokens are equal to each other.
01:31:57.474 - 01:33:04.760, Speaker C: And then how many tokens you have is exactly how much money you have, right? And when you move along the bonding curve, wherever you are, the invariant is the same, and virtual price is the same. Virtual price is essentially invariant, divided by total number of tokens. So basically, let's say if the prices suddenly changed, right? What is the total value of tokens in the pool when the prices change back to normal? That's the meaning of invariant, at least in a stable coin invariant. And here it's kind of a little bit the same. So we can measure how much do we have? But the interesting part is that invariant here is not. Well, it's not so easy to find a physical meaning. So invariant is not like.
01:33:04.760 - 01:33:23.680, Speaker C: It's not dollars. I would say this, I don't know, let's say for tree crypto it's measured in cubic root of dollars multiplied by ethers multiplied by bitcoins. Right?
01:33:24.210 - 01:33:25.760, Speaker B: How did you choose this?
01:33:26.290 - 01:34:20.202, Speaker C: Well, I mean, it's simple. The easiest thing is to think of it as a constant product invariant. Right? Let's say balance of USD multiplied by balance of eth multiplied by balance of bitcoin is the same. It's not exactly that, because we have this high liquidity region, but if you throw this away, it will be like balance equal. It will be like that, and the units of account will be that. But if you just take dollars multiplied by ethers multiplied by bitcoin as a unit of account, it will be a little bit like measuring deposits in cubic bitcoins. And cubic bitcoins are a little bit weird.
01:34:20.202 - 01:34:22.298, Speaker C: So we took cubic root of that.
01:34:22.484 - 01:34:23.220, Speaker B: Okay.
01:34:25.190 - 01:34:35.410, Speaker C: Yeah, but, yeah, it's fun. What's your TVL? It's thousand cubic bitcoins.
01:34:39.450 - 01:34:55.546, Speaker B: What a great metric to quantify. So your LP tokens in the tree pool, are they still fungible tokens? Right. So the adjustment of the deepness of the liquidity, I guess, is done for.
01:34:55.568 - 01:34:57.738, Speaker C: All the lps in all the lps, yes.
01:34:57.824 - 01:35:06.554, Speaker B: Right. I haven't tried uniswap version three yet myself, but I have understood that the lps need to allocate which region they want to concentrate liquidity.
01:35:06.682 - 01:36:03.214, Speaker C: Yes. And that's actually, to me, that feels like a potential vulnerability. Well, imagine a mav bot trader, right, who looks what's happening in Mempool, right? And imagine that a big trader tried to trade on Uniswap, right? So the arbitrage trader could narrowly deposit money exactly at that price where the trade is going to happen, right? So instead of being like here, it's like here, and it's much less funds are needed to be comparable with the liquidity density, which all their depositors have, right? And then almost all fees which that pool makes will be taken by that.
01:36:03.252 - 01:36:09.602, Speaker B: Trader because he's the one with the deepest density in this particular region, right?
01:36:09.736 - 01:36:56.766, Speaker C: But of course, this by itself wouldn't give you anything, because you need to kind of trade back, and then you need to arbitrage. But maybe the trader will arbitrage this elsewhere. And basically, instead of paying, I don't know, 0.3% fee to uniswap, it will take 0.3% fee. Well, after all, it will be like, as if this trader actually made, like, a zero fee trade on Uniswap and traded it back elsewhere and didn't leave any fees for uniswap liquidity providers. So this kind of attack is possible and that's known.
01:36:56.766 - 01:37:36.400, Speaker C: And yeah, I don't know how much of that happens in the wild, but I think it was noticed a few times. I don't know how much of this front running happens in practice, but when you look at total numbers, you can see, oh, uniswap liquidity providers made this much in fees, but how many percent of that is made by those guys and how much didn't come to passive liquidity providers? That's a good question. So that's, I guess, kind of a flaw of this model. Well, you can deal with this floor. There are ways, I think, but yeah, it's fundamentally that.
01:37:36.930 - 01:37:44.130, Speaker B: Wow. So do you remember who first mentioned this kind of attack? Is there any name for this?
01:37:44.280 - 01:38:01.800, Speaker C: I don't remember because after sandwich attacks. Yeah, I think I've seen this. Well, the first time I've seen it mentioned when somebody saw somebody else trying to actually execute this attack.
01:38:03.450 - 01:38:07.486, Speaker B: So creative people in Defi, it's a beauty.
01:38:07.618 - 01:38:14.460, Speaker C: Yeah. But, yeah, you need very adversarial thinking here, I think.
01:38:14.990 - 01:38:25.210, Speaker B: Yeah, I mean, security, it's really at the core of these decentralized systems where we don't have a trust kind of in a centralized entity, and then people get really creative. It's amazing.
01:38:25.280 - 01:38:37.746, Speaker C: Yeah. But a good thing with this attack is that nobody is really losing money, it's just losing things. It's not really unsafe, but not cool.
01:38:37.768 - 01:38:41.906, Speaker B: For some, some kind of a sniping attack. Right? You could say, yeah.
01:38:42.008 - 01:38:45.220, Speaker C: A lot of you like sniping. Yes, you can say that.
01:38:48.490 - 01:38:56.950, Speaker B: Great. Yeah. Defi is surprising me over and over again every other day, so it's just a beauty to be in that space.
01:38:57.020 - 01:39:05.862, Speaker C: Yeah. And also sometimes it's terrifying, sometimes surprising in a good way, but never boring.
01:39:06.006 - 01:39:08.410, Speaker B: Never boring. Exactly. We always need popcorn.
01:39:08.830 - 01:39:14.720, Speaker C: Yeah, probably need to. Popcorn will go to the moon, I'm sure.
01:39:16.930 - 01:39:39.042, Speaker B: So speaking of innovation, you came up with metapools, right? Well, now it's not that recent, but many months ago you came up with these metapools that try to kind of increase liquidity efficiency by reusing, for example, the three curve pool token. Could you briefly explain to the audience maybe how they work and why they're secure?
01:39:39.106 - 01:40:22.900, Speaker C: Yeah, sure. Well, you can imagine that each pool is represented by a token, right? And when you deposit money in the pool, then you basically have LP token representing current slice of current token distribution in the pool. But we have three pool, which is basically USD denominated. So we have USD stable coins in it. And imagine that you. Well, if it's USD denominated. Although this price of LP token is constantly growing, but it's not growing super quickly.
01:40:22.900 - 01:41:50.910, Speaker C: So you can use this LP token as a stable coin. And thing is that this virtual price, how we call it, the invariance, divided by number of tokens, it cannot go down, it can only go up. As the pool makes money, it goes up slowly, but it does. And this means that you can use this as a stable coin. And really, if somebody tries to manipulate, if you use the value of this virtual price as the value of this stable coin, it only can be manipulated up but not down. And when it's manipulated up, it's real money made by that coin. It appears to be that using a pool which changes between one currency and another NLP token, this setting doesn't get it manipulated, but at the same time, you get a really great efficiency, because you can immediately use all the depth of that pool and have like 50%, let's say, your token, and 50% of any USD from that pool, pretty much.
01:41:50.910 - 01:42:11.318, Speaker C: So it works almost as if you had three pools with the same tv, let's say token to Dai, talking to USDC, token to USDT. So you need three times less money to achieve the same slippage, right.
01:42:11.404 - 01:42:24.998, Speaker B: And lowering liquidity efficiency even more makes defi so much more competitive to CFI, right, where you have limit order books and you can't do such constructs.
01:42:25.094 - 01:42:47.650, Speaker C: This comes at a price, though, because its complexity is higher. And even if everything works correctly, which it does, it uses more gas, and on Ethereum, more gas is important. So we have this compromise here on layer two, though. That's a no brainer.
01:42:49.590 - 01:42:57.750, Speaker B: Speaking of compromises and complexity, so what is kind of your biggest crisis that you experienced at curve?
01:42:59.290 - 01:44:25.970, Speaker C: Well, okay, I think maybe one of the biggest crisis was this situation early on, when the curve got started, and the pool, which, the very first pool, which was created, was vulnerable, and getting everything migrated safely without this ability to pause the smart contract. That's tricky. That's tricky. Well, there was another kind of crisis, which was maybe somewhat scary, but it didn't really affect any user funds. Like when we suddenly made a vote, which doesn't, when we were enabling fees on curve, the vote was basically putting the wrong contract address. It was not easy to fix that without having upgradability, but as well, it worked. It's just tricky.
01:44:25.970 - 01:45:13.642, Speaker C: It requires to be creative, and when you work with things like that. But fortunately, only that very first problem we had in the 20 January 2020 or something, only that very first problem was requiring to act fast, not really at some point, not us to act fast, but users to act fast. I don't think many users today would migrate so quickly because back then, different demographics.
01:45:13.706 - 01:45:14.078, Speaker B: Right?
01:45:14.164 - 01:45:27.030, Speaker C: Yeah, it happened so fast. I think those were probably some of the biggest, at least technical related crisis.
01:45:27.610 - 01:45:37.778, Speaker B: That's beautiful. I mean, these kind of events, they make you stronger, and I'm sure they had a huge impact on curve itself afterwards. Once it.
01:45:37.964 - 01:46:29.446, Speaker C: Yeah. For example, we introduced this killable time, first two months, and so far two months, we've always found enough for that. And we want to have things decentralized eventually. And two months is 2 hours. Well, I mean, even when it's within the first two months, we cannot take customer funds, but we can still kind of execute the kill switch. Well, not even centrally, though. The multi SiG still even, there is no company on that multi sig at the moment, but still I consider multisigs as somewhat centralized.
01:46:29.446 - 01:46:45.678, Speaker C: Right. I would say I would not be comfortable trusting customer funds to a multi Sig, whether controlled by the company or not. Right.
01:46:45.844 - 01:46:50.286, Speaker B: Because in the end, it's because at.
01:46:50.308 - 01:47:02.820, Speaker C: The end, the identities of people on the multi Sig are not so hard to find and somebody could, I don't know, try to extort or whatever money, and that's even not safe for them.
01:47:04.630 - 01:47:16.390, Speaker B: So what protocols, like, for example, this kill switch within two months, what other protocols can you recommend to new DeFi projects? And a lot of our students want to create their own DeFi protocols.
01:47:16.810 - 01:47:19.580, Speaker C: What would you recommend, what to create?
01:47:20.030 - 01:47:30.258, Speaker B: I mean, what security protocols or safety measures should they adopt such that they can kind of avoid maybe some headaches.
01:47:30.294 - 01:48:11.720, Speaker C: Down the line, right? Yeah, well, I think. Well, good thing is to have the code really readable, the shorter the better. Maybe have all the better to not scatter things across multiple contracts. So maybe better to make a contract flat. Right. And in this case, you, you don't have to jump somewhere to figure out what's going on. Some solidity contracts I read really well, but that's not always the case.
01:48:11.720 - 01:48:58.220, Speaker C: And also using vipers, of course. I would always recommend that writing tests, like, not just unit tests, also stateful tests, which test all the parameter space and make sure that something you don't want doesn't happen. You need to figure out what would detect bad events. Right. And instead of detecting them in real life, you would detect bad events in the stateful tests. And yeah, it's always great to have your contract hacked inside a test.
01:49:01.390 - 01:49:14.842, Speaker B: So you mentioned, right. Defi protocols are very composable you're using, for example, avia, you started out with compound. So your tests specifically, are they mostly targeting your contracts?
01:49:14.906 - 01:50:14.210, Speaker C: Yeah, they are mostly targeting our contracts and their contracts. They are mostly like using sort of mocks which sort of imitate functionality of those tokens. But you could do real though as well. You could run tests on main network and use real smart contracts deployed on a real chain. And maybe you couldn't run tests as performantly, but you could find things. Something where we are not yet is, let's say when we run things on a totally real network, especially with metapools, like you can take the base pool as being a real pool, run tests against a real base pool with a new pool, and figure out that the losses didn't happen. So something like that.
01:50:14.210 - 01:50:18.660, Speaker C: But that would be fun, right? And that's definitely possible.
01:50:20.790 - 01:51:08.900, Speaker B: We have recently written an academic paper and a tool to kind of extract profitable opportunities from the DeFi graph through composable transactions. Right. So do you think we need more such tools that look at specific blockchain states and try to search the space for possible application level vulnerabilities? I'm not speaking now about smart contract vulnerabilities such as reentrancy or missing modifiers, but rather pump and dump opportunities or oracle manipulations or such composable dangers. What's your view on how to.
01:51:09.750 - 01:51:33.100, Speaker C: Yeah, that's a good one. That's a good one. Oracle problem is something we didn't much touch. Well, I think I only touched it very recently, but not with external oracles. We pretty much made an oracle for three crypto pool to see what the LP token price is.
01:51:34.430 - 01:51:37.322, Speaker B: Okay, so this is your own oracle that you're running?
01:51:37.456 - 01:52:21.850, Speaker C: Well, nobody runs it. It's a smart contract which just has a view method which calculates well. There are exponentially moving averages for each coin prices. Right. And from that we can find the LP token price in, I would say, a lower bound on that which is not non manipulatable. And that's kind of an oracle for lending purposes. Well, should be not attackable by sandwich attacks and not using any external oracles.
01:52:23.550 - 01:52:44.420, Speaker B: Very good. I hope students listened. You're now challenged. Please look into this, try to sandwich it. But speaking of lending and borrowing, when do you plan to go into lending and borrowing? I mean, I'm still looking for when do we see 100 x leverage on chain actually?
01:52:45.430 - 01:53:13.290, Speaker C: Well, I mean, at least you can lend and borrow on third party platforms against curve LP tokens. And this would be all. And if you want to do that for speculation. You can do that with trickrypto pool because it's not stable in price, actually, and I'm actually doing that, but not for speculation. I'm doing that for just borrowing.
01:53:13.870 - 01:53:48.790, Speaker B: I see. Okay. Maybe you're aware of other platforms. I'm aware of Alpha Homora, where you can get up to eight x leverage. So we looked at the closed borrowing positions from the three curve pool, because it's, I think, the only major stablecoin pool there, if I'm not mistaken. And interestingly, there were no liquidations recorded, as far as I recall our data correctly. It seems like this is a safe.
01:53:48.790 - 01:53:51.926, Speaker B: Safe? Yeah.
01:53:51.948 - 01:53:57.730, Speaker C: Well, I mean, if you go ten x and on three pool, I don't think you ever could experience liquidations. Really?
01:53:57.900 - 01:53:58.426, Speaker B: Right?
01:53:58.528 - 01:54:26.754, Speaker C: Yeah, I think you can go 100 x. Really? Well, maybe it's just for safety. They don't do that, but yeah, I think 100 X will also have, almost not have liquidations, but really, with these leverage platforms, do you think it makes sense to basically go high and higher leverage until you start having liquidations? How would one approach that?
01:54:26.792 - 01:54:35.254, Speaker B: I guess it depends on the borrowing fees as well, right? The leverage factor is not necessarily the limiting factor, but if the fees are just too high, then.
01:54:35.292 - 01:55:02.640, Speaker C: Yeah, but if you remember that in first half of 2020, Andre cronier prototyped with leverage using curve pools and. Yeah, I don't remember what was the maximum he was trying to do? I think 100,000 eggs. Well, that was a little bit too dangerous, but yeah. Well, it was a prototype thing, though.
01:55:04.450 - 01:55:07.854, Speaker B: Prototypes are great. I mean, we need to try out new things, right?
01:55:07.972 - 01:55:18.740, Speaker C: Yeah. 100,000 eggs. How to get liquidated with stable coins. Very well.
01:55:19.990 - 01:55:39.222, Speaker B: So I think. Yeah, I wanted to ask further a bit, your view on MeV. We already touched on MeV. Regarding. So you mentioned that you might be thinking of using these private relay services to protect users from various actors.
01:55:39.286 - 01:56:50.878, Speaker C: Yeah, that's kind of probably a good thing to try. It's fascinating that these days to do like flash long kind of arbitrage. Well, not necessarily. You just do that. You also use Mav to not have that publicly available in Mempool, but also, who guarantees that those miners who you broadcast to don't kind of do some sneaky things? And after all, they have their kind of own private shared mempool. And if somebody shows this information somewhere that allows to do all the same thing as with real mempool, but so far it works. Why not? Of course, it's just basically with public mem pool, everyone can front run.
01:56:50.878 - 01:56:58.194, Speaker C: And with MeV, only members of the club can front run. Right.
01:56:58.312 - 01:57:14.662, Speaker B: It kind of feels like we're introducing or reintroducing some of the CFI centralized finance components. Right. Where there are some gatekeepers that have prioritized access to this information and can exploit this for this information asymmetry for failing to gain, which.
01:57:14.716 - 01:57:17.640, Speaker C: Yeah, that's true.
01:57:19.790 - 01:57:35.918, Speaker B: On the technical side, I think there are means to fix this. Right. You could have, like, trusted hardware modules where you send the transactions to so that nobody else. But maybe this module can see it, which then forms the block, for example.
01:57:36.004 - 01:57:45.440, Speaker C: Yeah. On the other hand, not every raspberry PI will be able to run a node, which it is not anyway.
01:57:48.150 - 01:57:55.626, Speaker B: Depends. Right. On what kind of system architecture there, but there's certainly a lot of room for improvement.
01:57:55.758 - 01:57:56.440, Speaker C: Yeah.
01:57:57.210 - 01:58:19.610, Speaker B: And I guess we need more novelty to keep the chain decentralized and open. Any final remarks you would like to share with our students? That kind of something, maybe some exciting news that you think will come in the future or something that surprised you recently?
01:58:20.770 - 01:59:46.710, Speaker C: Well, I think for me, it's always exciting to do research, even though it's even on liquidity pools, and we will try those with different sorts of assets, and that will be pretty interesting, I would say. And it feels like there is a lot to learn there, even though we created this system like an experimental setup. But what it can do, we don't fully understand yet how efficient can it be? And what's the maximum achievable efficiency? Because when you simulate it, yes, you do some assumptions, but in reality, the assumptions are not exactly like in simulations, and you really need to experiment with that. And maybe this process of looking at what's happening on chain and tuning the models to simulate what happens on chain better to be able to predict how to improve further. This is something really interesting, and I think this deserves some research activity.
01:59:47.850 - 01:59:59.350, Speaker B: Wonderful words for closing. Thank you so much, Michael. I mean, you have truly shaped the defi space with your analytical mind and the biggest defi protocol to date.
01:59:59.420 - 02:00:00.042, Speaker C: So it's.
02:00:00.146 - 02:00:01.200, Speaker B: Thank you so much.
02:00:03.010 - 02:00:04.090, Speaker C: Thanks for chatting.
