00:00:07.370 - 00:00:22.160, Speaker A: After our funds at KVM, the next talk is by Ariel Gabazon, the chief scientist at aztec network. He's been talking all about hass'theorem and some of the important underlying primitives of elliptic curves that are used in almost all blockchains today.
00:00:29.690 - 00:01:40.138, Speaker B: Okay, thanks a lot for coming. So, let me first address the question of why to talk about a basic math theorem at Zk summit. And if I'd have to make an argument for it, it would be that. My hope is that by opening a little the elliptic curve black box, beyond just being a group with hard discrete log and bilinear pairing, sometimes we can get interesting results for snarks. So, just two recent examples are this first work of a way to prove that a Pedersen hash is correct without actually computing it in the circuit, but instead using this classic theorem about something called principal divisors. And another example that got a lot of attention in our sort of field is this work of the starquare people of how to get FfT like algorithms, even when we don't have our beloved subgroup of order, that is a power of two. Yeah, right.
00:01:40.138 - 00:03:25.566, Speaker B: What is Haas's theorem? So, say we have some elliptic curve over a field, fp, and we ask the question, how many points are there on the curve over fp? And let's denote that number by capital n. So, we know that n is at least one, because we always have what's called the identity of the curve, or the point at infinity. And we know that n is at most two p plus one. Why? Because every value we put in for x, there's going to be only at most two options for Yas's theorem tells us that this number n is going to be very close to p, actually. So if we denote the difference between a as the difference between p plus one and n, then this difference is actually going to be at most two Times square root p. Foundational for elliptic curve cryptography, because it tells us, say we want a curve of a certain size, say size roughly two to the m. So how do we get such a curve? Well, we can just pick any prime p with m bits and just take any elliptic curve over fp, and we're guaranteed it'll have size roughly two to the m.
00:03:25.566 - 00:04:33.410, Speaker B: Of course, it's not sufficient for elliptic cryptography, because we'll want a prime order group of this size, but it's foundational for it. So, let me walk you through some of the parts of the proof of this theorem, and hopefully show you some interesting elliptic curve facts on the way. So, the proof begins with some junior high algebra, in a sense. So again, we're denoting by a the difference between the field size plus one and the number of points on the curve over Fp. And this polynomial is going to accompany us for the whole talk. This polynomial, l, which is x squared minus ax plus p. So the coefficient of x is like the difference between the field and the curve size inverted, and the constant coefficient is the field size.
00:04:33.410 - 00:06:01.180, Speaker B: So engrave this polynomial in your mind, and I claim that it's enough to show that if the roots of this polynomial, this is just polynomial over the integers, not a finite field, it's enough to show that the roots of it are not real numbers. Um, why is that? Because, so again, going back to junior high math, right, we always, we compute the discriminant of when we want the solutions of a quadratic, which is here going to be a squared minus four p. So when there's no real solutions, we know that this discriminant is negative. And that's exactly going to show us that the absolute value of a is smaller than two squared would be cool. Ah, right. So, so let's, as a sort of warm up and something we'll use later, let's show that we want to show the roots aren't real. Let's show they're at least not integers.
00:06:01.180 - 00:07:21.540, Speaker B: So let's write, right, we know l, we can write it as a product of linear forms over just the complex numbers. It has some roots, and we know that then the constant term is going to be the product of these roots and a is going to be the sum of them just by multiplying out these products. So since p is prime, then there's only going to be basically two options for omega one and omega two. The first one is that they're going to be one, right? P is prime, and then they have to be a factors of p. So the only options are that they'll be like, for example, one and p. But if that's the case, then a, which is their sum, will be p plus one. And since a is the difference between the field and the curve, it will mean that there's no points on the curve.
00:07:21.540 - 00:08:12.890, Speaker B: But we know that there's always at least one point on the curve, the infinity point, so this can't happen. And similarly, you can rule out the second option, which is minus one minus p. So this tells you that the roots of l are not at least not integers. And we'll use that a bit later. Now the next thing we're going to take a little detour. The next thing is going to be to show, we want to know what are the roots of l over the complex numbers. The next thing is going to be showing that a certain, what's called endomorphism, is a root of l.
00:08:12.890 - 00:09:32.080, Speaker B: So we're going to need to talk about endomorphisms for a few minutes. U. So what are endomorphisms? So this is like a definition I read ten times, and each time I would forget, what's the definition of it? All the things with fisms in the end would just mix in my head. So the way I remember it, it's like it's homomorphisms, which is easier to remember. It's just any map that respects the group law, but that sort of know the group they're working with is an elliptic curve. So what does that mean? It means, yeah, the map respects the group law, as we've probably seen many times. But the knowing that it's an elliptic curve, it means that also this map, if we look at the coordinates of the elliptic curve point, we can represent this homomorphism by rational functions in the coordinates of the curve.
00:09:32.080 - 00:10:50.282, Speaker B: And this bar here is, we're looking at points solutions on the curve, not just over fP, but over the closures. So over f coordinates in FP squared, fb, cubed, and so forth. And an important point is that we can think of these endomorphisms as a ring. So, right, for that, we need to define multiplication of two of these, and multiplication is naturally going to be composition. So like psi one times psi two, what is that? That's going to be just psi one composed inside with psi two. Right. And just as a little exercise, if both of these are expressed as rational functions, then definitely when we compose them, they can still be expressed as rational functions.
00:10:50.282 - 00:11:11.990, Speaker B: So let's use this little notation. We'll use it towards the end, and e is the endomorphisms of the curve. And it's a ring. It has addition and multiplication. Cool. So let's look at two. There's basically two examples of endomorphisms.
00:11:11.990 - 00:12:26.490, Speaker B: The first one is just this scalar, sort of scalar multiplication. So we take a point p and for some integer we output c times p. And basically the reason this is an endomorphism is we have equations for doing doubling and addition on a curve. So using that we can express c times p as some rational functions of the coordinates. So the second example is what's called the Frobenius endomorphism. So this is like when you're taking the point xy and mapping it to the point x to the p, y to the p, right? So first of all, we see clearly it satisfies the third condition, right? We're expressing it as rational functions by definition. So one thing that maybe is confusing in the first, you're like, wait, isn't this the identity map? Because x to the p is just x.
00:12:26.490 - 00:13:27.546, Speaker B: So here it's crucial that we're looking at points over the algebraic closure. So this isn't just the identity map, right? And an interesting thing is, sort of looking at the curve over the closure, it'll allow us to finally get this bound on the number of points over fp, which is what we want. So let's do a little exercise to see that this is really an endomorphism. So basically, the reason it is, is that we have this little formula also for that a plus b to the p, even when the points are not nfp. But in an extension is a to the p plus b to the p. One thing an endomorphism has to satisfy is if it map, it maps a point on the curve to another point on the curve. Let's see that that holds.
00:13:27.546 - 00:14:20.990, Speaker B: So let's start with some point x y on the curve. So it's on the curve. So it satisfies this thing. So if this is zero, then I take it to the p, it's also zero. And now, because of this linearity, of this raising to the power p, I can basically shove all the p's inside. And when I shove them inside, when it's something that's actually an Fp, like these coefficients a and b, then the p just disappears. So what does this give us? It gives us that if x, the point x y is on the curve, so also the point x to the p, y to the p is on the curve.
00:14:20.990 - 00:16:15.200, Speaker B: Righteous. In this overview, I'm going to use two heavy artillery, two big sort of cannons, that their proof is a whole thing. But the first sort of heavy artillery I'm using is this theorem or lemma, that this endomorphism, this forbidus endorphism, is actually sort of a root of this polynomial. What does it mean for the endomorphism to be a root of the polynomial? It means that if now, right, we showed how to do multiplication is composition. So if we're going to look at now this endomorphism, like phi squared minus a times phi, a times phi is like do forbenius, and then do scalar multiplication by a plus p, so this is going to be the all zero map on the curve. This is going to map all the curve to the point at infinity. Or to see this more explicitly, it means that for any xy on the curve, even one with coordinates and some big extension of Fp, if you look at this point like x y raised to the p squared minus a times x, pyp plus p times xy, this is going to be the identity point on the curve for any point, even over the closure.
00:16:15.200 - 00:17:46.940, Speaker B: And just, I felt I should mention snarks. So maybe something interesting for snark optimization. I mean, we usually look at curves over just a prime field, but if we'll ever look at ones over p squared or whatever, maybe a nice little bit is that you want to get, say, p times your point, so you can actually get it by a times your point, right, where a, the number of bits in a is just half of compared to p minus this, x to the p squared, y to the p squared. So this gives you some shortcut of getting p times xy. So we're almost there. So we've shown, or, well, we've seen that this endomorphism, this probenius endomorphism, is a root of l in some sense, but we want to show that an imaginary number is also a root of L. So we need some way to map these endomorphisms to complex numbers.
00:17:46.940 - 00:19:20.570, Speaker B: And this is where this theory of what's called complex multiplication comes in. So what it gives us is there's going to be some isomorphism from this ring of endomorphisms to some subring of the complex numbers. This ring I call here re. And the crucial point is that re, it's a subring of complex numbers, but its intersection with the reals is only z. So more specifically, r is going to be all the points that you can write as z plus z times d. For some imaginary you, this t is going to map the Forbenius endosmorphism to some complex number to some number. In re, I claim to you that this number is going to be a root of L.
00:19:20.570 - 00:20:25.990, Speaker B: Why? Because the fact that t is an isomorphism, right? So it sort of commutes with addition and multiplication. So if you write it out, you see, you can replace the t and l, you can commute them. So you have t of l of phi, L of phi, we know it's just the zero map. And now, right, so t is an isomorphism. So what is it going to map the zero map to? It's just going to map it to zero so this number that is mapped from probinius, let's call it omega, it's going to be an actual root of L. So now we want to claim that it's an imaginary number. Well, we've shown before in our warmup that a root of l cannot be an integer.
00:20:25.990 - 00:20:53.600, Speaker B: So it's an re, it's not an integer. It can't be real. There's no other real numbers in re, so it must be an imaginary number. And we're done. Right? This means that discriminant is negative, and we've got the house abound. Yeah. So that's it.
00:20:53.600 - 00:21:50.530, Speaker B: How much time do I have left? Five minutes. Oh, okay. So basically, that's it. One little slide, just, I'll do a little rant of historical. So where does this theorem come from that the endomorphisms are, you know, equivalent to some imaginary ring in the complex numbers? So, so it, it came from sort of the 19th century, where people were studying elliptic curves over complex numbers, not over finite fields like we do in cryptography. And then there's this really cool equivalence. Maybe you've seen that all elliptic curves over complex numbers, they're equivalent to tauruses.
00:21:50.530 - 00:23:00.440, Speaker B: So basically, the complex numbers modulo a latice, and then the endomorphisms there correspond to complex numbers that preserve the lattice. If you multiply anything in the lattice, it stays in the lattice. And sort of what happened was, hase was trying to prove this. And people, hase and others were like, okay, maybe this whole theory of complex multiplication, maybe it also actually works over fields of characteristic. And turns out it does, and they worked hard to prove it. And so where does this polynomial l, come from? I'll say, very roughly, it's related to what's called the zeta function of the elliptic curve. So, right, there's this whole Riemann hypothesis where you want to prove that the non trivial roots of the Riemann zeta function all have, like real part half.
00:23:00.440 - 00:23:50.520, Speaker B: Right. And it's very hard question. So people were looking for, okay, maybe for other zeta functions, we can prove it, that the roots are there. And it turns out that, yeah, for a zeta function of an elliptic curve is much easier to work with. And then proving that the same thing about the roots of the zeta function of elliptic curve, it. Exactly me. Implies that the roots of these roots, omega one, omega two, we were working with, they have like absolute value, square root p, which also gives us this bound, because this a was the sum of them.
00:23:50.520 - 00:24:19.890, Speaker B: Yeah. So I used. Yeah. For, to prepare this, this book, the first book you've probably all heard of. The second book is, yeah, I also recommend to look into it, has a lot of interesting anecdotes. Also, just doing math in Europe during the sort of beginning of World War II or just before that. So a lot of interesting personal anecdotes and.
00:24:19.890 - 00:24:21.540, Speaker B: Yeah, thank you very much.
00:24:29.270 - 00:24:47.660, Speaker C: We got time for one or two questions and then we got a break for lunch. But yeah, I think a mic is coming around. If you have a question, please speak into the mic for the recording sake. Thank you. And if folks could try not to leave in too large a number before the question is done, I think that would be helpful. But we'll wrap up in five minutes.
00:24:55.760 - 00:25:41.470, Speaker D: Okay, I'll speak out loud. Thank you for wonderful talk, Ariel. It's of course very sad that we haven't started on this torus stuff for complex numbers from the very beginning. I love how torus story, guys, actually, serious question, all the sensor business that you talk about, and this provincial prism, actually, from the security perspective, I wonder, can this happen that we discover so many endomorphism, easily computable that this log becomes easy in curves because so many kind of relations that relate kind of seemingly unrelated points, and how does it happen that everything becomes breakable if you find so many relations like this?
00:25:43.600 - 00:25:54.210, Speaker B: Yeah, I don't know. That's an interesting question. Yeah, I don't know. Yeah.
00:25:56.180 - 00:26:07.590, Speaker D: Managing on the, how can I extract, like what point to add? Is there a.
00:26:13.390 - 00:26:42.838, Speaker B: Yeah, I don't know how to imagine it, sorry, got a very satisfied, um, I don't, I don't know. Yeah, so since I come from the crypto side, I guess my knowledge beyond what the slides is not deep for the question. Sorry. Yeah.
00:26:42.924 - 00:26:59.450, Speaker D: Does the other root of l have anything we found convenient? And that was useful, you can contact conjugate.
00:27:01.970 - 00:27:44.540, Speaker B: Yeah. So in the complex numbers it's going to be the conjugate. Yeah. So I wonder what endomorphism the, the other root corresponds to. Yeah, that's an interesting question. I don't know, but which automorphism, exactly, right. So the question, yeah, the conjugate, which exactly automorphism is it going to correspond to? The, what, sorry.
00:27:46.510 - 00:28:02.670, Speaker E: The involusium. So you have this automorphism that squares two minus one, and every elliptic curve comes with it, and I guess it's the equivalent to complex conjugation when you do it over finite fields.
00:28:12.090 - 00:28:25.686, Speaker B: Okay, yeah, no, I guess the question is not what the conjugation corresponds to what the conjugate of Frobenius, what does it look like as an endomorphism.
00:28:25.798 - 00:28:31.310, Speaker E: Yeah, I was saying that it's simply Frobenius composed with this involution.
00:28:33.090 - 00:28:57.682, Speaker B: Right, but what does the involution look like on the curve? I guess. Like, what mapping is it exactly? Oh, just x y to x minus y. Okay, so you're saying the conjugate to Frobenius maps x y to x to the p minus y to the p? Maybe. Yeah. That makes sense. That makes sense. Yeah, probably.
00:28:57.682 - 00:29:02.330, Speaker B: It's that awesome.
00:29:02.400 - 00:29:03.178, Speaker C: I think.
00:29:03.344 - 00:29:03.880, Speaker B: Time for.
