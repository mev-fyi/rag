00:00:05.450 - 00:00:59.626, Speaker A: Welcome to Zero Knowledge. I'm your host, Anna Rose. In this podcast, we will be exploring the latest in zero knowledge research and the decentralized web, as well as new paradigms that promise to change the way we interact and transact online. You this week, James and I are chatting with Antonio Giuliano, founder and CEO of the DyDx project. We look at how DyDX are leveraging Starkware's stark technology stack to create a different kind of zero knowledge rollup from the ZK rollups we have featured previously. We discuss how the DyDx system works, what went into their decision making around which l two construction to go with the goal of DyDX, and how their new system aims to get them there. But before we start in, I want to let you know about an event that I'm running next week, May 19.
00:00:59.626 - 00:01:43.242, Speaker A: It's a joint ZK Sessions plus ZK Jobs fair. ZK Sessions is a series of monthly events I've been doing since the beginning of this year. This particular ZK Sessions is all about ZK languages, and it will feature short talks from the teams who are developing the domain specific languages you need to build with zero knowledge proofs. So if you are a dev thinking of jumping into the ZK space but you're confused by all the options, this is definitely for you. Right after the ZK Sessions event, which should last about an hour and a half to 2 hours, we will be hosting the second ZK Jobs fair again. It will be on gather town and you are welcome to come by and just get to know the teams who are looking to hire new talent. With every ZK Jobs fair, I'm releasing a new ZK Jobs board.
00:01:43.242 - 00:02:23.318, Speaker A: Here you can see open positions from many of the best teams in the space. The Jobs board is public. Be sure to check it out and if you do send an application, just let them know that you found out about it through the ZK podcast. I also want to take a moment to thank this week's sponsor of the podcast, least authority. Least Authority is a leader in the security of distributed systems. They provide security consulting services, develop open source products, and contribute to the advancement of learning and research in the field. In addition to their security reviews of innovative projects such as Chia Network, Mina loopring, and Filecoin, this May they will be releasing a white paper on zcaps or zero knowledge access passes.
00:02:23.318 - 00:03:06.210, Speaker A: ZCaps, adapted from Privacy Pass, is an anonymous token based authorization protocol that facilitates an online exchange of value while disconnecting the necessary payment data from the day to day usage service data of customers they've implemented zcaps in private storage, which is a cloud storage service designed with privacy and security features to give you control over who has access to your data. Private storage will be launched just after the white paper release. Sign up for least Authority's newsletter to be notified on the release of the ZCap's white paper, private storage security audit reports, job openings, and more. Visit leasedauthority.com slash newsletter to join the mailing list. I've added the link to this in the show notes, so thanks again. Least authority.
00:03:06.210 - 00:03:20.198, Speaker A: Now here's our episode all about DYDX. So this week, James and I are chatting with Antonio Giuliano, who's the founder and CEO of DYDX. Welcome to the show, Antonio.
00:03:20.294 - 00:03:21.918, Speaker B: Hey, thanks so much for having me.
00:03:22.004 - 00:03:22.874, Speaker A: Hey, James.
00:03:23.002 - 00:03:24.238, Speaker C: Hi, Anna. How's it going?
00:03:24.324 - 00:03:32.938, Speaker A: All good. I want to find out first, what is DYDx? Maybe give me the high level description of what that project is.
00:03:33.044 - 00:04:09.802, Speaker B: Yeah, absolutely. So DyDX is a decentralized exchange, and we're really focused on advanced financial products and specifically derivatives. Right now, our main product that we have on the platform is this thing called a perpetual contract. And this is financially the product that was really popularized by BitMex and now is extremely popular in the crypto space. It's the most popular product by volume in the entire space. It does more volume than everything else in crypto put together on perpetuals. And that's kind of the main reason why we're so focused on it, specifically what perpetuals are.
00:04:09.802 - 00:05:01.818, Speaker B: They're a type of synthetic contract which can give you price exposure to any asset. All you need is kind of some collateral in the system, and then you can synthetically trade any product that you might want to trade. The main way they function is kind of based on this core component called a funding rate, which is a dynamic interest rate that's paid between longs and shorts. But anyways, the main reason they're so popular is because it can be traded with really high leverage. So this is where you see the 100 x leveraged products of the world, and not everyone trades with that high leverage. But leverage itself is a really powerful concept, because you can kind of just come to an exchange with a certain amount of money, say $100, and you can start trading as if you had multiples of that amount of money. So you could start, come to the exchange with $100 and start trading as if you had $1,000 or potentially even more based on how much leverage you're willing to take on.
00:05:01.818 - 00:05:08.602, Speaker B: And that's the reason why these products are so, so popular, is because they allow traders to trade as if they had more capital.
00:05:08.746 - 00:05:16.450, Speaker A: Cool. Where's DydX come from? Because it's kind of neat. It looks really like. It looks like a bit of a function or something. What is it?
00:05:16.520 - 00:05:48.394, Speaker B: Yeah, absolutely. So this kind of belies my background a bit. But the first thing that I thought about when I thought about starting a company that built derivatives was derivatives in the mathematical sense rather than the financial one. So my first company, I guess I thought about the name for months and I couldn't come up with anything. But somehow, some way or another, when I thought of derivatives, I just thought of dy over DX, as in differentiating something in math. And it also was like four letters. Kind of sounded like an exchange, like a DDAX or like a binance or something like that.
00:05:48.394 - 00:05:51.194, Speaker B: Dy, DX. So it seemed like the name fit.
00:05:51.312 - 00:05:57.118, Speaker A: Nice. And also, I think your logo kind of shows that, too. It has like this special D. Yeah.
00:05:57.204 - 00:06:00.720, Speaker B: It'S like the special D. It's like a lowercase delta in Greek or something.
00:06:01.250 - 00:06:04.042, Speaker A: Nice. So are you a Dex?
00:06:04.186 - 00:06:42.442, Speaker B: Yeah, I guess it depends on your definition of Dex. But I would call us basically what's known as a hybrid exchange, which kind of means we have some centralized components to the exchange and then some decentralized components to the exchange. Our centralized components, we run our order book and our order matching system in a central way. It's run on servers like a normal centralized exchange. But importantly, we run on smart contracts on the Ethereum blockchain. And this is where you get all of the non custodial trading, all of the really big improvements in transparency that come with a decentralized exchange. But it kind of all runs through this central order book and order matching system as well.
00:06:42.576 - 00:06:49.546, Speaker C: So the smart contracts exist to make sure that the order matching system is behaving correctly and that all its actions are transparent.
00:06:49.658 - 00:07:01.540, Speaker B: Yeah, that's basically right. And also that we don't custody user funds when they're trading on the platform. You can always just go directly to the smart contracts and trade or withdraw your funds. It can't be censored from doing that.
00:07:02.230 - 00:07:19.882, Speaker A: So in what you described, though, you were saying, this originally existed on l one, all on l one. And now you're moving to become more of an l two setup. What does your l two look like? We kind of said it's not a ZK roll up. So what is it?
00:07:20.016 - 00:07:56.866, Speaker B: Yeah, so I think it's basically, by definition, a stark based rollup. We've partnered with Starkware, who's effectively providing all of the stark based proofs that our system runs on. One important advantage and one important distinction is that we're running on Starware's roll up mode, which means we use layer one ethereum data availability, similar to an optimistic roll up or something like that. And therefore the system is entirely noncustodial because all the balances are stored on chain. You can always just go to Ethereum to be able to withdraw, be able to trade, and that's kind of where we get a lot of the Dex improvements from.
00:07:56.968 - 00:08:08.002, Speaker A: How does a stark version of a ZK roll up, what does that mean? Actually, because I thought there was a reason that Stark l two s were built slightly differently because of the limitations of starks.
00:08:08.146 - 00:08:43.394, Speaker B: Yeah, that's a great question. I'm probably not the most qualified person to answer this. James probably knows a lot more than I do. But my impression is basically that starks are a pretty good improvement in kind of the scalability and kind of the proving times and the proof sizes over what existed in the very earliest zero knowledge proofs. And that's why Starcore is using them and is really focusing on them right now, is it's the technology that gets you the most amount of scalability and also the most amount of expressiveness in your programming language that's available right now.
00:08:43.512 - 00:08:55.798, Speaker C: So for the new DyDX layer two, this is more similar to ZK roll ups, but powered by starks, and a little bit of a departure from the earlier Starkx systems, right?
00:08:55.884 - 00:09:45.960, Speaker B: Yeah, that's exactly right. And the main difference, starkware offers two different modes, which they call roll up mode, which is what I talked about with onchain availability and what we're using. And then they also offer what they call validium, which is effectively like a federated group of data providers promised to provide your data to you. And I think there are trade offs with these. Obviously it costs more in gas fees to publish all of the data on chain and do in full roll up mode, but also, of course, it is more decentralized as much as decentralization is a spectrum. Now, as long as you trust Ethereum and you can run an ethereum node, you can always get your data. And we felt that was something that was important to be able to provide to our users, and we were happy to pay the modest, I would say, increase in gas fees to put all the data on chain to be able to do that.
00:09:47.050 - 00:09:58.906, Speaker C: I think that's a really good way of putting it is the core difference between a roll up and a plasma or validium is where the data is and whether any user can go and get that data at any time.
00:09:59.088 - 00:10:29.094, Speaker A: So last year I actually had will harborn from diversify. Also my co founder at the Xeronol validator and Tom brand from Starkwork come on the show and explain the diversify setup the way that they were working with Starkx. And I remember we walked through the federated system, we went through what the committee looked like and everything. I want to understand a little bit more what it looks like now. You're saying you kind of used the roll up version, but what does that actually mean?
00:10:29.212 - 00:11:18.130, Speaker B: Yeah, absolutely. So at a high level, the data that exists on our system that we're using with Starquare is all the user balances and also a bit of data about which particular orders have been filled and things like that. But that's the only data that you need to be able to reconstruct the entire state of the system. So whenever an order is filled, the only thing that's actually going on chain or into starkware system are the actual matches or the actual trades. Orders that are just placed but never filled are not actually going through starquare system. And that's kind of what I was talking about with the off chain order book and order matching system that we're running. So, okay, whenever a trade happens, obviously there are two counterparties, there's a maker and a taker, and both parties balances will be updated.
00:11:18.130 - 00:12:07.254, Speaker B: So the data that's actually going on chain is all of the accounts whose balances changed in the current stark block. Only those accounts have to actually go on chain because of course we've been publishing data since the beginning of the system. And you can always go back in time on the blockchain and be able to reconstruct the entire state tree with just like the delta balances, basically. So that's what goes on chain. When I say on chain, it uses the call data effectively for the transaction, which is not accessible by smart contracts. But that's okay because all we really need is people that are watching the blockchain to be able to reconstruct the state. And it's a lot cheaper to publish data there than it is to a smart contract state.
00:12:07.254 - 00:12:22.890, Speaker B: But effectively, the smart contracts are requiring that whenever a new stark block is published, that the delta data for all the delta balances is published in the call data for that starkware block to be mined.
00:12:23.390 - 00:13:01.714, Speaker C: I think you pointed out a really interesting property of the validity proof based roll ups versus optimistic roll ups. You said that the only thing that goes on chain is the deltas, the changes in the account balances and the orders don't go on chain. This is one of the most compelling advantages of validity proof systems, is that you can drop all of the extra data. You can drop all of the orders because you don't care what they were as long as they were matched correctly. And the validity proof proves that there were orders that match these state changes, that match these updates, all these trades.
00:13:01.842 - 00:13:12.070, Speaker A: Does that mean like in the optimistic roll up, you'd actually have to, if you were to try to create something similar, you'd have to include all the orders even if they never went through.
00:13:12.220 - 00:13:15.722, Speaker C: You would have to include all of the orders that were matched that went through.
00:13:15.776 - 00:13:18.218, Speaker A: Oh, that did go through, but you are doing that anyway, aren't you?
00:13:18.304 - 00:13:45.998, Speaker B: Yeah, it's actually an important difference and I think it's a good call out by James, because if you kind of look at the distribution of number of trades on an exchange, it's really top heavy. Like there are market makers that are quoting on the exchange and say a market maker may do thousands of trades in a given batch, but actually we only have to publish like one delta balance for that market maker. So it's actually a really important nuance, but something that gives us a lot more scalability.
00:13:46.174 - 00:13:55.158, Speaker A: Do you also find in these setups that there's a lot of trades happening between kind of the same actors back and forth, so you also wouldn't have to publish each one of those?
00:13:55.244 - 00:13:55.830, Speaker B: Exactly.
00:13:55.980 - 00:13:56.822, Speaker A: Oh, interesting.
00:13:56.956 - 00:14:25.390, Speaker C: So the advantage of the ZK model is that you prove that those orders all existed and you don't have to show them. In the optimistic model. You have to put all the orders on chain two so that anyone trying to prove fraud can show the orders and can have a guarantee that those orders are available to be included in a fraud proof? So the ZK model here gets a pretty big scaling benefit because it can just drop all of that information entirely.
00:14:25.970 - 00:14:41.426, Speaker A: What made you make the choice in this case? You must have been looking at all the l two s and evaluating how they worked. Do you feel like this one fit your particular use case and needs the best, or was there? Yeah. What was going into that evaluation?
00:14:41.618 - 00:15:39.062, Speaker B: I definitely think it was a combination of both Starquare, just being at the real forefront of production ready scalability technologies, I would say, and also our unique use case. We kind of talked about the advantage that we get as an exchange of just having to publish our delta balances, rather than all the trades on chain, which is a really big deal. One of the other things that is unique about DYDX, which we touched on at the beginning, is we're a hybrid decentralized exchange, which means we have our central matching model and central order book already. And that fits really well with Starkware's current model and emphasis on currents. But their current model is basically kind of a single central prover to the stark system. And one of the things that we're going to be working on going forwards is being able to fully decentralize our system. And that maps really well with Starkware's own roadmap to kind of decentralize their prover network.
00:15:39.062 - 00:16:04.046, Speaker B: Because the thing we don't have right now for trading specifically is it's not fully censorship resistant basically, on the trading side. It is fully censorship resistant on the withdrawal side. Like you can always close your positions and you can always withdraw. But we could basically censor users if we want to, from using our product or kind of our website and going through our central liquidity because of that.
00:16:04.068 - 00:16:05.390, Speaker A: Central part of the hybrid.
00:16:05.470 - 00:16:06.402, Speaker B: Yeah, exactly.
00:16:06.536 - 00:16:08.002, Speaker C: The order matching engine.
00:16:08.136 - 00:17:09.326, Speaker B: Exactly. Yeah. So I think Starburst's current system, first of all, is really general, but is an especially good fit for exchanges that are operating on this hybrid model, which both us and diversify currently do. So I think that's some good empirical evidence of that, maybe taking a step back and talking about our thought process for choosing a layer two in general, at a very high level, there were three main classes of things that we considered, which is probably going to be obvious to everybody who's paying attention to this podcast. But the first was other layer one blockchains that are not Ethereum. Second is optimistic roll ups and kind of optimism is the leader there? And then third is stark based roll ups in stark, where we think it's the leader there for sure, kind of going through these one by one in terms of why not another layer one blockchain right now, this isn't a super original thought, but just the ecosystem for building decentralized apps on these other chains is not quite there yet. The wallets are really subpar.
00:17:09.326 - 00:17:16.818, Speaker B: In general, the cross chain technologies, like how are our users going to get tokens over if we move to another layer one chain?
00:17:16.994 - 00:17:20.810, Speaker A: James is making a face when you do that because this falls on his shoulders.
00:17:22.510 - 00:17:24.010, Speaker C: Partially my fault.
00:17:25.710 - 00:18:05.078, Speaker B: Yeah, exactly. I mean, that's the point, right? People are working on it, and I think there are a lot of great things being worked on, but at a really high level. We needed to scale right now, basically because our users were just getting crushed by these gas fees. The amount of gas a DyDX transaction uses compared to a uniswap transaction or so on, layer one is roughly like five times higher or so. So our users were having to pay $100 in gas fees pretty regularly. That would literally spike up to thousands of dollars in gas fees at the times when the gas price was going nuts. And that's actually the time people most want to trade to.
00:18:05.078 - 00:18:49.058, Speaker B: So who's going to use it in exchange, where you have to pay hundreds of dollars in fees to make a single trade? Not that many people. So we needed to solve it right now, basically. But kind of getting back to the question of why not other layer ones, just to finish there. And other people have said this too, but also the developer environment there is nation. I would say there's a lot of exciting stuff going on there, but a lot of these other chains have their smart contracts written in rust, which is fine. I'm actually of the opinion that any good developer should be able to write smart contracts in any given language. But there's not quite things like truffle or equivalents or like hard hat and stuff like that to be able to develop on those chains quite yet.
00:18:49.058 - 00:19:42.450, Speaker B: So we didn't think the time was right to move to a different layer one quite yet, and then we kind of touched on this before. But there are several advantages, I think, for us of using Starquare over using optimistic roll ups. The first is increase in scalability. The second, which is basically the same thing as other layer ones, is production readiness. I mean, just look at the apps that have been live on Starquare. You mentioned this before, but diversify has been live on Starquare for the past year or so, which gave us a lot of confidence that they would be able to build a production grade system for us now and not at some point in the future. And then the third thing, which is an interesting point as well that I'm sure we can dive into, is kind of the withdrawal times on optimistic roll ups are usually on the order of a week or so, whereas the withdrawal times on zero knowledge roll ups.
00:19:42.450 - 00:20:18.546, Speaker B: It really just depends on how much gas you're willing to pay and how frequently you're willing to publish the batches on chain. For us, we currently have that set to 8 hours, but likely it'll be lower in the future. But being able to withdraw that time period is a really big advantage for users. You can of course, on the withdrawals use kind of a central liquidity provider to basically front the withdrawals for the system. And we're actually doing that right now on Starquare's system. So users of Dydx don't even have to wait that 8 hours. It's as fast as withdrawing from any other Dex or a centralized exchange because we're kind of fronting the withdrawals there.
00:20:18.546 - 00:21:09.794, Speaker B: But the thing that you have to think about if you're running one of these central withdraw providers is how much capital do you need to be able to run one of them? And we were kind of thinking about it, and we were like, okay, with optimistic roll ups, we need a week's worth, or whoever's providing the capital needs a week's worth of capital of withdrawals on the entire exchange. And even for us at our scale, that's quite a lot of money, probably like tens of millions, maybe up to like $100 million or so. And as we scale, imagine trying to do that for an exchange that's aspiring to scale, to like a binance level scale or something like that, it's quite high, whereas it's definitely tenable for us to be able to front the withdrawals for. Currently we're doing 8 hours. As we scale, hopefully we'll shrink that time even lower. So the withdrawal provider only needs like, capital proportional to an hour's worth of withdrawals on the system.
00:21:09.992 - 00:21:13.486, Speaker C: Quick question. What is the reason for the eight hour delay?
00:21:13.518 - 00:21:40.090, Speaker B: Right now, it's purely a gas cost optimization thing. Whereas you're paying, like, if you did every hour, you'd have to pay roughly eight times more in gas costs. It's not exactly eight times more because basically the gas costs are, I believe it's around 5 million gas right now. Flat fee to prove the stark proof. And then plus all of the data that you're doing in kind of the validity proofs.
00:21:40.590 - 00:21:51.742, Speaker C: Okay, so it's not a question of, like, you need 8 hours, it's a question of what's the right trade off for the cost of operating the system. And as the system grows, you can do that more and more often.
00:21:51.876 - 00:22:01.134, Speaker B: Yeah, exactly. And that's purely just offset by the trading fees that we're making. So as hopefully volume increases and our fees increase, it makes sense for us to publish them more frequently.
00:22:01.262 - 00:22:09.254, Speaker C: This is, I think one of the interesting trade offs of starks versus starks is that starks have a higher base cost for these sorts of things.
00:22:09.372 - 00:22:37.134, Speaker A: That actually leads me to another question, though. So you've kind of done the rundown of what you chose not to do. You chose not to do other l ones, you chose not to do optimistic roll up. But why not do a ZK roll up? Like the ZK snark roll up. And I feel like what we started with was more like the comparison to optimistic, but not necessarily to snarks. So, yeah, you must have looked at all of those options as well. What made you make the call?
00:22:37.252 - 00:22:59.094, Speaker B: Yeah, we definitely did look at all of them. I think the main reason for choosing Starquare was combination of production readiness and what we deemed to be like professionalism on their team. Not to know. I just think starkware is the most professional and has a really high quality team. And empirically they had been running with diversify for a while. So like I said, that gave us a lot of confidence to go with them.
00:22:59.212 - 00:23:32.906, Speaker C: So we've been talking a lot about why DyDX decided to go with a ZK roll up using starks. And a big part of that was that the limit order book that you are running, the order matching system kind of necessitates the choice, is the order matching system works better with a ZK rollup. Can you talk a little bit more about why DyDX built a limit order book when a lot of the dex activity in the space has been moving towards automated market makers?
00:23:33.018 - 00:24:07.718, Speaker B: Absolutely. So I think at the highest level, it's worth talking about what our goal is at DyDX. And our goal is to become one of the biggest crypto exchanges, period. But on kind of a three to five year time horizon. And that informs a lot of the decisions that we make, I think. So if you want to be one of the biggest crypto exchanges, of course you must support the biggest market in crypto, which is perpetuals. Right now, one of the interesting metrics on perpetuals is that just in the past year they surpassed all of the rest of volume on everything else in crypto combined.
00:24:07.718 - 00:24:47.062, Speaker B: And we think that they, and kind of more broadly, the derivatives market on crypto is only going to grow from here. So that led to our choice on why derivatives? Addressing your question on why order books as opposed to automated market makers, this is not a super original thought, but I subscribe to it in that order books, I think are more efficient for building liquidity than automated market makers are. Of course, there's strides to improve this, like the stuff that Uniswap V three is doing with. Not to step on their toes, but I would kind of call that like a hybrid amm, like order book, because you can place and cancel in different levels and stuff like that, which I think is really cool.
00:24:47.116 - 00:24:52.214, Speaker C: Actually, one of the ways to look at it is changing the AMM to simulate an order book.
00:24:52.332 - 00:25:38.198, Speaker B: Yeah, it's kind of a little bit in between, and I think that's awesome. And there's trade offs all over the spectrum. But answering the question of why order books for a given capital amount, you can just get much more liquidity, much more depth on the book with an order book than you can with an automated market maker. Kind of to give people a sense right now, roughly, I think Uniswap has about 800 million or so locked up in their ETH USDC pool, and that translates into about $2 million worth of depth within 1% slippage. And that's the same depth. We have basically $2 million of depth within 1%, but we only have our market makers quoting with like $2 million on the platform. And of course, Uniswap will improve, and of course DYDX will also improve the amount of capital and market makers that we have as well.
00:25:38.198 - 00:26:26.226, Speaker B: But just we think we're going to be able, at a really high level, to build a much superior product experience with order books than we are with automated market makers. Specifically for the, call it like top 50 or top 100 markets. And that's like a really important point, actually. And again, this isn't a super original thought, but I think the thing that automated market makers are great at is kind of quoting on the long tail of markets. I mean, just look at the number of markets that Uniswap supports versus even like a finance or like an FTX or something, who do great execution on being able to list the long tail of markets with an order book based model and automated market makers, that's the real killer use cases. They're just better for supporting the long tail of markets because it's so easy to provision liquidity for them. But going back to what I led with, what is our goal here? It's to become one of the biggest crypto exchanges.
00:26:26.226 - 00:27:08.466, Speaker B: So you have to form an opinion on which one of these two is there actually going to be more volume in kind of like the top, call it like 100 markets or so by volume or 100 plus markets. And it's certainly an open question as to how many cryptocurrencies will there be with tons of volume and what will the volume distribution look like. But currently, right now, just bitcoin perpetuals, like, just that one market is almost bigger than everything else in crypto put together. So it's very top heavy in terms of volume towards the top coins. And that's why we're focused on order books, because we think for the foreseeable future, most of the volume will be concentrated in these top markets and we can build a better product by serving them with order books.
00:27:08.578 - 00:27:14.374, Speaker C: Interesting. Do you have a bitcoin perpetual dominance index that I can track?
00:27:14.572 - 00:27:24.938, Speaker B: Yeah, I think there probably is one on coin gecko or something like that. I don't know what the current number is. I think it's like 40% of all volume in crypto is on bitcoin perpetuals, though.
00:27:25.024 - 00:27:26.006, Speaker C: Incredible.
00:27:26.198 - 00:27:50.562, Speaker A: Yeah. You just spoke to this question that we had, which is about the selection of assets that you've chosen to list. It sounds like you haven't quite decided how wide you're going to go, or have you? Like what you just said, you don't exactly know what the future holds for this. First of all, how do you even make these decisions? Because that will change, right? Those top tokens are going to change dramatically over the next few years anyway.
00:27:50.616 - 00:28:43.118, Speaker B: Probably, yeah, absolutely. And I think this is a good segue to one other really big advantage we get on our layer two system. But I'll kind of talk about historically how our layer one contracts were set up and how that really limited us and the number of markets we could support. But on our layer one perpetual contracts, they only supported what's known as isolated margining. And that means for every different market you might want to trade on, you have to put down collateral separately for that market. So, like if you want to trade both the bitcoin and ETH perpetuals, you got to put down your 1000 die or whatever of collateral on the bitcoin perpetual and then your thousand on the ETH one separately. So this just really limits capital efficiency for traders, and especially it really limits capital efficiency for market makers, because market makers want to trade on every market that the platform supports, but with isolated margining.
00:28:43.118 - 00:29:04.362, Speaker B: Say DyDx wants to support 100 markets in the next year, market makers would have to deposit collateral 100 times, which is obviously pretty ridiculous. So that really just limited us in the number of markets that we were able to support on the platform to the point where, to give people a sense, we literally only had three perpetual markets ever on layer one ethereum, for this reason.
00:29:04.496 - 00:29:06.550, Speaker A: And it was, what did you call it? Bitcoin.
00:29:06.630 - 00:29:10.682, Speaker B: Yeah, we had bitcoin perpetuals, ETH, and then Chainlink as well.
00:29:10.816 - 00:29:12.330, Speaker A: Chainlink was the choice.
00:29:12.910 - 00:29:13.660, Speaker B: Yeah.
00:29:14.190 - 00:29:15.478, Speaker A: Why chain link?
00:29:15.664 - 00:29:23.786, Speaker B: Well, it has a good amount of volume and also there's a good amount of overlap with the users that we have, which are oftentimes more defi centric.
00:29:23.898 - 00:29:33.438, Speaker A: Got it. I mean, I actually wanted to ask you that before, when you were talking about these gas prices getting crazy, was that like during DFI summer, that you really found this problem to be unmanageable?
00:29:33.534 - 00:30:22.274, Speaker B: Exactly. In mid to late 2020. And consequently, we really missed out on a lot of the volume that went into these new DFI coins, which was tough to foresee. But actually DyDx had about like 30% market share of all volume on dexes, roughly in the first half of 2020. And then uniswap obviously just started going crazy because people wanted to trade these long tail of markets, and not even the long tail, but going from three to on the order of 100 or so, we have captured most of that volume, we think, as well. But we are unable to support that because we only had isolated margining. And the reason for that is effectively one of the things our smart contracts do is whenever a user makes a trade, you have to check that their account is collateralized, which means you have to basically loop through all of the markets on the system.
00:30:22.274 - 00:31:12.034, Speaker B: You have to get the Oracle price for every single market, which is number of s loads, at least times like number of markets that you support, which is quite a lot. So that really limited us in terms of how many assets we could list on the platform, because every single new asset that we would list would have increased gas prices for everyone on the system, even if they're not trading on those markets. So it's a super big limiting factor. Looking forward to what we now support on Starquare, we support this other mode of margining, called cross margining, which is basically the opposite. It's like you can deposit collateral one time and you can start trading on any different markets, or as many markets as you want to using that collateral. And again, market makers can use this as well, so they just deposit one time. It's really easy for them to start quoting on just like any different market they might want to trade on.
00:31:12.034 - 00:31:51.962, Speaker B: So the reason we were able to support this on Starquare fundamentally is because of the scalability, because you no longer have to pay constant number times, like number of escrows, you're doing basically gas per trade anymore. And that's really allowing us to launch a lot of new markets on the platform, which is a really big strategic objective for us. Currently we're up to, I think like eight or nine or so, but we're on a pace of about launching two markets per week or so, mostly just doing that for growth purposes to kind of build hype for every new market that we're launching. But that's like a really big advantage of using layer two as well, is you can just do things that weren't really possible on layer one due to gas constraints.
00:31:52.026 - 00:31:56.522, Speaker A: Interesting. When you say markets, do you mean pair or do you mean a token?
00:31:56.586 - 00:31:57.550, Speaker B: Yeah, pair.
00:31:57.710 - 00:32:00.146, Speaker A: Like two new pairs every week.
00:32:00.248 - 00:32:00.610, Speaker B: Right.
00:32:00.680 - 00:32:08.806, Speaker A: What are you up to now? Yeah, I guess you could say pairs for me. I always think kind of in token supported, but I realized that I don't think that's the way you're thinking about it.
00:32:08.908 - 00:32:16.690, Speaker B: It's basically the same thing. Yeah. All of our quote currencies are in USD, so basically we're listing like a new token for each new pair.
00:32:16.770 - 00:32:18.918, Speaker A: Okay, and how many are you up to now?
00:32:19.004 - 00:32:23.130, Speaker B: Currently up to nine, I think. But we just launched the platform like a month ago.
00:32:23.280 - 00:32:29.002, Speaker A: Okay, so it's nine and growing at two per week, so that's pretty good.
00:32:29.136 - 00:32:31.510, Speaker C: You said the quote currency was USDC.
00:32:31.670 - 00:32:32.798, Speaker B: That's right, yeah.
00:32:32.884 - 00:32:33.278, Speaker C: Cool.
00:32:33.364 - 00:32:42.142, Speaker A: Do you foresee a limit though, even on the l two? Does it have some point where you're like, actually it starts to also affect this model?
00:32:42.276 - 00:33:20.650, Speaker B: Yeah, I would say it does. I mean, one limiting factor that we haven't really touched on yet is even with starks, a pretty big consideration is the proving costs for starks, which are reasonably high still. We're paying more in gas fees than I'm pretty sure it's costing like starkware to run their prover engine. But it is a pretty significant consideration as well. So I believe we're totally golden until we get to on the order of 200, 300 markets. But at that point we'd have to think about scaling the proving engine, making the verifiers more efficient, things like that. But that's the kind of stuff that starcore continues to work on and that I think will continue to improve.
00:33:21.470 - 00:33:33.982, Speaker A: Do you also see an evolution in the way that your l two setup interacts with the l one going forward? Or is this like, you've done a lot of work to launch this and this is what it's going to be from now on?
00:33:34.116 - 00:34:35.746, Speaker B: No, it's very much like. I think a lot of aspects will continue to improve over time. One actual kind of critical thing that our users are still running into, basically is kind of in order to onboard to the system, you have to send two transactions, basically one to register your stark account on the smart contract, and then a second to deposit your funds. There's no way to get around, like fundamentally you have to deposit your funds into the system. One thing I'm excited about is just kind of more bridges between layer twos being a thing like imagine if coinbase or something like that were integrated with Starquare optimism or whatever the case may be, and could support just withdrawals directly to layer two. That would be a lot more gas efficient for them and us and the whole system. And I think that's the kind of stuff that's going to start happening over the next year or two, whether it's withdrawals from centralized exchanges or it's like a bridge between optimism or some other layer one in Starquare and any other chain you might want to trade on.
00:34:35.746 - 00:34:54.042, Speaker B: But currently, I guess the state of the world is everyone has to go back to layer one and then maybe move to whatever layer two you want to, whether that's centralized layer two on your favorite centralized exchange, or it's your starquare stuff. But that's still a pretty big constraint, I would say.
00:34:54.176 - 00:35:24.322, Speaker A: That question of bridges between the l two s, we have mentioned that, I think, on almost every episode, but one of the questions I have when I think of that bridge idea is who builds that exactly? Is that agreements? Is that like an individual bridge built every time between two teams? They have to figure out who funds what, and then they deliver it. And it only provides that one bridge. And there's so many of them that you're going to need so many of these, and each one is bespoke, and it's just a nightmare. That's like, for some reason, that's what I'm worried about.
00:35:24.456 - 00:35:30.294, Speaker C: I have some very strong opinions here, but it's probably best for another time.
00:35:30.492 - 00:36:18.146, Speaker B: Yeah, probably. James can speak a lot better to the technical side of this than I can, but maybe I can provide some color on, from a business perspective, who is likely to be pushing some of these things. Mean, like I just said, obviously there's a huge incentive for us to form partnerships with either other layer twos or centralized exchanges to be able to do these bridges. And it's just like a massive improvement in onboarding to Dydx. So I think you'll see just whether it's some form of revenue sharing or payments or incentives, or. It's good for both sides, basically. But I think you'll see more of this start to happen from a business perspective soon, because as we're starting to get these products that have real usage on layer two, they have real incentive to make a lot of these things happen.
00:36:18.248 - 00:36:54.318, Speaker A: I started to wonder this is a little bit off topic, but it's sort of like the future of Ethereum as the role that it's holding. If you have these bridges between centralized exchanges and other l two s, does eth and the Ethereum base chain itself become the store of value? Is it no longer a used token? I guess it would be used for gas fees in that security model, but I know you need it in a way. But I'm just like, I'm trying to picture this future where everything is happening in this net above it. And what actually happens to that l one?
00:36:54.404 - 00:37:37.370, Speaker B: That's an interesting question. Macro crypto economics is a really hard topic. I won't delve too deeply into that, but I still think there will be at least as much usage of ethereum, if not more, because of these chains that are built on top. Fundamentally, everything has to settle on some layer one chain. And clearly we are currently going with Ethereum as that layer one chain for variety of decentralization, security, et cetera reasons. But I think just that the chain of Ethereum or whatever chain things are settling on will become even more valuable because of layer two is not less valuable because now you have just all this new financial activity or whatever activity that you can unlock and still that's settling on this one chain.
00:37:37.450 - 00:37:44.782, Speaker A: Yeah. Going back to the sort of options you saw for yourself, you never had the idea of building your own l one, did you?
00:37:44.916 - 00:38:28.894, Speaker B: No, I didn't personally have the idea of building my own l one. This is a funny way to say it, but it's just like too technically hard. I guess for me personally, I really respect people that work on that and have the capacity to do that. But I think just for me personally and kind of given my background at having worked at Coinbase and at Uber and as General Silicon Valley engineer, have a lot of experience building what I think are pretty high quality products and being able to take that technology, take that smart contract scripting language that is provided by whoever's building the layer ones and transform that into a great product is something that I'm a lot more personally interested in. But of course both sides of the coin are required to make something that's great.
00:38:29.012 - 00:39:07.180, Speaker C: Yeah, I think my main takeaway from this is that as opposed to the other l two s that are being built and the other roll ups we've talked to, all of them have taken this tech first approach and are looking for products. And DydX has taken the opposite approach, which is start with the goal of being one of the biggest crypto exchanges in three to five years and have filled in the tech to support that goal. And I think that's really interesting and uncommon in the space. And why do you think you took that approach, and why do you feel like that is uncommon in the space?
00:39:07.550 - 00:40:10.510, Speaker B: Yeah, it's a good question. And I think it gets back to what I was saying before around why start a company around a product rather than a layer one chain? What we've seen in Silicon Valley over the years is that it's really hard to build a product that people want to use and that has product market fit. Even if you have the top class technology in the world, it's just hard to find a product use case that is differentiated, that is ten x better in some way from what has come before. So I think it's a really hard ask to just start with new technology and then say, okay, let's spend most of our effort building the technology, and then we'll think about the product later or we'll come up with something that is useful. It kind of gets back to also what I was saying with the two sides of the coin. Of course there needs to be new technology, but it's first of all, very hard to build new world changing technology. And also it is very hard to build a real world changing product on top of new technology.
00:40:10.510 - 00:40:57.210, Speaker B: And kind of, if you multiply those two things together, it's just so hard if you're building both the technology and trying to build the product at the same time. So again, we feel like our main expertise is in building really top class products at DYDX. And also, of course, at least we think understanding new technologies and how we can use them to build a great product. But we don't really feel the need to have to build those things ourselves. There are a ton of great people out there that are building them and kind of by forming partnerships with those people and really focusing on just nailing the product use case. All, of course, understanding the technologies and how that could have implications for what you can build on top of them. But I guess in my opinion, it does make sense to keep those things separate.
00:40:57.210 - 00:41:09.410, Speaker B: Like have one great company that focuses on building the best possible technology and then another great company which focuses on building a product on top of that rather than having them together. That's just my opinion.
00:41:10.150 - 00:41:32.242, Speaker C: Very interesting. I guess what it leads me to think about is these roll ups that are building out just general smart contract platforms. I guess they're trying to be ten x better than Ethereum, and DyDX has a very different goal in mind, it's not trying to compete with Ethereum for market share.
00:41:32.396 - 00:42:16.934, Speaker B: Yeah, that's exactly right. I mean, we 100% don't care about the scalability technology we use. Well, maybe that's not a great way to put it. We do care, but the only thing we care about is the actual benefits to our end users on a lot of different axes, whether that's decentralization, security, performance, all of that. But we have no specific allegiance to Ethereum or something like that. I just honestly think it is giving our users the best possible trade offs for decentralization and security, and then kind of multiplying that by Starquare's performance is the best possible product we can build right now. But if there was something better later on, I would definitely go out and settle Starquare's transactions on some other chain if it were able to compete on the metrics we care about.
00:42:17.052 - 00:42:38.270, Speaker A: Got it. So you are focused on this product, you are a company, I guess, and you're based in America, right? What's your plans for the business itself? Like you talked about wanting to be kind of an exchange of sorts, but at least you have 1ft in Dex world. Do you have any plans for decentralization on the company front?
00:42:38.420 - 00:43:17.238, Speaker B: Yeah, it's a great question. This is something we're thinking a lot about this year especially, and that's going to be our main area of focus for the next twelve to 18 months or so is full decentralization of the product. And for us really what that means is full decentralization of what I would call the liquidity model and kind of get no longer running this central order book and kind of the central order matching system for a variety of reasons, but we have some ideas on that. We don't have any decisions on it yet. I can talk through what we're thinking about at a high level. And of course, like I said, we don't really care what technology we're using. We just want to build, at the end of the day, the best possible use case for our users.
00:43:17.238 - 00:44:08.550, Speaker B: So that's kind of the angle we're coming at it from. But, okay, talking about this question of how do you decentralize a central limit order book or maybe even taking a step back at a high level, just like how can you build the best possible liquidity system for perpetual contracts for the highest volume markets? Because as we talked about, that's where we think most of the volume is. We have a couple of ideas, kind of stacked, ranked. First of all, we're thinking about utilizing more of kind of a request for quote system rather than like an order book system. And the way this would work is effectively, there may be like five to ten market makers or so, which are known in the ecosystem. And whenever you want to make a trade, you just ask all the market makers for a quote, they get back to you or they don't, and then you just take whoever's giving you the best price. And the reason we think this could work pretty well, specifically for us, is twofold.
00:44:08.550 - 00:44:49.062, Speaker B: First of all, it supports bespoke markets really well. So order books are really good for just aggregating liquidity. But if you have tons of products and like tons of markets, it's hard for order books to scale to that number of markets. Kind of like I was saying before. And one of the things that we are interested in in the long term is kind of the growth of the options markets, which is important from kind of a strategic perspective. Right now, perpetuals have about 100 x the volume or so of the options market in crypto. But at least personally, I think that's likely to change on kind of like this three to five year time horizon where options and kind of more, even more sophisticated financial products will take up more of the volume share.
00:44:49.062 - 00:45:27.854, Speaker B: And options are very bespoke. Like there are tons of different expiration dates, there are tons of different strike prices that you could buy. And even in traditional finance, most volume through options markets just runs through kind of this request for quote system. Like if you're trading on a robinhood or something like that. That's basically how Robinhood works, is it just goes and talks to these high quality market makers that can provide good liquidity. And that's one of the things we've been focused on a lot at DYDX, actually, is building these relationships with market makers. I like to think we're at the forefront of that in Dex, because a lot of these crypto market makers see DyDX and kind of our current hybrid approach being really approachable, coming from centralized exchanges.
00:45:27.854 - 00:46:02.410, Speaker B: Like we have an API, we have a trading client that is pretty similar at the end of the day to what centralized exchanges can support. So we've been able to build a lot of really high quality relationships with really the top tier market makers in crypto. And this kind of RFQ system could potentially mirror our current liquidity model pretty well. Right now, it's like for a given market, probably like three to ten market makers are providing most of the liquidity. So it could potentially work well. And the cool thing about that is still, you only have to put the actual settlements on chain. You don't actually need to put the order book on chain.
00:46:02.410 - 00:47:17.510, Speaker B: And the issue with putting the order book on chain, which kind of leads to our second potential option here, is that order books, the main throughput that you require, and the main thing that's happening is not trades, it's just orders being placed and canceled and not filled all the time. It's like market makers placing and canceling, repricing orders. And roughly this happens at about 10,000 times the rate of actual trades happening. So if you're trying to think about moving this to an on chain system, which again like point number two that we're considering is building an on chain order book, something like what CRM is building on Salana. But the real question here is how much scalability is your solution actually providing and what's the order of magnitude increase in roughly, you need 10,000 times more scalability, or potentially even more to run an on chain order book than you do if you're just doing the trade settlements on chain, which could be achievable on the time horizon that we care about. But this is very much like a research question as to what is the real level scalability specifically for our use case of placing and canceling or repricing orders on a given chain. And then the third one that I'll just touch on is kind of like moving to more automated market maker model with this third.
00:47:17.510 - 00:48:15.818, Speaker B: So it's like lowest on the stack, ranked for reasons that I touched on before, in terms of thinking that other liquidity models are more efficient for building liquidity for the top tier markets. But we are watching what's going on in crypto. Like I said, excited about a lot of their new developments with Uniswap V three, and kind of what I would define as hybrid order book like automated market maker model. And potentially there's something that comes out that could work well for us too. And the last point I'll make is once you're fully decentralized, the cool thing is that these options are no longer mutually exclusive like you could imagine. You have an AMM or an on chain order book and that could be supplemented by RFQ liquidity. And all of these ideas, we're not the first one to think of these tons of people have tried every one of these three things, but I think we're uniquely positioned to do it just because of our focus on the product like relationship with high quality market makers, and just being able to translate technologies into really great working products.
00:48:15.984 - 00:48:29.726, Speaker A: Does what you described really make you censorship resistant? I mean, you're still a us company. If you were able to kind of articulate some of this decentralization that you described in terms of the order book, would that mean that you no longer have control over it?
00:48:29.828 - 00:49:23.166, Speaker B: Yeah, I guess control over it is a bit of a loaded terminology, depending on who you're asking. But decentralization, obviously is a spectrum, and I think it gets us much, much further to the right. I mean, our goal is to be able to say all we're doing here is publishing this open source code that our users are using, whether our users are end users of the product or you could imagine potentially we publish open source nodes that market makers could run as part of an RFQ system or something like that, and we're kind of the technology provider in that ecosystem. But I think another thing that we're moving more towards over time is decentralized governance and kind of like decentralized ownership of the protocol itself. And obviously there's been a ton of activity in that in defi over the past year, and we've been watching and we think that's something we want in terms of users actually owning and having more decision making power in the protocol for ourselves as well.
00:49:23.268 - 00:49:28.846, Speaker A: Is that on a public roadmap to actually create some sort of decentralized governance of the protocol yet?
00:49:28.948 - 00:49:38.822, Speaker B: No, no roadmap for that right now. It's just kind of internal thoughts that we're having. But like I said, we're watching everything else that's going on in Defi, and there's obviously a lot of momentum around that.
00:49:38.876 - 00:50:12.122, Speaker A: Totally. So I think as the last topic that I want to touch on, and I just want to get your thoughts on now. It's not Defi summer, it's Defi, whatever is now. I think that the difference here, though, is the price of ETH has gone up so much that if you're outside of crypto, it's brutal. What is your thinking on the state of it right now? Do you see it as like, is this the moment that it's crossing over? You've also been working in the space for three and a half years or so. I think you might have started around the same time I did. So, yeah, I'm just curious to hear your thoughts on the state of Defi.
00:50:12.266 - 00:51:00.350, Speaker B: Yeah, I think the state of Defi is really interesting right now. I think the thing that layer one gave us is just, it's really easy to experiment and kind of build new things in DeFi and that's just a really awesome, like, it's just so much easier to build in crypto, actually a financial product, than it is in traditional finance. Just one quick allegory on this. I used to work at Coinbase as a software engineer, and I think the thing people don't realize about Coinbase is like 75% to 80% of the work on the engineering side goes into dealing with the traditional financial industry, and roughly like 20% on the crypto side. Like what I did was integrating with banks and stuff. Just massive headache, even from the technical side, not to even get into kind of the regulatory and compliance side there. But it's so easy to experiment on DeFi right now, and that's amazing.
00:51:00.350 - 00:52:05.758, Speaker B: But as you mentioned, the main limiting factor here is as there's more interesting stuff being built and there's more usage of the chain because there's this really low cap on throughput of the system on layer one ethereum right now that just results in these astronomical gas prices. So it's kind of this balancing function where it's like all this cool stuff that we want, but if it's like too much cool stuff, then there's this cap on how much people are willing to pay for said cool stuff. And I think the thing that is going on in crypto right now, and obviously you mentioned this in terms of the types of guests you've been having on the podcast and stuff recently, is layer twos are happening. They're here real mainstream d five products are moving to layer two DyDX synthetics. I think Uniswap has plans to launch with optimism really soon as well. And I think over the next six to twelve months or so, we're really going to see almost all the mainstream D five products, I think just like beyond layer two in some form or another. One of the things that is interesting to me as a bit of an aside, is everybody seems to be moving to a lot of different layer twos.
00:52:05.758 - 00:52:49.234, Speaker B: There's not yet consensus around which layer two is the best, I guess. And of course there's no objectively best one. It's like different things are better for different particular use cases. But I think we'll likely at some point see a re centralization to kind of the top most or the most winning layer twos, as people realize that it's harder at least to have a lot of composability that makes certain D five products interesting. Totally, if everybody's on different layer twos, but we'll see. So I think it's going to be a really exciting next 1218 months. But we just had this ridiculously huge problem of who's going to use DFI if you have to pay $100 in fees every time you want to do something.
00:52:49.234 - 00:52:59.010, Speaker B: And now we're solving that on layer twos. That'll bring new issues with composability and all that kind of stuff, but we'll solve those next going forwards as well.
00:52:59.080 - 00:53:03.430, Speaker A: Cool. Well, Antonio, I want to say thank you so much for coming on the show.
00:53:03.580 - 00:53:06.082, Speaker B: Yeah, thanks so much for having me. It's a great conversation.
00:53:06.226 - 00:53:08.546, Speaker A: If anyone wanted to find out more, where do they go?
00:53:08.668 - 00:53:49.638, Speaker B: Yeah, so you can head over to our website, DyDx exchange, or just Google DyDx and we'll probably show up and you can join our discord and ask me or anybody else on the team questions directly. Try out the think, I guess as an like, one interesting thing is all of this stuff is live right now. We're not just talking anymore. Go out and then use the product and see the gas fees, see the user experience and stuff like that, and kind of see for yourself about a lot of these technologies that we've been talking about for a while now. And kind of related to my last answer, it's like an exciting time where we're not just talking anymore. Go and use the products and see what the technology can build.
00:53:49.724 - 00:53:58.502, Speaker C: And do you have a docker container that I can go out and run a node on the DYDx roll up?
00:53:58.556 - 00:54:00.326, Speaker A: He asked this on the last episode, too.
00:54:00.428 - 00:54:02.310, Speaker C: I'm going to ask this on every episode.
00:54:03.210 - 00:54:11.950, Speaker B: We don't have a docker container right now, but I mean, all the data is on Ethereum itself, so that's nodes required, I guess, right now.
00:54:12.020 - 00:54:21.690, Speaker A: Cool. All right, so thanks again. A big thank you to Andre, the podcast producer, Henrik, the podcast editor, and to our listeners. Thanks for listening.
