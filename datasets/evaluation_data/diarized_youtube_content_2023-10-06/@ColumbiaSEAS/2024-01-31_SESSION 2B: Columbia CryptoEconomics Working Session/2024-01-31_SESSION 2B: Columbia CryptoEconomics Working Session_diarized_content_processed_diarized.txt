00:00:07.130 - 00:01:03.630, Speaker A: So yeah, if you spend any time on crypto Twitter, you probably saw timing games pop up a bit more these days. Reason is that they are now part of what some staking operators are doing. In this talk, I want to talk a bit about the implications of timing games and what we can potentially do about it, but of course I want to briefly introduce what they are. So the very TLDR version is proposers can make more money, extract more mev, by not showing up on time, but delaying their block proposal while still making sure they become part of the canonical chain. But let's take a step back. So in ethereum we have slots, each slot is 12 seconds long, and in each slot we have essentially one valid block proposal that can propose a block. And so if everyone shows up, the chain just chucks along every now and then we have a missed slot.
00:01:03.630 - 00:01:41.180, Speaker A: But yeah, simple enough. And so within a slot we have these duties, and there's this, what we call the honest protocol specification, which essentially specifies what the intended protocol behavior looks like. And so we have this block proposal duty which basically says propose a block at the beginning of the slot. So at t equals zero. Now obviously you want honest specs to also be rational. Turns out in this case they are not. And so this is what timing games are about.
00:01:41.180 - 00:02:37.150, Speaker A: The second important duty in a slot is testing. And so, as in a tester, you basically vote on what you currently see as the head of the chain. And so if you hear a block that you think is valid, you vote for it and then it becomes canonical and you move forward. And so there's this attestation deadline at 4 seconds where a test is essentially, if they don't see a block before that, they will vote at 4 seconds no matter what. And so if the block proposal didn't show up, then they will just vote for presumably the parent block. And then at 8 seconds we have an aggregation thing going on, which I'll get into a bit later, but basically it's just a way of parking these attestations on chain. And then basically at the end we reached a new slot and so the whole thing repeats.
00:02:37.150 - 00:03:17.978, Speaker A: And so playing honestly basically means you show up on time because you're on time. All the attesters see the block on time, and so everyone essentially just votes for you. And the happy case is basically everyone votes for you. The next block proposer sees that builds on top of you and you just chug along. Now, because the block proposer essentially has a monopoly. It's a short lived monopoly, but it is a monopoly nonetheless, where within that slot, you're the only validator that can actually propose a valid block. And so that monopolist kind of, you might want to kind of abuse it, if you will.
00:03:17.978 - 00:04:20.080, Speaker A: And so what you can essentially do is delaying your block proposal by some amount of time. So given the attestation deadline, the block proposer delaying their block proposal wants to make sure that enough people see the block in time so that they see it and so they can vote for it. And so at the limit. What that means is in Ethereum, you need 40% of the committee's votes to be reorg resistant against the next block proposal. Details not for this talk, but essentially at the limit. What you can do as a block proposal is release your block so late that 40% of the committee sees your block in time and 60% don't, and they will then essentially vote for block n minus one. Now, I want to briefly take a second to look at some data and what that looks like in the Ethereum network today.
00:04:20.080 - 00:05:48.490, Speaker A: Before that, I kind of need to quickly introduce the concept of proposal builder separation and how basically blocks are produced today in Ethereum. It's basically this idea that because finding the most profitable block is a complex task, essentially there's value to be gained from including, excluding, more importantly, also ordering the transactions. And because that's a complex task, proposers essentially outsourced that complexity to specialized entities called block builders, who basically specialize in finding these most profitable blocks. And so to mediate that market between block builders and block proposers, we need something called relays in the middle. And essentially, relays are a trusted party where they guarantee that the block builder actually is able to pay the proposer what they then bid for the right to build the block. And the proposer is basically not able to steal the block content because the builder might be worried that the proposer steals the block content, and the proposer might be worried that the builder is not actually paying what they claim to be paying. And so what happens here is that in slot n minus one, basically these builders start bidding for the right to build the block in slot n.
00:05:48.490 - 00:06:56.782, Speaker A: And so, because as time goes on, you have more transactions in the mempool, essentially you're able to build more and more profitable blocks. And so the bids are increasing over time. And eventually the proposer says, okay, now I want to propose a block, requests a header, a block header from the relay. The relay then looks at what's currently the highest bid that I have seen by block builders, then sends that to the proposer, who then signs it and returns it with the get payload call, which basically means the relay receives the signed block header and has the block payload by the block builder and can then release the block to the network, to the general p two p layer. And so this is basically how more than 90%, I think, of the blocks are currently produced. And so what we did is we looked at some of the data and the ultrasound money relay. This is, I think, data from the ultrasound money relay.
00:06:56.782 - 00:07:17.270, Speaker A: It's from March. But the important takeaway here is that basically what you can see here is that these bits are increasing in time, basically. Increasing in time. And I don't want to focus on the absolute values. It's more about the fact that timing games are worth playing. Bits go up over time. Very intuitive.
00:07:17.270 - 00:08:28.478, Speaker A: Now, when we wrote a paper on these timing games at the time, basically that was, I think, around. We looked at data from March at the time, you could see that timing games were somewhat possible, I mean possible, but essentially no one was really playing these games to extract more mev. What you could see though is that some blocks were late, but not because they were signing late bids, meaning they late locking Mev in very late, but instead they had high latency in signing the blocks, meaning they were just very slow to propose their blocks. And so now what we're seeing, starting to see is that staking operators are basically deciding to make more money by proposing block slate, but also, rather than just being slow in signing, actually locking in later Mev. And so here, Tony's, this is from Tony's Mefbooster pics. Great website if you haven't seen it already. Yeah.
00:08:28.478 - 00:08:58.898, Speaker A: The point here is more that timing games are starting to be played. It's rational. So yeah, kind of makes sense. It was expected. And so here, maybe one last slide on some data is you can see over time at the top, you see, I think it's August, June. And so some of these staking pools, you can see how they started signing later bids that then land on chain. Yeah, timing games are being played.
00:08:58.898 - 00:09:49.350, Speaker A: And so what's a bit sad and annoying about this whole thing is that if everyone played honestly and everyone playing timing games maximally, you kind of get the same payoffs. And the reason is that if everyone plays the same, it's all about that relative latency advantage. And so if everyone plays timing games, you just have that tiny latency advantage that you stand to gain over others. But that already exists in the honest scenario. So it's a bit unfortunate, but I guess that's how things work because, yeah, obviously money is made to be, there's money to be made on the path to the equilibrium. And so that's what we're seeing to start play out at the moment. So about the implications.
00:09:49.350 - 00:11:03.710, Speaker A: So the one thing that's kind of obvious is that if people start playing timing games, what that means is block proposals are later. And so there's an increased chance that the blocks are so late that the testers don't see it in time and so they vote for the parent block and then essentially the slot is missed in the sense that the next block proposer just builds on the previous block and we have a reorg. And so yeah, basically we missed the opportunity to produce a block now to play timing games profitably in expectation. You're not willing to miss a lot of slots, you don't stand to gain a lot, so you're not willing to lose a lot either. So that's one thing, the more important thing I think is, and I feel like we just need to also understand much better, is what this potentially implies for testers. Attesters are rewarded to vote correctly and timely. Timely meaning here that a head vote is supposed to be included in the next block already to be rewarded.
00:11:03.710 - 00:12:27.450, Speaker A: And so essentially if proposers start delaying their blocks, it might be rational for an attestor to also delay the attestation because they want to vote correctly and they want to vote correctly and they don't basically, so they don't want to be the fool. That is part of the 60% voting for the block n minus one, even though Block N is becoming canonical. And so to avoid that, they might end up delaying their attestation and starting to vote late as well. And so once attestors start delaying their attestations, block proposers might start delaying their blocks even further. And so the question is where does this end? And there's several kind of dynamics taking place that I think we all need to kind of look at more closely and understand better, one being the aggregation deadline that I mentioned earlier at 8 seconds, where a testers essentially submit these attestations and they need to be aggregated to land on chain. And so unless the aggregator includes your attestation in an aggregate, you're not going to land on chain and you're not going to get rewarded. So that's one possible endpoint.
00:12:27.450 - 00:13:35.386, Speaker A: Aggregators themselves are not actually rewarded for their thing, except maybe implicitly aggregating their view. And so you might actually see aggregators playing timing games themselves if they are part of, because a large staker might actually be an aggregator and also proposing the block or an AttESteR playing timing games. And so the aggregators might start playing themselves. The next natural kind of End that could be the case is the end of the slot. So if proposer n is too late, basically it means that proposer n plus one could potentially reorg block n. And the reason is that if you show up on time, we have this thing called proposal boost, where you have like a ImmediatE 40% weight in the fork trace for your block just for showing up on time. And essentially that's why you also need to accumulate more than 40% to be reorg resistant.
00:13:35.386 - 00:15:12.826, Speaker A: Because, yeah, essentially if you don't accumulate 40%, the next GUY can come around with proposal BooSt and reorg you out. The details are folk CHoicE fun, but the point here is that if proposer n is too late, n plus one might reorg you out and able to basically capture the mev that was left on the table by the previous proposer. And so that's OnE scenario. And the other scenario is maybe this thing could even go into the next slot, because the proposer's rewards depend on the kind of AtteStation it includes. So the more profitable the attestations the proposer includes, the more profitable the attestations are that the proposer includes, the more rewards the proposer gets themselves. And so essentially, if the attestations that the proposer is incentivized to include so theY're timely and correct are late, maybe the proposer wants to kind of wait as well to be able to include those VerY Late attestations. So, yeah, Attesting Games are complicated, and I think it's very important to understand the implications of those more deeply and more generally.
00:15:12.826 - 00:16:33.766, Speaker A: Maybe that attesting is kind of the line of defense and they enshrine kind of what becomes part of the chain. And kind of the idea that a testing becomes this strategic game itself, um, seems at least dangerous intuitively, but needs to be understood much, much better. And yeah, the point here is that democratizing access to kind of, there's this idea, like we can play proposing games aggressively by basically enabling everyone to play them well, but we could do the same for a testing potentially, but that seems a bit dangerous. And so, yeah, point being, lots to understand. And the fact that we need to understand it better is a danger in itself at this point, at least in my opinion. So one other, I think I'm running a bit short on time, so maybe I just briefly, the idea here is that basically having blobs increases the size of the blocks, and so blocks are slower to propagate. You need to hear about all the blobs before considering the block.
00:16:33.766 - 00:18:02.230, Speaker A: Valid. And so if the expected revenue of a later block without blobs is greater than earlier blocks with blobs, a rational proposal might not include blobs, but yeah, it's just something to also think about more closely. So what can we do? There's a bunch of ideas. Some are social nature, not sustainable, but more kind of thinking about, okay, how can we kind of try and upkeep that shelling point in kind of colloquial terms to kind of play honestly? Other things are kind of more long term. How can we basically, ideas of how we can explicitly try to incentivize timeliness, how can we discourage timing games in the first place, reducing opportunity costs to play honestly, or basically enabling everyone to play timing games as the opposite end of the kind of possibilities, and then more profound or deeper possibilities of kind of. Can we maybe try and emulate proof of work like block times in proof of stake? And then I think Justin will talk about a tester proposal separation in the next talk. That's also one avenue, especially if you combine it with some of the things above.
00:18:02.230 - 00:18:22.840, Speaker A: I don't know how I'm doing on time. Does anyone know? No. Time's up. Okay. But good news is there is a whole session on timing games later where I think it would be great to talk about some of these paths forward, what we can do about it. Yeah. Thank you.
00:18:23.210 - 00:18:24.720, Speaker B: Thank it.
00:18:39.730 - 00:19:01.426, Speaker C: Thanks. So it seems like some of the mitigations there were mainly focused on the proposers, but it looks like one of the concerns here is that the ones actually engaging in these timing games are also controlling most of the attesters as well. And so they can coordinate amongst themselves to really squeeze this out. Sort of better than sort of the solo stakers here. Is there like attester mitigations as well?
00:19:01.548 - 00:20:14.442, Speaker A: Right. I think some of the things have an implicit effect on the tester games as well. So if you take, I mean, I didn't talk about it at all now, but this idea of having many like say we have a slot of 10 seconds, we divide it into subs of 100 milliseconds, and each subslot has a 1% probability of having a block proposal. That's kind of the idea to get to more proof of work like block times, then you can play a tester game timing game proposal games in expectation still, but the testing itself will be, I mean, the design needs to be like it's ideation. But I think in that scenario, for example, you wouldn't inherit these attester games. Or if you punish, for example, missed slots heavily, then you're so unlikely to get to that point where you create these 40 60 splits that attestors are not going to play timing games. The reason why that's dangerous if you just do it naively, is that solo stakers are more likely to miss slots.
00:20:14.442 - 00:20:49.466, Speaker A: And so, yeah, if you have a five ease penalty for missing a slot, you're not going to homestake. And so that's where, for example, a test of proposal separation would come in where you can kind of turn proposing into a more professional thing such that you can also punish differently, but keeping that attestation as kind of the democratic line of defense, if you will. All right, one question, sorry, one question.
00:20:49.488 - 00:21:05.550, Speaker B: Is do you think you can play these timing games safely? So basically, if the probability of a missed slot is very sharp, then everyone just plays the games optimally where they push right up to the boundary but never end up missing slots.
00:21:08.630 - 00:21:41.866, Speaker A: Right. I mean, this is kind of what we see today. Like what, what would be the case? There's a relatively sharp point in time where the share of votes go from zero to one relatively quickly, but because you have so many validators in a committee, it's still possible to actually target more precise splits. So exactly what's the question again?
00:21:41.968 - 00:21:49.230, Speaker B: The question is basically are we seeing more missed slots now that these timing games are being played? And if not, then are they really a problem?
00:21:49.380 - 00:21:59.870, Speaker A: So I think right now timing games are being played but not maximally aggressively. Still money on the table.
00:22:01.090 - 00:22:06.206, Speaker B: So you think in equilibrium we'll see missed slots when people are playing the games optimally?
00:22:06.398 - 00:22:32.040, Speaker A: I think so, yes. At least it's more likely for sure. Yeah. The more you push towards the attestation deadline latency is random, the more likely it is that you miss slots. And so today we don't have penalties for missing a slot. It's only the opportunity cost by not getting the rewards. And so, yeah.
00:22:33.970 - 00:22:34.720, Speaker B: It.
00:22:38.530 - 00:22:40.910, Speaker A: There'S one over here in the front row.
00:22:51.510 - 00:23:12.860, Speaker D: I'm just wondering as a less intense penalty, can we just do sort of a timeout, say, okay, you're now banned from proposing from these mini blocks if you did the whole timing game just as a mitigation instead of slashing, so it becomes less intense. So solo stakers can now also benefit from these.
00:23:17.070 - 00:23:50.440, Speaker A: Right. So you get exited if you miss, say, three slots. Depends on how long the queues are to reenter, et cetera. I mean, the thing is, the kind of high level point still stands that you're more likely to punish solo stakers as opposed to professional staking entities, I think, but, yeah. Something still worth thinking about. Thank you. I hope see some of you in the session later.
00:23:50.440 - 00:23:54.660, Speaker A: Close.
