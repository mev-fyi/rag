00:00:00.600 - 00:00:30.772, Speaker A: I'm Jacob Kaufman. I work at the Applied research group at the Ethereum foundation, and this is something that I've been working on for the past few weeks with a teammate of mine, Alex Stokes, who's also here. And, yeah, let's get into it a few preliminaries. First, I want to say thank you to the red team for really great support. I could say a lot more, but I. In the interest of time, let's move forward. And then a disclaimer.
00:00:30.772 - 00:01:36.580, Speaker A: This is experimental software, research purposes only, no liability, all that stuff. Quick outline. So I'm going to talk about local block production, Mapboost block production. Why is open source block production software important? And then we're going to talk about Evangelion, or Eva, as I'm calling this blockbuilder, and then we'll talk about some ongoing and future work. So in Ethereum, we have this separation of concerns between the consensus layer, or the Cl, and the execution layer, or the El, and they communicate via the engine API. So the clint will periodically notify the El about updates to its fork choice state via Ngin Forkchoice updated. And when it's the validator's turn to propose, it will also send along these payload attributes, which contain information that the EL needs to build the payload.
00:01:36.580 - 00:02:52.466, Speaker A: And the EL will return an identifier called the payload id, which the CL can use to retrieve the corresponding payload. So in Mevboost block production, validators auction their block space to this network of external builders, and relays broker this interaction between the validator and the builder. And both the validator and the builder rely on the relay to sort of provide some guarantees about this exchange. So builders are the specialized entities that have advantages that allow them to build higher value blocks. The main sources of edge, or alpha, are information or order flow and algorithms. So, for example, builders might have a vertically integrated searcher or some other exclusive agreements with searchers to get bundles or private transactions. So why block production? Open source software? This chart is from Mevboost Pix, which is maintained by another teammate of ours, Tony.
00:02:52.466 - 00:03:56.560, Speaker A: And you can see that essentially four or five builders have an overwhelming majority of the block share. And so we really want to lower the barriers to injury for builders. And so what we try to do is we can't really solve the information edge, but we want to minimize the algorithmic edge as much as possible. And yeah, we want to allow builders to specialize. So instead of having to spend energy and resources maintaining a fork, we would rather allow you to spend time building more advanced algorithms. And it would also be cool to have academics or other researchers implement various algorithms. So what is Evangelion or Ava? So in Reth there's a crate called the Reth payload builder, and within there there's a trait called the payload payload job generator.
00:03:56.560 - 00:04:50.808, Speaker A: And essentially what this is is you call it with some payload builder attributes and it will give you back a job. A payload job is essentially a future that will eventually resolve to some payload. And I've omitted some details here for brevity, but you can also periodically pull the job for the best payload. This is important because transactions and bundles are always flowing in, and so over time you can assume that the more time you have to accumulate transactions in bundles, you can build more valuable payloads. So we have this implementation of this trait, and then also Giorgio has talked about CLI extensions. So we pass in this custom builder and then that's essentially all we need to do to interface with rethemeral. Um.
00:04:50.808 - 00:05:56.400, Speaker A: We also configure the consensus layer, um, to continuously trigger payload jobs. So by default it will only trigger a job when it's the validator's turn to propose, um, but you can configure lighthouse to for instance, trigger a new job for each slot, um, and then also the other bit is that, um, the El and Cl are not mevboost aware by default. So we need to build some extra machinery around it so that we can, for instance, query a relay to see this proposer. Are they registered with MavBoost? And then we need to get their registration information so that we can do things like send the fees to the proper address on the execution layer. And yeah, that's really it. So with not so much code you can have a custom builder without maintaining any forks. And this is a huge improvement over maintaining a fork of geth.
00:05:56.400 - 00:06:38.820, Speaker A: And yeah, we've built some blocks on Sepolia. Here's the link to the GitHub. And for ongoing future work, we need to build some better abstractions in the same way that rest Reth provides these powerful abstractions. We want things like a bundle pool block packing algorithms and bidding strategies, as well as some other optimizations. And then I'll quickly say that we have this other project created by Alex Stokes that's in the same way as an open source builder. It's an open source relay also in rust. And yeah, we'd love to have more help on it, so thank you.
