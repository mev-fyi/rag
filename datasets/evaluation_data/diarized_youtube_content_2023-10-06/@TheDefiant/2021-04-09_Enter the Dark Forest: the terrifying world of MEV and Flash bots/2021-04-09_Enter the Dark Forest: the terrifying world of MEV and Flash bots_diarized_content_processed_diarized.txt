00:00:00.250 - 00:00:38.150, Speaker A: Ethereum block Sanjir Dayja Dola Jagger Baza Choha Manjako Bashlam holder danger do Schmidt another sub mempole top is beer Shaker Karan Birmesha Iterium Memphold arbitrage bolt letter Shake.
00:00:46.590 - 00:02:08.802, Speaker B: 2020 Dan Robinson, research partner at Paradigm, wrote a seminal medium article calling Ethereum a dark forest. He cited the 2008 novel by Chichin New, which introduces the concept of a dark forest, an environment in which detection means certain death at the hands of advanced predators. In this environment, publicly identifying someone else's location is as good as directly destroying them. In Dan's piece, he sees those predators as arbitrage bots that monitor pending transactions and attempt to exploit profitable opportunities created by them. In this episode, we are venturing deep into that dark forest to discover the truth behind the mysterious Mev and lean into the magic of flashbots. This is the defiant before we go any further, just a quick word about our sponsor, Balancer, who are up to some pretty funky stuff. To help ease the pain of high gas costs on Ethereum, trade as much as you like and recoup most of the gas costs.
00:02:08.802 - 00:02:50.962, Speaker B: Damn straight. And in their new ball for gas campaign, traders are receiving six figures worth of ball tokens every week. And with version two just around the corner, balancer is becoming a one stop shop for DFI liquidity. Version two brings stable pools and weighted pools tightly integrated under a single protocol, with flash loans, lending via asset managers, and much more. Check it out at balancer finance. Now back to the dark forest. It's hard to imagine when you're faced with Uniswap's friendly UX and unicorn flavoured design, that, lurking in the shadows are some of the most savage, predatory forces you will ever encounter anywhere in your life, and you'll probably never even know they were there.
00:02:50.962 - 00:03:50.006, Speaker B: As Dan describes it, arbitrage bots typically look for specific types of transactions in the mempool, such as a Dex trade or an oracle update, and try to front run them according to a predetermined algorithm. Generalized frontrunners look for any transaction that they could profitably front run by copying it and replacing addresses with their own. They can even execute the transaction and copy profitable internal transactions generated by its execution trace. So if you want to get deep into the weeds here, then you have to read what has become the essential textbook on crypto arbitrage bots, flashboys 20 front running transaction reordering and consensus instability in decentralized exchanges. It's a dense paper, 23 pages long, but you only need to read the abstract to get the big idea. Like high frequency traders on Wall street, these bots exploit inefficiencies in Dexes, paying high transaction fees and optimizing network latency to front run, I. E.
00:03:50.006 - 00:04:49.846, Speaker B: Anticipate and exploit ordinary users Dex trades we observe bots engage in what we call priority gas auctions, PGAs competitively bidding up transaction fees in order to obtain priority ordering, I. E. Early block position and execution for the transaction. We explain that such fees are just one form of a general phenomenon, indexes and beyond what we call minor extractable value MeV, that poses concrete, measurable consensus layer security risks. And we show empirically that MeV poses a realistic threat to Ethereum today. Dark forests threats this all sounds spooky to the spooky to the a, to the F. What WTF is going on here and how does it affect you? Well, simply put, miners determine the order of when transactions are processed on the blockchain and can exploit that power to their advantage.
00:04:49.846 - 00:05:31.558, Speaker B: Since each block can only contain a limited number of transactions, miners have full autonomy in selecting which pending transactions in the mempool, which is the place where unconfirmed transactions go first, they will include in their block. Now, while miners usually order transactions by the highest gas price or transaction fee in order to maximize their profits, they don't actually have to. MEV is basically extracted from the regular user, I. E. You and me, but often in ways that may not be immediately apparent until after your transaction is processed. It might look like there was an unexpected increase in the network's transaction fees or sudden additional slippage on trades. And yes, you, your poor sucker, you foot the bill.
00:05:31.558 - 00:06:18.370, Speaker B: The whole thing happens invisibly, out of sight. Most MEV is performed by third party bots hunting arbitrage between Dexes. Now, with the increased adoption of defi and growing liquidity on Dexs, profitability and frequency of this type of MEV is going through the roof. The bots engage in bidding wars for a place at the front of the queue in a block, continually raising the transaction fee to win the slot. We are robots. Now look, this may not sound that bad, in fact, but the net result is that the network's bandwidth becomes completely clogged up by increasingly vicious arbitrage transactions, which then raises the cost of transaction fees for everyone else trying to use the network. Another type of MEV comes from bots who front run trades.
00:06:18.370 - 00:06:59.266, Speaker B: Now, because all transactions must first go through the mempool, the bots can monitor for large trades entering the mempool and execute some pretty snidey maneuvers. For example, let's say a nice, big, juicy trade is spotted. A front running bot will copy that user's trade and then pay a higher transaction fee to get their transaction processed. First, this moves the market price of the asset being traded. Then there's a chunk of slippage. And after the user's trade is processed, the market price of the asset moves even further in the front runner's favor, which allows them to take profits by selling their initial position. This is what's known as the infamous sandwich attack.
00:06:59.266 - 00:07:21.750, Speaker B: Bloated basically, you get screwed by a sandwich. Finally, robotic beings rule the world. Now, you might think this is really only for a very small group of very motivated and very technically competent traders, like market making firms. But if you want to get a feel for just how much revenue has been collected through MEV, then the place to go now is MeV. Explore.
00:07:21.830 - 00:07:54.018, Speaker C: Version zero is a dashboard where you can see at a glance all the MEV activity that's going on. And trust me when I tell you, it's kind of startling. So we start here, and if we look at the total extracted MeV since the January 1, 2020, this includes successful and failed MEV transactions and their associated transaction fees. The number is $367.1 million. I don't know about you, but that seems like a lot. And in the last 30 days alone, there's been $46.5
00:07:54.018 - 00:08:22.734, Speaker C: million, and in the last 24 hours, $1.3 million of MEV. So these are just bots going through and looking for opportunities to just fuck you up, basically, man. And then, as is the way with crypto, there are some astonishing looking graphs that just seem to be going parabolic. So this one here, the cumulative extracted MEV is just going through the roof. This is insane. The daily extracted MEV goes up and down, as you would expect.
00:08:22.734 - 00:08:55.538, Speaker C: But the trend generally, if you look at all the bottoms of the peaks here, that is up, like, seriously up something else that's fun. On this page you see here, they say Mev equals minor, and then they've crossed out minor and change it to maximum extractable value. There's a reason for this, and that's because, well, firstly, Ethereum is moving to proof of stake, which means that we won't have miners anymore. And also, the idea of MeV is not exclusive to Ethereum. It happens on bitcoin, but it can also happen on proof of state networks.
00:08:55.554 - 00:08:58.186, Speaker B: And it's basically just to describe this.
00:08:58.288 - 00:09:33.620, Speaker C: Moment of front running or using the mempool to goose trades, effectively there is some more data here. You can see that the majority of MeV happens on uniswap. No real surprise there. And that most of it happens in arbitrage, but there is some liquidation statistics there as well. And, well, that all looks very nice and fun. The bit that I really like is the leaderboard. So, if we go on the leaderboard, and we look at the latest MeV transactions, not that sexy, numbers are not that big.
00:09:33.990 - 00:09:36.786, Speaker B: But if we look at the top gas spending MeV transactions in the last.
00:09:36.808 - 00:10:23.650, Speaker C: 90 days, oh, it gets so fun, because you might think that the bots are always winning, but they're not. Bots get wrecked as well, because bots are not clever. So, for instance, if we look here, I don't know how many far down this is, but there's a transaction here where the MeV TX sender income was $3,143, and they paid over $13,000 in fees. So a net loss further down, though, there's a big one here. So the mevt extender income was $188,867, and they paid nine and a half grand in fees. And that's not the only one. There's another one here, 100 grand and paying, oh, wow, $6,000 in fees.
00:10:23.650 - 00:10:33.682, Speaker C: But then if we look down further, there's one that paid that got 893 in extracted value, but paid 5783 $5 in fees.
00:10:33.746 - 00:10:34.774, Speaker B: And it will be interesting to see.
00:10:34.812 - 00:10:45.354, Speaker C: At the end of the year, how well a bot performed and whether it came out net and profit. Because, yeah, these are not always working out, and there is some big wins here, but there are also some pretty.
00:10:45.392 - 00:10:46.586, Speaker B: Big losses as well.
00:10:46.688 - 00:11:21.698, Speaker C: So it's not as clear cut as you might think. And the team themselves say that the data, as much as they believe that it's correct, it might not be 100% verifiable and true, but of course, they're working on it and developing it the whole time. But no doubt, this is a page which you will get a lot of information from. They also go into how the data is accumulated, how they put it together, and there are some FAQs where you can also find out all about flashbots and what they're up to. But, yeah, generally, this is a very helpful and very alarming dashboard to look into. It's kind of fascinating.
00:11:21.794 - 00:12:11.302, Speaker B: The team behind MeV Explore is Flashbot, a research and development organization which was formed to mitigate the negative externalities and existential risks posed by minor extractable value. MeV two smart contract blockchains. The idea being that if we accept MEV as inevitable, then the best way forward is to encourage users to do it according to at least some rough rules of combat. In their eyes, MeV represents a genuine crisis, and their approach to it can be broken down into three parts. One, illuminate the dark forest. Two, democratise extraction, and three, distribute benefits. Now, MeV explore is their first step in illuminating the dark forest, giving you and me and anyone out there the opportunity to see pretty much what's going on.
00:12:11.302 - 00:13:10.090, Speaker B: Not all of it, but most of it. To democratize extraction, they've now developed MeV Geth, an upgrade to the Go Ethereum client, which enables a sealed bid block space auction Mechanism for communicating transaction order preference. Got it. And at the start of the year, on January 6, the team launched flashbots Alpha, a two sided marketplace composed of miners and MeV searches. In their words, any miner or mining pool can run MeV Geth and receive additional income from MeV, strictly more than what it would earn from running vanilla Geth without the need to enter into any bespoke deals with traders. MeV searches, predominantly bot operators, are able to send transactions through a flashbot gateway called Mev relay to improve their chance of landing on chain without the need to pay for gas on failed transactions, or causing chain congestion and enter into gas war. That hurts other Ethereum users, which all sounds wonderful as long as people are using it.
00:13:10.090 - 00:13:47.654, Speaker B: But almost immediately, creative white hats began to find really novel ways to use the tool set. One of the most interesting being account abstraction. Now, because one of the very cool things flashbots allows for is submitting zero gas transactions. That makes it possible to submit transactions which are paid for with any ERC 20 token. And this even got Vitalik talking. So how would this work? Well, you've probably hit that situation where you sent too much ETH out of your wallet and then can no longer pay for the next transaction. Selling an ERC 20 token for ETH on Uniswap, it's also out of the question because you need ETH to pay for it.
00:13:47.654 - 00:14:27.582, Speaker B: You can't send it to a decentralized exchange because, oh yeah, you need ETH for it. This would help you out, but that's just one piece of it. Imagine your private keys are compromised and a hacker steals your ETH, but you have tokens staked in another contract, for instance. Now, the hacker's bot doesn't see those, but in order to rescue them, you will need ETH in the wallet to power any transaction. However, the moment you send any to your wallet, the bot will swipe it now. That's where flash bots can come to the rescue. And this is exactly the situation a friend of mine found himself in, and he managed to code a bot to front run the hacker and recover his funds.
00:14:27.582 - 00:14:43.094, Speaker B: So how did he do it? You had your wallet compromised, and then, by some kind of weird miracle of I don't know what, you managed to front run the hacker. So tell me what happened there, and how were you able to do that? Because it sounds like science fiction to me.
00:14:43.132 - 00:15:12.090, Speaker D: So how I got hacked was pretty stupid. I just left my private key on GitHub. Some crawler found it, and he had my private keys. And then the first thing that I tried was getting Ethereum into the wallet, trying to get my tokens out. Didn't realize that it would instantly snipe the Ethereum. So then I already lost like half of my tokens, but for some reason, it left also half of the tokens in. So what I did then was basically I just had Ethereum in one wallet.
00:15:12.090 - 00:15:41.766, Speaker D: I sent a transaction to send the ethereum to my hacked wallet. I sent a transaction right after that from the hacked wallet with a nonce. That was the next transaction, basically, so it couldn't override the nonce. And then I used up all the ethereum that was in my wallet, so it could never override my gas price, meaning that my transaction was the most profitable for the miners, and that's why it would be included in the block instead of an overridden transaction from the hacker.
00:15:41.878 - 00:15:48.860, Speaker B: So I think the big question here is, what are you doing leaving your private keys on GitHub? Come on.
00:15:50.350 - 00:16:09.314, Speaker D: Yeah, no, I made a liquidation bot, and it was a private GitHub repo, and I was just cleaning up my GitHub, trying to make stuff public, like some other people might be able to use that. And, well, no one used it except the hacker to get my private key from there, because I didn't realize my private key was on there.
00:16:09.432 - 00:16:19.026, Speaker B: Do you think people underestimate just how much there is malignant activity just hunting everywhere for you to make a mistake?
00:16:19.218 - 00:16:45.118, Speaker D: Yeah, for sure. I underestimated it for sure, because I didn't know there are multiple crawlers out there that just crawl GitHub and other stack overflow and other websites where there might be code, including private keys, and just crawl, get the private keys, and then those same bots are extremely quick in getting out the ethereum. So as soon as I sent in Ethereum, the split second that it arrived, it was already out.
00:16:45.204 - 00:16:56.466, Speaker B: What can you show me today. What can you demo for me to give the people who watch this channel some kind of insight into this tangled forest, this dark forest of the mempool and everything else that's going on there?
00:16:56.568 - 00:17:41.882, Speaker E: All right, so I'm going to demonstrate how to get your tokens from a compromised wallet to an uncompromised wallet using this flashbot's GitHub repo right here. So I have this wallet right here, which holds 50 chartex tokens and a bit of Ethereum, but not enough Ethereum to make a transaction to send away those chartex tokens. And a bot also has my private keys, so it's been compromised. So if I would send in Ethereum, it would instantly get sniped to transfer all my Chartx tokens. So it would lose both my Chartx tokens and my Ethereum. So what I'm going to do instead is I'm going to send a transaction from here to transfer those Chartx tokens to a different wallet. Then I'm going to send a second transaction from here, which will pay for the gas fees for the first transaction.
00:17:41.882 - 00:17:56.294, Speaker E: I'm going to bundle these two transactions together, and I'm going to send them to a flashboards Gaf node. And once it's mined, I should safely receive my Chartx tokens in here. So I've cloned this GitHub repo that.
00:17:56.332 - 00:17:58.838, Speaker D: Takes care of all that to my local computer.
00:17:59.004 - 00:18:57.030, Speaker E: Then I'm going to run it from here and let's see what happens. And as you can see, it worked. So the Chartex tokens got transferred to this wallet, which is this one, our safe wallet, and we paid zero in gas fees. And then our second wallet, this one, paid everything, paid all the gas fees, also actually paid zero gas fees, but just bribed the note. It interacted with the flashboards smart contract and we saved the Chartex tokens. So you can apply this technique to basically any crypto asset that's transferable. So you can save your ERC 20s, you can save your NFTs, but you could also make custom code to save your tokens that are stored in a urine vault or something else.
00:18:57.100 - 00:19:55.126, Speaker B: When you look at that graph of MEV extraction since the turn of the year, it's startling just how steep it goes up. At a fundamental level, that graph represents technological and informational asymmetry, the ODs being stacked higher and higher against you and against me and normal users. And when we attempt to proselytize others on the virtues of permissionless, trustless systems over centralized ones. There's a real danger we're advocating for simply swapping one evil for another, because there is no way any of this benefits the humble user. And the more volume that sweeps into Defi and crypto in general, the more money there will be to be made from MeV. But the thing is, that might account for some of the rise, but it doesn't account for all of it. Now, lots of very smart people have now written about Mev, and when you sift through all of that material, one prevailing idea recurs, a fundamental belief in the good intentions of miners, in the natural altruism of miners.
00:19:55.126 - 00:20:46.330, Speaker B: Because, you see, while trading bots can overbid for gAs in PGAs, they don't ultimately hold the power to reorder transactions, only miners do. And that is an awesome power that they can wield without anyone being able to stop them. The defining feature of Ethereum's current era is that most miners are not attempting to exploit MeV themselves yet, writes Charlie Noyes in an article paradigm. Yet the future is only going to get scarier, writes Dan in the dark forest. Miners today leave money on the table. By not acting on these opportunities in the future, they will reorder and submit transactions in their mempools for their benefit. Even worse, they could reorg blocks mined by other miners in an attempt to steal MeV, which was not claimed by them, resulting in chain instability.
00:20:46.330 - 00:21:44.526, Speaker B: The fear is that miners have already been tempted by the fruits of the MeV tree and are not only dipping into pots of additional revenue that traders can't touch, but also actively colluding with traders to exploit MEV to their fullest advantage. The reality is that miners are already implementing MEV. In their latest report, the flashbots team state that there are five mining pools running MeV Geth, accounting for over 12% of total ethereum hash rate, which collects them. Zero point 13 ETH per block of additional revenue. Doesn't sound like much, but when you add it up, when you sketch it up, it is. So the question is, what has provoked the miners to suddenly sit up and take notice to stop being so altruistic? Well, isn't it obvious? EIP 1559, the alteration to the Ethereum blockchain that's now scheduled for inclusion in July. Now, we've covered the proposal in previous videos, but essentially it's this.
00:21:44.526 - 00:22:37.178, Speaker B: Gas fees will be sent to the network as a kind of burn, with only an optional tip paid to miners. So the miners don't get it. So is it any wonder that they're moving rapidly towards adopting strategies that keep mining profitable for them. Over and over again, I've seen criticisms of miners calling them greedy and conniving. But in any clinical, clear sighted analysis pieces you chew through researching this subject time and time again, you hear miners called rational economic actors. That is to say, they do what's in their best interest financially because more than anyone else, they are invested. It's business, so let's not be so quick to vilify them, shall we? Now look, in another article, the flashbots team states, we believe MeV extraction is unavoidable, and they see their work as an attempt to define what constitutes fair and unfair MeV.
00:22:37.178 - 00:23:30.574, Speaker B: But the key word here still is mitigation. So what can be done? Well, it turns out that the various L2 solutions now picking up steam do offer interesting ways to combat MeV, but that's really too deep a rabbit hole to go down for today. Shutter protocol promises to combat MeV using threshold cryptography. Now, I read the introductory article, and it made me feel extremely stupid. Wingardium Levio star Stop Chainlink is developing what they call fair sequence sync services FSS, an MEV solution that uses a decentralized oracle network to fairly order transactions sent to an on chain smart contract. By separating the ability to order transactions from the ability to produce blocks, malicious value extracting, such as front running, can be prevented through predefined ordering policies. Sounds cool.
00:23:30.574 - 00:24:12.750, Speaker B: And if you've tried to enter an IDO recently, you could well have been front run by a bot getting in ahead and buying all the tokens before dumping them on unsuspecting retail. Which means you. And that looks like this. All this. The team at Ferrum have developed what they call an inverse fair launch protection system. IFLPs, which identifies bots addresses that attempt to infiltrate a listing, blacklist them, and then prevents them from selling or transferring tokens. And I was sent this absolute zinger from the Totem fire launch, where a bot attempted to buy 150 e worth of tokens and was subsequently blacklisted and lost all that money.
00:24:12.750 - 00:24:40.518, Speaker B: Oh, I'm so sorry. So that's it for this week. There is so much more to learn about the dark forest, but hopefully it will give you pause for thought next time you interact with the blockchain. There is so much more going on than you will ever know. Flashbot is an incredible resource. I highly recommend bookmarking it and adding it to your defi playbook. Be safe out there.
00:24:40.518 - 00:24:43.250, Speaker B: This was the defiant.
