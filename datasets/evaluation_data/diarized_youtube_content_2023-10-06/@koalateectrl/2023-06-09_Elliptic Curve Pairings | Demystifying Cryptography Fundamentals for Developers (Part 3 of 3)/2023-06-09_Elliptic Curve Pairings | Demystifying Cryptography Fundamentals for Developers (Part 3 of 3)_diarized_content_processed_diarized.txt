00:00:09.290 - 00:00:55.546, Speaker A: What's up, everyone? Today we're going to be talking about elliptic curve pairings. Congrats on making it this far. This is the third part in our three part series on demystifying cryptography fundamentals for developers. Last time we covered the fundamentals of elliptic curve groups, which we're going to need for this video. So if you are not familiar with what an elliptic curve group is, or with a discrete log problem for elliptic curves, then I encourage you to go back and watch that video first, and then come back to this video afterwards. Now, today we're going to be looking at elliptic curve pairings once thought of as a weakness for elliptic curve groups. Nowadays we see this as an amazing ability that allows us to do really cool things in cryptography.
00:00:55.546 - 00:01:47.680, Speaker A: It's not a bug, it's a feature. Pairings are used as a cryptographic primitive in things such as KZG commitments, ZK snarks, and BLS signatures. For those watching this that are smart contract developers, this is super relevant. In my experience as a blockchain security researcher, I've already seen BLS signatures implemented at the application layer for account abstraction, as well as at the consensus layer for proof of stake. But before we get too ahead of ourselves, we need to understand elliptic curve pairings, and then we'll have the proper tool set to then understand these other concepts later on. So let's get started. Before we dive into pairings, I want to do a quick recap of elliptic curve groups, just to make sure that we're all on the same page.
00:01:47.680 - 00:02:32.458, Speaker A: Recall that in an elliptic curve group, the elements in this group are elliptic curve points. The group operation is addition. We can add different elliptic curve points together to get another elliptic curve point in this group. And we can also multiply a scalar with an elliptic curve point, because that's just the same as adding a point to itself that many times. For example, four p equals p plus p plus p plus p. But what we are unable to do is multiply two elliptic curve points together. For example, we can't do p times q because the elliptic curve is defined over a finite field.
00:02:32.458 - 00:03:17.210, Speaker A: There are a finite number of elements in this group. The number of elements in this group is called the order of the group. Also, every group has at least one generator, usually denoted as g, an element that if you apply the group operation to this element over and over and over again, you end up getting every element in the group. Hopefully this is all review. So let's go ahead and delve into our main topic for today. Pairings when I first learned about pairings, I was a little bit confused because I didn't see the purpose of the formulas that were written on the board. So I'm going to switch this up and I'm going to first try to motivate why pairings are useful, and then we'll get into the formulas.
00:03:17.210 - 00:03:56.998, Speaker A: So what do we know right now about elliptic curve groups? We know that we can do scalar multiplication and also addition of points. For example, we can do 200 g plus 275 g. This is valid. In fact, we know that 200 g plus 275 g equals 475 g by the rules of addition. Now, there is a subtle but really cool thing going on here. And to help us see it, I will name these points. So let's call 200 ga, let's call 275 gb and the result 475 g.
00:03:56.998 - 00:04:35.490, Speaker A: Let's call it c. If I want to calculate what c is, there are two ways I can do this. I can either first calculate 200 times g equals a, then 275 times g equals b, and then do a plus b equals c. That's one way. Or I can first do 200 plus 275 equals 475, and then just do 475 times g equals c. You get the same result. If you first do the scalar multiplication, then do the addition.
00:04:35.490 - 00:05:15.860, Speaker A: Or if you first do the addition, then do the scalar multiplication. Either order works. Therefore, elliptic curve groups are what is called homomorphic under addition. Pause the video for a second to take this in. Okay, so what's the big deal? You say in regular algebra using numbers, I could do the same thing. For example, if I did 200 times three plus 275 times three, it's the same as 200 plus 275 all times three. It's just a distributive property.
00:05:15.860 - 00:06:05.040, Speaker A: Look, here's the big deal. The big deal lies in the fact that we also have a special property for elliptic curve groups, which is the hardness of the discrete log problem. Let's go back to our elliptic curve example. Say I made a by doing 200 times g on my own, and I also made b by doing 275 times g on my own. I only give you g, a and b, and I never tell you the secret values of 200 and 275. Hopefully by now you can recognize that because of the discrete log problem, you can't find the secret values of 200 and 275 on your own. If I only gave you g, a and b.
00:06:05.040 - 00:07:15.670, Speaker A: Okay, so now you have g, a and b, and then I ask you, can you compute c for me? You actually can compute c by doing a plus b and returning the value of c to me. So that's pretty crazy because you can do math and return a correct answer without even knowing these underlying secret values. And this is all possible because of homomorphism. Under addition to compute c, you don't need to first do 200 plus 275 and take that result and multiply it with g. You can actually get to the same answer by just starting with a equals 200 g and b equals 275 g and just adding a and b together. So the first use case is that you can do computation without knowing these underlying secret values. Furthermore, another thing that I can do is I can compute a, b and c on my own because remember, I know the secret values.
00:07:15.670 - 00:07:58.120, Speaker A: And then I give you a, b and c and you don't know the secret values. But you can check that indeed, a plus b equals c and you don't know these secret values. You can check math and verify for yourself that this equation holds without even knowing the underlying values. This is the second use case. Hopefully this amazes you like it did me. Now note that if we did the same exercise with real numbers instead of elliptic curve points, you would be able to find out my secret values because there's no hardness of discrete log problem for that. Wow.
00:07:58.120 - 00:08:59.500, Speaker A: So the fact that elliptic curve groups are homomorphic under addition is what allows us to do this. Can we do the same for multiplication as well? Well, let's say again that I had the points a equals 200 times g and b equals 275 times g. And I asked you, hey, can you calculate D for me? What I want to know is what is the value of 200 times 275 g? We'll call that D. Well, you can't calculate this by doing a times b because remember, we can't multiply two elliptic curve points. So sadly this doesn't work. And we say that this is not homomorphic under multiplication. The only way we can calculate D is if we first multiply 200 times 275, then multiply the result with g.
00:08:59.500 - 00:10:20.882, Speaker A: Now as a side note, if something is homomorphic under addition and multiplication, we say that this is fully homomorphic, which is a popular term that you may have heard of. It's a field that's undergoing a lot of research, especially for applications such as private machine learning. Anyways, back to our example. It's sad that I cannot give you a and b and you can't calculate D for me. But is the other use case possible if I compute a and b and d and give them to you? Can you verify that I did this computation correctly without knowing the underlying secret values? As it turns out, with elliptic curve pairings, it is possible, and that's why we're learning about them. By the way, if anything in this section is still a little bit unclear, please pause the video and rewatch this section before going on. Great onto elliptic curve pairings a pairing, commonly denoted with the letter e, is a mapping that takes elements from two groups, let's call them g zero and g one, denoted like this, and returns an element in a third group, the target group.
00:10:20.882 - 00:11:21.830, Speaker A: Call it gt. For the mapping e to be called a pairing, it must satisfy three properties, bilinearity, nondegeneracy, and efficiency, and we'll get to these in a second. The two groups g zero and g one are elliptic curve groups. They can be different groups, in which case e is called an asymmetric pairing, or the same group, in which case e is called a symmetric pairing. The pairing maps points in g zero and g one to is another group, but it is not an elliptic curve group. Although it may not be totally accurate, it's probably easiest to just think of as a group of scalars, basically a group of numbers. Okay, so what do these three properties mean? Let's start with bilinearity.
00:11:21.830 - 00:12:23.300, Speaker A: Let's assume that we have points p and q that are in g zero and points s and t that are in g one. What bilinearity means is that applying e to p plus q comma s is equal to applying e to p and s times e of q and s. It's also true for the second value as well. So e of p comma s plus t equals e of p and s times e of p and t. You can see that bilinearity is cool if we just do a little bit of math. I'm going to put the math on the screen, and then we'll talk through it. So little a and little b are scalars.
00:12:23.300 - 00:14:53.460, Speaker A: If we have e of ap comma bs, we can see that this equals e of a minus one p plus p comma bs, which equals e of a minus one p comma bs, times e of p comma bs, which equals dot, dot, dot, and we can keep on going with this, and it equals e of p comma bs to the power a. Now we can work on the right side, which equals e of p comma b minus one times s plus s all to the power a, which equals e of p comma b minus one times s times e of p comma s all to the power a, and we can keep on deconstructing this, and then it eventually equals e of p comma s to the power a times b, and which also equals e of p comma abs, which also equals e of abp, comma s, and you can do the math for yourself to double check this. So basically, for the mapping e to be called a pairing, it needs to map any points in g zero and g one to gt, such that the bilinearity equation that you just saw holds. So just like we saw e of ap comma bs must equal e of p comma s to the power a times b, which equals e of p comma abs, which equals e of abp, comma s, and everything else in between. To put it simply, I like to think of bilinearity as the property where you can take two elliptic curve points and move their coefficients to the exponent as well as to the other side however you like, and they will equate to the same output. Hang on to this thought. As for completeness, I will just quickly go over the other two properties.
00:14:53.460 - 00:15:33.516, Speaker A: The second property is nondegeneracy, which is really there just to prevent an edge case. It's basically saying that e needs to map these points in g zero and g one to a scalar in that generates the whole group gt. Imagine that we created e such that e of any two points p and s equals one. Then of course bilinearity would hold, since e of p comma s is one. But is this useful to us? Not really. So in this case we wouldn't consider e a pairing. E would be degenerate.
00:15:33.516 - 00:16:05.384, Speaker A: In this case, the third property is efficiency, which just makes sure that e can be computed efficiently. Again, it's not useful to us to have an e that we can't compute in any reasonable amount of time. Great. So now back to bilinearity. Because of this property, sometimes you'll also hear pairings called bilinear maps. It means the same thing. Also, for this video, we're just going to assume e works as I've showed you.
00:16:05.384 - 00:16:42.420, Speaker A: I'm not going to go into the details about how e is actually calculated. Maybe we'll save that for a later video if there's interest. But that would actually get really technical. Also, I want to make it clear that there aren't just pairings for any random elliptic curve groups. These groups, g zero and g one are very special groups that have been chosen by expert cryptographers so that a pairing exists. If you pick two random elliptic curve groups, chances are you won't have this. Okay, so returning back to the main topic, the main takeaway.
00:16:42.420 - 00:17:33.050, Speaker A: I want you to have from this video is that bilinearity formula I just showed you. If you understand that a pairing e is a mapping that takes elements from two groups, g zero and g one to the scalar in the target group Gt. And it also satisfies the bilinearity formula, basically that you can just move the coefficients into the exponents and also to the other side and the equality still holds. Then you're ready for the next part. Let's go back to why we introduced pairings in the first place. I will rewrite the example that we had. I have calculated 200 times g equals a and 275 times g equals b, and everybody knows g.
00:17:33.050 - 00:18:46.990, Speaker A: I had shown you that elliptic curve groups are homomorphic under addition. This meant that I could ask you to calculate c, which equals 200 plus 275 g, and you could do it by doing a plus b, and you could do it even though you didn't know the secret values of 200 and 275. In addition, I could also calculate on my own 200 plus 275 equals 475 and do 475 times g equals c on my own and given you a, B and c, and you could verify that indeed a plus b equals c without knowing the secret values 200 and 275. We then saw that this did not work for multiplication because this is not homomorphic under multiplication. I could not ask you to calculate D, which equals 200 times 275 times g. Because you could not do a times b. You can't multiply two elliptic curve points in this group.
00:18:46.990 - 00:19:36.510, Speaker A: The only way that you could calculate D is if you knew the secret values of 200 and 275 and did 200 times 275, then multiplied it by g. That's the only way that you could calculate D. However, I claim that what pairings are useful for is that I could calculate 200 times 275 g, which equals d, give you a, B and D, and you could verify that I did indeed calculate D correctly. Let's see how this works. Let's say that we know of a symmetric pairing e. It's symmetric, so G zero and g one are the same group. And let's say that g is the generator of this group.
00:19:36.510 - 00:20:57.800, Speaker A: Therefore, a and b are in this group. Since I know the secret values of 200 and 275, I create ab and I also create D, which is 200 times 275 g, and give you ab and D. What you can do to verify that D is computed properly is to calculate e of a, comma B and see if it equals e of G comma D. If they are equal, then you know that I did the calculation correctly. Let's see why using the bilinearity formula, we see that e of a comma B equals e of 200 g comma 275 g, which equals e of G comma G to the power 200 times 275, which equals e of g comma 200 times 275 g, which equals e of g comma d. Amazing. So if e of a comma b equals e of g comma d, then we know that the calculation was done correctly.
00:20:57.800 - 00:21:40.470, Speaker A: Note that I could have also used e of D comma G instead of e of g comma D, and check if it equals e of a comma b. It's a good exercise to work this out on your own, because this is a symmetric pairing. The ordering doesn't matter. In this case, e of D comma g equals e of g comma d. So either one works. Usually in practice I have mostly seen asymmetric pairings, and in that case, since a and b would be in different groups with different generators, then the order would matter. But yeah, that's it for today.
00:21:40.470 - 00:22:16.450, Speaker A: Awesome. So we've covered a lot of ground today. Hopefully now you have learned something and understand elliptic curve pairings. You understand the definition of a pairing and understand the property of bilinearity. Hopefully you're beginning to understand why pairings are so useful. In cryptography, we saw how elliptic curve groups are homomorphic under addition, but not multiplication. Therefore, we saw how pairings provide us a way to verify multiplication even though we cannot multiply two elliptic curve points.
00:22:16.450 - 00:22:21.010, Speaker A: That's it. Thanks for watching. See you next time.
