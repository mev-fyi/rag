00:00:10.620 - 00:00:28.250, Speaker A: Stand by everyone while we get this going. Kevin, if you toggle the restream, we should be good.
00:00:29.020 - 00:00:31.128, Speaker B: Yeah, we're good. Great.
00:00:31.214 - 00:00:48.664, Speaker C: So we're all set. Welcome again to our session. Today we're going to learn how you can build DeFi analytics dashboard with one unified API. Here I have two lace joining me from the Covalent team. I'll let you guys introduce yourself and work away with the presentation.
00:00:48.792 - 00:00:57.824, Speaker B: Thanks. Thank you. I can start. I'm Leilani, I'm in product marketing at Covalent. Leibing, go ahead.
00:00:57.862 - 00:01:01.520, Speaker A: Hi, I'm Leibing. I'm a developer relations here at Covalent.
00:01:02.420 - 00:01:53.488, Speaker B: Yeah, we're going to keep this probably pretty brief as an overview of Covalent, how you can build DeFi dashboards and also a couple other use cases with our API. So I'll kind of set the scene for the first half of the presentation and then hand it over to Leiping, who's going to go in depth a bit more on our Bounties for this hackathon, as well as resources and project demos and how you can get started. Kind of everything you need to know there. So here we go. Okay, so welcome to Hack Money, our presentation. Really excited to be part of this hackathon DFI use cases I think are exploding and there's so many creative things that you can do. So this is really just scratching the surface, but I can't wait to see what everybody's actually able to achieve over the course of the next 20 something 30 days.
00:01:53.488 - 00:02:40.784, Speaker B: Actually, I guess it's like most of the month. So, yeah, here's the agenda again. We're going to cover a couple web3 data trends and challenges. Covalent is a data company, so we're in a good seat to observe kind of what's happening around us, as well as just describe a little bit more about why you'd use Covalent as compared to other tools or when you can combine them, for instance. So diving in a little bit more to the API itself, if you're new to it or maybe you've used it before and we just kind of COVID some updates there. We're going to touch a little bit on the Covalent network just because we actually have some exciting news coming later today regarding this, and it's important for the future of our ecosystem and it does affect developers later on down the road. Just ties into the way that we're building.
00:02:40.784 - 00:03:31.804, Speaker B: And then, as I mentioned, Bounties resources, project demos, all of that good stuff to get started. So kind of the first way to set the scene is to think about the future and where we're headed. And Covalent is always focused kind of on the five year and ten year plan, which can seem like a million years from now in web3 because everything changes so fast. And obviously if you've been in this space maybe even a month, it can feel like a year. It's like time scales differently here. But anyway, what that means is essentially we're seeing a ton more users kind of flooding into this space, whether it's through NFTs or whether it's through dipping their toes into DeFi and maybe just like even making their first swap or learning what a decentralized exchange is. And that learning curve can be really rapid.
00:03:31.804 - 00:04:17.168, Speaker B: You get into it what you put out of it. So people that get obsessed with this hobby or fall down the rabbit hole, as everyone prefers to say, can really become builders and users in a matter of months. Not muted. There we go. Anyway, what that means and what we're starting to see over the past year especially kind of, I think the pandemic had a bit of effect on that, is just tons more users and that's coming with more development like different blockchains. And while many blockchains follow this EVM standard, it's like ethereum compatibility, so their architecture is fairly similar. A lot of blockchains are also deviating and changing their architecture completely.
00:04:17.168 - 00:05:01.852, Speaker B: So you have non EPM blockchains like Solana that are evolving and others. And what that means on a data side and on the developer side, maybe some of you are familiar, is that you're learning entirely new languages on top of this new tech stack. And for us, for an indexing solution, it requires a lot more time and this deeper understanding to index those chains as well. So kind of all of these things are just minor barriers to scaling and supporting users at the rate that we kind of need to be at, as well as improving that experience. Because there's thousands of applications, I think already. But as you can tell, if you've tried to go between them, there's not a lot of interoperability. So I'll kind of touch on some of those pain points in a little bit.
00:05:01.852 - 00:05:48.460, Speaker B: But yeah, you might be familiar in Web Three with just a little bit of those frictions in the user experience or maybe moving your assets across different chains or things like that. And building of course across different chains is its own challenges. So we think like a billion plus users on chain is completely realistic at some point in the future. And I think a lot of those people might not even realize that they're using blockchain technology because Web Three is much bigger than kind of like the crypto Twitter mindset. You can use blockchain tech on private blockchains, your banks could be adopting them, medical records, things like that. And all of these things require kind of better applications and an understanding of blockchain data. So that is where Covalent kind of sits.
00:05:48.460 - 00:06:59.204, Speaker B: And just to go a little bit further into some of the data challenges that we've seen, covalent kind of arose as a company that's sorting like trying to take some of the ease off developers or take some of the burden off developers. So what we've noticed is that there's a lot of challenges when it comes to retrieving and building with blockchain data. And while it is like a public distributed ledger and public data is kind of the big word in practice. That doesn't always turn to be true because there are a lot of barriers to basically extracting, like running your own nodes. And it can be costly and it can be expensive, especially as your applications are scaling or maybe you're paying somebody to host your node infrastructure. And yeah, if you're requiring historical data from full archive nodes, you can be already hitting like ten terabytes of data and that can cost more and more and more as you scale your applications. Also there's barriers just like along the JSON RPC layer a lot of times to build interesting use cases, you need more depth than that.
00:06:59.204 - 00:08:25.104, Speaker B: So Covalence come as something that's kind of we try to index data that's harder to retrieve and we also notice that across different chains, the data response can be quite different and that's regardless of the underlying infrastructure, but definitely for something like Ethereum versus Salana, it's like two different worlds to build with that. So what we're trying to do is index a bunch of different blockchains currently like around 30, including test sets, and then expanding that more and more and more as we go and provide all of that data in a really easy to fetch way and in a standard sort of response. So that you basically need to learn the tool once and then your experience isn't constantly changing as the ecosystem around you does. So that's kind of like the main pain points that I think we've seen and it basically comes back to interoperability. So there's a need for basically this unified solution which is kind of as we scale and as there's more users, more applications, those applications need to be able to work together and users need to be able to move their assets across different chains or keep track of them and just basically simplify that experience. So that goes down to the development layer and just making this whole process easier. So what covalent kind of act as is like this data layer you can think of.
00:08:25.104 - 00:09:19.820, Speaker B: So instead of running your own node infrastructure or paying somebody to do it and building out custom queries and things that can sometimes again, like if you're changing those queries later down the road, it can take days to resync all of your data. There's just a lot of kind of slower barriers to that. So we prefer to just take care of that entire step and that's kind of where we fit as this data layer. So really all you need to do is query through the API and nothing changes from your side. And then the benefit is each time we index a new chain and we go through that work, it's accessible to you pretty much immediately through like a chain ID parameter. So when Labing goes through our docs in a little bit, you'll see what I mean by that. If you are new to the API, but essentially everything can be scaled easily and it's a matter of changing parameters rather than building out new queries entirely.
00:09:19.820 - 00:10:04.616, Speaker B: And that's kind of how we see scaling the ecosystem and what needs to happen in order to just kind of accelerate development and focus on some of the stuff that matters more to the users, which isn't always, like, the major priority, I think, in web3. It's a lot of building things really fast right away, which is amazing. And that's how innovation starts, but then the user experience kind of comes later. So that's kind of I already touched on the Kavalan API, but just to go in a little bit further, it's a single unified API. So it means you're just using one tool for all of our different blockchains. It's queryable from the cloud and you actually don't need to be a developer to use it. Obviously that's the main audience and you will have a lot more success if you're familiar with those tools.
00:10:04.616 - 00:11:12.420, Speaker B: But we created an analyst mode as well and because it's no code, you can kind of just play around with it even directly in the browser and get familiar with what that data response is going to look like, maybe just learning about kind of what log events are, things like that. And then, yeah, it's good for analysts, which we've noticed. So people that want to understand this ecosystem but aren't necessarily building applications, not that it's as relevant for this hackathon, but just kind of an interesting use case. And I think it adds more visibility to Web Three, which is good too. And then I would say the main kind of focus is MultiChain applications. So because you can build and just change a chain ID parameter to be across ethereum or polygon or phantom or some of these different chains where a single dex might be supported on all of them, for instance, Uniswap or SushiSwap or pretty much anything swap nowadays. So yeah, you can change a chain ID and you can actually make that project multi chain, which is a pretty big advantage and especially in hackathons, I think it's a great thing to do.
00:11:12.420 - 00:11:43.452, Speaker B: So if you are interested in building multi chain dex dashboards, that's something we'll kind of get into a little bit later. But that's the API. And then I kind of went through this crypto stack already, but here's just broken down a little bit more. So you have the blockchains, you have nodes, you have us, you have applications and then you have users. And that's completely oversimplified. Obviously there's so much more complexities to this, but it's kind of the easiest way to set the scene. So just to move to the Covela network a little bit.
00:11:43.452 - 00:12:24.636, Speaker B: So one of the questions that we really commonly get is well, not as much anymore, but it used to be how are you different than decentralized data providers and blockchain and obviously being in Web Three, it kind of makes sense to be decentralized. But we started as a SaaS company and what we're doing is gradually decentralizing the data. So actually today there's a really big kind of advance forward in a couple of hours that we're going with along the Covalent network. So if you're interested in learning more, you can stay in touch with our socials for that. But we're trying to basically be the universal decentralized data model. This is kind of a mouthful to say for MultiChain and indexing and querying. That's a lot to say.
00:12:24.636 - 00:13:12.750, Speaker B: I've never really said it out loud like that, but what that means is the same quality of response but just in a Web Three native way, decentralizing the data and then even allowing us to grow even further and building out things like class C endpoints, which will be like community built endpoints as well. Something that we're looking to do later down the road. But this is obviously like a pretty big process. So a lot of our Covalent network rollout is taking place over the course of this year. But what we're starting with is these block specimens. So I don't know if you can see my mouse, but above blockchains, where you see BSP plus indexers, covalence essentially created a block specimen producer, which is a completely new thing. So don't be weird if you haven't heard of it.
00:13:12.750 - 00:14:06.008, Speaker B: It's basically a method to verifiably extract data across these different indexing nodes. So what we're doing is starting with that indexing layer and then eventually building out a decentralized way for query nodes and storage nodes to all function and for people using the applications to be able to interact with that data layer, stake their CQT, which is our native token. And all of this is settled on Moonbeam. So if you're curious about Covalent network or you want to learn more about how this works and evolves for the API, I would just say stay in touch with our socials and head to our website. We can share those links. Yeah, so here's basically the two major demographics. So you have developers who I think primarily make up people that will be this hackathon and then you have analysts.
00:14:06.008 - 00:14:53.900, Speaker B: So if you are exploring with the API, you'll see the Global Settings header on the top of our API docs. So that's where you can configure things like whether you want to work in Analyst Mode or Developer mode. So basically that's just going to determine whether or not you see the API response as like a JSON response or if you actually get a spreadsheet built into the docs. So even if you are a developer, I find the spreadsheet is sometimes just a good view to see what the data is in a nice way. Maybe you like read based on response, but I don't know, it's not always the easiest. So yeah, you can configure your global settings like that and we'll kind of go into it a little bit more in depth as I hand it off to Leiping, who's going to talk a bit about our bounties more in depth and then show you some of those demos.
00:14:55.840 - 00:15:34.264, Speaker A: Thank you. Let me just share my screen here on slideshow, present of you. Which one is it? Okay. Can you see this? All right. Thanks, Leilani. So for this part, I'm going to just briefly run through what bounties we have for you guys. For this hackathon, we thought it's really relevant that we put up a DeFi related bounty for hack money.
00:15:34.264 - 00:16:26.840, Speaker A: It is one of the most revolutionary things that's happened in recent years, right? Like every smart contract is essentially a bank, an institution, like a huge thing within just lines of code. But if you've interacted with the data side of things, typically banks and stuff, I guess they have tables for you. A smart contract data does not come back that easily. You have to query like individual kind of events. And that's because of the nature of how data is stored on a blockchain, right. It is not like in tables and stuff and you have to look at each transaction and what kind of events are emitted from those transactions. Right.
00:16:26.840 - 00:17:14.930, Speaker A: So the challenge here, of course, is to use our API, which thankfully kind of aggregates the data in a more meaningful way for you to query, analyze, and display on your front end application. Use our API to build like a DeFi analytics dashboard that sheds light on the on chain interactions behind your favorite DeFi protocols. Right? So let me just show you what kind of things you can do with this. The chat is popping off. Okay, never mind. Okay, we'll try to answer the questions at the end. All right, let me just go through this part first.
00:17:14.930 - 00:17:54.700, Speaker A: So, well, one of the biggest blue chip DeFi protocols I'm sure a lot of you guys have heard is Ave. They provide a lending and borrowing service, right? Literally functions like a bank, but everything is on chain. That means first of all, everything is public. And also that provides us with lots of areas of innovation. But what about the on chain data? If you look at the number of this is the Ave lending pool smart contract. If you take a look at the Ave documentation, it says here that the lending pool contracts the main contract of the protocol. This is version two.
00:17:54.700 - 00:19:08.710, Speaker A: I think version three looks a bit different and it exposes the user oriented actions that can be invoked using either Solidity or web3 libraries. So what are the actions? They are deposit, borrow, withdraw, repay. Like if you ask yourself, okay, I've got certain questions, right? So you tell me that Ave is like a bank. How many people borrow against this smart contract every day? For instance, how much is being borrowed, how much is being deposited? Right? Of course, I think you can find that information via Ave's website itself, right? But what if you want to use that data to display on your app? Or like a certain function of your app requires that data. I think there are ways to interact with the nodes to get the data. Or if we use our API to get all the transactions against this smart contract. So the API endpoint, and this is our covalent API reference, the endpoint you're looking for would be Get Transactions for Address.
00:19:08.710 - 00:19:43.228, Speaker A: Of course, you can do the same thing via Etherscan. But this is programmatic. That means you can build it and it's real time, and you can integrate it into your app. So get transactions for address. If you click and I've just clicked the Run button, this is in Analyst Mode. But let me just take you through the Developer Mode. So for developers, what you'll be seeing is mainly so we've got two modes, right? Developer Mode and Analyst Mode.
00:19:43.228 - 00:20:07.450, Speaker A: I'll get to that in a bit. Let's just click Run and see what happens. So get transactions for address. You key in a smart contract Address. I did not key in this address in particular because the response is pretty huge. This one is a sample response. This is a sample response that you'll be seeing.
00:20:07.450 - 00:20:41.112, Speaker A: So, as you can see, this is the contract address. And then each of these items is a transaction against the smart contract. So that's the transaction hash from to field the value of the transaction. This one is zero. What kind of transaction is it? Oh, you look for the information under the decoded area. The transaction is an approval transaction. If you go down further, there are other transactions.
00:20:41.112 - 00:21:39.830, Speaker A: This is a rewards claim transaction. All these data are being stored under the decoded view within this API endpoint. And what you saw just now was the other mode that our endpoint exposes you to, which is the Analyst Mode. We get that not everyone wants to kind of use the JSON response. So we provide this mode and you can download the response in CSV or Sheets format. And if you scroll to the right, classic SQL or Excel database, you scroll to the right and you can see what kind of event each transaction is. For instance, this particular smart contract has emitted lots of approval events, lots of claim rewards, lots of transfers, taker Ask Royalty Payment.
00:21:39.830 - 00:22:26.192, Speaker A: And from this you can basically aggregate it to get a calculated summation of the values, for instance, of all the withdrawal event, for instance. Right. Just to swing back to the example, just now we had this lending pool which exposed us to all these functions. So within the context of integrating it into your application, right? So this is obviously the JSON response. I've just printed it out on the page here and you can see that. And this was queried just now. I think it was updated.
00:22:26.192 - 00:23:05.772, Speaker A: This is UTC time, I'm in Singapore time. So it will take a while for me to do the calculations there. But this data is fresh as of 30 minutes. And you can see the kinds of events that's being transacted against this lending pool smart contract. You see the deposit here, you see another reserve used as collateral enabled. My time is running up, but let me just go through it quickly. But this response is very rich.
00:23:05.772 - 00:23:53.952, Speaker A: And this is only for one day's worth of data that's transacted against this smart contract. So that's the other problem with blockchains. There's lots of data sometimes that gets generated and yeah, and can I so downloading the same data in table format. You can see that it's got way too many rows. I think it's got 4000 records. And again, what kinds of transactions are they? Deposit, deposit, min transfer, min transfer, flash loans, borrowing, min transfer. Yeah.
00:23:53.952 - 00:24:47.840, Speaker A: So that's just the tip of the iceberg of how we can explore the kinds of data that is being emitted from a smart contract using the API. Now, if you just go back to our endpoints, our Class A endpoints are the endpoints that are standardized across all blockchains, right? All blockchains produce balances. And here we've got one very unique one where you input, like, for instance, my address. If I'm an angel investor, I input my address here, and then it returns me my historic portfolio value over the last like 30 days or 90 days. So that's very good for creating charts. And then you've got token holders as of any block height. That's really useful if you want to see you've got an NFT, right? And then you want to see, oh, who are the token holders of bought apes? Last year, February.
00:24:47.840 - 00:25:42.150, Speaker A: You can do analytics and display your results here. So all these data, you can either do further calculation and cleaning on the front end when you get the response, or we have a primer feature that you can find in the documentation page, which helps you shape the data before it even gets back to your client. All right, and let me just quickly go through two projects that we've seen build. This is a Trader Joe Fees calculator. If you know Trader Joe, it is Dex on Avalanche. So let's say I'm trading against this pool. If I want to invest 500 USD, what will my fees be? Hold on.
00:25:42.150 - 00:26:00.536, Speaker A: Okay. My fees will be this. And this is the data about this USDT rep Avex pool. You can see it's pretty rich data. Oh, this is powered by Covalent API. This is a previous hackathon winner. We're still in touch with him.
00:26:00.536 - 00:26:44.564, Speaker A: He's really good. And then we've got Hash Scan, which is another previous hackathon winner, right? Which kind of uses the data to produce more unique user insights. For instance, he asked, who are the holders of bot ape that have also interacted with Ave pool? He made multiple queries and then displayed the results here. So, total amount of Ave pool deposits by bought it owners on these dates. So you can see like very interesting data that you can get from this. Another more production ready project here. Okay, let me just leave the rest for questions.
00:26:44.564 - 00:27:37.750, Speaker A: You guys can go check out our documentation to find out how you can use all these different endpoints to produce the data that you want to integrate into your app. All right, let's see what's up in the chat. What blockchain? Supported? Yeah, all supported. I think Leilani has answered that build a novel DeFi protocol and we use covalent of course you're eligible for the bounty. I don't think there's any restrictions there. Yes, we do offer APIs to get internal transactions. I think they are all classified under the transactions endpoint.
00:27:37.750 - 00:28:27.234, Speaker A: Yeah, you will be able to find how do you decide which smart contracts to index? We've actually indexed every single thing on the chain itself, so we don't decide everything is there. So just input your smart contract address and you will be able to get the responses that you need. Yeah. If not okay, so one other thing is some of the responses might not be complete if the smart contract abi is not made public. Right. So some of the decoded fields and log events, they are not public. And if the contract owners don't release it, we can't really decode it properly.
00:28:27.234 - 00:29:11.154, Speaker A: So that's the challenge. But most of it has been decoded. Right now it's free. Maybe we had a paid tier in the future, but that's not in the pipeline anytime soon. There's an API limit of five requests per second, which can probably go up to like seven or eight, but yeah. Are we able to use yes, query the locks and see the SMS sent to our address? Yes, we've got the get. There's two ways to query the locks.
00:29:11.154 - 00:30:13.974, Speaker A: One is just simply by querying the transaction itself and I think there will be lock fields in the response. The other way we have another endpoint called Get events by what's the topic hash? Yes, get log events by topic hash. Or you can get log events by contract address. So what the second one means is that you just key in the contract address and return all the recent log events that's being emitted by that contract. The get event logs by topic hash is a more horizontal kind of querying because topic hashes are not unique to one particular smart contract. Right, like, let's say I've got an approval topic hash and then it'll return all the approval events across all the smart contracts on Ethereum, Mainet or any other network. So you have to do further kind of like filtering.
00:30:14.102 - 00:30:26.298, Speaker B: Yeah, you can use primer to match it to a specific contract as well. Yeah, I think we can answer more questions in the discord as well after this because we're running on time yes.
00:30:26.384 - 00:30:33.620, Speaker A: I think we've just hit the time limit. But all the best guys, we're excited to see what you guys build for hack money.
00:30:39.190 - 00:30:42.718, Speaker C: Yeah, we'll follow up over discord. Thanks, everyone, for joining.
00:30:42.814 - 00:30:44.654, Speaker B: Sweet. Thanks for coming. Everyone excited.
00:30:44.702 - 00:30:44.880, Speaker A: Thank you.
