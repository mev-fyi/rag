00:00:00.170 - 00:00:06.858, Speaker A: Second last talk of day. Presenting. This will be Tomas and Alex. Tomas is from Nethermind and Alex is from Flashpots.
00:00:06.874 - 00:00:08.878, Speaker B: And they'll be talking about what the.
00:00:08.884 - 00:00:17.070, Speaker A: World looks like with Mev after the merge happens. And we'll represent another minds in Flashpots. So welcome Thomas and Alex.
00:00:18.690 - 00:00:19.818, Speaker B: Thank you. Karti.
00:00:19.914 - 00:00:23.280, Speaker C: Hello. Hey, Karti. Thank you for having us.
00:00:23.730 - 00:00:25.280, Speaker B: Excited to have you all.
00:00:56.700 - 00:01:02.796, Speaker A: Maybe while Tomas is loading the slides, it would be awesome to kind of get an introduction from you each and.
00:01:02.818 - 00:01:05.070, Speaker B: Maybe then jump into the talk.
00:01:06.960 - 00:01:35.712, Speaker C: Sure, I'll start what Tomas is sharing. So, Alex from Flashbots have been looking into Flashbots after the merge and Mev after the merge. So, Flashbots, we focus on Mev, the negative X Natalies that come from the current extraction techniques related to it and generally the way Mev is shaping this technology. Yeah, I guess we'll share more in the presentation.
00:01:35.776 - 00:02:12.080, Speaker B: Thomas, hi. Yeah, I've been working on the Nethermind Ethereum client for the last few years and yeah, today we're going to present mev after the merge with Nethermind and flashboards. So, welcome everyone. Hi. And what we'll talk about? So, first of all, we'll talk about the merge itself, so the minimal spec for combining Ethereum One and Ethereum Two nodes. Then we'll talk about the Ryanism, which is this event within the event. It's all the if one if two core devs getting together to prepare the DevNet of the merge.
00:02:12.080 - 00:02:55.980, Speaker B: Then we'll talk about introduction to Mev, so minor extractable value. And we'll show how. Flashbots, enable mev in ethereum. Now. Then we'll ask a question whether Mev is possible after the merge. And then there'll be lots of numbers, alpha leaks, so make sure that you stay till the end. So maybe what is Ryan easement and why we've been involved in all of this? So, between April 16 and May 14, as part of the Global Scaling hackathon, we see the Ethereum One, Ethereum Two core developers building together to deliver the minimum specification of something that in the future will be simply called Ethereum.
00:02:55.980 - 00:03:41.304, Speaker B: And Ethereum One will be the execution engine there. And Ethereum Two, as it is now, will be consensus layer node. And what you see here on the screen is the example of the Taku and Nethermind working together as part of the first work that was done on the first minimal spec. So the merge delivers something most basic. So it delivers the clients that operate isolated and only connected through a simple RPC interface. And so far we already see implementations of Dotspec in Ethereum to clients in Lighthouse and in TECO. And soon we should see the other clients following.
00:03:41.304 - 00:04:23.820, Speaker B: And for the Ethereum One execution engine, that's for the catalyst, which is GEF for the merge and Netamind. And again, the other clients should follow promptly. So both of the clients here operate with their own peer to peer networks, so there is no interaction of the networks themselves. So they discover their peers, they do all the gossiping. However, some of those operations on Ethereum One Node are disabled. So Ethereum One Node doesn't gossip anymore, any blocks, but it does listen to transactions and it will do some synchronizations. And all the block gossiping is moved to Ethereum Two clients.
00:04:23.820 - 00:05:19.816, Speaker B: And the spec, the minimum spec of this JSON RPC consists of four methods really. The requirement to assemble block and that comes from the Become chain, from the validator to the Ethereum One Node. So the request comes from Ethereum Two, as it is now. But the actual block construction is on Ethereum One and it's super important for mev, as we'll see in a moment. The new block is more like information from the beacon chain network that the new block was created so the Ethereum One Node can prepare the state for the construction, for the block proposals. Sethead defines what the bitcoin chain decided that the current head of the chain is and finalized block allows to do some cleaning and pruning when the block becomes finalized on Ethereum Two, on the consensus layer. So that helps.
00:05:19.816 - 00:05:47.956, Speaker B: Ethereum one node to keep everything clean. And as you see, it's a 0.1.2 spec version, very early version, and we can expect lots of changes. The net amount implementation is available. It was reasonably big effort, but at the same time not so big that it would be a massive thing to deliver. And it's a good start. And all the teams are now focused on this.
00:05:47.956 - 00:06:44.520, Speaker B: So this is already merged in Netamind on the main branch. And you can test all of this by going to protolamda's mergenet tutorial repository and you can launch your own local DevNet setup for the Ethereum Two and Ethereum One clients working together. So you can pick Gaff, Catalyst or Netamind. And you can pick also, I think Lighthouse or Taco here. And something really fresh from today, from the last Toll core devs meeting we see that this timeline for the merge and for the network upgrades on Ethereum One this runs in parallel. So we'll see the London happening in July, then Shanghai, which will be a set of additional EIPS happening in October 2021 and cancun following some or later, probably 2022. And in parallel the merge happens.
00:06:44.520 - 00:07:05.136, Speaker B: So that work that already started should be coming in October. So it's pretty soon you can expect the proof of stake transition potentially even October this year. Let's move to the mev explanations. I think Alex will take over from here.
00:07:05.238 - 00:08:02.944, Speaker C: Yes, thank you so much. So, because this talk is about mev and E Two and at least mev after the merge, it's important to maybe first understand mev. It's definitely something that has been more prominent in the public debate in the last few months and it's something at flashbox that we've tried to educate the community on or at least share more resources about. So, I mean, at a high level, I've put a definition here, which is that mev is a measure representing the total value that can be extracted permissionlessly from the reordering inclusion or censoring of transactions. So the little image that you have under is on Ethereum, you have different transaction senders, they submit their transactions and before transactions are included in a block, they're part of the mempool. Miners pick transactions from the mempool and order them in a block and they have full control over that ordering. So they usually do that ordering by gas price.
00:08:02.944 - 00:08:59.140, Speaker C: But in reality, there might be more optimal ordering for them to extract more value out of this set of transactions or to insert their own transactions or censor transactions. Basically, they have full control over the content of this block in terms of the ordering of transactions. So that's why the term minor extractable value was first coined by Phil Dyne in his paper. flashboards 2.0 was to represent this upper bound on the maximum value that can be extracted by the entity that has the most permissionless power over the ordering of a block. Next slide, please. And so Phil, in a later presentation, Phil Dyne again set out a simple parametric definition of mev that can give you even a better idea of why you can think of it as an upper bound.
00:08:59.140 - 00:10:06.360, Speaker C: And so, as is written here, mev for a miner is how much ETH a special Miner account can extract given a set of user transactions t in a mempool initial state s and a set of contracts t that the transaction state will interact with. And the constraint on that is by inserting their own transactions. So inserting their own transaction in the set s censoring any element in the set t sorry, censoring any element of t or reordering t in any way that optimizes their ETH account balance. So that's the idea for the upper bound rod. But in reality, there's mev that's extracted on Ethereum already and it is not extracted by this entity that has the most power of what transaction orderings to the miners. Can you click actually again? Yeah, there you go. And so we've tried to quantify this as Flashbots and we've released some of our work on this and there are other teams that have done so as well, imperial and University and other groups.
00:10:06.360 - 00:11:23.360, Speaker C: But so what is essentially happening is today it isn't miners that are extracting value themselves, but it is users that are expressing preference on the ordering of their transactions and are sharing some of the value that they reap from having that preference met with the miners in the form of transaction fees. So again, as I mentioned, we've tried to quantify this to give some number for this and we've put a lot of our results in a live dashboard mev, explore that, quantifies what this amount represents not only in dollar terms but also in ETH terms and kind of breaks that down and breaks that activity down further. So I realize this is all still a bit conceptual, right? So I put an example here of a transaction where there's mev and I think I really want to nail this concept of transaction ordering. So for example, this transaction is an arbitrage transaction between different liquidity pools. So you can see balancer shuc swap and Sushi swap going between each pools. And you can see the sender started with 16 E and ended with 32 E, making there's 16 ETH in that process. But you can also see the transaction fee in there of twelve E.
00:11:23.360 - 00:12:48.264, Speaker C: And so to have their transaction included, they paid an extremely high transaction fee, much higher than the average transaction fee at the time, or an implied gas price of 51,000 guay. And we expect that they did so because they engaged in a priority gas auction, another term that was introduced in Phil Dyne's paper where they iteratively bid up their gas price against other competitors that also wanted to seize the same transaction. And so we have an example in the same block and so in the next slide of someone who seemingly went for the same opportunity but didn't manage to seize it. And you can see they still paid 1.1 Ether in transaction fee and still paid 27,000 GWe, so still twice as less as the winner, but still extremely much higher than the average gas price at the time, which was 94 GWe. And so this shows the power of transaction ordering, right? Because you're going to have a single winner that's going to win the opportunity and then other people going for the same opportunity that are not going to be able to seize it. And this opportunity itself has value associated to it and ultimately a miner, given that they have the most power related to transaction ordering, could put themselves in front of all these transactions.
00:12:48.264 - 00:13:36.780, Speaker C: And so this is why this is a subset or included in the broader set of extractable value from an entity that has the most permissionless power of a transaction ordering. This is what we're working on at Flashbots in the sense where as you can see, this extremely high gas prices actually influence the whole Ethereum network because it pushes gas prices up for everyone else and that's problematic. And generally we are working on reducing the extraction costs and this takes many dimensions which is beyond the scope of this talk, but kind of gives you an intuition for what mev is. And Tomas is now going to talk about what Flash vault is and also how mev might work after the merge.
00:13:39.760 - 00:14:45.030, Speaker B: So if you think how it was before miners could potentially extract the Mev by themselves or maybe through some private arrangements, what flashboards delivers is a more democratized way of doing it, more decentralized way of doing it, so everybody can become a searcher. And you have assumption that there's lots and lots of searchers looking for those arbitrage opportunities. You can call them Arbitrage or Sequidators or depending on the strategies that they follow, they may follow all of those, depending on the circumstances. And Flashbots deliver an Mev relay, which is sitting there between the searchers and mining pools and provides the searchers with the direct lines to practically at the moment, 58% of the hash rates that is available on Ethereum. So you really have a way of ensuring that you can sense the set of transactions and they will be included very soon in one of the blocks. Like there is a big chance that these mining pools were included and.
00:14:48.120 - 00:14:48.484, Speaker C: Just.
00:14:48.522 - 00:16:05.980, Speaker B: One moment, okay, so what are the types of bundles that the searchers discover and send? So they may find a strategy to some kind of liquidations or sandwiching or white hat transactions that can be delivered directly to the miners or toast transactions. All of them always include the payment to the miner. That payment to the miner does not necessarily go through the transaction fees, but by discovering the coinbase value, you know the address of the miner that you're paying to. So you can make a payment through the smart contract or directly by including the transaction to that miner. And all of those are used by the miners to assign scores to various bundles and pick the one that is providing the miner the biggest profit. So it creates this separate fast line for execution in front of all the other transactions from the Mempool and causes all the searchers to only compete for the tip paid to the miner between themselves and not causing the entire network to compete with them. And potentially it has this opportunity of decreasing the guest prices for the entire network.
00:16:05.980 - 00:17:45.644, Speaker B: And all the blocks that will be created by Flashbots participating mining pools will have those bundles in front, in front of all the vanilla transactions from the Mempool and might be Zero One or a bit more bundles if the bundle merging is included. And the big question appears whether it's still possible in Serum Two after the merge. So what changes really based on what we described in the merge minimum spec and how we plan that the Ethereum One will go forward. So, if you think about the current flow where you have a searcher sending bundles to relay, then the relay sending that to the miners or mining pools, and then those blocks being published on the chain, so published to the network and then included on the chain if they win the proof of work. So what happens now is we practically keep Ethereum One Nodes being responsible for transaction sequencing and they can still expose those endpoints to allow searchers to contact them and suggest reordering transactions deliver the private bundles. It's just that the searchers are still sending that to relay and then it's the Validator that receives the information about the bundles and the Validator connects with the Ethereum One Node. And when asking for this block assembly, it can ask it to create that block with specific bundles included, so that bundle delivery between Validator and Ethereum One node happens.
00:17:45.644 - 00:18:42.430, Speaker B: And then again, the Beacon Chain is used for block proposals and attestation. So that block is being propagated with the mev included. So this really still exists in Ethereum Two. And when you think about this value that exists at the moment on Ethereum One, we see that on average for the blocks that include Mev bundles, the miners will make additional zero point 18 if for every block which includes a bundle. And those numbers may change because it's still based mostly on the early versions of the Flashbots. So we can expect that this number will be much bigger, even like anecdotally twice as big. And now I think Alex will continue with more numbers and how these numbers actually operate within the context of Ethereum Two.
00:18:43.620 - 00:19:37.552, Speaker C: Thank you, Thomas. Indeed. So why we've chosen that train of thought in our presentation is because ultimately the interesting bit is, should mev exist in East Two as it exists in East One, how will that impact the yields that Validators hope to make because they are the ultimate block proposals after the merge, as Tomaz has mentioned. And this is something that people have been wondering about recently, as you can see. On the right, like Cyrus was talking about, something very similar in .3. And on the left, Justin was thinking about the impact on Validator yields, not from Mev specifically, but from transaction fees, which we expect Validators to make on top of the protocol mandated yields for good behavior. And so these are important questions.
00:19:37.552 - 00:20:53.396, Speaker C: And so we thought let's run the numbers. Yes, running the numbers. And as Tomaz mentioned earlier, we have numbers on Mev not only from our quantification that I mentioned earlier, the Dashboard Mev Explorer, but also from Flashbolts, from the activity on Flashbolts itself. And because we have significant amount of the Ethereum network running Flashbolts and also significant amount of traders or searchers on the other side submitting transactions to Flashbolts and actual value going through, we can use this as a proxy or a low bound for the value that validators can make from mev at least from running Mev enabled client like Flashbots mev GEF. And so the core assumptions we're making in the numbers is, as Thomas mentioned, zero point 80 per flashbolts block as well as the probability of blocks that are flashbots blocks, which is 52% from our data. Again. And these numbers, I mean, we're kind of going through this model using Pintel's amazing article on Beacon Chain validator rewards and the modeling that they have done there and the Python code that they shared.
00:20:53.396 - 00:21:35.024, Speaker C: So we've modified their Python code to actually reason about mev enabled Validator rewards versus the non Mev validator rewards. And there's some limitations to our approach that are mentioned here. First, we're not accounting for transaction fees like was mentioned in Justin's tweet. Before flashbots data. However, the activity that's on Flashbots is still a few months old. And we expect as adoption grows and also as people become more sophisticated, this number will change. And ultimately, what Tomaz mentioned, some of the current infrastructure limits the amount of ETH per flashbox block, and this is set to change very shortly.
00:21:35.024 - 00:22:41.340, Speaker C: And so again, take these numbers with a grain of salt and it's more to get an intuition for this and also thanks to the people that have contributed to running these numbers. So Tarush, Vimulapali, and also Terrence and Ruhl from Prismatic labs. All right, so now getting into numbers, we first start with the ideal case. And the ideal case here is a case where all validators behave perfectly on E two or after the merge. By this we mean there's 100% uptime and 100% participation. And this is also the ideal case because we look at a long enough time range where we don't have to necessarily think between the Beacon Block proposal reward and the general validator reward. And we can mix both together because on a long enough time range, each validator can expect to as many blocks on average, right? And so as you can see on this graph, the blue line is the ideal validator yield reward without mev.
00:22:41.340 - 00:23:34.648, Speaker C: And this reward decreases with the number of validators, of course. And then the orange line is the same reward with mev. And the blue dotted line that you see is the current number of validators we have, which is about 120,000 validators for an equivalent of about 4 million E staked. And so at the current amount, as is written below, at the current amount of validators, 120,000 mev boosts validator yields by 17.9%. And so that's an implied Apr of 14.5% instead of 8.49. So that's really significant, especially given that when we compare the impact of Mev on minor revenue in the current system, the ETH One system with Flashbaults, we're looking at something of a five to 7% increase in revenue.
00:23:34.648 - 00:24:34.604, Speaker C: Whereas here we're talking about something a lot more meaningful. And that has implications, not only implications that are mentioned by Justin in terms of the security of ethereum, but other implications that we'll mention briefly after another case that we looked at. Again, this is all following Pintel's approach is a perfect validator on an imperfect network. So in that case, we're looking at a validator who behaves perfectly, but the other validators in the network might not behave perfectly. And this is modeled by the participation rate of the overall network. So that's the P that you see here and the way rewards and penalties are set up on E Two or sorry, after the merge is that even if you as a validator behave perfectly, you are influenced by the behavior of other validators. And so Pintel computed by how much your rewards fall.
00:24:34.604 - 00:25:13.324, Speaker C: If you're a perfect validator and imperfect network, you can see these numbers on the left. And then if you look at these numbers now with Mev, you can see these numbers falling as well. And so the kind of takeaway from this is with mev, a validator yield falls less quickly than without. It given different levels of participation for the network and given, again, perfect validator. Again, another interesting takeaway from it. And the last kind of case that we modeled, again based on Pintail's own modeling, is an imperfect validator on a perfect network. So we're kind of switching things around.
00:25:13.324 - 00:25:56.680, Speaker C: In that case, the validator is not doing the most amazing job, but the whole network is. And this is modeled between these two graphs. And so on the left you have Pintails. And so what Pintel found is that for a validator to receive a net positive reward, the minimum uptime that's required of them is about 43%. And that's what's charted here in the kind of meeting of all these lines for different number of validators. Now, if we add mev to that, the actual uptime required, so it's slightly different by the number of validators, but it's about 27%. So what's required of validators in terms of uptime has decreased, thanks to mev.
00:25:56.680 - 00:26:57.870, Speaker C: Again, whether that's good or bad is something that we need to think about more deeply, but is definitely important. Let me delete that as well. All right, so the numbers, I guess a quick summary is mev boost validatory yield significantly. And so as Justin says in the tweet that I mentioned earlier, more yield means more validators, means more security. So that's probably a good thing. However, given the difference between minor revenue that's enabled by flashball so this 5% increase in revenue versus here something that's much higher intuitively, even though we have to run the numbers even better, it's even more important for mev to be extracted in a democratic fashion. Because, as is mentioned in Phil's post, this is what mev what do stands for.
00:26:57.870 - 00:27:50.220, Speaker C: It will create a stronger divide between the validators who extract mev and the ones who don't. And that's very important. Similarly, as we saw in the other numbers, mev decreases the impact of our validators uptime on a validator rewards, and mev decreases the lower bound on uptime necessary for validator to make a net positive reward. The second bullet point is something that we took out. So ignore that for now. And in terms of next steps for all this modeling, we definitely want to model the inflation that's caused by the base fee burn in the IP 1559, as well as the transaction fees validators can expect in a post, the IP 1559 world. And we want to include them in those results because the impact of mev is currently overstated because fees will also play a part in validator yield.
00:27:50.220 - 00:28:35.310, Speaker C: And that's what Justin showed. Similarly, we want to chart mev enabled validator yield at different levels of participation and uptime. So imperfect validator and an imperfect network, which is something that Pintail charted and that we want to do more work on, and I guess we want to release all this work shortly. And the code behind these numbers as well, so that other people can play with them. So these are kind of next steps related to that. So this gives maybe a little bit more intuition around the numbers, but there are other aspects to mev and E Two that are important to consider. The first one, actually, Tomaza Fusion, thank you.
00:28:35.310 - 00:29:43.356, Speaker C: The first one is that there are new actors that emerge in E Two. And this is important to keep in mind when you think about mev and the landscape around it. One of these actors are these kind of metapools, in a way. So if you compare them to Ethereum One, you have miners and mining pools and that's kind of the dynamic that stops there. Here you have validators validator pools and aggregators of validator pools that offer services on top, such as Lido, that offers staking derivatives, where they connect to several validator pools that you can see below, right? Staking Facilities chorus suratus One And this is interesting because it will shape the mev landscape via soft power, because Lido will have a lot of staking volume involved and they'll be able to have a say in how mev is extracted and also the profit sharing between validator pools and ultimately validators themselves. So I think it's an important thing to keep in mind. The other important thing to keep in mind when you kind of start building a mental model around mevnis too, is the new players that emerge, specifically exchanges.
00:29:43.356 - 00:30:19.390, Speaker C: Right? And so if you look at the Ethan deposit addresses this is taking from Beacon Chain, you can see that Kraken binance are very large chunks of validator power. And this is interesting because exchanges are not solely in the validator business and they also have other regulatory requirements that might influence the type of MV activity they take part in. And this is important to keep in mind. That's pretty much it. So, yeah, looking ahead, Tomas, I'll give it back to you.
00:30:19.760 - 00:31:22.732, Speaker B: Yeah. So soon you'll be able to also play with this mev construction within our deployment of Ryanis. So with that Nethermind packages that you're downloading, I think mid next week, ukash is delivering now for Nethermind the mev bundles within this Ryanism exercise and coming back to how the environment will look after the mev in Ethereum One. Ethereum Two. So I think that there might be some quite interesting questions. Does the market appear because the big validator pools will be actually able to run their own mev operations and maybe start offering to the pool participants information about what fees they charge for this quality of the mev and what their returns are. So it's almost like you'd be comparing that, like some funds or pension funds, exchange traded funds, whatever, you'll be looking at those numbers is what quality of the financial activity.
00:31:22.732 - 00:32:07.424, Speaker B: This extraction of value happens on the pool that you join. On the other hand, it's like ethereum. One node operators may start acting as this Mev managers and say that they are providing those quality solutions to maybe smaller validator pools or some independent validators here. That's a good question to ask. It might be less likely because the independent validators may not follow the privacy requirements for the bundles that are included in the Mev blocks. And this second thing may potentially lead to independent and solar validators to be disadvantaged because of not being able to capture the Mev. I think it still remains a bit vague of how exactly those markets will look.
00:32:07.424 - 00:32:35.850, Speaker B: So, great set of open questions to see how that market evolves and a few others that we'll probably won't really discuss as we're running out of time. But we just want to leave them open here and leave them for you to follow, to follow the links, explore the opportunities. I think that's what we've prepared for today, right? There's no other slides even. Are we perfectly time?
00:32:37.900 - 00:32:56.712, Speaker C: We're on time. Yeah. I guess there's just the last slide to mention. There you go. There's definitely an open conversation that we're trying to have. And as I mentioned, these are early numbers and we want to talk more about this. So Flashbots has regular community calls.
00:32:56.712 - 00:33:16.228, Speaker C: We call me V Roast and we're going to have one soon to talk about ETH two and layer two. And we also have a research arm to what we're doing and we definitely want to dive deeper into many of these open questions. And so join us and then on the Nethermind front, yeah, make sure that.
00:33:16.234 - 00:33:31.252, Speaker B: You play with the DevNet. Make sure that my core developers feel the chase of the users. So thank you so much everyone. Thank you for invitation to Global. Thank you cardi.
00:33:31.396 - 00:33:57.924, Speaker A: Alex, thank you so much. I know we are right on time, so I'll just maybe do one question. There's a lot of chat on the timelines, which I guess I won't go into right now on shipping this. But the one question I want to ask here is it's for both of you? And just the question is right now you have to send your Mev transaction to three pools that are available. With more Validators coming on, do you think it'll be harder to get into the next Validator as a transaction or.
00:33:57.962 - 00:34:39.730, Speaker B: What does that world look like? I think that the way the Flashbot is organized is the Flashbots deliver those solutions to be able to connect the searchers with the miners. And in the future you'll have Flashbots or other operators delivering the same kind of matching of the validators with the searchers. So this way you won't have to discover those Validators that will be having the majority of the network. You'll be able to get to that pools. And also I think as Alex was saying. There'll be some of this kind of meta pooling which will also route the bundles to the validators. Alex, do you want to add anything?
00:34:40.660 - 00:35:29.790, Speaker C: No, that sounds good. I mean, I will say this is something we want to explore more. I think there's like mechanics, there the economics of it that are still things that we have a good idea on and theoretically it makes sense. But as we've seen with what we've been building so far, there's many points where that breaks and we have to see how things change. And so partly what Tomas mentioned, right, like at Rayonism, to kind of maybe experiment with that with the dev testnet could be for us, a good way to understand that better. And also, as I mentioned before, it's not only the technical factors, but also the maybe softer factors that are going to exert pressure into how this is going to work and how revenue might be split. And so these are all kind of nested questions.
00:35:30.480 - 00:35:31.036, Speaker B: Absolutely.
00:35:31.138 - 00:35:38.736, Speaker A: Well, thank you so much for sharing your insights. And thanks again for for giving this amazing talk. We have a lot of excitement that everybody's thanking you on our chat.
00:35:38.768 - 00:35:39.730, Speaker B: So hope to see you there.
