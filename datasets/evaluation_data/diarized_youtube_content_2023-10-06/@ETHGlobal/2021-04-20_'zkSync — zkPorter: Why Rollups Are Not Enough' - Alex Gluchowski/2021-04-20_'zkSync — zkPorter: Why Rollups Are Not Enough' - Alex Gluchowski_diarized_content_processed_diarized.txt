00:00:00.250 - 00:00:45.290, Speaker A: You. Hi everyone, and welcome to the Talk About ZK Porter Why Roll Ups are Not Enough, where we're going to talk about scalability on L2 and discuss some of the predictions of what we're going to expect this summer and beyond that. My name is Alex Guihovsky. I am CEO and co founder of Matterlabs and one of the co creators of ZK Sync, which is the first EVM compatible ZK rollup. ZK rollups are one of the promising way to scale Ethereum, and there is a kind of consensus in the community that roll ups are the way to go. Ethereum embraced the rollup centric roadmap. There are two roll up families, optimistic and ZK.
00:00:45.290 - 00:01:48.238, Speaker A: There is kind of also a consensus that ZK is a superior technology, which is going to be the end game of scaling because it has a number of properties which make it outstanding from everything else, including optimistic roll ups. Specifically, compared to optimistic roll ups, it's more scalable. If we assume roll ups using true EVM compatibility with ecgsa signatures, single round fraud proofs ZK is going to be a lot better. It has a much stronger security than optimistic roll ups. Optimistic roll ups rely on some pretty strong assumptions about security, whereas ZT roll ups offer exactly the same security guarantees as layer One, of course, giving the bug free implementation. But that's true for all systems and they are a lot more usable in different regards. Most importantly, the finality is short.
00:01:48.238 - 00:02:37.786, Speaker A: Finality of ZK roll ups can be reached within minutes. And this means you can withdraw from L2 to L One or to a different L2 within minutes, and you don't have to wait one week or more, as is the case in Plasma and optimistic roll ups, which is very important, especially for periods of high price volatility for many traders. Also, ZK roll ups are actually a more proven technology. They are in production since one year. We launched ZK Sync one point X in June 2020. However, the roll ups which were in production for this year were all application specific. So we were able to test the basic technology and basic R and D behind the tech and make sure that it's secure.
00:02:37.786 - 00:04:00.078, Speaker A: But the engineering necessary to build the generic programmability and EVM compatible ZK roll ups were not there back then and it took a couple of breakthroughs throughout the last year to come to this. So we will probably launch into production around August, whereas there might be some optimistic roll ups that launch earlier. So the question is, should you wait for Zkvm or should you just launch with whatever is available today? So let's explore this question and let's first look at what our scaling expectations are on roll ups in general. So we all hope that roll ups will bring us alleviation of the high gas prices that we have, that all the users are going to jump on roll ups on L two immediately and we're just going to get 100 x cheaper transactions. Whereas I think realistically, the reality is going to be slightly more complex. Specifically, if we look back at what happened with ZQ Roll ups, big players were kind of hesitant for a while embracing them. Because it's a new technology, it has to be proven.
00:04:00.078 - 00:04:36.306, Speaker A: It's going to be the same with all EVM compatible roll ups. It will take some time to gain trust. And we'll probably see big money on L One still staying in L One protocols for a while because they offer the most security. You're not going to move $1 billion immediately of your own money into some new L2. Sorry. However, we're going to see a lot of smaller users who are more risk friendly and who will immediately move into L2 S. And we see this happening already with Plasma, with side chains, even with other layer ones.
00:04:36.306 - 00:06:13.246, Speaker A: And what I think is going to happen is a lot of those users are coming back to Ethereum, to the proper Ethereum solution, which is roll ups, but they will also bring a lot of new users from outside because the fees will get lower and it's just going to become more affordable. So we have an influx of new users which are currently not using L One, an influx of new use cases such as NFTs, which is just going to explode on the roll ups and probably some new, more interesting scenarios. And we're going to have a lot more trading because the trading, if the fees are lower, there are a lot more transactions that you can make that will be profitable for you as a trader. Trading is going to explode and intensify. So what we will likely see is lots of these new users and aggressive trading and new use cases all going to create a lot of pressure on Ethereum network through these layer two solutions which all compete with each other for the bandwidth of Ethereum blocks. So we will likely see similar situation to what happened over the past year on Mainet, where the gas fees grew quadratically proportional to the number of users. So if we get ten x, 100 x thousand x more users on L2, the prices are going to be likely like rising.
00:06:13.246 - 00:06:54.478, Speaker A: So right now, a single uniswap trade on a roll up would cost something around one dollars. You can imagine if this number goes up ten x, 20 x, 50 x, we're kind of going to come back to where we are now or where we were half a year ago. So there will be a whole class of users who are excluded again from the economy and this is not cool. So they are all going to going back to side chains or other L ones, which we want to prevent. We want them to stay within the Ethereum ecosystem. So what can we do about this? With ZK Sync 2.0, we're going to introduce this new solution called ZK Porter.
00:06:54.478 - 00:07:31.562, Speaker A: It falls under the class of volution systems and it's based on ZK rollup. It's very similar to ZK rollup with a key distinction. In ZK Porter you will have accounts of two types. The first type is Ziki rollup accounts which have all the properties of Ziki rollup. You get the security of a layer one and you get the price of Ziki rollups. Second type of account is Ziki Porter accounts and they will be similar in all regards. They will be like from a user perspective, they're going to be exactly the same.
00:07:31.562 - 00:08:13.286, Speaker A: You can interact with other Ziki Porter accounts. With Ziki Rollup accounts the entire system is transparent it's a single shared address space and liquidity space. But ZK roll up accounts are going to be just a lot cheaper by two orders of magnitude in exchange for slightly lower security. Actually for significantly lower security, but they are still going to be pretty secure. So let's deep dive into how this works and to explain how Ziki Porter works. Let me start by explaining how a ZK rollup works in the first place. So with Ziki rollup the state is held off chain represented as a merkel tree.
00:08:13.286 - 00:09:26.206, Speaker A: The leaves of this merkel tree are Zkolap accounts and we have a root hash which represents a cryptographic commitment to the state. So this root hash is stored on the smart contract on Ethereum. And whenever we have a block that contains a number of transactions that updates the state of some of the Zkroll up accounts, some of these leaves will change. And necessarily, the root hash of the entire tree will also change. And we will have to submit it to the smart contract along with the proof of validity of this block. So this is a snark, it's your knowledge proof that verifies that every transaction in the block has been correctly done so that it has a valid signature, that all the rules of these transactions were enforced and so on. So we submit it there and the contract will check the proof and if the proof is valid then it will update the storage slot which holds the state route and we'll get the new state route.
00:09:26.206 - 00:10:26.898, Speaker A: So we just do one storage as store on Ethereum for arbitrarily many transactions which gives us scaling. However, in ZQ rollup these your knowledge proofs can only guarantee the validity of the state but not the data is available. So you, as a user, if you want to rely on yourself and not on the operators of Azkurolap, you should be able to prove to the Ethereum contract at any time that you own some assets in one of these accounts. And to do this, you will need to provide a merkel path of your account. And to do this, you necessarily need to know all of the state details of all the accounts. But they are not stored on the smart contract. So how do you get them for this? We will publish the state updates to the Ethereum network as call data.
00:10:26.898 - 00:11:41.142, Speaker A: So we're not going to use the storage but instead we're going to send like whenever some of the accounts change in the block we will send what changed or the final state of those accounts as a part of transaction which will be propagated to the entire network to all the full nodes of Ethereum. And this will guarantee that all the users have access to this data if the operators withhold it users will be able to get it from Ethereum network and Snark or proof of validity will also ensure that the data that we publish actually corresponds to the state transition. So the Ethereum smart contract will have to actually make a hash of the state updates and check it with the Snark. So it guarantees that the data is available through the Ethereum network but it also comes with the limitation that we only have the block size limit which is the bottleneck of throughput. Right. So okay, to overcome this bottleneck yeah. It's important to note that it gives us the same security guarantees as everyone.
00:11:41.142 - 00:12:36.622, Speaker A: So it's the only layer two solution which has the same security properties. Because no matter what happens to the operator, no matter what malicious actors might try to do, you can always just go away for a year, come back and be sure that you will be able to fetch your funds and get them back to alone. Okay, so now we want to scale that. So we want to augment it with the ZK Porter accounts. How do we do this? It's actually pretty easy. We just select a subtree of Zke Rollup and we say okay, the accounts in this subtree are going to be ZK. We're going to consider them ZK Porter accounts and the only difference of this account is going to be that we are not publishing the state updates as call data to Ethereum which is going to ignore it.
00:12:36.622 - 00:14:16.350, Speaker A: Only the ZK roll up accounts are going to go to Ethereum as state updates and the ZK Porter root hash will also go to Ethereum. So this will ensure that no matter what changes in the ZK Porter accounts the users of ZK Rollup will be able to reconstruct their state because they will know all the blue points here and this one blue point so it gives them all necessary data to construct the merkel proof for their accounts. Now, what happens to the data availability of ZK Porter? We will publish it but to a different network comprised of what we call guardians guardians are Zksync token holders who will store the data on behalf of users. They will get rewarded with some small fees and they will provide the data to the ZK Porter users and they need to sign every single block with two thirds or like with supermajority of their signatures weighted by stake so two thirds of the stake has to sign the state update. Only then will the Ethereum smart contract take the state update which will mean that at least two thirds of guardians by stake know all the details of this block. Okay? So as you can see, the ZK Rollab security is not affected. But let's consider what happens to the security of ZK Porter accounts.
00:14:16.350 - 00:15:21.314, Speaker A: How is this different? So since we are still in the same system, which is based on ZK Rollup, and we send the proof of validity for the entire block which contains all the transactions for all accounts, it protects us against theft, forgery of any assets and any sort of state corruption whatsoever. All the rules of blockchain are going to be enforced by zero knowledge proofs. So operators can never steal, can never do anything wrong with the state, mess with the state. What they can do is a couple of scenarios. One thing that can go wrong is that the guardians like at least one third plus one guardians are malicious in which case they will just block. Like they will halt the block production. There will be no operation of the system, which is kind of like what you get with any L.
00:15:21.314 - 00:16:01.086, Speaker A: Two, if the operators are not cooperative, then there will be no blocks. It's not a tragic event because you can always go and withdraw funds from ZK Porter through some forced exit mechanism which we're going to discuss. We will have a talk about Zke EVM in a couple of weeks from now on ZK summit held by It Global. And I invite you to this talk. We're going to talk about priority queue, how things work, how security is insured. But long story short, you will be able to exit and we will even have a mechanism for mass exit to a fork of Zksync. So it's not such a big deal.
00:16:01.086 - 00:16:48.986, Speaker A: It's going to be just short disruption where a lot of stake is going to be lost because the stake is going to be frozen then. But a more severe situation would happen if we had one, two thirds of malicious actors, then they could actually freeze the entire ZK Porter account state. So the ZK roll up accounts would be able to withdraw but not ZK Porter accounts. However, in this case the attackers would also freeze their own stake which would be at least two thirds of the total staked token which is going to be a pretty large value. So this is an unlikely situation. The attackers have no incentive to do this because they cannot directly exploit it. If they freeze the state, it's just a suicidal attempt.
00:16:48.986 - 00:17:42.560, Speaker A: For them it's a suicide because they cannot steal, they cannot do anything with the funds of users. So it can only be done for some weird political reasons, but it will be very costly. So for the same weird political reasons you can attack optimistic roll up at a probably lower cost. So the cost of attack on optimistic roll ups and on Ziki Porter is roughly comparable. Some researchers might disagree with me, but if someone really wants to mess with the system they will have to spend a lot of money and they will be able to mess with the system. So it's not the same security guarantees as Ethereum. However, the beauty of Ziki Porter or of this volution hybrid design is that every user is free to choose the option.
00:17:42.560 - 00:18:33.790, Speaker A: Every user can select the ZK roll up account, pay higher fees and get full security or go with the ZK Porter, which offers pretty high security but is extremely cheap. So let's look at scalability properties of both systems. With ZK roll up we're limited by Ethereum block capacity, which would be like 2000 transactions per second, 2000 transfers per second because all transactions are different. But let's measure everything with transfers. If we consume the entire Ethereum block, which is unrealistic because all roll ups are going to compete for the block space with each other and with all L One transactions. So we're probably going to have only small part of that. And the same applies to all roll ups.
00:18:33.790 - 00:19:24.830, Speaker A: But on the ZK portrait side we're not limited by Ethereum at all. We might be only limited by our hardware and by the capacity of the consensus and L2 which will probably get us to 20,000 TPS and more. And there are ways to push the limit further. So the throughput is going to be a lot more which will lead to the price of the transaction on Ziki Porter accounts being roughly around $0.01, maybe less. It's going to be more or less fixed until we reach the super high levels of throughput. Whereas with Ziki roll up accounts it's always going to be linear compared to the main net costs which are roughly 100 of transactions on Mainet.
00:19:24.830 - 00:20:42.890, Speaker A: So if the gas prices are rising, the Ziki roll up transaction costs will also rise. But what's interesting, the most exciting part about Ziki Porter is that you can have interoperability between these two parts, between the two account types, completely seamlessly, because it's exactly the same system, it shares the address space, it's the same state. And Zkey Porter users will be able to access DeFi protocols on the ZK roll up side, which are super secure, which can hold billions of dollars in the same secure way as l one. And these millions of ZK Porter users will be able to access them at a very low cost. And the reason this works is because we only need to submit the final state of a ZK roll up account at the end of the block. So if in one block we have 1000 uniswap trades from hundreds or thousands of users, 1000 users or less, the updates for their accounts will go to the guardians. So they're going to be cheap.
00:20:42.890 - 00:21:45.774, Speaker A: But for the uniswap we will need to only publish one update on chain on Ethereum, which will only cost us like one ZQ roll up transaction, which will be amortized across all these thousand swaps. So each of the users will pay some very small fraction, maybe ten cent, maybe five cent. It depends on the ZK roll up prices, but it's going to be a lot, a lot less. So you're still interacting with the same big uniswap or balancer or compound or avi or curve as all the whales and all the lending partners enjoying the full security there. So you have access to the main liquidity channel, but you're paying the cost of a very cheap side chain and you still get very high security, a lot better than a side chain, actually comparable to optimistic Roll ups. So this is a breakthrough. Okay, let's move on.
00:21:45.774 - 00:22:20.970, Speaker A: Yeah. It's important to know that Optimistic Roll Ups cannot have such an extension because for an optimistic roll ups, they need to know the full data availability of all the accounts that are part of a block. You can't really hide part of them with Ziki rollup. With ZK Porter, we can't hide part of them because they're still part of a zero knowledge proof. So the validity is insured by zero knowledge proof. But for optimistic roll up, the validators, the full nodes have to actually check every single transaction. So they can't do this.
00:22:20.970 - 00:23:05.480, Speaker A: It's not as extendable. So, yeah, the big question is when all of this is going to be available. We expect the Ezk EVM testnet in May this year to go. Like, we will open it to the public and we are targeting August as the main net launch date. But before then, we also have an interesting update. We will have swaps and NFTs on main net of Zksync one point X in May this year as well. So encourage you to check out our documentation or contact us and we're happy to talk to you and go in details on this.
00:23:05.480 - 00:23:20.330, Speaker A: I encourage you to look deeper into this and ask any questions. We're also happy to provide assistance anytime. Thank you very much. Follow us on Twitter.
