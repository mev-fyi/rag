00:00:00.490 - 00:00:39.850, Speaker A: Next up we have David from Synthetix and I guess just a little tidbit about synthetics. They're probably one of the most innovative teams and DApps in the space. So not only in being one of the first DeFi derivatives platforms and now also being the first implementation on optimistic rollups, synthetix has also pioneered a really unique community dao system. So I'm not sure how many people are aware of the Spartan Council and how a lot of the really excellent work coming out of the synthetics community, like the logos are actually part of the Dow's purview. So really excited to hear more from David about how you guys are thinking about layer two scalability.
00:00:41.390 - 00:01:19.424, Speaker B: Great, thanks so much for having me. So I guess I can go ahead and share my screen. So, yeah, today I'm going to talk a little bit about what we're doing at synthetics around layer two and Ethereum. And then we've actually been one of the first protocols to integrate with optimism. And so pretty excited to share with you some different aspects of where we've been. So one of the things that we get asked a lot is like why did we choose optimism, right? So as far as Ethereum Scaling goes, there's many solutions. It seems like we're hearing about new scaling solutions all the time.
00:01:19.424 - 00:02:07.696, Speaker B: So one of the things that was really important to us was to have one solidity code base. We wanted to avoid rewriting our contracts and then maintaining a set of smart contracts for main net Ethereum layer one and then having contracts for layer two. We wanted them to be the same. And so optimism really gave us that ability, which was huge. The second thing that we really liked was the security and the simplicity of how they're designing their system, right. In decentralized blockchains, the more complexity that you bring into the system, the more risk there is, both from a security perspective and from just business logic, bugs, security bugs, et cetera. And so optimism is trying to fork as much as they can from layer one.
00:02:07.696 - 00:03:06.550, Speaker B: And for example, they have a solidity compiler that's just a 200 lines of code diff between what runs on layer one and then their Get client is like 1000 line diff. So it's a pretty lightweight implementation and they're trying to stay as lightweight as possible. Then I think the last reason is because it's not just about the tech, right? Part of what makes Ethereum special is the community. Where are people going to be moving is kind of what we've tried to get ahead of and figure out. And so we think that most of the community is going to be going the optimism direction and so that's why we've kind of bet on this as our path forward, right? And then if you think about where we anticipate liquidity flowing, that's something we're trying to get ahead of and we want to be where the liquidity is when it moves to l Two. So there's also a social aspect to it. And if you want to learn more about it, kane Warwick, the founder of Synthetics, has a blog post called Why Optimism? That you could check out.
00:03:06.550 - 00:04:00.564, Speaker B: So if I keep moving here some of the features that we're rolling out as part of Synthetics, if you're familiar. What is synthetics. Synthetics is a derivatives trading platform built on Ethereum. So anyone can come on, create synthetic assets that we offer, or sorry, not create, but purchase synthetic assets that we offer and then do things like derivative strategies with them. And so the way that people get value from, or the way that we've created liquidity in the system is through Staking SNX. So people come on, they stake their SNX tokens, which creates liquidity. So then as people trade in and out of synths synthetic assets, right, like we have a synthetic version of Ethereum, synthetic version of Bitcoin, synthetic version of Tesla stock, for example, we're going to be releasing pretty soon a synthetic version of Coinbase stock, so things like that.
00:04:00.564 - 00:05:05.276, Speaker B: The way that the liquidity comes into the system is from staking. And so we're going to look at an example of how we've implemented staking on Optimism main net to provide liquidity for synths on L2. And then on our roadmap coming up, we're going to have exchanging of synths on L two. And then the ultimate goal is to offer leverage for synths, things like shorting synths, futures margin, stuff like that. We'll walk through, let's see an actual kind of walkthrough of the different contracts that we have. So one of the fundamental concepts of if you tuned into the optimism talk, I think it was yesterday, around an introduction to optimism, they talked about the bridge, the bridge contracts to optimism. And so this idea of a bridge, you can think of it as layer one and layer two need to know about each other and need some way of communicating, right? And so what I'm going to do is I'm going to show you our code around the bridge contracts that we have.
00:05:05.276 - 00:06:08.690, Speaker B: And again, the bridge is just basically how do you go from, ERC, 20 tokens on L One and move them over to L2? And then when you want to withdraw, how do you withdraw them from l Two back to l One? And I guess you're not really moving them over, it's more of like a mirror kind of, which we'll look at in a second. And then if you're interested in learning about these contracts, you can find them on our GitHub. So I've included the link here. But if you just go to synthetic IO GitHub and then you look at synthetics, which is our repo, you'll see that the contracts you can find our contracts, and then the two contracts that we actually care about are going to be synthetics bridge to optimism and synthetics bridge to base. And let's go ahead and I'm going to switch over to my code editor so I can show what the actual code looks like. I think the presentation yesterday gave a great overview of how they work at a high level. I'll try to recap as I go along here, but I just want to show you, like, an actual example that's been deployed and is running on main net.
00:06:08.690 - 00:06:18.992, Speaker B: I just want to make sure you can see my code editor. Is there a way someone can just maybe confirm?
00:06:19.136 - 00:06:20.710, Speaker C: Cool. Awesome.
00:06:21.240 - 00:07:07.164, Speaker B: The first kind of thing to think about is, as I mentioned, you could just imagine, like, there's two sides to a bridge, right? On one side we have layer one ethereum, and then on the other side we have layer two ethereum. And they need some mechanism to communicate. So what I'm going to show you is how we're doing that. So the first thing to kind of pay attention to is let's say someone wanted to initiate a deposit to stake on L two. It actually might even be easier to just show you the UI first to kind of see the DAP and then look at the code because I feel like it might give you a sense of what we're trying to do. And I'm actually going to show you an example of how we're going to stake on L two. So you can see right here, I'm on our Staking synthetics IO, which is our DAP.
00:07:07.164 - 00:07:39.100, Speaker B: It's our decentralized application, right? And the front end is built in react. And then we've got the back end built in solidity. So the back end is powered by ethereum. So as you can see here, we have a tab called layer two. So when you come to staking synthetics IO, you go to layer two. And then what you can do is you can deposit SNX and transfer it from layer one to layer two. Right? So what I'm going to do here is you see how I have ten SNX in my wallet, right? So I'm just using MetaMask.
00:07:39.100 - 00:08:05.444, Speaker B: We're just hooked up with MetaMask. For those of you who are familiar, I assume most people are familiar if you're not. This is just a wallet that lets you interact with the ethereum blockchain. And so I'm going to go ahead and I'm going to deposit ten SNX into layer two, right? So when I click on deposit, you can see I've already done the approval. So whenever you're sending ERC 20 token, there's the function. That's called transfer from. That's the function.
00:08:05.444 - 00:08:46.640, Speaker B: And before I'm able to do this, I had to approve that this contract can interact with this ERC 20 token called SNX that's in my wallet. So I'm going to go ahead and deposit ten SNX. Now, you can see the gas fee that I have to pay is quite substantial, right? This really solidifies the need for scaling ethereum and for moving towards layer two solutions. Because once we see me move to layer two and actually do a transaction. You'll see there'll be no gas now, there will eventually be gas. Right now, the Optimism team is just covering the gas. But eventually you'll have gas costs on L2 that will probably be in the ten to 100 times cheaper order of magnitude than what you see on L One.
00:08:46.640 - 00:09:29.692, Speaker B: And one thing to keep in mind is as the gas costs change on L One, they'll also change on L2. So if you have higher gas costs on l One like we do right now, like the gas costs right now are pretty high, you'd have relatively higher gas costs on L2. Then if the gas costs were lower on L One, they'd be a little bit lower on L2. But just remember, right now it looks like I'm going to pay somewhere around $132 for the gas cost to submit this transaction. You can think of like on layer two, you'd probably be paying one dollars, $30 to $13. As a rough estimate, somewhere in that range. It just depends on a number of factors, but the difference between a dollar 30 and $13 and then $130 is quite substantial.
00:09:29.692 - 00:10:04.376, Speaker B: So I'm going to go ahead and confirm my transaction. So now basically what's happening is we are just waiting for the transaction to go through. And just out of the interest of the sake of the demo, I'm going to go ahead and speed up my transaction. So I'm going to actually go ahead and speed it up so that we let's see what is the current why don't we just go to Advanced? And I'll just put in like 250 as my gas price. Oh, it's excessive. Okay, let's go with 200 just to make sure that it goes through. So I'm going to save it now.
00:10:04.376 - 00:10:45.448, Speaker B: It should go through pretty quickly. And what we're going to see is the deposit is going to go through and then we're going to be able to do something on l Two with our funds. Okay, so while it's pending here, I'm going to go back and now maybe we could go back to the code so we can just look at just while we're waiting here, we'll just go ahead and look at the example of what's actually happening in the code as we did that. So let me just share my code editor again. Okay, so the first thing you can see is we're in the Synthetics Bridge to Optimism contract. And again, you can find this on our GitHub by just going to the synthetics repo and then looking at the contracts folder. Okay, so we're in.
00:10:45.448 - 00:11:24.790, Speaker B: Synthetics bridge to Optimism. We've got a couple of things to take note of. The first thing is we're going to have a function called initiate deposit, right? So this is a function that can be called externally, right? So somewhere where I clicked Deposit SNX, remember where I deposited the ten SNX. What it was doing, it was under the hood, it was calling this initiate deposit function. And that takes in an amount. In this case, it was ten SNX, right? And so we have a few things that we're requiring here to make sure that I'm actually able to make this deposit in the interest of time. I'm just going to keep moving.
00:11:24.790 - 00:12:11.888, Speaker B: And so we go into the initiate deposit function. This is a private function, but again, this just gets called by our public initiate deposit function. Here we have our ten S and X we've sent in. Remember how I mentioned you first have to approve a transaction which I had already done before the demo started, but we're using the transfer from function to transfer an ERC 20. So you can see we're transferring an ERC 20 from this call here, gives us an ERC 20 implementation. And so the sender is my wallet address that I was showing you in MetaMask. And what we're doing here is we're sending the ten SNX from me, from my wallet into this smart contract, right? So the SNX is going from message sender, which is my wallet, into synthetics bridge to optimism contract.
00:12:11.888 - 00:13:03.716, Speaker B: And then we have the deposit amount, which is ten, right? So that's the first step. So now we've taken the ten SNX from my wallet and put it in the smart contract. So now it's locked in our L One contract, which is synthetics Bridge to Optimism. So it's locked there. Now what happens? So here you can see we have this synthetics bridge to base interface that we get, right? And remember, synthetics bridge to base is the contract that lives on L2. So what we're saying is we have this interface and now we're going to get the Abi, which is the encoding of how does that contract work, the one that's on L2. And so we're going to say take the interface and then the function we're going to care about that.
00:13:03.716 - 00:13:36.476, Speaker B: We're going to want to call on L2 is called complete deposit. So we're initiating a deposit from L One and we're just saying the function we want to call on L2. Imagine we started here and we walked across the bridge and we went to the other side, which is L2. We're saying call complete deposit, right? And again, we're saying the sender, which was the MetaMask wallet address, that's my address. We're marking that as the sender. So L2 knows who the sender was and then we're sending in the deposit amount. So this builds the abi.
00:13:36.476 - 00:14:35.744, Speaker B: That doesn't actually send the message, right? It's just telling our contract, you need to know what to call on L2. So then what we do is we have this messenger instance. So if we look at what this is doing so if I look at messenger so this is basically the base cross domain messenger contract that was provided to us by optimism, right? So we didn't actually write this base cross domain message. This is part of optimism. And they've also given us basically an Identifier here for what the contract name is. And so here when we're in, remember, initiate deposit, we are basically here calling the function send message on the messenger contract that Optimism has given us. So optimism supplied the messenger and we're saying, hey messenger, send this message across the bridge to layer two with the message data.
00:14:35.744 - 00:15:04.472, Speaker B: And remember, the message data is saying call complete deposit with our address and the deposit amount, right? And so then what's going to happen is we also have to deal with the gas limit. The gas limit on layer two. Optimism currently is 9 million. There's a number of reasons for that. We can probably skip that just because it'll take us down the rabbit hole. But now we're going to go back over. So basically this message, we send the message, right? And so the messenger says, okay, I have to go find the synthetics bridge to base contract.
00:15:04.472 - 00:15:43.220, Speaker B: I have to tell that layer two contract to call complete deposit with the sender and the deposit amount. So now if we go back to synthetics bridge to base, remember, now we're on layer two. Synthetics bridge to base is running on layer two. And remember, we said the function name was called complete deposit, right? You see how this is invoked by the messenger on L two. So now we call complete deposit. We have member of the address was my address message sender, which was the MetaMask address I was using. And then the deposit amount was ten SNX.
00:15:43.220 - 00:16:17.968, Speaker B: Now, here we have a modifier. So if you're familiar with Solidity, this modifier is basically a check that needs to happen. So this runs right and I can explain modifiers. I'm just going to assume some basic level of familiarity with Solidity here. So what really happens here is this little underscore. It represents the code block of the function that's using the modifier. So first, before we run the function that was being used by only optimism bridge, we're going to first call only allow for optimism.
00:16:17.968 - 00:17:26.884, Speaker B: So this is going to do two things, right. This is going to say only the sender has to be the relayer and then the original caller needs to be the bridge to optimism contract. So we're saying if either of those conditions aren't true, that the relayer didn't make the call, which is again like the messenger contract, right, or the synthetics bridge to optimism, the L one contract wasn't the first point of entry, then revert and fail the transaction because we don't want it to go through. Don't call complete deposit. So now, assuming that check has gone through, we'll then proceed to execute the body of the function that's using the modifier. And remember, the modifier is being used by complete deposit, right? So again, what this was saying was first run those checks and then proceed with this code, right? This code gets plugged in where the underscore was. So let's just go back down to where we had only Optimism Bridge.
00:17:26.884 - 00:18:00.284, Speaker B: So you can see we reuse this in a lot of places. That's why we have it as a modifier. Otherwise we could just have those checks directly in the function, right? But anyways, so what happens is this gets replaced for that little underscore that we saw. And then, so we did the checks and now this executes. And so what we're going to do is we're going to mint ten SNX. We deposited ten SNX from l One, right, that's now locked in the synthetics Bridge to Optimism contract, which runs on l One. And then over here, we're going to mint ten SNX.
00:18:00.284 - 00:18:36.144, Speaker B: So now we have a mirror. We have ten SNX locked in our l One contract. And then we have ten SNX we've created on l Two in the synthetics bridge to base, or in the synthetics contract on l Two. So now there's like a mirror between the two, right? And then we'll emit an event that this happened. So now we've got ten on l One that's locked and we have another ten on l Two. And they kind of represent each other, right? So now let's go ahead and think about okay, so we're on l Two, we've got our ten. What if I wanted to withdraw my funds from l two, right? I'll show you what I'm going to do with them in a second.
00:18:36.144 - 00:19:13.464, Speaker B: But what if I wanted to withdraw them, right? What's going to have to happen is on the layer two synthetics bridge to base, right? Remember, synthetics bridge to base runs on l Two. I would kick off an initiate withdrawal. Let's see if I can spell that. Right. So initiate withdrawal. So basically what would happen would be on our l Two DAP, I would click on a button that's like withdraw. It would make me sign the transaction just like you saw before.
00:19:13.464 - 00:19:46.096, Speaker B: And it would call this function Initiate withdraw. And so I'd specify, like, if I wanted to withdraw everything, I would specify ten SNX, right? Because remember, we had ten on l 110 and l Two. So the first thing it's going to do is going to check that I have ten SNX to withdraw. And if I do, okay, so I've got my ten SNX. It's going to burn the SNX on l Two. So now we went from ten to zero. So we had to burn that SNX before it could be withdrawn, because when it goes back to l One, you can't have both existing.
00:19:46.096 - 00:20:18.408, Speaker B: Otherwise we will have created money out of thin air. They have to be kind of like in sync. So we burnt the ten SNX and l Two. And remember, burning is just like destroying, right? Minting is like issuing. So in the previous example we issued, now we're destroying and so then we do the same thing that we did when we were coming from l One to l Two, but just vice versa. So we say, okay, give me the abi for the function that should run on l One, and that's going to be complete withdrawal. And remember, complete withdrawal is going to live on l One.
00:20:18.408 - 00:20:50.248, Speaker B: So that's going to be in the Synthetics Bridge to Optimism contract, which runs on l One. We're going to send in the sender, right? So we're sending in again, my address as the sender and the amount I'm withdrawing, which is ten. And so then what happens is we do the same thing. We take the Optimism supplied messenger contract. We relay the messenger or we relay the message by calling send message. But this time we're calling to Synthetics Bridge to Optimism, which runs on l One. We have our Abi that says Call complete withdrawal with these arguments, message, sender and amount.
00:20:50.248 - 00:21:45.032, Speaker B: And then we have to specify the gas limit. We have to abide by that 9 million gas limit. And so now what's going to happen is this gets sent, we emit the event, but what happens is we go back to Synthetic Bridge to Optimism, and now we need to call complete withdrawal. All right, so we're here, we've called this from layer two on my address that was in MetaMask and then the amount which was ten SNX. We have another modifier here which was require active. I think we've already looked at what modifiers do, but just know that there's a check there that happens, right? And then again, we make sure that the relayer is calling this and we make sure that the synthetic bridge to base was the original caller, so to speak, which means that it came from our l Two contract. And then what do we do? We transfer the ten SNX from the smart contract.
00:21:45.032 - 00:22:18.500, Speaker B: Remember how we locked the SNX in the smart contract in basically like step one when it went from my wallet into l One's contract locked. Now we're basically unlocking it. We're saying take it from the smart contract, send it back to the original user or the original sender with the amount, and that's it. That we just completed the withdrawal. So this is the bridge, right? They have to kind of be in sync. And I think just looking at a real world example hopefully would be pretty helpful. So now that we've covered that, I'm just going to jump back into Chrome here.
00:22:18.500 - 00:23:00.336, Speaker B: You can see how the deposit went through. Like, if we open up, let's see, might have ended my screen share there. So let me go back in here so we can see that there was success. We deposited ten SNX from my wallet on l One onto l Two. We paid $210 in gas, which is just insane, right? And that's part of the reason why we're so excited about moving over to Optimism. Because, again, in this type of transaction, if it occurred on l Two, again, withdrawals, I don't know. But if you were just sending money from l Two to l Two, like an l Two address to an l Two address, you might be anywhere from $2.10
00:23:00.336 - 00:23:33.710, Speaker B: to, like, $21. Again, that's just a broad kind of range, but just to show some expectations there of what to expect over time. And so now if we go back to the DAP, right, let me just go ahead and refresh here, just see if it's updated. So now what I'm going to do is you see how I have now zero SNX. That's because I sent it to l Two. So if you look at my account here, we look at my assets, I now have zero SNX. And now you see how we have this switch to l Two button here.
00:23:33.710 - 00:24:05.544, Speaker B: So this is like, again, this might even give you a good sense of how to as you're building DApps that integrate with L2. From a user experience standpoint, like, how do you manage going from layer one to layer two? We put a lot of time into thinking through how should the experience go. So now I'm going to go ahead and switch to layer two. This is going to bring up my MetaMask. Hopefully, you can see that. And you see how we have Optimism main net as the selector, as the network that's being selected. So I'm going to switch to that network now that I'm on Optimism l Two.
00:24:05.544 - 00:24:44.576, Speaker B: You can see I'm on l Two staking our layer two DAP, right? If I open my MetaMask, you can see I'm on the Optimism main net account. And then you can see there's also an Optimism Covan testnet that we have. But right now we're actually on main net. And so then if I come down here, I can mint SUSD with my staked SNX. You see how I have ten SNX? I've staked, right? So we're going to go ahead and mint $35.12 in SUSD. And again, because of the collateral ratio, that's all the SUSD I can mint.
00:24:44.576 - 00:25:20.130, Speaker B: Again, this is the thing that's specific to synthetics. So when you go on synthetics, when you stake your SNX, you have to have 500% collateral ratio compared to or it looks like 600% compared to what you can actually mint. So I can only mint like I have to 600% more than what I can mint. So here I can mint 34 95. So I'm going ahead and click mint USD. So that's going to bring up here. And you can see how the gas is zero, right? That's currently because the Optimism team is covering the gas costs on main net.
00:25:20.130 - 00:25:44.984, Speaker B: Again, this will change. Normally, maybe this would cost me like a couple of dollars, like very cheap, right, or relatively inexpensive. So I'm going to confirm the transaction. Look how fast that was. It was like basically instant, right? We now have $209 staked, right? Because that was my ten SNX 209. And then I've got active debt of 34 95, and my collateral ratio is 600%. Right.
00:25:44.984 - 00:26:09.650, Speaker B: So I'm right where I want to be. And you saw how instant it was. It's like, so exciting to see Ethereum transactions that fast. And so, yeah, that's pretty much it. I mean, that's the demo. We talked about the bridge contracts kind of coming back to the presentation for a second and then I'll try to wrap up because I know not sure exactly how long I'm supposed to be here for. I could be here all day if you wanted me to.
00:26:09.650 - 00:26:56.088, Speaker B: But yeah. So we talked about the bridge, we looked at the demo if you're interested in some good resources. These were really helpful for me as I started to get ramped up on Optimism and layer two and roll ups. Georgios Constantopoulos has a couple great resources, so almost everything you need to know about optimistic roll ups and how does Optimism roll up really work. The first one is more high level. The second one is much more detailed around the technical implementation. And I can try to make these either slides available or if you wanted to DM me or find me on Discord, you can find me in the synthetics Discord if you want these actual links.
00:26:56.088 - 00:27:34.380, Speaker B: So I'll put the link for our Discord on as well. And then Vitalik has some great resources as well that helped me kind of gain an understanding of roll ups. So those would be two good ones. An incomplete guide to roll ups and then a roll up. Centric ethereum roadmap. The first one is on his blog, and then I think the second one was on either Reddit or Reddit, I think so, yeah. And then the Optimism team has, like, a scenario walkthrough where they kind of go through a complex scenario of depositing transferring, and then like, a scenario where fraud proofs would come into play.
00:27:34.380 - 00:27:55.056, Speaker B: So if you want to learn about that, that would be a great resource. I'd also suggest in the ETH Global Discord for the hackathon, optimism has a channel, so if you have specific questions, you can go in there and post about it. Yeah. And then here's my Twitter. Here's. Synthetics twitter. If you wanted to join our Discord, this is the link.
00:27:55.056 - 00:28:11.770, Speaker B: In there is David G. And yeah, just really excited to have been able to give this presentation and share with you just some learnings we've had as we've gone along here with our L2 implementation. And we're just really excited to be working with Optimism and the Ethereum community to make this happen. So thank you so much.
00:28:14.940 - 00:28:58.580, Speaker C: Amazing. David, thank you so much for that awesome presentation. It's just incredible to see over the past few years from you being part of It Global events and going from hacker to mentor to developer to giving a talk and just making. These events even more useful for everybody else. So thanks again for that and also for a really comprehensive walkthrough of how Synthetics does everything on layer one and layer two. So thanks again and I want to just share some quick closing thoughts for everybody. And with that said, I also want to make sure that I give our guest MC Eva Behelin, a really big thank you from our side.
00:28:58.580 - 00:29:46.516, Speaker C: She really did an amazing job just introducing all of our speakers and sharing so many cool and fun stories. It was awesome to have her help us out and we'll aim to get her involved again in the future. So all that said, this was our last talk of the day. We had so many introductory talks on how everything from optimistic roll ups to ZK roll ups, to side chains, to specific chains, to what's happening in layer two altogether and cross layer two. It's just been a massive overflow of information on how all these things work. And if you were not able to catch all of these talks, they are recorded and they will be made available live over the next couple of days on our YouTube. And after this live stream end, you can also refresh eightglobal TV and just catch the whole summit altogether as a single video.
00:29:46.516 - 00:30:36.036, Speaker C: So I don't have a lot more to say. I just want to remind everybody that this was the first of three summits. We did the Scaling introductions and just talked about high level what's happening in the world of scalability. Next Friday the 23rd, we'll be hosting our Merge Summit, where we'll be talking about what's happening on the layer One side of East Two and what the merge is going to look like and everything that's happening from the ethereum development side. And then the week after, which is Friday the 30 April, we are hosting our Summit on Zero Knowledge. So you'll see a lot of applications about the possibilities of zero knowledge proofs and how that technology and those primitive X can be applied to Scalability programmability and everything else. So with that, I want to thank all of you for being here today and thanks to everybody who was on chat asking all these amazing questions.
00:30:36.036 - 00:30:50.850, Speaker C: And we look forward to seeing all of you for the next summit next week. For all the information about the talks, the upcoming speakers and the schedule, you can head over to Scaling ETHGlobal Co. And I hope all of you have.
