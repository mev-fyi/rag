00:00:07.370 - 00:00:19.920, Speaker A: Hello everyone, and welcome to the Hack FS File Coin Workshop. Saturday IPNI finding and fetching web3 content. Joining us today is Patrick Woodhead, who will be taking us through the session. And with that, I'll pass it over to Patrick to get the session started.
00:00:22.210 - 00:00:58.640, Speaker B: Hi there. Thanks very much. Everyone can see my screen. My name is Patrick Woodhead and I'm a technical program manager at Protocol Labs. The program which I manage is retrieval markets. So that is how do we retrieve content out of filecoin and out of IPFS then? How do we accelerate that around the world to clients, wherever they might be? Just seeing something up in the chat? Yeah, please post any questions and if they're really relevant, I can address them immediately and if not, we can have a few questions at the end. Great.
00:00:58.640 - 00:02:07.918, Speaker B: So the challenge statement for this bounty is as follows retrieval via distributed CDN build the most impactful application leveraging the Saturn network and or IPNI for data discovery and verified retrieval. And we're going to go into a bit more detail about the Saturn network and about IPNI and then what we really mean by web discovery there and also what it means to have a verified retrieval. Obviously, we're working in a trustless environment and so when you retrieve content, you do have to verify that you've got the content that you've asked for. So it is important that you're able to verify on the client side. So, as I said, Saturn and IPNI, these are two projects which are being worked on app Protocol Labs. We're going to begin with Saturn and we'll go on to IPNI after that and then we'll also see how the two are connected. A bit of motivation for Saturn network here is a statistic and I can give people the figures behind this if they'd like to, and I can share links at the end.
00:02:07.918 - 00:03:06.226, Speaker B: But by 2025, the global CDN market is expected to be twice as large as the cloud object storage market. So that's really saying that retrieving files and accelerating files to clients wherever they might be is actually a bigger market than storing those files in the first place. And actually, when you think about this, this does make a lot of sense. It's probably more straightforward just to simply store a file somewhere in the cloud or let's say a bit Web three equivalent hill on filecoin. But it's probably a more complex task to actually make sure that those files can be retrieved by anyone around the world in a performant amount of time and economically and also reliably. And people do want their apps, their D apps, to work very well and to be seamless and snappy. So with that in mind, we then look at what filecoin and IPFS offer and where there's some problems with achieving that goal of having a really snappy experience on the retrieval side.
00:03:06.226 - 00:03:45.630, Speaker B: So IPFS retrievals through the public IPFS gateways there are a few of these. There's one run by Protocol Labs, which is IPFS IO and also DWeb Link. Firstly these are centralized, the ones run by Protocol Labs and there are ones run by other companies as well and they aren't the fastest. They sometimes do take a bit of time for you to retrieve your files. And also, as they're centralized, you're relying or you're trusting that gateway to provide you with the file. You don't have to do any verification on the client side. They're your trust anchor, and you're just assuming that they're going to return you the right files.
00:03:45.630 - 00:04:30.894, Speaker B: And that's really speaking to IPFS. And on the filecoin side, there isn't a cache layer to accelerate retrievals from filecoin storage providers. There's been a huge amount of work recently on how you can retrieve files from filecoin storage providers. It was originally only available over graphsync, which we'll talk about a bit more later. And there's been a lot of progress recently in Http retrievals, which is obviously great because Http tooling is everywhere. But it'd be great if we can then start to see the emergence of these CDNS, these cache layers in front of filecoin so that you're not having to go back to the origin server of the data each time. A third thing I can mention here is that historically IPFS and filecoin different networks, they haven't really interoperated much.
00:04:30.894 - 00:05:43.714, Speaker B: And going forward, we'd like to have the whole content addressed universe, be able to be content addressed and not have sort of lock into particular networks. We'd like to see IPFS network and filecoin interoperate so that's near that's sort of the background. That brings us on to what is Saturn? Saturn is a decentralized CDN accelerating retrievals from the IPFS and filecoin networks the Saturn network launched in November 2022 and anyone can join to be a point of presence. There are now over 2000 points of presence around the world a large network capacity of over eleven Tbps and a whole bunch of daily requests 158,000,000 plus. So there's a lot of traffic and a lot of point of presence around the world serving that traffic. Gone to the roadmap, as I said, like November we had the launch and by December we wanted anyone to be able to run an l One node. And so anyone can now go to the GitHub Repo of the Saturn l One node and get themselves set up by March.
00:05:43.714 - 00:06:35.558, Speaker B: We wanted to actually have some performance guarantees in this network and we started to see a really nice time to first byte for IPFS content flowing through the Saturn network. In April we started to open kind of a beta testing for Saturn customers. And in the in process of that at the moment and then just recently in May, June, we have essentially the node operators, these points of presence, they receive payouts on a monthly basis. And since the launch of the FVM, which is the smart contract layer on the filecoin network, since the launch of that, we've been able to move a lot of the payout. Logic onto the smart contract. And so Saturn node operators have recently getting paid via an FPM smart contract. And then going forward, we're looking to link up the Saturn l One nodes to Falcon and IPFS and have that.
00:06:35.558 - 00:07:07.390, Speaker B: Interoperability that I've already spoken about. So now got an architect diagram. This is Saturn. And also I'm bringing in IPNI. Now we'll talk about that a bit more in a second but we'll focus a bit more on just the Satin request flows and before we can motivate IPNI in a SEC. So on the left hand side, if you can see my mouse we've got a client who is looking to get hold of a file. They've got a CID and they want to get hold of a file so they can make a request to the Saturn network.
00:07:07.390 - 00:07:42.586, Speaker B: If they're a browser client, this can be done over DNS to the Saturn network if they are on. The server, they can actually use this sort of SDK thing called caboose, which allows them to connect to a nearby Saturn node. And they make the request. And one of the Saturn nodes picks up this request if it's in the Saturn node cache, it's able to serve it back very, very quickly. If not, then the Saturn nodes need to fall further back. They need to cache, miss and get that data from another layer. And that's where IPNI comes in.
00:07:42.586 - 00:08:17.522, Speaker B: How does the Saturn node find where that content is? As you can see here. And we'll come back to this diagram after I've introduced IPNI. There are two ways that Saturn node can get hold of it. They can make requests to the IPFS network, or they can make requests to the filecoin network and with different protocols, Bitstop or Graph sync and more recently with Http. Now as well, they're able to get hold of blocks and then return a car file to the client. As I alluded to there. There are different sorts of retrievals you can make against Saturn network.
00:08:17.522 - 00:08:52.894, Speaker B: There's browser retrievals, server retrievals and gateway retrievals. The browser retrievals they may request straight to a Saturn l one. But as you're getting back a file, which is you have to be able to verify it because it's from a Saturn l one node that you don't particularly trust. Saturn also has developed a service worker which incrementally verifies the files as they come back. Into your device and then streams it into the browser page. Server retrievals. As I mentioned, they do not use the DNS layer, and they do not have the service worker because it's not a browser.
00:08:52.894 - 00:09:42.050, Speaker B: But they do have a similar logic of incrementally verifying files as they come back. They also have server retrievals. Give you a little bit more flexibility about parallelizing retrievals from a bunch of different Saturn nodes and also have a kind of fallback if certain Saturn one nodes are going down. So just a little bit more available machinery if you're making retrievals from the server and this can allow people to build their businesses around Saturn. They can fetch stuff from Saturn and then pass it on to their clients in turn and then gateway retrievals. Saturn will soon have a Saturn gateway where if you don't want to do any of this client side verification you can just trust a gateways. We're working with the IPFS IO team to sort of turn the current IPFS gateways into a more of like a global gateway for any content on filecoin and IPFS.
00:09:42.050 - 00:10:28.990, Speaker B: Okay, going to just do a quick little demo here of a browser retrieval. Got a few steps here. So first thing is that we're going to add a script tag into a very simple HTML page which allows us to get hold of this Saturn widget. We're also fetching the Saturn service worker and putting that into our repo. You then add that service worker to your domain, which is just the repo I'm about to show you and then we can stream an HS video. So I will escape from here, go across to here. That seems to be a bit broken.
00:10:28.990 - 00:12:02.040, Speaker B: This repo is on GitHub if anyone wants to start from here or just play around with it. Make this bigger as well. Okay, so as I said, we're just adding this script tag here, adding the file that we want to fetch and we have already downloaded the Satin service worker and it's in the root domain of this website. And then very simply just going to run MPX Serve and other demo gods on my side. They're taking a little bit longer than usual. Okay, so, yeah, the video is coming through. We can have a look at some developer tools.
00:12:02.040 - 00:13:11.094, Speaker B: We start to see different chunks. The HL S file coming in from Safari domain and putting in different chunks of file and this ability to skip through to different parts of video as well. We will stop there. All right, that's just one example of stuff you can do with Saturn. So I'm going to go towards the end, just go through some more ideas of all the different use cases that we've been talking about and give everyone a little bit of a taste of things. They could hack on Saturn links. If you want to go to the homepage Satin, just head to Saturn Tech docs Saturn Tech tell you how to set yourself up as a Saturn l One node or give more information about how you can fetch from Saturn Explorer.
00:13:11.094 - 00:14:27.378, Speaker B: Saturn Tech will be up hopefully within the next few days and it gives a world map of all of the different Saturn nodes around the world and kind of summary statistics about how much bandwidth each of those nodes is sharing. You can head to the GitHub, which is farcoin Saturn and that Saturn demo just seen, literally, very simple, just a few files, you can get it from here and you can recreate what I just showed you. Head to filecoin Saturn on Farcoin Slack, and then there are YouTube videos from Ipvesting which go into a bit more depth on this as well. Okay? Now I didn't mention IPNI much when I went through this diagram the last time, but just to come back to Motivate IPNI, when a Saturn l, one node doesn't have a file in its cache, if people know the IPS network well, you sort of get like an element of content discovery from Bitswap. Bitswap is it asks the networks, sorry, the kind of neighbors in the IPS network that you have, whether they have a particular block which corresponds to a CID, and if not, then you can speak to what's called the DHT and you can find out which nodes do have that CID. But with graphsync, it's different graphsync. You have to know who you want to speak to before you start.
00:14:27.378 - 00:15:18.722, Speaker B: So you sort of need to know which filecoin storage provider has a file before you can actually fetch it. And that's where IPNI comes in. IPNI, which stands for Interplanetary Network Indexer, is a way for you to discover which filecoin storage providers and even IPFS nodes have the file that you're looking for. So yeah, as I suppose I've sort of already mentioned, quite a lot of this bits on DHT do provide that content discovery. One of the issues here is the DHT is unable to keep up with the sheer number of records or what we call advertisements that people want to put up to show where their data is. And it can be a bit slow. There's a few hops involved in going through the DHT to discover content and graph sync and Http for that matter, you need to know who you want to speak to before you start speaking to them.
00:15:18.722 - 00:16:15.816, Speaker B: So it doesn't have sort of content discovery built into those protocols. So IPNI is a routing system designed for providing CIDs by the billion with millisecond lookup latency. So IPNI in a similar way that IPFS is a protocol. IPNI is a protocol and it's about the whole flow of you having a CID wanting to know where you should get hold of the file which you want. So it's a lookup and then actually providing the CID the content behind it. So the whole flow. So you have a CID and you make a request to a network indexer which is part of the IPNI protocol, and the network indexer will return to you which provider, which storage provider, or even which IPS node has that content and over which protocols it's available.
00:16:15.816 - 00:17:22.924, Speaker B: So Bitswap, Graph sync, Http and more and more the stuff on filecoin is available over HTP, so we start to see the advertisements coming from the network indexer, including Http as well as graph sync. So how does the Network Indexer then know where stuff is stored? Over here we have IPS nodes or lotus nodes or Boost. And when a storage deal is made on filecoin or when something is stored in IPS node, they are able to advertise which CIDs they're storing. And they can either gossip that or they can even just send HTP requests to Network Indexer and that then stores a huge number of records of just a mapping of CID to provider. Then once it's got that in a system, it's pretty simple retrieval. Clients are able to make requests for a particular CID or a particularly multi hash. A multi hash is sort of baked into the CID, which is kind of a layer below and find out who's got hold of them.
00:17:22.924 - 00:18:07.420, Speaker B: And then this next step is once you know who's got it, you make that request and are able to retrieve it from the source. I was very careful to say IPNI is a protocol and not some instance of anything. So if you come across different terms while you're looking into this, I think this diagram can help. IPNI is the overall protocol and these other things are sort of members of the IPNI protocol. Network Indexer is a specific service that actually ingests the records and offers a lookup store. The Index is an implementation which was made by critical labs of a network indexer and then CID Contact which is also the domain name. So head to CID Contact to find out more.
00:18:07.420 - 00:18:54.510, Speaker B: This is actually an instance of this store, the index implementation of the Network Indexer Spec. And an index provider is just really a client of the network indexer who's able to provide the adverse IPNI links. GitHub.com IP. IPNI specs or Golib IPNI. There's a blog series on the Filecoin IO blog and if these slides are shared, you're able to get this link here CID Contact docs CID Contact head to the IP I channel on Farcoin Slack and again on YouTube. If you go to IP Festing and search for IP i, you will be able to find some amazing talks by the engineers who worked on this.
00:18:54.510 - 00:20:02.204, Speaker B: Okay, so we've now gone through Saturn, we've gone through IPNI. The next step is what sort of applications or use cases could we look into? And actually I'm going to go to this next slide first because I think this could help everyone figure out what they might want to work on. The Saturn team is still working very hard on linking up all of these different networks IPFS, IPNI Filecoin and now NFT Storage. And it's right at the cutting edge, bleeding edge of what protocolabs is working on. And so there are some things which we have got to work, like some of the HS video streaming, as you've seen, but there are other things which we haven't got to work so much. So there's one way of looking at this would be to just use the APIs of Saturn, IP and I and build something on top of them. But I think a sort of more interesting approach would be to get under the hood and see if there's any way of adding functionality or features or having a go at interfacing some of these networks and finding optimizations or interesting ways in which we can get them to talk and interoperate more efficiently.
00:20:02.204 - 00:21:56.448, Speaker B: When it comes to all these different verticals we saw an example of video but there are so many different things which we would like to use a CDN for. So first is can we get the IPFS gateways not to decentralize those? Then there's huge amounts of NFT media files which are content address stored on filecoin. What's the best way that we can serve those? How do we index those in their millions in IPNI? How can we optimize the flows around these sort of files? Public data sets if someone's interested looking in like, storage as well as retrieval can we get any public data sets on and then try and make them retrievable and just get that end to end flow going? And the same goes for DSI. A really interesting one is around blockchain transaction databases and also blockchain state. Can we make snapshots and store them on filecoin and then make them available through Saturn and IPNI for fast retrieval? And can we even address the data availability problem by using this? Can we help people to get hold of indexes around blockchain state so that their DApps can get hold of all the relevant stuff to work seamlessly and sort of have the metadata available and information available to make future transactions and know that you're up to date with the latest transcoding? This feeds into video and music. But what ways can we compute over data as it's moving to these retrieval networks? Add a little functions like for example, Live Peer has got a whole bunch of tools in the toolbox which could be integrated with Saturn to create a node that's able to do some really powerful stuff and that leads into decentralized compute. Could we sort of combine retrieval and compute networks so we've got sort of edge computing or almost like edge lambdas.
00:21:56.448 - 00:22:52.650, Speaker B: They're able to do little jobs around the place and return the results to the client search and discovery. We've looked at indexing, but we haven't looked so much at sort of content searching. So what do these files actually contain? Can I discover music? Can I discover videos? Can I discover blockchain state that could include certain things, more general kind of developer tooling around how we can feed stuff back into a DApp from Saturn or from IPNI and then, yeah, mobile music, video databases and also gaming which just different verticals will have different challenges and different opportunities. Cool. Thank you very much. I guess there's sort of five minutes left if anyone's got any questions.
00:22:55.990 - 00:23:26.860, Speaker A: Yeah, if anybody has any questions, please feel free to type them in the chat or take yourself off mute and ask here and maybe if people are thinking patrick, what would you think? I guess maybe some project ideas you would like to see folks do or any sort of thoughts you have around maybe getting some creative juices. So and if people are still struggling on what to work on.
00:23:28.690 - 00:24:29.266, Speaker B: Yeah, I think if people are struggling what to work on, I would focus on some of the blockchain stuff. So can we get other web3 data sets and get them into Filecoin or into IPFS and then find a way to retrieve certain indexes over that blockchain state and make that flow end to end work? We're speaking to a bunch of people who are interested in kind of backups of snapshots of blockchain state so that validator nodes can get themselves up themselves, set up very quickly. But I think what's interesting a smaller project would be can we just get small amounts of blockchain state where you can create little kind of little indexes overstate and try and get that into the client as quickly as possible? I think that'd be a very interesting projective for a first run. Yeah.
00:24:29.288 - 00:24:41.160, Speaker A: If there's any questions, now's the time before we end it. We have a question. I want to create some data streams. Where should I start?
00:24:48.570 - 00:25:13.520, Speaker B: That is a good question. I think the best place to start is just hitting up the Sat in GitHub or getting in touch with the team on Firepoint Slack. We have got some streaming capabilities, particularly with the video stuff. But yeah, I think we'll be just to get you in touch with our engineers and see where we can go from there.
00:25:18.630 - 00:25:50.570, Speaker C: I don't know anything about actually filecoin IPFS or any of the rest. So this is all very new to me. But one of the things I'm thinking about is where would I be looking? If I understand the idea that you pay for file storage and you want it held and stuff, but if people are consuming, you want to publish files that people use. Which of these technologies? If you wanted to get paid for the use of the data, not just the hosting and distribution.
00:25:52.690 - 00:26:58.034, Speaker B: So you're saying if you wanted to publish data and also be paid for, who's going to consume that data? Right. Well, you can run a Sassy point of presence, you can get paid for serving the content, you can run a filecoin storage provider and you can be paid for storing the content. If you're a content publisher, it kind of depends on the business model because kind of in the traditional web two space there's actually the content publisher who pays to have their content accelerated. They want to provide a good experience to their users. And most of the use cases we're looking at is sort of following that business model whereby the content publisher is the one who's going to be footing the bill in the end and then it will be sort of an out. Well, that would be an interesting to look at. Is there a way that you could have a trust of protocol which would allow your clients to then pay to access that content rather than it being sort of out of band your clients paying you through another mechanism? So yeah, that would be a very interesting project to look into.
00:26:58.152 - 00:27:06.226, Speaker C: Okay, but there isn't part of this file coin and IPFS and Saturn IPNI stack of things where it really tries to address that.
00:27:06.248 - 00:27:48.238, Speaker B: Yet we have got some work streams where we're looking at paying directly for files. So that's where the client actually transfers and makes micro payments for bytes to a file. The team called Nagmo who are looking into a state channel approach to that which is super interesting. There's a whole different set of use cases which will be unlocked by that. Saturn goes to the approach that the content publisher is the one paying, which means that it's actually not the clients who are paying. And actually across the board at the moment, clients don't really like paying. It would take like a paradigm shift in how we use the Internet if we sort of have everyone making micro payments.
00:27:48.238 - 00:27:52.190, Speaker B: So it's kind of two different work streams the micro payment and the sponsor payment bridge.
00:27:52.350 - 00:27:58.242, Speaker C: Yeah. You mean web3. Thank you.
00:27:58.376 - 00:27:59.300, Speaker B: Thank you.
00:28:05.350 - 00:28:14.890, Speaker A: Hey, are there oh yeah. Another question. Is there any way to manage access to token gated content using IPFS and leverage Saturn l one to speed up the authentication?
00:28:18.670 - 00:29:22.590, Speaker B: Great question. There is some research going into how we could have access control onto IPFS. Nothing, I believe has been actually shipped with any of the major IPFS nodes, the Saturn l ones, to speed up authentication. That again, is not a feature that would be a really interesting to look into like access control and authentication through this network. One of the problems you face though is that the Saturn l ones can be run by anyone. So if your authentication layer is across a bunch of 2000 nodes which you can't trust, then it's, I suppose, a bit of a challenge. Like how will you set up your authentication layer? We've got some ideas around using kind of DIDs and UCANs to manage kind of how a client can have an account with a particular content provider and get access to their content as well as then metering how much usage each client has got through the network.
00:29:22.590 - 00:29:35.630, Speaker B: So yeah, there is some research in that space, nothing too concrete, but we're looking at UCANs as a way to measure and have sort of identity around people accessing the Saturn network.
00:29:42.410 - 00:29:50.050, Speaker A: Awesome. Well, cheers. Well. Thank you, Patrick. We're currently at the top of the hour. Thanks for the great presentation and thank you everybody for joining.
