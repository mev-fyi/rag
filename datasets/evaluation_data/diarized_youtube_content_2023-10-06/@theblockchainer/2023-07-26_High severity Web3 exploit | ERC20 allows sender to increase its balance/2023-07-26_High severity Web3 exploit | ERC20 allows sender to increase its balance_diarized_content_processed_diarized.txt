00:00:00.170 - 00:00:24.126, Speaker A: Let's start here. Transferring kib token to yourself increases your balance. That's probably a lack of verification of the addresses. That's interesting. Using temporary variables to update balances is a dangerous construction. Temporary variables. I need to see what it's referring to.
00:00:24.126 - 00:01:02.942, Speaker A: If turns her to yourself, it will cause your balance to increase. Kib token of a rice transfer. See that's a problem of kib kiv kib it is probably from Kuma kib token. That's a problem of overriding the functions from the open seplin. It's checking the address from. It's checking the address to but it's only checking that it's not zero and there's no other check about the addresses. And apparently to perform the transfer of the token, the code is as follow.
00:01:02.942 - 00:01:25.026, Speaker A: This is a proof of concept, so I understand it's okay. It's going to show. So I think this is just the same proof of concept is where you are trying to crack it. But I think for now it's just showing where it's crackable. Base balances two. Okay, new to base. Let's go here and analyze.
00:01:25.026 - 00:01:53.586, Speaker A: New to base is defined here. Okay, this is the balance new to base balance. Okay. There is some operations here and then it's assigned the base balances. It's changing the balances of the address that is receiving or similar. Let's read it more. But I understand that you can send it from yours and send it to yourself.
00:01:53.586 - 00:02:31.154, Speaker A: Actually yeah, I think I've seen it some places. To have the eve from needs to be different than to. Okay, so it's pointing here what I say, right. If it's SQL, this place will override the reduction above. Yeah, that's very well seen from the code above we can see that using temporary variables. Okay, that's what it's going. Temporary variables is okay, so local variables, basically those variables disappear when the function is when it's finished.
00:02:31.154 - 00:03:03.494, Speaker A: The logic inside the function, if the from and to are the same, the balance to update will override the balance from update. To simplify example, balance Alice ten and execute transfer from from Alice to Alice five. Define the temporary variable. Temporary variable Alice ten. So update the steps as follows. This makes it five and from. I'm not sure I understood that, but it is first the from and then the two.
00:03:03.494 - 00:03:43.794, Speaker A: Let's see. Locking this what it means probably after Alice transferred it to herself, the balance was increased by five. Okay, the test code is as follows. Test transfer same. Mint. Okay, we're minting from Alice address there ten ethers we're checking that Alice. Alice's balance is ten ethers and we're transferring five ethers to Alice and it increases by five with a transfer because it's here.
00:03:43.794 - 00:04:01.030, Speaker A: Increasing it. Okay, I get it. Okay, nice. Here it's showing how to run it with foundry in general. We could add to. Oh, look, why not? Let's do it. We can add it to kib token transfer t tests.
00:04:01.030 - 00:04:24.450, Speaker A: Kib kib token. Oh, my God. Transfer kb token transfer t. Okay, we got it. So I can add it at the end here and run, as they say, like that. Remember three. I said there was something, a surprise at the beginning of the video that there were three failing tests.
00:04:24.450 - 00:04:39.062, Speaker A: Let's run this. Hopefully it works and we can see the results. And then we go through the mitigation. Let's see. Maybe. Let's not wait much, but don't know if this will work. Let's see.
00:04:39.062 - 00:04:59.110, Speaker A: Recommended mitigation steps. A more general method is to use balance to balance from. Okay, so, yeah. Running. But. Okay, that's interesting. But I think you can solve this by adding a condition.
00:04:59.110 - 00:05:09.406, Speaker A: But, yeah, I guess. Here it is. Yeah, makes sense. That's good. This is the comments. Probably other charge. Okay.
00:05:09.406 - 00:05:21.102, Speaker A: And then they fixed it. Probably. Here, let's check. This is the pull request. We can see their changes. There you go. That's how they solved it.
00:05:21.102 - 00:05:30.580, Speaker A: Just with. That's what I told. That's what I was speaking out. Nice. Cannot transfer to self and the other test case. Cool. Okay.
