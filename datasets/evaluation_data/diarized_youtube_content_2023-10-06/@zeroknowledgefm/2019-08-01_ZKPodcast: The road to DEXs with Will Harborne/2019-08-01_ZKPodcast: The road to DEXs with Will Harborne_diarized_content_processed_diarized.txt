00:00:06.330 - 00:00:18.750, Speaker A: Welcome to Zero Knowledge, a podcast where we explore the latest in blockchain technology and the decentralized web. The show is hosted by me, Anna and me, Frederick.
00:00:26.010 - 00:00:35.000, Speaker B: In this episode, we sit down with Will from Ethvenix to talk about the history of crypto exchanges and how they've evolved into these decentralized exchanges over time.
00:00:44.430 - 00:01:17.326, Speaker A: So before we start, we want to just say thank you to you, our listeners. If you like what we do, please do subscribe to us on your favorite podcast app and maybe leave a little review. You can follow us on Twitter at Zero Knowledge FM or join the conversation on our Telegram chat. We really like to hear from you about topics that you would like us to cover or ideas in the space that interest you. And if you'd like to support the podcast, there are a couple ways to do so. You can support our Gitcoin Grant Patreon account or donate directly. All the links on how to support are in the show notes.
00:01:17.326 - 00:01:42.854, Speaker A: Lastly, if you're a project who would like to sponsor, please get in touch at hello at zeroknowledge FM. So thanks again for being part of our crew. Now here's our conversation all about DEXs with Will from Ethfinex. So today we're going to be talking about DEXs, and we have a really good guest here to help us do that. Welcome, Will from Ethfinex.
00:01:42.982 - 00:01:44.230, Speaker C: Hi, Anna. Hi, Frederick.
00:01:44.310 - 00:01:45.226, Speaker B: Hello. Hello.
00:01:45.408 - 00:01:56.450, Speaker A: I think we have a lot to cover and I'm super excited to jump in, but I think maybe to start, if you can just tell us a little bit about what you work on and maybe what you were working on before this.
00:01:56.600 - 00:02:51.246, Speaker C: Okay, so I'm an engineer by Background, and I got involved in Ethereum initially back in 2015, and started building various products and then joined Bitfinex actually to work on various of their sort of early experiments and products using Ethereum, particularly listing tokens and a whole load of other stuff that they were building internally. And then prior to that, I'd been working with a group of friends on some decentralized exchange experiments and I discussed with Bitfinex and they were interested in supporting that. So we spun out this new company, Ethfinex, to basically focus on growing trustless exchange technologies, and a lot of that's been research and development led, but we did also launch several products over the last few years for trading trustee between users noncustodial wallet.
00:02:51.438 - 00:02:56.966, Speaker A: So today what we want to talk about are DEXes. And it's interesting, we've actually never really.
00:02:57.068 - 00:03:03.314, Speaker B: Dived into DEXes on this podcast, DEXs being decentralized exchanges.
00:03:03.442 - 00:03:21.258, Speaker A: Exactly. And I think, Will, I think you're a great person to help guide us through this, especially given the fact that your background is working in a more centralized exchange and you've moved over to building a decentralized exchange. So I think it's going to be really cool to get into that.
00:03:21.344 - 00:04:10.640, Speaker B: We can start a little bit on pre decentralized exchanges and just talk about centralized ones. And something that I found kind of interesting with the whole crypto space evolving is most people know of exchanges as like the New York Stock Exchange or these big like the Tokyo Exchange or some things like that, that there's like one major exchange in a country and that's all there is. And then in the crypto space we still see big players but it's way more exchanges in general and under very different sort of quote unquote regulations or in terms of what kinds of regulations they follow and how have you seen that space evolve and what's the relationship?
00:04:11.250 - 00:05:17.906, Speaker C: Yeah, so I think the centralized cryptocurrency exchange space itself is actually very interesting given that the real sort of big change that happened, I think, when a lot of the exchanges originally just Bitcoin started launching was that they're open. So unlike New York Stock Exchange, London Stock Exchange, which have very high barriers to entry, not just to launch your exchange, but also for the customers who are using them. A lot of these early ones were kind of spun up very quickly. Initially, not much interesting, technology quite slow. They went down all the time. But the big innovation that they made was that anyone could connect, often anonymously and trade cryptocurrencies. And so for the first time, you had quite a big and growing market for people wanting to exchange products with each other, but where you had not just 100 members joining, which is what you typically would have on the New York Stock Exchange and everyone else accessing via them, but potentially tens of thousands of people all connecting into one system.
00:05:17.906 - 00:05:56.570, Speaker C: And that led for that, I think, for the first time to have huge amounts of investment actually start going into creating exchange products. And at that stage we're not talking about decentralized exchanges but we're talking about just being able to connect and trade with each other, but in an open ecosystem where suddenly all this technology had been built before and existed, owned by London Stock Exchange, New York Stock Exchange, but was then suddenly in the public sphere. So you had developers who typically would not have been interested in even finance necessarily working on building all these systems. And that's, I think, what led to all the early innovation and then later on to the things we're now seeing with decentralized exchanges.
00:05:56.650 - 00:06:00.110, Speaker B: Do you know of any centralized exchange that is open source?
00:06:02.850 - 00:07:15.266, Speaker C: Initially when I joined this space, I started working at Bitfinex and Bitfinex was based on some open source code which was released by a couple of years ago, basically by one of the failed cryptocurrency exchanges and it was then developed on significantly but ever since they've also been big believers in open source. So a whole load of the order placement strategy frameworks and a lot of the front end code is now starting to get open sourced and increasingly as well, several other cryptocurrency exchanges, although to a lesser extent so far, are starting to release a lot of open source code. And the interesting thing about that is, although at the moment it's not the kind of core matching engine technology which is what an exchange is really built on, that part is actually the easy part. Anyone can build, a lot of good developers can build matching engines. And it's actually one of the things that as a computer science graduate, you often do early on, just almost as a sort of assignment. But the harder parts are the gateways and all of the code that goes into generating strategies. And that side of things is now what's getting open sourced.
00:07:15.266 - 00:07:36.926, Speaker C: And what that means is people can start to build on top of them. They can build all sorts of more complex algorithmic trading strategies, which previously you could only really do if you had access to test them and backtest them on real data from big traditional financial exchanges. So suddenly you've opened it up to a whole new group of people, something.
00:07:37.108 - 00:07:57.318, Speaker A: Peripheral or like near a lot of the financial systems are things like Bloomberg. And I always wondered, in a centralized exchange in the crypto exchanges, are there pieces of Bloomberg like technology incorporated into it? Or is that something that's actually you're waiting for a secondary market to come around and build this stuff?
00:07:57.404 - 00:09:05.900, Speaker C: So there's certainly a lot of technologies that get built on the data sources coming from exchanges, similar to the way that Bloomberg might feed in from multiple data sources and also then allow people to start to build other products on top of it. And that's also been one of the big changes here, is that I don't think there's any cryptocurrency exchange which charges for access to its order books and data feeds. And therefore, again, there's the ability for people to build charting softwares, to build all sorts of analytics tools and sentiment analysis and just make this data public. And I think that's what's probably contributed so much to the high liquidity we see on cryptocurrencies in proportion to the size of them as assets, because people can get excited and developers do come along and just launch something and release it open source and someone comes along and improves on it. So in a way, it's the combination of traditional financial ideas with open source development community. Although I think a lot of people look skeptically at centralized cryptocurrency exchanges, it does have that open source mentality in a lot of ways.
00:09:06.350 - 00:09:30.254, Speaker B: The data point is interesting. In the New York Stock Exchange, there being one of the major players, their data is much more valuable because they are such a large player. And when you have 100 exchanges all trading the same assets, one individual data source is less valuable and then the value is in the aggregate of all of their data sources.
00:09:30.302 - 00:09:32.642, Speaker C: In a sense, yeah, that is definitely true.
00:09:32.776 - 00:09:55.674, Speaker B: So we're here to talk about decentralized exchanges and not centralized ones. So it's interesting to see how that has shifted. And I'm curious later to dig into some of the aspects of an exchange, like what are the components and how are they replicated in a dex. But let's start first at what is a decentralized exchange and why would one want one?
00:09:55.872 - 00:10:45.910, Speaker C: So I think there are a lot of different ways of looking at decentralized exchanges and a lot of the ones that we've seen launched so far in the kind of early days of dex technology were basically replicas of what you would see on a centralized exchange, which doesn't always fit directly onto a blockchain. But in essence, I think what we usually mean we talk about Dex, is noncustodial. So there's no one else you have to trust with your funds in order to be able to trade with counterparties. And you don't need permission in order to trade with those counterparties, and in the kind of ultimate sense that you can permissionlessly transact with anyone without having to go through other intermediaries.
00:10:46.070 - 00:11:13.330, Speaker A: Do you think that DEXes in a way though, are they the true crypto exchanges, like kind of how you said centralized exchanges, at least the initial ones were copies of more traditional exchanges sort of with those models. But when you think of a Dex, could that actually be, does it still have to take up that space of an exchange or can it be is it something that could almost disappear more than a centralized exchange could?
00:11:13.400 - 00:12:21.902, Speaker C: So I'd certainly see that and I think actually, ultimately centralized exchanges should will end up going that way as well. It's just that we're very early in this industry and there's a lot of new technologies coming forward. But really all exchanges is at the infrastructure layer. It should be to facilitate the transactions between multiple parties when they want to exchange currencies or other assets, but it shouldn't have to be something which your end user comes along and uses. And I think we're still at the stage where there's too much to learn and too much differentiation still available, but it will become a commoditized force. And certainly DEXes, I think, are much closer to that already, because you end up with a very much simplified version of what you would have with a centralized exchange where you need to connect in and maybe even have. A relationship with not just the exchange, but maybe your counterparties, which, as you reduce out those relationships, you can, in theory, long term, reduce your costs as well and start to, in a not a very sexy way, but start to really turn it into just something that's almost invisible at the infrastructure layer.
00:12:21.986 - 00:12:34.960, Speaker A: I almost want to map out a little bit of a history here to try to understand kind of how maybe and I think you might know this well, but what were the first centralized exchanges that actually came on the market?
00:12:35.570 - 00:13:44.110, Speaker C: The kind of largest and most well known one in the early days was MtGox, but there were several others that were much more wild and much maybe less successful before that, and several of those got hacked quickly, disappeared, or had all sorts of other issues. And on the whole I think most of them weren't built, modeled much on kind of traditional central limit order book exchange. And empty gox was of course the one I think that most people have heard of which suddenly took off and at the same time that bitcoin was really becoming talked about in the news. And in the aftermath of that, I think after they collapsed a whole load of new exchanges kind of sprung up to fill the spot of which bitfinex was one bitstamp as well, was one of the biggest following that. And then I think we saw a kind of diversification happen over the next few years of a lot of people actually who have much better understanding of financial systems come in and start to improve on these, start to build all sorts of more advanced and faster and sort of more reliable exchange platforms.
00:13:44.190 - 00:13:48.758, Speaker A: When did Kraken and Coinbase come onto the scene and did they come around the same time?
00:13:48.844 - 00:14:23.390, Speaker C: I think both Kraken and Coinbase were kind of in that aftermath period so they were still early on but Coinbase mainly focused on the retail market to begin with and was using on its sort of back end actually other large exchanges. So when a customer came along and wanted to buy they would actually be placing an order via API onto one of these other exchanges and filling the back end of the order. And later on then started to kind of build their more professional offering with Coinbase Pro which was previously GDAX.
00:14:23.990 - 00:15:05.118, Speaker B: I remember Coinbase in the early days their pitch was actually more around security and kind of having learned from Mount Cox and all the other things that got hacked. They were like, well, we were going to have cold storage, and we have this vault concept. And they were talking at length about how they break up the keys and store them in various safety deposit boxes and all this kind of stuff. And it was sort of like making a play for this is a place that you can trust to store your crypto. I think that ties in nicely later with why decentralized exchanges as well.
00:15:05.204 - 00:15:33.270, Speaker A: I'm wondering also in terms of as we're going along this path, there's some exchanges that came out where UX was also a lot better, where they started to be more clear about what they could and could not do in terms of security. I'm kind of curious at what point did the DEXes start to emerge? Did they emerge around the time that these centralized exchanges were getting better at UX and communication or were they in an encounter to when they weren't? I'm just wondering if there's any connection there.
00:15:33.420 - 00:16:37.638, Speaker C: I don't think it's too much to do with the UX side of things but I think it was to do with at least I felt the security aspect. But also actually that the power aspect. I think there was a lot of commentary around, for example, 2000 and 816 when Poloniax added Ethereum Classic which kind of kept it alive and was quite a controversial decision which maybe had a damaging effect in the short term on Ethereum. And a lot of people were saying at that time why do these big cryptocurrency exchanges have so much power? So not just the fact that of course they hold your funds and you have to trust them, but that they can influence this industry in a way that most other entities can't. And so given that we have the tools now to be building decentralized exchanges and there's no reason why you couldn't have built one then on Ethereum and people were but none of them had really gained much traction, why have they not taken off? And I think that was when I got really interested in it and that was when a lot of other kind of projects which have now launched, I think started serious work on getting ready to launch a product live as a Dex.
00:16:37.734 - 00:17:28.106, Speaker B: I think to me one of the major inflection points was the security. And just like I said, I think Coinbase does a decent job with security and they take a lot of precautionary steps, et cetera, but at the end of the day you have to trust them with your money. And it kind of goes against the whole principle of blockchains, is you don't want to trust anyone and you want to have that control yourself and in a decentralized exchange you keep that control and you only have to trust how you deal with your keys. Now, in reality, most people will treat their keys worse than Coinbase treats their keys and so they will actually have less security in practice but maybe offset by the fact that Coinbase is a massive target to attack. And you are probably I mean, I.
00:17:28.128 - 00:18:16.410, Speaker C: Think ultimately Coinbase probably is better at looking after your keys and looking after your funds than you are. And there's a huge shift in the responsibility you take on if you want to use a Dex because suddenly you are responsible for that. But there's also in return for that you get the freedom and you don't have the frustration of waiting for two days with Coinbase customer support to get your funds back if something goes wrong. And so I think the security aspect is something that was often I mean, that was what I think people who launched early DEXs thought would win over customers but it didn't really win out. That wasn't something that really deeply resonated with people, at least not the kind of wider community. It resonated with people who had been around for a long time had experienced to hack themselves. But even then it wasn't a strong motivator for people to take all that extra responsibility onto themselves.
00:18:16.410 - 00:18:45.138, Speaker C: The thing that actually seemed to start to get people to really switch over now is more to do with the kind of freedom you have over your assets. The fact that it can actually be faster because you don't need to deal with customer support and go through all the extra hoops of signing up or whatever else onto these platforms. But I think it took a long time for people who were building these platforms to learn that the security element didn't appeal to the wider audience, although it should have.
00:18:45.304 - 00:19:28.114, Speaker B: It's interesting to hear you say that, because I kind of feel the same way, that a lot of the attraction is not necessarily to manage your own keys, but to you mentioned this earlier as well, having the anonymity and sort of the freedom to transact in whatever way you want. I think as more and more people buy into the vision of blockchain and the spirit of decentralizing and wanting to get away from control, they also buy in more into the idea of a decentralized exchange. And I should be able to exchange these things without anyone overseeing it or like requiring KYC and AML and that kind of thought, which is both good and bad.
00:19:28.232 - 00:19:47.314, Speaker A: But yeah, let's shift over to the history of the DEXes then. So we've kind of covered centralized exchanges. I think there's one exchange that we didn't mention yet, which is Binance, which actually is centralized but came out quite late, but has done very, very well. But now, what were the first DEXs? What was the first Dex?
00:19:47.442 - 00:20:49.274, Speaker C: So I think there were DEXes pre ethereum, and then there was the kind of ethereum set of DEXs, which are where I think things really started to take off in terms of experimentation and the kind of growth of new types of DEXes. Even back before much started happening on ethereum, there was BitShares which had a Dex sort of built in at the core of the product. And actually, although it's not talked about much, it's been surprisingly successful in still running in terms of like an early Dex model. And it was very simple in terms of having order book on chain, and that was a model that was then replicated with a lot of ethereum DEXes. So we saw a bunch start to get launched around the early days of ethereum and most of them weren't used much. The problem with any exchange is getting liquidity to start with, because if there's no one else trading there, even if you had the most amazing technology, it's completely useless because your cost is essentially infinite of trying to trade on that platform.
00:20:49.392 - 00:20:57.082, Speaker A: What would that mean? Like, say there was very few people using a decentralized exchange? Would it just sort of mean like, you'd be like, I want to buy this and then just like crickets.
00:20:57.146 - 00:21:51.658, Speaker C: Yeah, so exactly. It's the same as any exchange in that you have two components to your cost, really. You have fees which are charged by the exchange, but it could also be like your transaction fee on chain, on Ethereum paying gas and then you have the cost of actually crossing the spread so you get a worse price to buy than you get to sell. And so the less liquidity and the few other people trading there, you may have zero fees, but your cost could be that you lose 50% by trying to sell because there's no one else buying apart from at a very low price. And so that was a big barrier to things to start to take off, but the early ones really won because they were listing everything. So there was no barrier to getting a token added to these exchanges and therefore that was the kind of winning strategy that we saw really take off. And all of these, at least the earlier ones, were still with their order book on chain, which was pretty expensive.
00:21:51.658 - 00:22:17.830, Speaker C: So it also means anyone can see your orders, you can be front run, which is when people come and place an order before you saying that you're trying to take it and then maybe try and sell it to you at a worse price. Again, that was an interesting model just to prove that it's possible, but particularly on Ethereum, that wasn't particularly viable given that the costs just become higher and higher each time you're trading. And therefore that does put a dampening effect on how successful the platform can be.
00:22:17.900 - 00:22:48.366, Speaker B: BitShare didn't deal with a lot of the problems of Ethereum because the blockchain functions in a fundamentally different way and people take on costs that aren't. It's altruistic in a sense. But I'm curious if you know how these early decentralized exchanges actually integrated to prove that they have those tokens. Let's say you're trading bitcoin on BitShares. How do you know that that bitcoin exists and is moved?
00:22:48.478 - 00:24:04.870, Speaker C: I don't know how BitShares dealt with this, but for example, to trade Cross chain so Bitcoin for something else on a smart contract platform with a state based or account based architecture, you can sign promises essentially for a transaction you want to make, which someone else can then come along and sort of fill to make sure that you're not going to be double spending and trading with the same person twice. But these are very slow processes, so essentially you're limited by the slowest blockchain that's involved in those trades and you may also have to wait several blocks for confirmation to know that there's not been a reorganization. And so, although actually in terms of proof of concepts of trustless trading, there's a whole load of stuff that happened in this period, most of which still had order books. So modeled the centralized format of having people who place bid offers and people who place sell offers, but that wasn't something that could really scale to compete ever with centralized cryptocurrency exchanges, but did at least prove the concept. And for someone who really cared about not trusting the person they're trading with and is willing to jump through these hoops, obviously very exciting.
00:24:05.030 - 00:24:23.022, Speaker A: So you mentioned BitShares as this first sort of experimental Dex in a way, and then what were the do you have any other examples of maybe the earlier DEXes and maybe even the earlier Ethereum based DEXes? I'm kind of curious, where does something like Kyber come in? Where are they in terms of the history?
00:24:23.076 - 00:25:49.734, Speaker C: So I think that's a little bit of a later stage. So Ether Delta was the one that really took off on Ethereum first and to begin with had an order book on chain and later moved to a model that was popularized by several other exchanges on Ethereum, like IDEX, where the order book was stored off chain. So there is a centralized place where all orders are stored, so you don't have the cost of placing and canceling those orders, but you then only submit them onto the blockchain at the point of settlement. And we started to then see all sorts of other potentially sort of more interesting models come out, like Kyber, at a kind of next stage, really, where they were no longer copying the model of a centralized exchange and trying to put it onto a blockchain, but were trying out other models which didn't rely on an order book in the same way. And that's kind of the two streams that we've seen now of trying to replicate high frequency trading, which makes sense on very liquid assets, but may not make sense on a lot of the assets that are traded. Actually, on most blockchains today, where you could use auction models or a model like Kyber, where you have a reserve of liquidity that's always available on chain. So there's a cost to providing that liquidity, but then it means that someone can come along and trade instantly without having to find another buyer or seller to match with directly.
00:25:49.862 - 00:26:13.700, Speaker A: The way I always think of a centralized exchange is you have a company and you have kind of like you said, reserves that are held by that company and can easily distribute it if need be and can sort of balance those out over time. But with a decentralized exchange, do you still have a centralized company that owns those reserves? Like this is the part that's confusing. Are the reserves living in a smart contract or are they living in a.
00:26:14.310 - 00:27:10.386, Speaker C: Yeah, so if we look at the Kyber model or actually and actually much more recently, although it's very simple, the uniswap model, which has some similarities, actually what you're trying to do is incentivize someone else. So these are market makers to come and provide liquidity so that other people can trade with them very quickly. So you have almost two sides to your market. You have the market makers. These are people who don't particularly themselves need to make trades for any reason, but they're willing to bear the cost of providing liquidity, which means that they have to basically tie up assets as collateral into reserves and receive a fee in return for that. And then on the other side of the market you have we can call them retail traders, but they're often not who are coming along and saying, right now, I want to buy this number of tokens and I'm not too price sensitive. I'm just going to pay the best price I can find, who will then trade with that person and pay the fee.
00:27:10.386 - 00:28:05.510, Speaker C: And so if we look at the Kyber model and I think Kyber does actually run some of these reserves themselves, where they provide some collateral in a certain token. And if someone wants to come along and buy maker token, they pay ether for maker and pay the extra fee and that goes to the reserve manager, which might be Kaiba themselves, but actually could be any number of other people in the ecosystem. So instead, if I wanted to become a reserve manager for spank token, I could create a new reserve, deposit a whole load of spank and ether into there and someone else can then come along, trade and I'll be earning the fees for it. And Uniswap has also, which has taken up a lot over the last six months, has done a very similar model where there's that incentive for anyone to come along and be that liquidity provider which then enables people to trade at relatively good prices.
00:28:06.090 - 00:28:21.642, Speaker A: How do those liquidity providers is the role then of the Dex to find those individuals or groups or companies projects and bring them on board? Is it sort of more of a like are they using the same interface or are they kind of using something else to actually do this?
00:28:21.776 - 00:29:29.474, Speaker C: So I think that's just the role of any exchange actually is to create a marketplace where you have those two sides to the market and so it's actually the same in a centralized exchange, although in the past really it's been a very people business and that's not what often excites people in this space about finance. But the reality is that for Ice, for example, or New York Stock Exchange, a huge part of the business is people going out, having nice dinners and lunches and convincing people to come and provide liquidity onto their order books so that others can come and trade and know that that's where the best liquidity is. And we've moved to this model now particularly with well, first of all with centralized cryptocurrency exchanges where again market makers are very important. So you want to provide incentives for them to create thick order books with tight spreads so that there's good prices for customers who want to come and trade there. And even more. Now with DEXs because you don't have any longer that personal relationship. You can't get someone to go out and have lunch and convince a market maker to come and trade on uniswap because uniswap doesn't employ people to do that.
00:29:29.474 - 00:30:13.930, Speaker C: You instead need to bake the incentives into your exchange itself so that there's a reason for people to provide that liquidity. And so in Uniswaps, for example, if you provide tokens into the reserves, you get a token which then rewards you each basically with a profit share on fees. And so we've shifted from the kind of people led incentives to baking your incentives into the smart contract layer, which of course is something which is potentially sustainable and could in the long term mean that you get greater liquidity sort of going because of the reliable and known and smart contract enforced incentives to provide that.
00:30:14.020 - 00:30:24.670, Speaker B: In the centralized exchanges, that incentive comes in the form of like a 0% fee if you're a market maker and you get your trading fee if you're.
00:30:24.750 - 00:30:45.894, Speaker C: Taking yes, usually it'll be that it's based on volumes. So if you do a high enough volume you'd get a 0% maker fee and therefore be able to provide the tightest spreads. And actually on many traditional exchanges as a maker you'd get a negative fee. So you'd actually be earning by being the one who's on the other side of all those orders.
00:30:45.942 - 00:31:28.118, Speaker B: Curious to dig in a little bit to the components of an exchange. Like I was saying before, I think we're jumping ahead here a little bit and explaining a lot of different models and ways to actually implement this without really understanding what the different players in the system are. So there's market makers, there's market takers, so there's sort of like buyers and sellers. And we've mentioned an order book which is just this list of orders, whether it's buying or selling. And you have a matching engine so that's like your components of a traditional centralized exchange, whereas the matching engine, like you said, it's a relatively straightforward of matching buy order with a sell order in the most optimal way.
00:31:28.204 - 00:32:24.470, Speaker C: Yeah, and I think there's one extra piece there which is really important for centralized cryptocurrency exchanges, but maybe less so in the traditional world, which is actually the kind of gateways which your users connect to and send their orders through. So typically you might only have to deal with 100 direct customers if you're running a large centralized securities exchange and everyone else goes via those investment banks or prime brokers. But in this space suddenly because anyone can connect, you have to run all sorts of other checks on their orders before you can put them into your order book and then your matching engine. And that's where actually a lot of the innovation has happened and is also important for DEXes because you basically need to validate orders assigned correctly and that they have the correct balances and all sorts of other checks which you wouldn't actually even take even longer and do slow down your orders compared to a centralized exchange.
00:32:24.630 - 00:33:12.666, Speaker B: Right, yeah. And I guess another aspect of cryptocurrency exchange is you also need to integrate with the blockchain or blockchains which is this whole other piece of how do you take money in and send money out when all the trades are settled and people want to exit or enter the exchange. But yeah, just component wise that sort of API the order book and the matching engine how like in the first approaches that you mentioned like Ether Delta they kept the order book on chain but if I recall correctly, I don't think they had a matching engine. You just kind of manually went in and found the order that you wanted to settle against.
00:33:12.768 - 00:34:06.582, Speaker C: Yes, exactly. I think a matching engine is probably the hardest thing to decentralize. So it's pretty easy to build something like Ether Delta where you have order books available on both sides and anyone can come along and choose whichever order they want to take. And if someone and this happened all the time if someone places accidentally an order at a terrible price because they typed an extra zero people set up instantly bots which would come along and take those orders. We actually had a similar experience about two months ago. We launched an OTC over the counter trading service where anyone can place orders and then trust it to see someone can come along and take them and know that they'll get the opposite side. And within 50 minutes of launching this smart contract and user interface we saw bots competing with each other on the Ethereum blockchain to take badly priced orders.
00:34:06.582 - 00:34:25.520, Speaker C: And that was pretty eye opening. But I think also just shows the level of money that was on the table for all these decentralized exchanges which didn't have matching engines, which essentially protect the user because they ensure you always get the best price, since at the end of the day, you don't have a great UX experience for that. But it's quite simple to do.
00:34:25.890 - 00:34:30.558, Speaker A: It also shows the speed at which that stuff will be gamed played.
00:34:30.734 - 00:35:09.982, Speaker B: I remember early days of Ether Delta I went and looked at a couple of times and every once in a while I would see like a negative spread where it wasn't even like someone had mistyped anything. But it was like you're at Block X and you don't really see the kinds of orders that you want. And so you place a new order at something, and then at Block X plus one, a bunch of those orders were settled. But you didn't see that because it doesn't play out in real time. And then they had placed an order that was like with the knowledge of only Block X made sense. But Block X plus one is the dumb order to place.
00:35:10.116 - 00:35:39.770, Speaker C: Well, the thing about that is it could also be a very rational thing to have a negative spread on an Ethereum decks like that because there is quite a high cost of filling an order. So if it's a small order that only slightly crosses the spread and your gas fee of taking that transaction is quite high actually you may need quite a significantly negative spread before someone's willing to trade which is a strange dynamic. But that's kind of the reality of on chain exchange.
00:35:40.270 - 00:36:21.874, Speaker B: Also these bots are extremely straining on the Ethereum network. As someone who deals with the transaction queue and sees the traffic going through Ethereum nodes. Because of these orders or because of the bots, they're very interesting. Because it used to be like you submit one transaction that you expect to settle on chain. But that's not what's happening anymore. Because you submit a transaction and then you watch for other transactions and as soon as you see someone like outbidding, you can be by one way of gas fee, like gas price. Then you cancel that transaction and send a new transaction.
00:36:21.874 - 00:36:38.646, Speaker B: But the way transaction queues and Ethereum work is that's still there and it's all sent around and gossiped over the network. So there's like thousands and thousands of transactions per second that never intend to actually make it to the chain. They're just competing with other bots.
00:36:38.838 - 00:37:16.530, Speaker C: I think there was an interesting paper that was published by Phil Dyer called Flashboys Two which also looked at optimal strategies for that competition and found that actually, you're better off. Even if you're not watching others competing with you, you're better off periodically just sending out your transaction again but with a higher gas price, with the hope that it will get included first without waiting to first see if someone outcompetes you. Because otherwise you'll be too late to actually get in before them. But obviously there's just so much money on the table for these things that a lot of people have spent time really optimizing.
00:37:16.690 - 00:37:38.842, Speaker B: So we've covered some of the components here and established that building a matching engine on chain is kind of hard. Even building an order book on chain has its problems and we've already talked about some of these models. But what can we do on chain and what are the models that are actually being pursued right now? What's the most viable decentralized exchange?
00:37:38.986 - 00:38:49.094, Speaker C: So the interesting thing is actually there are now exchanges that do have both order book and matching engine on chain but they're using chains such as EOS where there's not the same pressure to kind of keep your costs low because of the way that those blockchains are designed and the compromises they've made. But actually that doesn't actually lead to an optimal design of a decentralized exchange because you're publishing all this information which makes it very visible to everyone else what you're trading. And the pressures that have been put onto Ethereum, for example have actually led to some much better designs emerging. So one of the things that people do care about is privacy of their transactions. And then the second thing is around, especially for lower volume trading models that use auctions, for example, rather than an order book. And so you can get rid of a lot of those components which people consider to be part of an exchange and create systems which are potentially giving better prices at lower cost for traders. So I think there's two streams happening now.
00:38:49.094 - 00:39:25.642, Speaker C: There's the scaling of decentralized exchanges without having to put every single trade on chain, which has been pushed by the fact that order books are expensive to have on there and you end up having to move quite a lot off chain and do a lot of processing before you settle. And then there's these other models which just get rid of entirely of those components and actually are much better suited to lower liquidity trading pairs, where the reality is you shouldn't have most asset or every asset traded on second by second basis. There may just not be enough information for that to make sense. And therefore you can design a system that suits slower price discovery.
00:39:25.786 - 00:39:43.970, Speaker B: Yeah, some of the off chain approaches like you mentioned are things like what Starquare has been working on, I think with zero X or someone where you aggregate a bunch of transactions and publish a zero knowledge proof that this match was executed correctly or whatever. These trades were executed correctly.
00:39:44.050 - 00:40:25.422, Speaker C: Exactly. So in the scaling sense, there's two main approaches going on. There's the cryptographic one, and I think Darkware is one of the best examples of that, where rather than submit every transaction on chain, you can batch those into 1024 trades and then settle them all in a single proof which can get verified by a contract on chain. The problem with that is that you do have still a long latency time. So it's beneficial in terms of reducing costs significantly for people who are trading on one exchange. But a large amount of activity that happens on DEXes today is of a very different kind of trader. It's usually arbitrage traders.
00:40:25.422 - 00:41:36.250, Speaker C: So if you actually may be less concerned with the immediate cost of your trade, but having to wait ten minutes for a batch to be submitted through a proof from Starkware could be negative for you in the short term. But what it does enable is then high frequency traders to start to use DEXes. Once you can have these systems in place and you can essentially paralyze the creation of these proofs and have them submitted on a much more frequent basis. So you do potentially have unlimited scaling available from a solution like Starquare, but with the caveat that right now there's very, very few people who can do that. So it's not something that can be easily open sourced and therefore you do have to rely on, for example, Starkware, if you were using that system or potentially another third party who generates proofs on your behalf and you're creating another centralized point which for the moment is sort of unavoidable. And then the second thread of scaling that's happening at the moment is more based on the kind of game theoretical approaches like plasma. But in these systems you're essentially creating incentives that the exchange should be honest.
00:41:36.250 - 00:42:26.118, Speaker C: So you could have people placing many, many orders of which you're only settling the kind of deltas of all the cumulative trades at the end of a certain settlement period and then having a punishment mechanism so that if the exchange cheated anyone, it can be proved and they can be punished. You therefore don't have the same finality necessarily on trades because you may have to wind back and undo a whole set of trades if it was proved that someone had or the exchange had withheld information or had modified balances. As long as you rely on these incentives you could have extremely scalable, decentralized exchange. And I think there's a lot of systems like that which will probably launch in the short term but it seems more likely that in the longer term using things like various forms of zero knowledge will be the scaling approach that would ultimately make more sense for decentralized exchanges.
00:42:26.294 - 00:42:34.734, Speaker A: Would what roll ups doing also fall into that category? Because they're also doing sort of off chain computation proven by I would say.
00:42:34.772 - 00:43:07.334, Speaker B: It'S the same thing as Starkware just using different technology. I mean, it's the same sort of principle of bashing up transactions. I don't think anyone knows the answer to this, but I'm curious about what regulation looks like. Once you have any component off chain, if you have anything even just a matching engine or an order book management or anything off chain, does that party that's managing that thing off chain then become money movers and liable for whatever is happening there?
00:43:07.452 - 00:44:27.074, Speaker C: I think what's been made quite clear already is, at least in certain jurisdictions, if you are operating part of a system which helps arrange, in fact, that's part of the definition often of a multilateral trading facility is that if you're even providing part of a system which enables people to find each other and trade with each other, then you're liable for some aspect of traditional regulation. That's particularly true if you're charging a fee. I mean, it's very hard to then argue that you weren't operating this platform even if many parts of it are on chain or you're not holding users funds. And so you really have to go right to the, I think the kind of most extreme end of everything being operated either on chain or by sort of multiple third parties all open source before you can really not fall under that regulatory area as a company. And probably at the moment that's what's been quite difficult for various sort of decentralized exchanges such as Zero X relayers where ultimately, although they're often called decentralized exchanges, they're running order books. Many of those companies are based in the US and they may not hold their customers funds, but they are arranging trades. And therefore you do need to then go through the huge sort of regulatory hurdle and barrier before you can, which costs a lot of money.
00:44:27.074 - 00:45:12.894, Speaker C: I mean, most of the costs of all exchanges, centralized and decentralized, I think, or sort of semi decentralized is legal. And so it does start to put already up huge barriers to entry for people to come and experiment with these things and try launching new products unless they are completely anonymous. And even in the case of Ether Delta, the founder, Zach got a sort of retroactive fine for having launched a system which he actually had no control over at that point, which was open source and running on Ethereum on chain because he should have known apparently that it might be used to trade securities. And so that's a really dangerous precedent, which at least, although it wasn't kind of contested in court, shows the way that it's starting to be looked at.
00:45:13.012 - 00:45:28.100, Speaker A: My question here was like when you do off chain order filling or I know it's not necessarily orders in this case, but when you're going off chain and back, does that ever fall into the category of like derivatives? Is there a relationship there or would you say derivatives is like a totally different product?
00:45:28.470 - 00:47:01.150, Speaker C: I think it's a slightly different category, but is actually a very sort of important category. So although at the moment there's a lot of other barriers for people to use decentralized exchanges, the biggest one for, let's say, professional traders is the inability to access and trade derivatives on margin with leveraged type products. Which may seem I think it seems like a small thing to most people who are building DEXes at the moment, but the reality is that that is so essential and so assumed to be there by most traders that if you don't have the ability, for example, to basically borrow and then trade on leverage, they won't even consider your system. And so it's quite interesting to see the interplay at the moment with what's happening in various other parts of kind of DeFi with credit and lending and other derivatives type products which are starting to mature because when those start to intersect with the Dex space, you'll have a much larger value proposition to compete with centralized exchanges. And it's quite clear now that all the building blocks are there, but it will take time to start to filter through to the stage where especially combining that within some of these scalability solutions that you really are rivaling almost exactly what the offerings are of centralized cryptocurrency exchanges and potentially later traditional exchanges.
00:47:01.310 - 00:47:06.354, Speaker A: Once you introduce something like derivatives though, then regulation also steps up, right?
00:47:06.392 - 00:48:11.910, Speaker C: Then it becomes really so in almost every jurisdiction in the world. And we're not just talking about the US here, which is often where people are focused on cryptocurrency exchanges, but everywhere derivatives are regulated, to be honest, for pretty good reasons because they are much more dangerous products to be trading. But again, the way things are going, many of these then become almost self regulating. So because of the way that you can design leveraged tokens, for example, like Fulcrum from BZX on Ethereum, where the rules are enforced in a certain way, that they'll be liquidated under certain conditions which aren't just managed by one entity. You could potentially argue that they are self regulating in the sense that the rules are set out very clearly and can't be changed by anyone. And so there are some mitigations but it would require completely new laws and in the short term it's certain that any company that launched an exchange trading those, even if they argued that many parts were on chain or decentralized, would definitely be at risk.
00:48:12.070 - 00:49:04.106, Speaker A: As I've seen DEXes become smoother and simpler almost to use. I started to wonder where is it? Where DEXes start and interoperability ends, or where interoperability ends and DEXes start? When you think of interoperability protocols, which is about switching between different chains, or you think about atomic swaps, or you think about bridges, which is also about moving tokens from one chain to another. Through all these different mechanisms, DEXes to me start to fall in the same category, whereas centralized exchanges seem like they're in a very different place. And I'm wondering if you see that as a continuum where DEXes exist somewhere along that or if they're all going to become interrelated or I know that they're going to be able to use elements of one another, but I'm just curious what that actually looks like to you.
00:49:04.208 - 00:50:39.042, Speaker C: I think there's definitely various elements to the interoperability question. First of all, where it is possible to have cross chain swaps and bridges but the reality is actually the most important coin to be trading for most large traders is Bitcoin and it's also the hardest one to have any reasonable level of interoperability with other chains in because it doesn't have advanced smart contracting, for example. And so, although I think people talk a lot about interoperability, the reality is that although you can build interesting DEXes now which do allow you to make trades between chains, you won't build anything that could ever at all start to yet even touch on what is happening with centralized exchanges or even DEXes that operate on just one blockchain. And I do think it's still probably although there's been lots of solutions talked about, probably nothing that can solve that speed issue and ultimately it will come down to the speed, unfortunately, which is the thing that once you get into it, traders care the most about. And we care about traders because they're the ones who essentially act as the market makers and provide liquidity for other people to then be able to trade at a reasonable price and then on the kind of continuum between centralized and decentralized. I definitely think there is a lot going on in the kind of middle space for the moment, if you wanted to. There are various ways to trade bitcoin against Ethereum, but using, for example, wrapped bitcoin, which hasn't taken off in a big way yet, but does mean that you can have a representation of it on Ethereum.
00:50:39.042 - 00:51:22.600, Speaker C: The problem is that you do trust BitGo to hold those assets somewhere, but that means that you can come to ethnic trust us, for example, and trade from your own hardware wallet, but against someone who might be trading bitcoin versus Ethereum on a centralized exchange and still get settled in wrapped bitcoin. So it doesn't solve your issue of trust, but it does mean that you get the experience of trading from your own wallet and a reasonable amount of speed and there'll probably be other solutions kind of in the middle there. And of course you'll have things like cosmos and polkadot and others where you do have better interoperability solutions, but not with bitcoin. And that's unfortunately the sticking point and reality of what traders do.
00:51:24.730 - 00:52:17.874, Speaker B: Mean. The Schnorr signatures is one of these things that's been talked about in bitcoin for ages and ages. And I'm generally fine with bitcoin not wanting to change and improve anymore and it's like that's your value proposition, go for it, that's awesome. But if I could wish for one thing, it would be one signing scheme so we can have proper multi sigs and therefore build a lot better bridges. But I see interoperability as a sort of a foundation and interoperability is not about moving tokens or exchanging tokens at all, it's about moving things. So I own a bitcoin over here and I move it over here and I still own the bitcoin on this other blockchain and I can prove my ownership of it on both chains. But with that, with interoperability, you can build a better exchange.
00:52:17.874 - 00:53:18.954, Speaker B: I mean, to me, the missing piece of a Dex is still being able to trustlessly trade across multiple assets. And like on Ethereum you're trading mostly, ERC, 20 tokens and that's fine for that ecosystem. But if you then want to deal with bitcoin, yeah, you can do wrap bitcoin, but then because there's not any great bridges available for bitcoin, kind of stuck with these oracles or trust assumptions that you don't necessarily want to have. But I think if we at some point could build a good bitcoin bridge, an interesting thing that we might end up with is a Dex chain that holds a bunch of similar to a centralized exchange. You very rarely actually settle anything to the blockchain itself. You just kind of hold all the blockchain assets at the boundary and then you're just trading in an internal database. You're not actually moving any blockchain asset when you're trading, and that's where you get your speed from.
00:53:18.954 - 00:53:42.180, Speaker B: In a centralized exchange, you could do the same thing where a blockchain that's fast and has fast block times could deal with the trading in between assets and just holds the other blockchain assets at the boundary, so to speak, and then very rarely settles out through bridges or other means.
00:53:43.510 - 00:53:57.618, Speaker C: Your key problem to solve then is just making sure that you have the trustless bridges to each of the other chains available and operating when you need them, but there's no longer any speed constraint on those because all your trading happens on one chain.
00:53:57.714 - 00:54:15.440, Speaker A: Yeah, I feel like there's all sorts of scenarios that I'd love to ask you questions about, like what happens if Bitcoin ever allows it, what happens if they don't. But maybe to be more general, what do you see as the future of DEXes? What's kind of happening now and what can you see coming up?
00:54:15.890 - 00:55:38.946, Speaker C: So I think two years ago I was probably very naive and I thought within six months we'd have scalable, decentralized exchanges and all the building blocks were already there. And the longer we've been building these products and especially having post launch, seeing how people were using them, the more I've realized that there's still quite a few pieces that were missing. So there was the scalability aspect, which I think we already discussed related with scaling to be able to handle tens of transactions per second, which doesn't even sound like that much, but is significant in terms of trading. And then there's actually being able to interact with leverage systems and margin trading systems which are required by traders, and then being able to interoperate with other blockchains. And so starting to put all those pieces together combined with what we've already started to improve and iterate on in terms of the actual models of DEXes, you start to have a system which can actually then compete with all sorts of traditional financial exchanges. So because you have now the dual combination of something that's open so anyone can come in, connect with it and trade without permission. And that means that you can have a much, much wider network of counterparties who don't need to trust each other or the exchange.
00:55:38.946 - 00:57:04.734, Speaker C: You can start to then build something with much lower cost in the long term. And cost is never like the sexy thing to get excited about, but actually that is what traders care about and that will end up being what makes DEXs win over centralized exchanges. So the fact that for the moment, it is more expensive to trade on a Dex because you have to settle onto a blockchain and there's all sorts of other friction points both from the UX, but also from the actual fundamentals of being on a blockchain. But once you can add all these building blocks in, you can provide people with high leverage on trading these assets. You actually have a system where you don't need to have a prime broker, you don't need to have a clearinghouse, you don't need to have other intermediaries who exist in trading securities or commodities or all sorts of other products on normal exchanges. And therefore you can build something that's much, much lower cost than any of those, and where you can start to have tens of thousands of counterparties all directly trading with each other at much lower friction and cost without all the kind of compliance and back end that normally goes into those exchanges. And you also reduce the barriers to entry so anyone could start to launch these once the components are open source because the rules are enforced and you should have privacy, for example, on transactions at that point, they are superior and in many ways they're things like they're basically nasdaq but enhanced with blockchain rather than wild DEXes.
00:57:04.734 - 00:57:21.834, Speaker C: And it's only just starting to become visible now with all the experiments that have been happening, but it is now clear that's been sort of technically proven to be feasible. It's just a matter of actually doing the development work and bringing in lots of these new ideas into one system.
00:57:21.952 - 00:57:23.514, Speaker A: And I guess that's what you're building.
00:57:23.632 - 00:57:59.298, Speaker C: That's sort of what we're building. I imagined we'd be building that two years ago, but it's still probably at least two years away. But that's I think the ultimate vision of a lot of decentralized exchanges is not just to build a slightly more expensive on chain way of trading cryptocurrencies where you're not going to get hacked by an exchange. It's to build something that's really going to replace a lot of the kind of very opaque, closed off, high barrier to entry exchange systems that currently get used and only have access to big investment banks.
00:57:59.394 - 00:58:19.478, Speaker B: Cool. Well, thank you very much for being on the show. It's been a fascinating conversation. This is an interesting space that touches both on the social aspect of blockchain user onboarding kind of stuff and also technically super interesting in how you actually build this tech. So thanks very much for coming on and talking about it.
00:58:19.564 - 00:58:20.990, Speaker C: No problem. And thanks for having me.
00:58:21.060 - 00:58:23.850, Speaker A: Yeah, thanks. And to our listeners, thanks for listening.
00:58:23.930 - 00:58:24.650, Speaker B: Thanks for listening.
