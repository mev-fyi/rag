00:00:00.400 - 00:00:02.126, Speaker A: Again, I would like to introduce the.
00:00:02.150 - 00:00:36.434, Speaker B: Next speaker, Matt Weinberg, who is a professor at Princeton. All right, thanks. So, like some of the earlier talks today, I'm gonna focus on mechanism design challenges for cryptocurrencies. So let me just give one slide. Repeating some of the themes from Tim's talk earlier of, like, what the talk is not about and what it is about. So I'm not gonna discuss anything about cryptographic network security, and I'm not going to discuss what I'm going to think of as, like, malicious attacks. I'll give, like, a quick distinction at the end of the slide, exactly what I mean by that.
00:00:36.434 - 00:01:11.242, Speaker B: And what I am going to focus on instead are thinking of, you know, cryptocurrencies. They're mechanisms in the sense that you propose a protocol and you would like people to follow that protocol, but you cannot force them to follow that protocol. Okay. And the representative distinction to have in mind of what is and is not the focus of this talk. So if you're familiar with selfish mining, things like selfish mining are the focus of this talk, because selfish mining improves the rewards that you get. It's a strategic thing to do. It does not directly attack consensus.
00:01:11.242 - 00:01:47.940, Speaker B: So if someone is selfish mining, it does not immediately violate the consistency in liveness. Of course, it's a long term concern for consensus. If someone can get too much rewards versus something like double spending, I would say directly attacks consensus, and I'm not going to be considering a tax like double spending throughout this talk. So that's a distinction to have in mind. Okay. And so, using bitcoin as an example, I just want to, again, go through what are deviations from a protocol that you can and can't do, right. So I'm not thinking about people who are going to break cryptography or find hash collisions.
00:01:47.940 - 00:02:13.596, Speaker B: And again, these aspects of the protocol are pretty well done. And what I am going to consider, again, using bitcoin as an example, is that bitcoin says, I would like you to follow the longest chain protocol. You don't have to do that. You can point to any other block you want. The protocol says that, I would like you to, once you find a block, broadcast it immediately. You don't have to do that. Nothing about the protocol can force you to do that.
00:02:13.596 - 00:02:43.922, Speaker B: And again, the protocol says, I would like you to include perhaps the most valuable transactions. I would like you to fill a block as much as possible, but the protocol can't force you to do that. Okay. And the idea behind these are that, you know, there is no way that cryptography can possibly solve these problems. The only way that you're going to solve these problems is you need to incentivize people to follow the protocol. Okay, and then one more reminder. So I'm not going to consider deviations like eclipse attacks or network partitioning attacks or anything else like that.
00:02:43.922 - 00:03:20.628, Speaker B: And again, the goal of this talk is just to isolate the strategic aspect. So it's very possible for some of the things I'm talking about. You might say that model's unrealistic because here's an attack I could do on it and I would say that's fine, I'm just not concerned about that right now. I only want to focus on people trying to make extra revenue. Ok? So what I want to do in this talk is I'm going to think of it more as an overview rather than focusing on one specific result. And of course, overview is biased towards my own research. So here are just, I'm not going to read through all the topics, but I'll just leave it on the screen while I'm talking.
00:03:20.628 - 00:04:06.384, Speaker B: So these are some representative topics that I'm going to cover. And again, the theme is through all of these I'm going to try and show you ways in which, say, existing protocols are not incentivizing people to follow them and discuss the issues that come up there. Okay? So the first thing I want to do is I just want to formally define a game related to, in this case, the bitcoin protocol. Okay. And what that will do is that will formally set up what are the actions that players can take, the actions, strategies that players can use, what are the payoffs that they get for different behavior. And then it's meaningful to ask questions such as what is an equilibrium, what would strategic buyers do? And stuff like this. Okay, so here's the setup.
00:04:06.384 - 00:04:43.094, Speaker B: So hopefully you will look at this and you will think of this as just a simplification of what happens in bitcoin mining. Okay, so in the setup, I'm just going to say that there's a set of miners. Every miner has some mining power, and the sum of the mining powers is equal to one. And at all times every miner is aware of some directed tree. You can think of the nodes in the tree or the blocks and they're pointing backwards to their predecessor and they all share a common root. And the only thing that I want to emphasize in the model is that I said that a miner is aware of a directed tree. So by this I mean that they have heard announced some blocks and there are some blocks that maybe they haven't heard announced.
00:04:43.094 - 00:05:18.144, Speaker B: And so that's not in their tree. Ok, so what happens in the game? So every time step, a random miner is selected to mine a block proportional to their mining power. What does it mean to mine a block? You create a new node and you get to add a directed edge to any single node among the blocks you've heard about. And the second thing you can do in every time step is you can choose to broadcast any nodes. And when you broadcast, you're just going to add it to the nodes that every other miner has heard about. And I just want to emphasize, the idea is that there's nothing in the bitcoin software that forces you to mine on top of the longest chain. You can mine on top of any block you want.
00:05:18.144 - 00:05:56.864, Speaker B: But of course it has to be a node that you've heard about. You need to know the hash. Ok, so what are the payoffs in the game? The payoffs in this game is going to be the limit as the number of steps approaches infinity of the fraction of blocks that you create in the longest chain. Okay, so this is a formally specified game. And I'm going to go through sort of like what are the assumptions I made in defining this game quickly. And after I go through that, if there are any questions, I'll take questions on sort of like why I like this model and why not. So what I want to point out is that, right? So I just said that there's this thing called a time step.
00:05:56.864 - 00:06:14.624, Speaker B: It's a discrete unit. And I said every time step someone creates a block. Okay? So that doesn't sound like what happens in real bitcoin. In real bitcoin, the blocks come at an exponential rate. And what I want to say. So this is abstracting that away. I'm just saying what I really care about is when the block arrives, who created it.
00:06:14.624 - 00:06:43.654, Speaker B: What I don't care about is exactly what physical time that block arrived. Ok? The other thing I said was, I said there's one type of action called broadcast. And I said when you broadcast, everyone immediately hears about it. And everyone hears about it. So this is abstracting away things that I know matter a lot for network security, like the fact that sometimes communication is point to point and sometimes there's latency. But I'm saying for the strategic aspects, this is actually not going to be that critical. So I abstracted that away too.
00:06:43.654 - 00:07:28.248, Speaker B: Okay. And then in defining the payoffs, I chose to say the fraction of blocks that you make in the longest chain that that I decided was the important part. And what I want to point out is that this assumes that the players are trying to maximize their reward denominated in bitcoin per unit time. Okay? And the reason for this is you can think of, because of the difficulty adjustment, the longest chain, it grows proportionally to time. Okay? So when you maximize your fraction of blocks in the longest chain, that is actually maximizing the reward you get per growth of the longest chain, which is the same thing as the reward you get per unit of time. Okay? So, okay, one more slide. And then if there are questions on the model, I'll take those.
00:07:28.248 - 00:07:57.370, Speaker B: So I said that the first assumption, I kind of abstracted away the fact that it takes x, you know, that the blocks arrive at an exponential rate. And I think this is a nice aspect about the model because it makes the math simpler. And I don't believe that this affects any of the qualitative conclusions that you would draw with respect to the incentives at all. So I think this is a good thing to do. Okay. Similarly, I said that we abstracted away all of the hard aspects of communication. I just said when you broadcast, it's immediate, everyone hears about it.
00:07:57.370 - 00:08:25.450, Speaker B: And again, this makes the model and math in this case, drastically more transparent and simple. And again, for the strategic aspects, I don't think this affects the conclusions you would draw at all. So I again think this is a good thing to do. The last assumption is different. So for the last assumption, I said this assumes that the players are trying to maximize their bitcoin per unit time. It also assumes that they are paid through a block reward and that the transaction fees are zero. So this, I think, is different than the first two.
00:08:25.450 - 00:09:18.150, Speaker B: This is not just mathematically simplifying, this is actually saying something about the system. Okay? So it assumes, for instance, that the exchange rate between us dollars and bitcoin is what economists would call exogenous. So it means that if someone is selfish mining, it does not affect the us dollar to bitcoin exchange rate that you want to actually maximize the number of bitcoin you get. It also assumes that the block reward dominates the transaction fees and that people are really trying to maximize the amount of block rewards they get, not the transaction fees. Okay? And so what I just want to point out about assumptions like this is that I think it is consistent to believe both of the following. So first, I believe that it is valuable to derive results under these assumptions because it gives you good insight into the block reward model and into settings where maybe you are genuinely trying to maximize the bitcoin you get. And I also believe that future work should examine these aspects separately.
00:09:18.150 - 00:09:43.652, Speaker B: So one of the results I'm going to tell you later on is going to change the model to look at transaction fees instead of the block reward. Okay, so now let me pause. Are there any questions just about the way that I set up the model? Yeah. Time discounting. Okay, so that's another one I would say that could have gone into this. I think that's a reason. That's a reasonable assumption that I also would be, I think would be interesting to consider.
00:09:43.652 - 00:09:59.426, Speaker B: And in this model, I chose not to consider that. I would think of that as just an arbitrary decision. You could consider it or not. I think both would be interesting. All right. Okay. So, again, just to get a little bit more comfort with this model.
00:09:59.426 - 00:10:32.230, Speaker B: So what does the longest chain protocol sound like in this language? So, one thing that I think is nice is that this is a complete description of the longest chain protocol in this game. It's three english sentences. Right. So what does it ask you to do? Whenever you're selected to build a block, you should point to the furthest node from the root among stuff you've heard about. When you need to break ties, you should break ties in favor of the first node that you heard about. And again, because I assume that communication is discrete, there may actually be a genuine tie in the first node that you heard about. So if there is one, then you should still just do it randomly, and you should just always broadcast everything that you've heard about every single round.
00:10:32.230 - 00:11:12.460, Speaker B: Okay, so this is the longest chain protocol. Okay. So all the way back in Nakamoto's white paper, so he obviously would not have used this exact language to say it. But I think the following intuition was conveyed, which was that if all other miners are following the longest chain protocol and you have less than 50% of the computational power in the network, then your best response in this game is to also follow the longest chain protocol. Okay. So, I think this is, I would say, mapped onto this game what people mean when they say that it's secure, unless someone has 51% of the computational power. Okay.
00:11:12.460 - 00:11:48.194, Speaker B: And then, you know, I think, hopefully everyone remembers the intuition for this. The intuition, was that right? If the rest of network is more powerful than you, then there is a specific attack that does not work. Okay. And that specific attack is you cannot just try to build your own separate chain, because if you do that, then eventually the 51% is going to outpace the 49%, and you're not going to create the longest chain. Okay. So the intuition, in some sense, was correct in the sense that there is a specific attack that is not a better response than following the protocol, but it does not mean that there's nothing you can do that's better. Okay.
00:11:48.194 - 00:12:27.684, Speaker B: And so there was a big result in 2014, and this is actually kind of roughly what got me interested in cryptocurrencies was realizations like this. The theorem is that, actually, in this game, if you have more than a third of the computational power, it is actually not a best response to follow the longest chain protocol, even when everyone else is following the longest chain. Okay. And this is the selfish mining attack. I don't know if everyone knows exactly what the attack is. I'm not going to go through all of the details, but the intuition for the attack is important for some of the stuff that I'm going to say later. So, the main intuition is the following.
00:12:27.684 - 00:13:10.734, Speaker B: So when you create a block, you should hide it instead of immediately broadcasting it. And so what does this do? So, one thing that might happen is maybe you get lucky and you happen to mine two rounds in a row. Now, what happens if you mine two rounds in a row? Now, the next person who mines is not going to know that you have a private chain of length, two longer than the current longest chain, and they're going to mine in the wrong place, and that block is going to be wasted. Okay. And that's good for you, because that's less blocks on the longest chain, and so you will have a greater fraction of blocks on the longest chain. The other thing that might happen is maybe you get unlucky, and maybe you don't mine in the next round. And if you don't mind, in the next round, then you run the risk of losing this block that you just hid.
00:13:10.734 - 00:13:37.188, Speaker B: And that's bad? That costs you a block in the longest chain that you otherwise would have had. Okay. So there's a. You know, there's a risk and reward, and it turns out that if you have enough computational power, a third is the magic number, then the expected gain outweighs the expected loss, and this is strictly profitable for you to do. Okay, the other theorem that came. One of these papers is at EC. I forget where the other one was published, but they came two years later.
00:13:37.188 - 00:14:28.104, Speaker B: And what they said is that, yes, selfish mining is a problem because the magic number is not 50%, it's 33%. But it turns out that for the same game, that if everyone has less than, the number is roughly 30% of the mining power, then longest chain actually is a best response to all other miners using longest chain. So what that means is that unless there are sufficiently large miners, it is a Nash equilibrium for everyone to follow the protocol. Okay, so the takeaway, I would say, from this line of works is that, yes, you should be concerned about large miners, not necessarily 50% miners, but if you really believe that the system is filled with very small miners, then the block reward model with proof of work seems to be incentive compatible for people to follow. Longest chain. Yeah. What is meant by Nash equilibrium in this context? Say again? What is meant by Nash equilibrium? Sure.
00:14:28.104 - 00:14:53.204, Speaker B: So, I formally specified a game, and so that game said that your payoff is equal to the fraction of blocks that you get on the longest chain. And so, now that I formally specified a game, I literally just mean if everyone else is using longest chain, your best response is to also use longest chain. And so therefore, everyone using longest chain is in ash equilibrium. So this is our repeated game out. So, like, is there some sort of. Sure. Yeah, yeah, yeah.
00:14:53.204 - 00:15:13.836, Speaker B: So, I guess what I mean by that is, let me take, like, a minute to think about it offline. My gut reaction is that it should be like, it's not a finite horizon game. So subgame perfect doesn't make sense, but it should be that, you know, it should have all those properties. But I don't want to. I want to take another minute to think about that. Yeah.
00:15:13.940 - 00:15:18.664, Speaker C: About the first year. What's the Nash equilibrium? Is it known?
00:15:19.524 - 00:15:22.676, Speaker B: I don't believe two miners that are above the threshold.
00:15:22.740 - 00:15:31.984, Speaker C: Right. And yet the system is secure. I mean, nakamoto is secure. Do we know? Because if two selfish miners fight each other, what's going to be the outcome?
00:15:32.284 - 00:15:38.084, Speaker B: So, I don't know. A time might know better. I don't believe that there's, like, a closed form solution for the equilibrium just.
00:15:38.124 - 00:15:39.644, Speaker A: Now from f this week.
00:15:39.804 - 00:15:40.624, Speaker B: Okay.
00:15:43.284 - 00:16:02.548, Speaker A: There's a nice. It's on the website. You can take a look. I don't recall the name right now, but they reduced state machine to just a short branch, and then they're able to find closed form expression for two competing strategic miners.
00:16:02.676 - 00:16:14.214, Speaker B: Okay, so there's. So just repeating. There was a recent paper that did find the closed form equilibrium for two competing strategic miners. There was a follow up to your question that I didn't quite understand. That's it.
00:16:14.514 - 00:16:17.214, Speaker C: Okay, so we know the Nash equilibrium.
00:16:18.794 - 00:16:41.820, Speaker B: In that case, an approximation, approximately. Yes. We know a Nash equilibrium in the case when there's more than one strategic minor. The other thing, I would say, even when there's one strategic minor. I'm not saying that everyone following longest chain and one person, selfish mining. I'm not saying that's a Nash equilibrium, but that's why I'm asking. Good.
00:16:41.820 - 00:17:27.690, Speaker B: So I would say, okay, there are two separate questions, though, which was, what happens when there's two and what happens when there's only one? And so I think the claim is that even when there's two, you now know an equilibrium, whereas it wasn't obvious that we knew the equilibrium when there was one either before. Okay. Okay. So let me just give now kind of like a taste of why I think this research and everything I'm going to talk about afterwards is important. So, my understanding of reality is that selfish mining has not been detected on bitcoin, but it has been detected on altcoins. And kind of the goal of the research that I'm going to talk about is to just be able to answer why. So I'm not interested in very quantitative answers to be able to say precisely for bitcoin, this is exactly why.
00:17:27.690 - 00:18:03.480, Speaker B: But I would like to have qualitative understandings of why for one coin it happens and another coin it doesn't. Okay. The obvious answer might just be that there's no single miner that has more than 30% of the power. And this is not the selfish mining is not the kind of attack that you can safely do undetectably with a mining pool. You would need to actually own 30% of the hardware. Another reason that I actually buy is that maybe it's because the exchange rate is not exogenous. So maybe it's the case that if you were to selfish mine, yeah, you would make more bitcoin, but maybe those bitcoin would turn into less uS dollars.
00:18:03.480 - 00:18:54.104, Speaker B: And maybe that's why right now it doesn't work. The only thing I would say in response to that is that I would ask, okay, so what would happen if it was possible for a large miner to also short sell bitcoin? And then I would say, okay, so now maybe you don't care so much if you hurt the exchange rate of bitcoin. Maybe that's even better for you if you can do that. And currently, my understanding is that it is impossible to short sell large amounts of bitcoin, but that might be something that changes in the future. So what I'm trying to say is basically just like, it's important to understand things like selfish mining. Even if we're not seeing them right now on bitcoin, we should understand why are we not seeing them right now on bitcoin, and what might change to cause it to become profitable on bitcoin or some other cryptocurrency that matters. Okay, so now I'm going to transition into talking about some more of my own work.
00:18:54.104 - 00:19:17.946, Speaker B: So, this paper has actually been around for a while. So this is from 2016. But what it looks at is the difference between transaction fees and the block reward. Okay? So, currently in bitcoin, their transaction fees are low. And everything I talked about before us actually assumes that transaction fees are not just low, it assumes that they're zero. And I think that's a reasonable approximation to the state of affairs that we were trying to model. Okay.
00:19:17.946 - 00:20:07.716, Speaker B: But everyone knows every four years, the block reward halves, and eventually it's going to be zero. And the hope is that transaction fees will take over. And so there's this hotly debated topic, which is, what is the right way to, excuse me, make sure that transaction fees rise and are stable. Okay? And this is one of the aspects of the block size debate. And what I want to point out, though, is that kind of prior to our paper, there was not a lot of debate about the following. And it was kind of just assumed that, like, okay, look, if the miners are risk neutral, and it's the case that you somehow get transaction fees to rise and become stable and become exactly equal to the block reward in expectation, then it really shouldn't matter whether you're rewarded in 12.5 bitcoin deterministically through a block reward, or whether you're rewarded 12.5
00:20:07.716 - 00:20:59.988, Speaker B: in expectation through stable, continuous transaction fees. Okay? And part of that is even true. It's the case that if everyone is using exactly the same strategies and everyone is risk neutral, no one really cares whether they're being paid twelve and a half deterministically or twelve and a half in expectation. Okay? And the informal theorem from this paper is that this is kind of very much not true. And incentive issues with transaction fees are way more complex than with the block reward, even with risk neutral miners, even when the transaction fees are stable. And let me for now, focus on this, because this is a concrete theorem statement, which is that there is a selfish mining attack, and that attack is profitable no matter your computational power. Okay? So even if you have less than 1% of the computational power, there is a selfish mining attack you can do that is better than being honest.
00:20:59.988 - 00:21:47.494, Speaker B: And just, again, contrast this with the block reward setting, where if you had less than 30%, then there's no selfish mining attack that is profitable. Okay? And the intuition to have, I'll give you a little bit more intuition on the next slides, is that there is a way richer strategy space. And now you can use a strategy that depends on the number of fees that are included in blocks. And so, yes, it's the case that if you use strategies that you could have used in the original setting, you're going to get the same in expectation. But there's just now richer ways that you can try to deviate from the intended protocol. Okay, so what I would like to do, again, just in the interest of being formal, I would just like to tell you what the model is. But this time, I don't want to dwell on it too much, but I just want to show you how you can still do something simple that sounds like the block reward one.
00:21:47.494 - 00:22:31.966, Speaker B: So just like before, everyone has a hash power, everyone's aware of a directed graph. And now since there are transaction fees in the system, I just want to say, how do I model that? So this is what I mean by continuous and stable. Is it for any interval from zero to t, a total of t transaction fees have arrived. They're infinitesimally small and everything is continuous. Ok, so now I would say for this game, it actually does matter the arrival time of the blocks, because that's going to determine how many fees you can include or how many fees have arrived since the last block. So according to a Poisson clock with rate one, a miner is going to be selected to mine a block, again proportional to their hash power. What do you do when you mine a block? You create a new node point to anything that you've heard of.
00:22:31.966 - 00:23:15.724, Speaker B: And now what's the other decision you get to make? You get to decide how many fees you want to include. Okay, so what's the only constraint? Well, you can't include fees that have been in previous blocks. So it better be the case that if you're mining a block at time t, it better be the case that the sum of all fees included in U and everything before you. The sum of those fees better be less than or equal to t. Okay, and again, you can broadcast like before, and the payoffs are now going to be again as the time goes to infinity the amount of fees you have in the longest chain at time t divided by T. So this is again trying to amortize. So now capital T actually has something to do with physical time, and it's trying to say what is the rate at which you are earning money.
00:23:15.724 - 00:24:04.792, Speaker B: Ok, so this is just, again, I want to think of this more as just a proof of concept that you can make a simple sounding formal model for transaction fees that captures the transaction fees issues. Ok, so what I would like to do now is give you intuition for what's different between transaction fees and the block reward model. So the first thing I would like to do is, again, just remind you what is longest chain? It's exactly the same as before, but we ask that you include the maximum available fees because that's what you're supposed to do. Ok, so let's say that somehow you find yourself in this situation. So there was a fork that just happened, happened naturally, and it happened to be the case that you heard about this block first. So you heard about a first before B. And for some reason, it happened to be the case that this block included more fees than this one.
00:24:04.792 - 00:24:48.344, Speaker B: Okay, so you've heard about these two blocks. And if you are following the longest chain protocol in earnest, you are supposed to tie break in favor of the one that you heard about first. And so you're going to create this block that includes all available fees, and that's going to be five. So something else you could do, you could just like, barely deviate from the longest chain protocol. You can say, the only thing I'm going to do differently is I'm just going to tie break differently. I will never mind on top of something that is not longest chain, but I'm just going to be a little bit eager and I'm going to break ties in favor of whichever one will let me include the most fees. So in this case, what you would do instead is you would say, well, instead of making a block worth five here, I'll make a block worth ten here.
00:24:48.344 - 00:25:15.788, Speaker B: Okay, so that doesn't seem like a huge deal. It's. It's. It's really just a difference in tie breaking. And if everyone is using this, you will still have a pretty functional longest chain protocol. The problem now comes is what if you're in this situation and you think or you know that the other miners are using this petty or eager tie breaking rule. So now what you could do is you could, um, follow the longest chain and you could make your block that's worth five.
00:25:15.788 - 00:25:50.002, Speaker B: And you'll definitely get at most five by doing that, because that's the number of fees that remain. And another thing you could do is you can instead decide to not follow any the longest chain protocol at all. This is no longer just different tie breaking. You created a new block that creates this situation that the previous miner saw, and now this block is worth ten. If the next miner chooses to do this petty tie breaking and get ten for themselves instead of getting for themselves. Okay, so. Okay, so it's a realistic, you know, it's a reasonable question to ask.
00:25:50.002 - 00:26:33.826, Speaker B: Like, should you expect in this setting, should people, you know, tiebreak in this petty way? Or do I think they would still follow the longest chain, you know, the longest chain verbatim? I don't know. It seems reasonable to me to expect that at least a decent fraction of the network would probably tie break in this way because it's still fairly honest and you're just getting extra rewards by tiebreaking, by doing so. Okay. So that's kind of the intuition for why there's a richer strategy space. And I just want to point out that, like, this whole situation, this makes no sense in the block reward model, right? So in the block reward model, this number is the same as this number is the same as this number. And it doesn't make sense to try and, like, you know, cause this fork just so that you can get a block that's worth the same as your block that was over here. Right.
00:26:33.826 - 00:26:53.944, Speaker B: So this only makes sense because of transaction fees. Okay. And the same intuition is going to show up. I just want to give you one slide of intuition for why is selfish mining profitable, no matter your computational power in the transaction fees model. Okay, so I want to repeat the main ideas for selfish mining. Right. We said that when you create a block, you're going to hide it.
00:26:53.944 - 00:27:14.928, Speaker B: And the one new idea is, I'm going to say only hide blocks that have very low fees in them. Okay. So if you happen to create a block and there's just not a lot of fees, use it to selfish mine. If you happen to create a block and there's a lot of fees, don't use it to selfish mine. Just publish it immediately as normal. Okay. The reasoning is the same.
00:27:14.928 - 00:27:59.784, Speaker B: If you get lucky and you mine two rounds in a row, you can use these to cancel others. If you get unlucky and you don't mine next round, you might lose the hidden block. Here's kind of the. Again, the only key idea is, you know, who cares? If you only hid blocks that were worth very little, then it doesn't really cost you that much to just lose them. So you might as well try to selfish mine and get lucky. And basically, the idea is that there's a sufficiently small cutoff that you will mine blocks with that few fees with nonzero probability, even if you have 1% or less than 1% of the total hash power. Ok, so the main takeaway from this section, I would say, is that just because a protocol appears incentive compatible with the block reward, don't assume it's going to stay that way with transaction fees, even if everyone is risk neutral, even if everything is continuous and stable.
00:27:59.784 - 00:28:38.314, Speaker B: And the other thing I want to highlight is I like thinking of selfish mining as being a lens that we used to uncover this issue. Right. So I'm not necessarily claiming that I think the attack that is going to cause problems is selfish mining, but I would say that we use selfish mining as a lens to learn that even small miners might be able to gain the rewards when transaction fees matter instead of block rewards. Okay, so are there any questions? So I'm going to transition to something a little bit different. If anyone has questions, just feel free to ask. Cool. All right, so next thing I want to talk about is proof of stake.
00:28:38.314 - 00:29:11.774, Speaker B: So we heard from a couple people earlier. I'll just, you know, here's a different slide illustrating the same point, which is just that bitcoin uses a lot of electricity. You know, these are fairly significant countries, and bitcoin is kind of right in the middle of the pack of them. Okay, so that means proof of work is kind of wasting hundreds of millions of dollars of electricity every year. Some people would say that visa is wasting more money by existing than bitcoin is. On the other hand, you can still try to do something better than this. And the main competing proposal is something called proof of stake.
00:29:11.774 - 00:29:43.480, Speaker B: And I think everyone here is familiar with the concept. It just means that you should pick a miner proportional to something that can't be freely duplicated. And instead of computational power, the currency itself can't be freely duplicated. Ok, so what I want to highlight is one specific kind of approach. So, it's actually very different than the BFT protocols that we heard about earlier. And this approach basically says, I like the longest chain protocol. I just want to update it to not be feasible to have extra computational power and do better.
00:29:43.480 - 00:30:08.740, Speaker B: Okay, so here's just one sample application. So, right, you can think of proof of work, has this stuff that you're trying to hash and be small, be like the contents of the blocks and the idea of the miner. And, you know, this one time pad and some other stuff that I'm skipping and one sample proof of stake protocol. It's a straw man. This is not a good idea. But what you could do is you could just have stuff be, say, the current timestamp and coin that you own. Okay, so what's the idea.
00:30:08.740 - 00:30:46.884, Speaker B: Why is this not proof of work? Well, the idea is that it only makes sense every timestamp to just do one hash for every coin that you own. It just doesn't make sense to do any more hashes than that. You're not going to be any better at finding valid blocks. Ok, so what I want to highlight is that the main challenge, I think, between proof of stake and proof of work is the source of randomness. Ok, so let me just think about. So for proof of work, as long as this h is a reasonable hash function, you get two kind of nice properties for free. So one of them is that the next miner is unpredictable.
00:30:46.884 - 00:31:39.302, Speaker B: So even if I know everyone who's mined in the past, whoever is going to be the next miner is completely independent of this. So I'm abstracting away the fact that the hash function is not truly a random oracle, but except for that, it really is truly independent of everything that's happened previously. Okay, and for proof of stake, it turns out to just be really challenging to replicate this. Okay, so using this example as a straw man, the sample kind of thing you can do is you can actually pre compute all of the coin times that pairs where you would be eligible to mine if you owned that coin. And so what you can do is now this kind of lets you set up maybe like a really good double spend or lets you be more effective at selfish mining. Maybe you just want to sell those, you want to gather up all those coins or something like that. So this is an undesirable property of the specific one that I proposed.
00:31:39.302 - 00:32:25.034, Speaker B: And kind of what I want to claim is that yes, this is an exceptionally bad idea, but there are formal barriers to using the blockchain itself as a source of randomness. It's not just that you need to come up with a better idea, there's really kind of a formal issue. So again, in order for me to kind of make any kind of formal statement, I need to just give some simplified formal definition of what I would call a longest chain proof of stake protocol. So I do want to quickly disclaim this is a simplified definition. And there's other parameters that need to go in here, but this is just to get the main points across. Okay, so I'd say a proof of stake protocol should have two functions. The first function is a verify function, and that's what you probably have in mind.
00:32:25.034 - 00:33:10.550, Speaker B: It takes as input a block, it takes as input a time step, and it should just say yes if that block is valid, and no if it's not valid. So, for example, maybe this function just says, if the block claims to be created at a time prior to right now, and the hash of the time step and the coin used to mine it is small, then it's valid. And if the block claimed to be created in 2030, I would say that's not valid right now because it's not yet 2030. And if the hash is too big, then I would say it's not valid. It didn't prove stake. The second kind of function, I'll say, is called mining. So what is mining? It takes as input some block a that you would like to build on top of some time t, which you should think of as the current time, and some coin c that you are using to quote unquote proof stake.
00:33:10.550 - 00:34:08.430, Speaker B: And what is this going to do? It's going to say if there is some block such that it would pass the verifying test and a would be its predecessor, and the coin used to mine that block is c, then you should output some block d, maybe equal to b, maybe not equal to b, that also passes the verify test. Its predecessor is also a, and that the coin is also c. Okay, so, for example, if this is the verifying function, then one you know what you should do for mining is you should check to see, is the hash of the time step in your coin small? And if so, you should just include all unspent transactions and point to a. Okay, so these are just the kinds of functions that I claim you need to define a proof of stake protocol. And the important thing is, I want to say that this verify function should be computable and polytime for everyone. That's the same as proof of work. The main distinction between proof of stake and proof of work is, I would say this mining function should be poly time for whoever owns the coin c.
00:34:08.430 - 00:34:34.564, Speaker B: Okay, so in proof of work, this is different. In proof of work, it's computationally expensive to run this operation. And so that's why it makes sense to have more computational power. But for proof of sake, it doesn't matter how much computational power you have. As long as you can run this function, which is poly time, then you're good. Okay, so now let me just describe with that in mind, what is a stronger selfish mining attack. So I'll call it predictable selfish mining.
00:34:34.564 - 00:35:00.752, Speaker B: And it's an informal description, basically just because of this thing that's in quotes. But here's the idea. So you say, ok, look at the current longest chain, just like you would do in regular selfish mining. And what you should do is just try to mine for all coins that you own in the current time step. You should see if you can create a block. Once you create a block, you need to decide whether you're going to hide it or whether you're going to broadcast it. Remember we said for selfish mining, it works.
00:35:00.752 - 00:35:47.284, Speaker B: It's really good for you if when you hide a block, you mine the next one. And it's really not good for you if when you mine a block, you don't mind the next one. Okay? And so the nice thing here that predictability helps is you can compute exactly, because this is a proof of stake protocol. And this function can be computed in poly time. You can figure out what is the next time step such that you own a coin, such that you could make a block on top of this one that you just created. Okay? So you can do that, and you can do that in poly time because it's proof of stake. Now, once you know this time, you can say, if this happens to be unusually soon after right now, then you should hide it because you're very likely to, this is very likely to be the next block that is mined and that's good for you.
00:35:47.284 - 00:36:41.184, Speaker B: Or if it's not unusually soon, then you just mine like normal. Okay? And so the idea is that again, no matter how small your stake is, there's always going to be a sufficiently soon after now such that it makes sense for you to hide it now because you're still fairly likely for this to be the next block. And so again, that gives you the same kind of claim that says selfish mining for longest chain protocols in proof of stake creates a greater fraction of blocks than being honest. And this is true no matter your fraction of stake. Okay, so quick things I want to note. So it is not the case that just because you create a larger fraction of blocks in the longest chain, that doesn't have to mean that this is profitable. So maybe you come up with a different reward scheme that makes this not profitable, or maybe it is a little bit profitable.
00:36:41.184 - 00:37:13.728, Speaker B: But perhaps you can prove a theorem that says for some reward scheme you come up with, you can upper bound how profitable this is. And maybe that's good enough. And the main thing I want to point out, right, so everything I talked about, there are some versions of these ideas. It makes sense for BFT protocols, but this theorem, I said there's no sense in which it applies to BFT protocols. So it really only makes sense for longest chain. Okay, so I want to, what am I supposed to finish? Does anyone know, five minutes. Five minutes.
00:37:13.728 - 00:38:13.684, Speaker B: Okay, so I'll at least pause here and just say that the recurring theme from the first three aspects is, again, I'll repeat, is using selfish mining as a lens to analyze the incentives in longest chain protocols. Okay, so again, the things I would like to distinguish is that for proof of work with block rewards, there were these theorems that said that if no miner has more than 30%, then provably the longest chain protocol is a nash. Okay, so that means that if you're only concerned with small miners, small miners cannot game the system. However, for block reward with transaction fees or longest chain proof of stake, we saw that they were vulnerable to greatly improved selfish mining attacks. Which means that even you should be concerned, even if you think everyone is small, you should be concerned that even the small miners might try to be gaming the system to get an extra buck. Ok, so that's the thing I want to say about this. And then in the last five minutes, I'll try and quickly go through one last result that's a little bit different.
00:38:13.684 - 00:38:54.054, Speaker B: Okay, so the focus of the last couple minutes is just trying to understand why is bitcoin mining so centralized? And this is different than, for instance, being. No one should be surprised that visa is centralized, right? It's directly in the code that visa runs everything. Okay. But at least someone and I kind of cherry picked this bolded quote from a white paper that said, claims that nobody could have predicted that proof of work would result in centralized mining. Okay, and the informal thesis of the paper I'm going to summarize in a couple minutes, is that actually there's very basic economics that does predict that proof of work was always going to be centralized. It's not just a temporary state. This is the way things will just be.
00:38:54.054 - 00:39:43.076, Speaker B: Okay, and let me first try and say why it's not immediately obvious that this would happen. And again, the key property of bitcoin mining is this proportional reward scheme. And one thing that's really nice about proportional rewards is diminishing marginal returns. So what that means is that if I fix the computational power of everyone else, then the change in my reward as I increase my investment in mining power is actually decreasing. Right? That's because as I invest more in mining power, each unit of existing mining power becomes worth less. And if I already have a lot of mining power, then that might not be good for me, because I'm making my own mining power worth less by increasing the total amount in the system. Okay, so this property alone actually suggests that mining should naturally be decentralized.
00:39:43.076 - 00:40:35.174, Speaker B: This is a really good property for decentralization because it's not in my interest to just pump up the total mining power and make what I already have worth less. Okay, and this is actually really good intuition. So I'll like prove that on a cup in a couple slides. But this intuition only holds if all miners have the same cost of electricity. The other aspect is that if the miners have different electricity costs, you should expect that people who have less, lower electricity costs should choose to invest more in mining. And so now you have this question of like, okay, what's more important, the asymmetric costs or the diminishing marginal returns? And the main piece of this paper is that the asymmetric cost completely dwarves diminishing marginal returns. So even what seems like really tiny asymmetries and costs turn out to be very important in leading towards centralization.
00:40:35.174 - 00:41:02.594, Speaker B: Ok, so let me just get the entire model up, because I'll go through it a little quick now. So it's very simple. So it's just that every miner has some cost per unit of computational power. They choose how many units of power they want to purchase. That's the entire model. What's their payoff? The total reward is normalized to one. How much payoff do you get? You get your fraction of the reward and minus whatever you paid for your mining power.
00:41:02.594 - 00:41:57.642, Speaker B: Okay, so what's an equilibrium? An equilibrium is just that. Either your marginal cost is equal to your marginal gain, or your marginal cost is greater than your marginal gain, and you chose not to invest anything. Okay, so now I want to ask, here are the kinds of questions. What are the equilibrium in this game? Different profiles of cost, and how centralized is it as a function of the different costs? So here's an example I would like you to have in mind. Say that there's 100 miners who all have cost 99 per unit of electricity, and there's a single miner who has a cost of one. I want to ask, in equilibrium, what is going to be the ratio of the investment of the cost, one miner versus the investment of the 0.99 miner? Okay, so for example, obviously they're going to invest less, but how much less is it going to be? A little bit less? Maybe a little bit squared? Less? Maybe like way less? Or maybe like way, way, way less.
00:41:57.642 - 00:42:30.794, Speaker B: Okay, and so this model will, the analysis will tell us how to answer this. And since I'm low on time, let me just get to the punchline. So if you're really good at math, you can maybe try and read through everything quickly. But the two things I want to highlight are that if the costs are actually exactly the same for everyone, then you do get what the intuition suggests. In equilibrium, there's a unique equilibrium. Everyone invests the same amount and everything is perfectly decentralized. That's what you would like.
00:42:30.794 - 00:43:07.458, Speaker B: But it turns out if we revisit the same example, then this theorem characterizing the unique equilibrium says that actually what happens is this single minor, whose cost is barely worse than these 100 miners previously, actually does not participate at all in equilibrium. Okay, so again, the main thing I want to highlight is that this seems like not a big deal, right? 0.99 versus one seems like not that important. But just the way the economics play out, it's a huge deal. And the amount of the mining power that they're going to have turns out to be very different. Yeah.
00:43:07.646 - 00:43:12.334, Speaker A: In both cases, will you conclude that no one is making any money?
00:43:13.554 - 00:43:44.464, Speaker B: No. So people will still make money. The marginal cost is equal to the marginal gain, but all of the investments you made up until the margin is getting you profit. Let me skip this. So there are some extensions that you can ask me about later. And the main thing that I want to take away from this is just so the not surprising thing is that asymmetric costs should matter. I think the surprising thing is that it matters so much.
00:43:44.464 - 00:44:09.010, Speaker B: And so what I would say the takeaway from this is that I do think this should be kind of like a first order concern to care about the economics of investment in mining power or stake or space or whatever expensive resource you want to be using to drive your system. And. Yeah. Wouldn't that say that if you repeatedly.
00:44:09.042 - 00:44:11.014, Speaker A: Apply this, that there should be only.
00:44:11.634 - 00:45:00.434, Speaker B: The people with the lowest cost of electricity should mine no one else? No. So what will happen? So what will happen is that if there's a single miner, then they have no, I mean, they have no incentive to just keep investing more and more. They're already getting all the rewards. So the idea is there is this force of diminishing marginal returns. That does say that in some cases, if our costs are the same or close enough, then someone else will invest besides just the one person. So the question is sort of like, do you get a lot of mileage from diminishing returns, or does it basically just guarantee that there's not a single minor? And the claim is basically, unless the costs are extremely close together, basically all it guarantees is that there's not exactly one. Yeah.
00:45:00.434 - 00:45:19.878, Speaker B: Ok, so let me, since I'm now like a couple minutes over time, let me just end here. You can read this on your own and ask me questions offline, if you're curious. Yes. Any questions?
00:45:19.926 - 00:45:28.414, Speaker A: Yeah, we assume the new costs, but like, one thing about gas centralization will just be convex costs.
00:45:29.194 - 00:45:46.482, Speaker B: Yeah, good. So the question. Yeah, good. So I think so. One thing we did look at was the opposite of that. So we looked at economies of scale and basically observed that maybe unsurprisingly, things are even worse. It may be surprising how much worse they are.
00:45:46.482 - 00:45:59.604, Speaker B: We did not look at. We did not look at convex costs, but I don't know whether that would completely mitigate it or whether. I don't know exactly what that would change, but I think that's a good idea to do. Yeah.
00:46:03.344 - 00:46:14.726, Speaker C: I had a question about the long range thingy for proof of stake, but I would need you to go back to the slide when you describe the attack or the check.
00:46:14.800 - 00:46:15.414, Speaker B: Sure.
00:46:18.954 - 00:46:20.202, Speaker C: The selfish mining attack.
00:46:20.258 - 00:46:21.494, Speaker B: I mean this one.
00:46:23.074 - 00:46:43.490, Speaker C: Yeah, exactly. So suppose, I'm not saying this is part of your game, but suppose I see the coins of everyone, and I can actually simulate that strategy for everyone else in the game, and so I can kind of predict when you're going to do this. Does that change the concept of the attack?
00:46:43.682 - 00:47:21.714, Speaker B: Let me just quickly repeat the question. So the question was sort of like, what if you can predict whether other people are about to use this attack? Because you can, you know, you can do this for anyone with any of their coins. So the easy answer, I would say, is that I'm not trying to propose an equilibrium, I'm just trying to say that being honest is not an equilibrium. So what I would say is, that's the main thing I want to claim. So I would sometimes would just say, I think that's an even stronger point, which is that in addition to being honest, not being in equilibrium, probably the equilibrium of this sounds very chaotic, and I don't know what I would guess it would be.
00:47:26.614 - 00:47:36.154, Speaker A: Why would I care about selfish mining as long as the blockchain keeps on getting guilt? I know other people have answered it.
00:47:36.294 - 00:48:09.106, Speaker B: So if anyone else wants to give a different answer than me, that's fine, but I would say the main reason is you care about it in the long run. So you don't care about it right now. I think if someone were to selfish mine on bitcoin, it would not crash right now. But if someone could sustain selfish mining on some cryptocurrency for a long period of time, they would get more rewards than they're supposed to get. They would eventually gather up more resources than they're supposed to have, and then maybe they would have enough to launch a real, like, 51%. So I would say it's a long term threat and also reduces chain quality.
00:48:09.210 - 00:48:14.866, Speaker A: Like, if you want to do any cross chain operations, you have no way to reliably, like, observe the state of.
00:48:14.890 - 00:48:16.026, Speaker B: The other chain that you want to.
00:48:16.050 - 00:48:18.490, Speaker A: Use because the forcefulness of the chain.
00:48:18.522 - 00:48:46.594, Speaker B: Just goes massively up. Yeah. So just. I don't know if that will get recorded. The other answer was that it does affect the quality of the chain. It's not as bad as, like, you know, like completely shutting it down, but it is not just growing linearly like you would hope, because periodically you have these long, long forks being revealed and changing, and that's bad. I don't know if there were other people with other answers too, but, yeah, that's exactly what I wanted to say.
00:48:46.594 - 00:48:49.814, Speaker B: Yeah. Okay. Thanks.
