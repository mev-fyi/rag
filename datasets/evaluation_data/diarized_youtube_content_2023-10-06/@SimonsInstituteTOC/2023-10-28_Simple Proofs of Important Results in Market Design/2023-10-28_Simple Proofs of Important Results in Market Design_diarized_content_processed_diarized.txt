00:00:06.400 - 00:01:17.244, Speaker A: Thank you. So, this is, not only is it the first time that I've given this talk, it's the first time I've tried to give a talk at all like this, because often the point of a talk is new theorems, but all of you are going to know some of the theorems I'll talk about today, and some of you may know all of the theorems, but I want to tell you about new proofs. And of course, we're celebrating this new book, and I'm hoping that by the end of the conference, I'll understand the photograph at the beginning of the book and why it's appropriate. So what I said in my forward to the book was two papers strike me as really important in this general literature. Two early papers by Galen Shapley, the famous paper on the marriage problem, and by Shapley and Scarf, the paper that introduced top trading cycles. But another important thing about both those papers is some of the proofs were very easy, and later we proved the results with harder proofs. But over time, the proofs have gotten easier, too.
00:01:17.244 - 00:02:11.344, Speaker A: So I want to take you through some of modern matching theory, not the way I would if I were just telling you what are the important theory, theorems and matching theory, because many of them I still can't prove in very simple ways. But I'm going to try to give entirely verbal proofs in the style of Gale and Shapley. So, Gale and Shapley have a famous paragraph at the end of their paper which notices that their proofs about the deferred acceptance algorithm are verbal. Essentially, they say the argument isn't in mathematical symbols, but in English, no obscure technical terms. One hardly needs to know how to count. Yet any mathematician will immediately recognize the arguments as mathematical, while people without mathematical training might have difficulty following them. So I think the name of the game is to have verbal proofs that are real, proofs that don't just say, this is a proof sketch.
00:02:11.344 - 00:02:53.776, Speaker A: So I feel a little bit in giving this talk, a little bit as if I were going to do stand up comedy. That is, stand up comedian has. Has some idea of jokes that are presumably funny, but he knows that unless he delivers them properly, they won't make the audience laugh. So I've got some proofs that are presumably simple and verbal, but unless I deliver them properly, and I haven't tried delivering them before, they may not seem that way to you. So, as in stand up comedy, I invite you to heckle me. And the manner of heckling that I suggest is, if you think the proof is incomplete that it's not a real proof. Tell me what your objection is and I'll see if I can fix it in a verbal way.
00:02:53.776 - 00:03:50.104, Speaker A: And one of the things you'll see is when I start, a lot of the things, I prepared this talk by cutting and pasting some things from more traditional presentations. So I'm going to actually have some symbols, and I left them in here, some subscripts when I'm defining the problem. But I'm going to try not to say them. Maybe we can make them disappear entirely. So Galen Shapley proposed a one to one model they called the marriage model, and a many to one model they called the college admissions model, and it consists of men and women who have preferences over agents on the other side, agents of the opposite sex. The men and women are disjoint sets, and I'll read when I speak with a preference, I'll say, men, I prefers woman three to w to woman two. And all this, I assume, is very familiar.
00:03:50.104 - 00:04:20.926, Speaker A: And I'll sometimes organize preferences by lists, and I'll end the list with if here's Manai's preference, I'll end the list with Manai himself. And what that means is people he likes less than himself. He'd rather remain single. And I'll say that that would be an unacceptable match. And especially today, to keep things simple, I'm going to assume that all preferences are strictly so. An outcome of the game is a matching. It's a function that matches men and women to one another.
00:04:20.926 - 00:05:10.950, Speaker A: Now in parentheses, I've got some symbols here. Eventually those can go away, but that's what I mean for today. So it's a matching that matches men and women to one another such that woman w is matched to man m if and only if man m is matched to woman w. And for all men and women, each is matched to either a member of the opposite sex or is single, matched to him or herself. And everyone's preferences over matching is determined entirely by who they are matched to. So the only thing I care about about the matching is who I'm matched to. A matching, I'll say, is blocked by an individual if I've matched that individual to someone unacceptable so that they would prefer to remain single, and it's blocked by a pair of agents, a man and a woman, if they each prefer each other to who they're matched to at the matching in question.
00:05:10.950 - 00:05:46.874, Speaker A: And a matching is stable if it isn't blocked by any individual or any pair of agents. And note that in this simple problem. The set of stable matchings equals the core of the game. So the core of the game is the set of matchings that aren't blocked by any coalition of any size. And I've just told you about very small coalitions, but that's okay, because if there was some giant coalition that could make all its members better off, it would do so by marrying them to each other. And the ones who are married to people they prefer would be a pairwise blocking pair. So blocking pairs are sufficient.
00:05:46.874 - 00:06:38.794, Speaker A: And Galen Shapley proposed to show that the set of stable matchings is not empty. And they did it constructively by proposing the famous deferred acceptance algorithm, an algorithm that plays roles in lots of practical market design problems. The way they talked about this is as an algorithm, you should understand that what's actually going to go on in the background is men and women are going to submit rank order lists of preferences and then we're going to operate on them in the computer. But they talk about in a decentralized way. So we can also think about decentralized markets of this sort. And it begins with each man proposing to his first choice if he has any acceptable choices, and each woman rejects any unacceptable proposals. If she gets more than one acceptable proposal, she holds the most preferred and rejects all others.
00:06:38.794 - 00:07:24.518, Speaker A: And the fact that she holds but doesn't yet accept is what gives this algorithm its name, the deferred acceptance algorithm. We're going to defer acceptances until there are no more proposals. And any man rejected at the previous step makes a new proposal to his most preferred acceptable mate who hasn't yet rejected him. And if no acceptable choices remain, he makes no proposal. So no man ever proposes to an unacceptable mate, and no woman ever holds an unacceptable proposal. And each woman holds her most preferred acceptable proposal to date and rejects the rest. When I say most preferred acceptable proposal to date, remember, she has a transitive list of preferences, and the algorithm stops when no further proposals are made.
00:07:24.518 - 00:08:21.698, Speaker A: And at that point, every woman accepts the proposal that she's holding, if any, and that's the match that we create. So that's the deferred acceptance algorithm. And what Gail and Shapley proved was that the deferred acceptance algorithm for any inputs of preferences produces a stable matching, and therefore a stable matching always exists. Okay, now before I make the proof, let me just point out that that's pretty remarkable, because as they noted in their paper, you could have the same definition of stability. But instead of having men and women matching to each other from two disjoint sets, if you had what they called the roommate problem, but the same definition of stability, you can have examples where no stable matching exists. So this is a remarkable theorem. And the theorem says that that algorithm I just showed you, the man proposing deferred acceptance algorithm, always produces a stable outcome.
00:08:21.698 - 00:09:13.264, Speaker A: And the proof is, first of all, the algorithm always stops because no man proposes twice to the same woman. So there's a point at which there are no more proposals and the matching is stable because first, no man ever proposes to an unacceptable woman, and no woman ever holds the offer of an unacceptable man. So the final outcome isn't blocked by any individual. And neither, here's the key, neither is it blocked by any pair, a man or a woman. Because if man M is matched to his third choice, for instance, the way he got there was he first proposed to his first choice and was rejected, and then he proposed to his second choice and was rejected. Each case he was rejected by an acceptable man who that woman, his first choice or his second choice preferred to him. She may not be married at the final matching to those people, but preferences are transitive.
00:09:13.264 - 00:09:34.760, Speaker A: So she's married to someone she likes at least as well as those people and better than him. That's why she rejected him. So there are no blocking pairs. So the matching is stable. Okay, so this is a completely verbal proof contained in Galen Shapley's original paper. Now, additionally, they proved that. Yes, please.
00:09:34.760 - 00:09:45.980, Speaker A: Correct. There is a step, miss. I mean, there is. You've got to get that transitivity. The women's matches are going up. Yes, so I did mention transitivity. Okay, yes, absolutely.
00:09:45.980 - 00:10:13.812, Speaker A: So the point of transitivity is that the women do better and better. And the woman who rejected me when I proposed to her was better at the moment, she rejected me and has continued to be at least as good. Thank you. So that's the point of transitivity there. Okay. Any other Lakuna. Okay, so furthermore, said Galen Shapley, that outcomes is an optimal, stable matching for the men.
00:10:13.812 - 00:10:50.800, Speaker A: In a very strong sense, it gives each man their most preferred match that they could get at any stable outcome. So let's think why. That's a remarkable theorem, because often when we think about markets of marriage markets or firms and workers, and at the moment, I just have, each firm wants to employ only one worker. What we think is the firms are competing for the good workers. They're not all on the same side. They can't all be satisfied. If you said to each firm, point to the worker you like best, we might all point to attila we can't all be satisfied.
00:10:50.800 - 00:11:43.704, Speaker A: But now the question that we're going to ask is don't just point to any worker, point to a worker you could possibly hire. And what we mean by that is point to a worker who to who you could hire at a stable matching. And the remarkable thing that this theorem says is now all the firms point to different workers. No two firms point to the same worker. And so there's a matching where everyone gets who he's pointing to, and it's a stable matching. And the way Galen Chapley showed this is by showing that no man in the man proposing deferred acceptance outcome is ever rejected by what I'll call an achievable woman for that man. And a woman is achievable for a man if there's some stable matching at which m and w are matched.
00:11:43.704 - 00:12:26.554, Speaker A: And we're going to show that no man is ever rejected by an achievable woman. And that means, of course, when the algorithm stops, we've already seen that it produces a stable matching. When the algorithm stops, every man is going to be matched to an achievable woman. That's what it means for it to be a stable match. And every man has just gone down his preference list and is matched to the most preferred woman who hasn't yet rejected him, which will be his most preferred achievable woman if no man has ever been rejected by an achievable woman. Okay, so I'll show you that there can't be a first step of the algorithm at which an achievable woman rejects a man. So supposing up to step k of the algorithm, no man has been rejected by an achievable woman.
00:12:26.554 - 00:12:57.254, Speaker A: And at step k, w rejects man m, who is acceptable to her. Otherwise, she's certainly not achievable. And therefore, because she's rejecting someone who's acceptable, she has to be holding on to someone who she likes better, man m prime. So hold that thought. Woman w likes m prime better than m. And I'm going to show you that w is not achievable for mister. And to show that, I have to look at some matching where the two of them are matched together and show that it's not stable.
00:12:57.254 - 00:13:28.954, Speaker A: But for it to have any chance of being stable, M prime has to be matched to some achievable woman for him, w prime. Because at a stable matching, everyone is matched to an achievable woman. Every man is matched to an achievable woman. But we know that m prime prefers. Did I call everybody w here? I meant w prime. M prime is matched to some w prime. Sorry, we know that m prime prefers w to w prime because w prime is achievable for him.
00:13:28.954 - 00:14:10.544, Speaker A: And no man had yet been rejected by an achievable woman, so he hadn't yet proposed to w prime. And recall, w prefers m prime to m, so they would be a blocking pair. So there's no such matching that's stable at which m and w are matched. So there's no first step k, at which a man is rejected by an achievable woman, and therefore no man is ever rejected by an achievable woman. And therefore there's an m optimal stable match. Okay, so that's in Gale and Shapley. Now let me, I'm going to show you two more proofs that the set of stable matchings is not empty just because they were illuminating in their, in their own way.
00:14:10.544 - 00:15:11.158, Speaker A: One way you could hope to get to a stable matching is by starting from an unstable matching, finding a blocking pair, and creating a new matching that satisfies that blocking pair by matching them to each other. So now you've repaired a blocking pair, okay? And everyone else, you're leaving the same, except possibly those people were matched at the matching you're starting from that has a blocking pair and they're now single. Okay, so that's what I mean when I say that a new matching can be created from an old one by satisfying a blocking pair. And Knuth, in his 1976 book Mariage Stable set of lectures in French, he found an example with a cycle. That is the thing about trying to find a stable match this way is it's not monotonic. The blocking pair that we're satisfying gets better off, but their spouses, who are now single, are worse off. So as you go from blocking pair to blocking pair, some people get better off, some people get worse off.
00:15:11.158 - 00:15:45.826, Speaker A: And Knuth, in his book, showed an example where that can bring you back to where you were before. Eventually, the people who were disadvantaged are parts of blocking pairs, and they come together. And so he had an open question. In his example, there was a path from every stable matching, from every unstable matching to a stable matching. But he had found an example where there was also a cycle. And he asked whether there might be some examples where there were only cycles. And you could not do this natural, decentralized kind of algorithm of trying to solve a blocking pair one at a time.
00:15:45.826 - 00:16:34.334, Speaker A: And that turns out you have to be a little careful how you formulate what it means to satisfy a blocking pair. But if you formulate it the way I just formulated it now, then there's always a path to a stable matching. So what John van DER Veit and I proved was that for an arbitrary marriage problem there always exists a finite sequence of matchings that goes from an unstable matching to a stable matching where consecutively you satisfy blocking pairs. Yeah. Peter, may I have the comment, please? So in the original book all the preferences were complete, so nobody was unacceptable. Yes. And also he married off the spouses to each other.
00:16:34.334 - 00:17:08.684, Speaker A: And if you formulate it that way, then you can find an example with no pair path. Thank you. Your result was even more surprising because for the original question the answer was no, actually. So speaking about someone who thinks about matching and decentralized matching, this seemed to be a more natural formulation. That is, when we see divorces in the world, it's not always the case that the abandoned spouses marry each other. So that's the formulation that I'm speaking of. But you are quite right.
00:17:08.684 - 00:17:27.448, Speaker A: If I didn't say, I should have said that it's a little bit delicate how you formulate what satisfying blocking pair is. Thank you for that. Good comment. Okay, so the key obstacle we have to overcome it. Whoops. I just don't have a statement. I thought here.
00:17:27.448 - 00:18:03.644, Speaker A: The key obstacle we have to overcome is that it's non monotonic. This process of, well, maybe I had that on the previous satisfying blocking pairs isn't monotonic in participant welfare. Right. The divorced pairs are being harmed as we satisfy a blocking pair. Okay, so let me give you a proof that we can always find such a pair. And let's consider a matching that has a blocking pair MW and I'm going to satisfy that blocking pair and get a new matching that satisfies it at which m and w are matched to each other. And I'm going to put m and w in this box.
00:18:03.644 - 00:18:48.144, Speaker A: This box I'm going to call box a. And a is going to be I'm going to let it grow. And in the absence of monotonic welfare, the monotonicity I'm going to get is I'm eventually going to put everybody in this box and then I'll be done. And the property of this box is that there are no blocking pairs for the latest match in the box and the match. And furthermore, in the box there's no one who's matched by the latest matching to someone who's outside of the box. I started off very simply with just a pair that is matched to each other. There are no blocking pairs for the latest matching in the box and it doesn't match any agent.
00:18:48.144 - 00:19:47.174, Speaker A: The latest matching doesn't match any agent in the box, agents outside of the box. And now I'm going to keep this process going and eventually I'll have a lot of people in the box and there'll be no blocking pairs in the box and no one in the box is matched to anyone outside of the box by the matching I'm currently working on. And the matching I'm currently working on has a blocking pair. And it could be that if neither m prime or w prime is in the box, I just add them both to the box and satisfy them. But it could be of course that one of m prime and w prime is in the box and the other one isn't. So now I'm going to add the one who isn't, say w prime to the box and match her to her most preferred man in the box. So she's not going to be part of a blocking pair anymore because she had some collection of potential blocking pairs and she's matched to the best one in the box.
00:19:47.174 - 00:20:38.874, Speaker A: But the mate of who she's matched to now may be part of a blocking pair in the box. So I'm going to let the deferred acceptance algorithm operate within the box and the mate will propose until her offer is held. And every time a proposal is held, a blocking pair has been satisfied and I've got a new one. But there may be another mate that has been divorced. So I just keep operating the deferred acceptance algorithm, which we know will lead to a matching that has no blocking pairs in the box, I'm just working on the people in the box. Okay, and I'll call that the next one. Although there have been some intermediate satisfied blocking pairs and I now have increased the number of people in a, but there's now no blocking pair for the current match in a.
00:20:38.874 - 00:21:19.194, Speaker A: Neither is anyone in a matched by the current match to anyone outside of a. So a is growing monotonically and I continue until everyone is in a and that's a stable matching. Okay, so that's a way to find a stable matching. It's a more complicated way in a certain sense than the deferred acceptance algorithm, but in some circumstances it might seem like a more natural algorithm. That is, you have blocking pairs and you're letting them find each other. Doing that in a practical way, in a decentralized market, it converges slowly. It might be hard to find the blocking pairs there are not so many decentralized matching markets that converge to stability.
00:21:19.194 - 00:22:01.628, Speaker A: Okay, so just incidentally, there'll be a quiz on this algorithm, which I'll give you a verbal description in a moment. This is the algorithm that we now use to match new medical residents to their residency program. And loosely speaking, what's going on here is just deferred acceptance algorithm, but it's with couples, and when you have couples. So it's a different problem than I just proved the theorem for. But when you have couples, you can't just do one pass because couples have to be, you have to elicit from them their preferences for pairs of matches. So my wife and I, our first choice might be two matches in the Bay Area, two jobs in the Bay Area. Our next choice might be two jobs in Boston and so forth.
00:22:01.628 - 00:22:55.028, Speaker A: And supposing my wife and I applied to our first choice pair of jobs, and they like us, so they hold our applications and reject some others. But now, one of you who might have been rejected in the first step, you applied to the job that's holding my application, and that employer likes you better than me, so they hold your application and reject mine. Well, because my wife and I, our next choice is in two jobs in Boston, the algorithm has to withdraw my wife from the position that's holding her offer. And that causes a potential blocking pair to exist because they had to reject some people in order to hold my wife's offer. But my wife isn't going to work there. So whenever that happens, we add a potential blocking pair to this side of the algorithm, and then we try satisfying them one pair at a time to get the final match. So that's why that's an important kind of process.
00:22:55.028 - 00:23:32.234, Speaker A: One reason why that's a kind of important process in market design. Okay, so now, just to get us fully warmed up, I want to give you one more proof that the set of stable matchings is always not empty. And this one is especially simple proof. And it uses a definition that I'll say a matching is simple if in case it's not stable, so that a blocking pair exists. W is single, unmatched. So I'm allowing blocking pairs for a simple match as opposed to a stable match. But the only blocking pairs involve women who are unmarried.
00:23:32.234 - 00:24:14.144, Speaker A: And it's clear that the set of simple matchings is non empty because the matching at which everyone is unmatched is simple. But now let's consider. But I'm going to use just the observation that the set of simple matchings is not empty to show you that the set of stable matchings is not empty. Okay, the way I'm going to do that is I'm going to look at the set of stable matchings is finite. The set of all matchings is finite. So there's some collection, some subset of simple matchings that are pareto optimal for the men. That is, I can't find another matching that makes every man at least as well off and some strictly better off without harming another man.
00:24:14.144 - 00:24:41.330, Speaker A: And I claim that when I find that pareto optimal matching, it's stable. And supposing it isn't stable. Oh, it's simple, of course, because it's in the set of simple matchings, it's simple. If it's not stable, then there's a blocking pair that involves an unmatched woman. Well, I can match her. I can satisfy the blocking pair with her most preferred man, with whom she forms a blocking pair. And that will make one man better off and it won't hurt any of the other men.
00:24:41.330 - 00:25:18.598, Speaker A: So it wasn't really pareto optimal. So the pareto optimal for the men simple match is the man optimal stable match, therefore non empty. Okay? And that's a strikingly simple proof that turns out to generalize to more complicated models of matching. Okay, so let me tell you some other theorems other than the fact that the stable matchings always exist. Okay? One is constant employment, okay? It turns out the set of people who are single is the same for all stable matchings. That's an interesting theorem in the marriage problem. It's even more interesting in the many to one matching problem.
00:25:18.598 - 00:25:55.606, Speaker A: When I started to redesign the medical match, one of the things they said to me is, why not look for a maximal cardinality match, match as many people as possible. And what you'll see is this is going to say to them, we're already doing that. If you have to find a stable match, then it doesn't matter which stable match you find. So let's prove this. We already know that there's a man optimal and a woman optimal stable match. And let's take a look at the man optimal match and the men who are matched at the man optimal match and the women who are matched at the man optimal match. And similarly for the woman optimal match.
00:25:55.606 - 00:26:44.632, Speaker A: Well, what can we say about the men who are matched at the man optimal match compared to any other stable match? Well, this must be the biggest set because we have strict preferences. So everyone who's matched to an acceptable mate prefers to be matched than to be unmatched. And so a man optimal stable match matches as many people as possible. Okay, so this set, the set of men matched at the man optimal stable match contains the set of men matched at the woman optimal stable match and vice versa. The set of women matched at the woman optimal stable match contains the set of women matched at the man optimal stable match. But the size of these sets has to be the same because every man is matched to one woman. So you have, so all those containments have to be non strict so they're all the same.
00:26:44.632 - 00:27:21.474, Speaker A: So the people who are matched is the same at every stable match. And therefore the people who are single, who are unmatched is the same at every stable match. Okay, so now let me generalize just a little bit as Galen Shapley did to many to one matching. And now they called it the college admissions problem. And we're going to have a set of colleges and students just like in the marriage model, except that each college has a quota. College I has a quota qi of students. So college I could have boom for 1000 freshmen.
00:27:21.474 - 00:28:07.574, Speaker A: While each student is interested in being matched, only one college and students have preference over colleges, and colleges have preferences over individual students. And matchings assign each student to no more than one college and each college to no more than their quota of students. So there's a little bit of a lacuna in this formulation because I haven't told you what colleges preferences over entering classes are. But Gallon Shapley didn't address that. And as long as we're interested in pairwise stability and instability, we don't have to address it right now. I mean, it turns out to be important for other things. But that being the case, essentially the same deferred acceptance algorithm works to find a stable match, a pairwise stable match.
00:28:07.574 - 00:29:08.756, Speaker A: College C, instead of proposing to its first choice student, proposes to its quota of first choice students. It admits a whole class. The students get multiple proposals, multiple admissions. They reject all but the one they like best, which they hold, and the process continues and you get a stable match. And in fact, to each college admissions problem, there's a very closely related marriage problem in which we transform each college that has Q positions into Q colleges that have one position but have the same preferences of the college and appear consecutively in the preferences of the students in their preferences for colleges. So some of the theorems that I already, well, one of the theorems I already showed you, the one I just showed you, that the set of people who is single is the same at every stable match, will through this transformation, immediately carry over to the college admissions problems. Colleges that don't fill all their positions will fill the same number of positions at every stable match.
00:29:08.756 - 00:30:09.594, Speaker A: But we've got more structure we can say more. One of the things we can say is what's now called the rural hospital theorem that says not only does each college, does each hospital fill the same number of positions, if it doesn't fill all its positions, it fills them with the same individuals. And this was important when I was asked to redesign the match because in the United States we're big importers of medical graduates. We graduate about, today we graduate about 19,000 graduates who get mds from american medical colleges and another five or 6000 who get Dos doctor of osteopathy who can become licensed physicians. So that gives us around 25,000 medical graduates. But we're trying to fill 35,000 residency position. So lots of graduates of foreign medical schools come and they are disproportionately find their positions at rural hospitals.
00:30:09.594 - 00:30:44.174, Speaker A: And rural hospitals are the american hospitals in which the customary patients are least used to dealing with people with foreign accents and things like that. So one of the things I was asked was, okay, you know, you can't, these rural hospitals aren't filling all their positions. They're not the most desirable hospitals to do a residency at. And I was asked, well, okay, you can't, we've already seen you can't cause them to fill more positions. But maybe you could fill them with different people who would speak more vernacular English and seem more comforting. And the answer is, you can't. They get precisely the same people.
00:30:44.174 - 00:31:12.924, Speaker A: So here's a proof. Let's look at the doctor. Optimal, stable match for some hospital, for hospital age that doesn't fill all its positions. So they had a bunch of positions, but the last ones are just empty. They're just matched to themselves in the last positions. But Mister Di is matched to them. And here's a different, potentially stable match.
00:31:12.924 - 00:31:36.688, Speaker A: I'm going to show you it's not stable. At which Di has been replaced with DJ. That is, everyone is the same except not these two people. And I'm going to show you that can't happen. And why can't that happen? Well, Di is matched to somebody. We know that the doctors who are matched, the same doctors are matched at some stable matching. So he's matched to someone who he likes less than hospital H.
00:31:36.688 - 00:32:18.224, Speaker A: This is the doctor optimal, stable match. This is the match the doctors like best. He's matched to someone he likes less, which means the hospital would rather be matched to him. Than to leave a position vacant. So he would form a blocking pair at this match. So he can't be not matched at a different stable match, can't be not matched to the same hospital. So at the time that I proved this theorem, my wife and I were living in former city, Illinois, which was halfway between where the University of Illinois was and Illinois State University, where she taught, and the nearest hospital.
00:32:18.224 - 00:32:56.634, Speaker A: So farmer City, Illinois had a population of 2000, and the nearest hospital was in the biggest local metropolis that was twice as big. And most of the residents at that hospital had been educated in Thailand. And our neighbors, who were all farmers, sometimes thought it was a hard hospital to go to. But you can't change if you need a stable match, and for reasons I'm not talking about, but in the medical environment you do, you can't do better. Now you can also talk about matches with contracts. And I saw Paul walk in, I don't see where he is right now. Paul, can you.
00:32:56.634 - 00:33:40.412, Speaker A: There you go. Okay, so the same proof I showed you, the same simple proof that I showed you for non emptiness of the core is going to work in matches with contracts if the preferences are substitute preferences. So here's a generalization of the college admissions problem for I'm keeping it simple. For one to end matches, firms are going to hire multiple workers. Workers are just looking for one job and they come with contracts. And the contracts could be over many things. And each firm has strict preferences or orderings over individual contract payers who their who they're matching to.
00:33:40.412 - 00:34:41.213, Speaker A: And a matching is a set of triples that matches firm I worker j at contract x, okay? And firms have strict preferences, there's a choice function that arises from those preferences. And I'm going to say firms preferences are substitutable if for any set of pairs j and x, and for any two distinct pairs jx and j x prime. If you choose jx when J x prime is available, you also choose it when they're not available. So firms and contracts don't have complements. Maybe the easiest way to see complements is by looking at the contrapositive, the refusal functions. If JX isn't included when J X prime isn't available, then you don't suddenly start choosing them when JX becomes available. Okay, but now we have the definition of stability.
00:34:41.213 - 00:35:19.484, Speaker A: Matching is stable if no worker wants to unilaterally drop his assigned match. No firm wants to drop any subset of its assigned matches. That's the blocking by an individual part. And there's no blocking pair with a contract term that the worker and the firm preferred. And the theorem, most famously by Hatfield and Milgram, is that a stable matching exists. And here's the proof, adapted from Marilda's proof that I showed you at the beginning, that says the set of stable matchings is not empty. Let's look at the simple matchings that are.
00:35:19.484 - 00:35:51.516, Speaker A: If there's any blocking pair, they involve a worker who's unmatched. Then the same trick, the set of simple matchings is not empty. I'm going to look for the firm Pareto optimal matches. If I find one that isn't stable, it's simple. It must involve a worker who's unmatched, and I can satisfy that matching to get a new matching. And by substitutability, the firm doesn't want to add any new workers because now they have this new worker available. But that doesn't make them want to hire a complement worker.
00:35:51.516 - 00:36:33.528, Speaker A: There are no complements. So the new matching is still simple Pareto superior for the men. So the unstable matching couldn't have been in the pareto set for simple matchings. Okay, so it's exactly the same proof that I showed you for the marriage problem, and it shows that the set of stable matchings is not empty. Let me skip talking about strategic behavior, because I want to finish on time, and I want to tell you a little bit about top trading cycles. Okay. And so, top trading cycles is in this great but complicatedly written paper by Shapley and Scarf in 1974.
00:36:33.528 - 00:37:13.756, Speaker A: So, in volume one, number one of the Journal of mathematical economics, and we're about to celebrate the 50th anniversary of the paper and of the journal. And they describe what they call a housing market. Each agent possesses a single unit of an indivisible good. Agents have preferences over all the houses, but money can't be used. Trades have to be swaps. So an outcome is a permutation of the initial endowments among the agents. And they proved, basically a fixed point theorem based on a theorem of scarf, that said, v is a balanced game, and hence the market has a non empty core.
00:37:13.756 - 00:37:43.172, Speaker A: Okay? So they had a pretty complicated proof that the core was not empty. And then, literally, as an afterthought, they wrote, after the proof in section four had been discovered, David Gale pointed out to the authors a simple, constructive method for finding competitive prices. And hence a point to the core. And the algorithm is top trading cycles. And so here's their verbal proof. Essentially, they did it full of notation, but a verbal proof. You have this preference restrict.
00:37:43.172 - 00:38:10.520, Speaker A: Let's keep it simple. It's not necessary for this part of the proof. Every agent and house are a node in a graph. They're an agent and his initial endowment. And you say to each agent, point to your most preferred house, and every agent points, and now you have a graph of degree one. So it's simple to find cycles. And a cycle must exist because there are as many agents as houses.
00:38:10.520 - 00:38:59.314, Speaker A: So eventually a house has to be pointed to, either by someone pointing to his own house or pointing to a house that someone else has pointed to. So there are cycles, and pick one of those and call it the top trading cycle, and everyone gets the house he's pointed to. They leave the market. And now you do it again with the remaining houses. And the theorem is that the allocation you get when everyone has left the market, which must happen in at most n steps, there are n traders, is in the core. And the verbal proof is, think about a coalition that could do better, could get an allocation it prefers by trading its own goods, its own initial endowments. Well, nobody in that first cycle can be in this coalition because they all got their first choice.
00:38:59.314 - 00:39:26.114, Speaker A: Therefore, nobody in the second cycle can be in the coalition, because to make them better off, you would have needed to have one of the houses in the initial endowment of the first cycle and so forth. Therefore, there's no coalition that by trading its own goods, can get an outcome it prefers. Therefore it's in the core. Therefore the core is not empty for any preferences. Okay, so that's top trading cycles. And they, here's actually their proof. I didn't get a chance to erase that yet.
00:39:26.114 - 00:40:13.302, Speaker A: Let me give you two more theorems. One is by Roth and postalweight. And it was also proved in an obscure way, because Shapley and Scoff weren't focused on top trading cycles, they were focused on weak and strong cores. And that gave you a different path to approach things. But when preferences are strict, it doesn't matter what order you choose the cycles. And the way to see that is just take a look at that first graph of and all the cycles in it, and everyone who's in a cycle, when everyone is pointing to their first choice, label them number one. And now, without removing any cycles, just ask everyone who isn't labeled number one to point to their best unlabeled outcome and all the cycles in that label number two.
00:40:13.302 - 00:41:16.532, Speaker A: And this way, you label every node with what house the person who's pointing to it is going to get, no matter what order the cycles are removed in. And that's you've uniquely labeled all the houses. Therefore, there's a unique outcome in the core that doesn't depend on the order in which you remove things. So there's a family of algorithms that involve removing things in different order. So now I want to prove to you that it's a dominant strategy for every agent to state his true preference. And I'm going to prove it, not the way I originally proved it, but let's see. But using a formulation that I got, and Ori Heffitz and Clayton Thomas have recently proposed, and they say the following, since they say, we're gonna make it apparent to you that you can't do better than to state your true preferences, and we're gonna do that by giving an equivalent definition, if you like, of what it means to be dominant strategy.
00:41:16.532 - 00:42:06.544, Speaker A: We're going to show you that the procedure that other people's preferences determine a menu for you, and that we're only going to look at your preferences when it comes time to choose from your menu. So from your point of view, it will be like serial dictatorship. We're going to show you a set of things you could have, and we're just going to consult your preferences to ask you which one you want. And you should tell us, therefore, which one you want. And the way they're doing this is, remember, the order doesn't matter, the order of cycles, removals. So what they're going to do is they're going to present to you, they're going to present to each person slightly different version of top trading cycles to you. They're going to say, we're going to ask everyone their preferences, but we won't ask you your preferences until there are no cycles remaining that don't include you.
00:42:06.544 - 00:42:49.752, Speaker A: And only now will we ask you your preferences. And so when we ask you, well, when there are no cycles that don't include you, here we are. There were some other people who hadn't given their preferences yet, but now they've given them, and now there are no cycles that don't include you. And so when we look at your preferences, you're going to point to someone and get whatever you point to. And therefore it should be apparent, they say, that it's a dominant strategy to point to what you want most and therefore to state your true preferences. Okay, so I'm going to stop there because I'm out of time, almost. Let me just end by noticing that a bunch of the people I've talked to you about today won the von Neumann Theory Prize.
00:42:49.752 - 00:43:18.414, Speaker A: And in 2022, Vijay won it as well, so there's a nice group of people who have worked on matching who have won the von Neumann prize. It must be an important area to work in. Thank you. Okay. I take it that all the proofs were convincing.
