00:00:07.440 - 00:00:47.870, Speaker A: Thank you. Is my microphone working? Well, I hope you can hear me. So I put a disclaimer up there. I'm an economist, not a computer scientist. But there's a sense in which my talk fits a little bit with rob cars, because I'm going to be talking to you about how when we think about markets and maybe the computerized algorithms that might help organize them, we think a lot about the behavior of participants in those markets. So we have some similarities there. I'm going to mostly tell you about markets and less about computers.
00:00:47.870 - 00:01:26.400, Speaker A: But let me mention that one of the things I'm the kind of economist I am, I'm what's called a market designer these days. What we're seeing is more and more markets that are run by computers. And the uses of computers in helping organize markets range from the simple, almost trivial, but sometimes with profound consequences to the more complex. So I'm going to emphasize one of each. I'll tell you. Whoops, that's not what I wanted to do. Do I have a laser here? Maybe I do, maybe just a little.
00:01:26.400 - 00:02:04.884, Speaker A: I'm going to tell you a bit about how markets can be run on computers, and that makes them fast, and that has bigger consequences than you might think in terms of the behavior that they elicit. I'm going to tell you about how, I mean, one of the ways that computers interact with markets, of course, is they make markets ubiquitous. We've all got markets in our pockets now. Some of the ways we use computers in markets is as trusted intermediaries. You can tell things to computers that you might not want to tell to other participants. And people have, it appears to me, surprising trust in software. And then sometimes we can do real computations.
00:02:04.884 - 00:02:41.304, Speaker A: I'll tell you a bit about that, too. Now, many of you know a whole lot about computers in markets and how, how they can be customized to very high degrees. So the whole idea of search and search ads is that you can start to commoditize very small parts of the market space. But of course, not all markets resemble auctions. I'm going to mostly talk to you today about markets that don't really resemble auctions in the sense that price doesn't determine, isn't the only thing that determines who gets what. So think about Stanford and Berkeley and how they fill their freshman classes. They don't run an auction.
00:02:41.304 - 00:03:12.070, Speaker A: They don't raise tuition until just enough freshmen remain to fill the class. It's expensive to go to Stanford or Berkeley, but it's not so expensive that there aren't lots of people who would like to go. So lots of people apply. And then these selective colleges select who goes, so they don't just rely on prices to determine who gets what. And labor markets are like that, too. So these matching markets are a little bit like courtship and marriage in the sense that you can't just choose what you want. You also have to be chosen.
00:03:12.070 - 00:03:46.944, Speaker A: So you can't just tell Google that you're arriving for work. They have to hire you. And they can't just choose who to hire. They have to compete with Facebook and with Stanford. So these are markets that are matching markets, where you care who you're matched to. And there are a lot of market institutions that are involved in these choices. There are application and admissions and selection processes and interviews and how offers are made and all of those kinds of things.
00:03:46.944 - 00:04:40.990, Speaker A: Now, I've been involved in helping design some of the market institutions that do some of that work. And the ones I'm going to briefly talk about today are use the kind of algorithms that we've used to, to design medical labor market clearinghouses. If you have friends who are graduating from medical school, then they go through something called the national Resident matching program that has an algorithm like the ones I'm going to be telling you about today. If you have friends who are putting children into schools in New York City and Boston and Denver and New Orleans, they also use algorithms like the ones I'm going to tell you about today. The market design uses lots of different kinds of algorithms. I don't want to overgeneralize what I'm telling you about. I'll talk about very different kinds of mathematics, but with some similar high level problems in EC.
00:04:40.990 - 00:05:23.250, Speaker A: Later in June, if you're there, you'll hear me talk about very different kinds of market and kidney exchange. But today I want to talk to you about markets that use an algorithm that I think will be familiar to many of you. I'll remind you about it. But it's the deferred acceptance algorithm for which is something that David Gale, who was at Berkeley for many years, and Lloyd Shapley wrote about in a famous 1962 paper called college admissions and the stability of marriage. And this is, on the one hand, it's a computer science y kind of algorithm. I think many of you will have taught it or had it taught to you in classes on algorithms. It arises in markets, naturally.
00:05:23.250 - 00:06:18.714, Speaker A: That is. Over the years, as we've studied markets and marketplace clearinghouses and how they're organized, we've found many independent discoveries of deferred acceptance algorithms. As people try to organize their markets, and it's useful in some kinds of market design, which I'll tell you about. And again, I'm going to sort of tell you about how it interacts with markets, both in problems that you might think are too easy to require computers but turn out. Computers have to be very useful in helping out and also in problems that are, that you might think are too hard even with a computer, because the complexity theorems say that some of the problems that we solve as a matter of course are np complete. So you all know better than I how worst case complexity doesn't always tell you how hard things are. And I'll tell you about some of the difficult problems that are usefully solved fairly simply.
00:06:18.714 - 00:06:49.170, Speaker A: So let me briefly specify a simple model, just to, to be precise. I'm not going to do anything very heavy with this. Let's think about a simple model that has two kinds of players in it. Who I'll call firms and workers. I'll sometimes call them firms and workers. Sometimes I'll call the firms colleges or hospitals or schools, and sometimes I'll call the workers students. So I make no promises about my terminology, because in the different markets these things show up.
00:06:49.170 - 00:07:11.394, Speaker A: I call them all those different things. But the idea is that firms are looking for workers. Workers are looking for jobs at a firm, firms are looking for multiple workers. Each firm has a number of positions that I've called qi, and each worker in this simple model is looking for one position. And they have preferences. The workers have preferences over firms. They can tell which jobs they like better.
00:07:11.394 - 00:08:02.032, Speaker A: So think of the wages already being incorporated into the job description here. And the firms have preferences over workers. And there's some point in their preferences where they put themselves, which is to say, further down on my preference list, here's worker J. Further down than myself. I'd prefer to remain unemployed for the time being rather than match to any firm I like less than that. And an outcome is a matching that matches firms to workers and workers to firms and respects the capacity constraints. And so you might want to say, what kinds of matchings might we see in such a world? Or if we were organizing a clearing house, what kinds of matchings might we want to suggest? And one thing we shouldn't suggest, because we wouldn't expect to see it happen, is we shouldn't suggest that anyone be matched to a firm that they're not willing to work at.
00:08:02.032 - 00:08:57.506, Speaker A: And similarly, no, we shouldn't suggest to any firm that they should hire a worker who they've already said they would prefer to leave a position vacant than hire. So I'll say a matching is individually rational if it meets those constraints. That only matches people who are willing to be matched with each other. And then a more interesting thing that could interfere with our ability of our clearinghouse to suggest matchings is if there's a worker in a firm who we didn't match to each other, but who look at each other and say, how come we're not matched to each other? I like you better than the job that I got, and you like me better than one of the workers who you were assigned. And so if we're going to make the mistake of allowing these blocking pairs, we can expect that we won't see the matching we suggested actually occur. Because this is going to be a world in which workers and firms can freely contract with each other if they wish to. And incidentally, we'll talk about whether it's hard to find a stable matching or not.
00:08:57.506 - 00:09:51.150, Speaker A: It's not in the simple model, but it's easy to check if you're part of a blocking payer, if you get a job with your, if I run a clearinghouse for doctors and you get a job with your third choice hospital, all you have to do is call up two places to find out whether one of the ones you'd like better would be glad to have you. So blocking pairs are easy to detect in the market if you think of the market as a sort of parallel computation device. And we'll say a matching is stable if it's not blocked by any pair of agents. So here's the famous deferred acceptance algorithm, which I, I suspect will be at least a little familiar to some. How many of you is the deferred acceptance algorithm? A little familiar? Great. Ok, so as I hoped. So let me add some lines to it that you might not add when you teach it in an algorithms class.
00:09:51.150 - 00:10:34.584, Speaker A: I'm going to start it off by saying workers and firms privately submit preferences. So what I mean by that is everyone is going to write down a preference list. They're going to submit it to the software, but other participants in the market won't see it. So in particular, when you say Google is my first choice firm and Facebook is my second and Stanford is my third, Facebook is not going to see your preference list. They will not know that you chose them second, and they will not be able to condition their preference list on where you are, where they are in your preference listen list. So people submit preference lists privately. If some preferences are not strict, I'm going to arbitrarily break ties.
00:10:34.584 - 00:11:08.364, Speaker A: And then we go through a process that sounds like a decentralized process. And I want you to remember that because I'm going to come back to the decentralized process. But right now I'm thinking of this as going on in the computer with these preference lists. Each worker applies to his or her top choice. Each firm looks at all the applications it's gotten, holds as many as it can up to its capacity. Using its own preference list to break ties, it holds its top choices and rejects the rest up to its capacity, and it doesn't accept the ones it hasn't rejected. That's why it's called a deferred acceptance algorithm.
00:11:08.364 - 00:11:47.620, Speaker A: It just holds them, but it rejects, it immediately rejects the ones it can't fit. And the rejected workers go on and apply to their next choices. And the firms then look at the applications they've gotten to date, the ones they've held so far, and the new ones without prejudice about when they came in. They order them according to their own preferences, the firm's own preferences. They keep the ones they can and reject the rest after they've filled their capacity. And this goes on until no workers are rejected, at which point each worker is matched to the firm that's holding its applications. So the acceptances are deferred until the algorithm stops.
00:11:47.620 - 00:12:29.674, Speaker A: There's, of course, also a firm proposing version of this, where the firms make offers up to their capacity. Workers look at all the offers they've gotten, hold the one they like best, and reject the rest, and so forth. And Gale and Shapley proved two remarkable theorems. The first is that a stable matching exists for every marriage market, for every, in this case, college admissions market. I should have changed the word there. Here's the proof of that theorem. What we have to show, I don't know if I emphasize no one holds an unacceptable offer or makes an application to an unacceptable offer.
00:12:29.674 - 00:13:02.098, Speaker A: So individual rationality we get for free. What I have to show you is there are no blocking pairs. So suppose I'm a worker, and the worker proposing deferred acceptance algorithm. Suppose when it stops, I'm accepted by my third choice firm. How do I know that I'm not in any blocking pairs? How do I know that my second choice firm, which I would prefer, doesn't also prefer me? Well, the fact that I'm matched to my third choice firm means that I already applied to my second choice firm and was rejected. So although I would prefer to be matched at my second choice firm, they don't prefer me. We're not part of a blocking pair.
00:13:02.098 - 00:13:44.734, Speaker A: So a stable matching always exists. And in fact, when the workers propose you get a worker optimal stable matching, it's simultaneously the favorite stable matching for all workers. When preferences are strict and the same is true of the firm proposing algorithm, it gives the best stable matching for all the firms simultaneously. So that's a remarkable theorem. It's not at all obvious that the stable matching should have this structure. You think of the firms as competing for the best workers and the workers as competing for the best jobs. So when you ask me what's the best outcome, the best outcome is that I should have my favorite job, I should work at Google, and that might be everyone's favorite outcome.
00:13:44.734 - 00:14:50.534, Speaker A: So we do not have, there's not a worker optimal outcome, but there's a worker optimal stable outcome. Because you rephrase the question, you say, no, no, don't tell me what's the best outcome? What's the best outcome in which you are employed by someone who might actually hire you? And you say, oh, well, in that case, and now everyone points to the same outcome. So it's a remarkable result. There are some other results. When I started studying this, I started looking at incentives and one of the things you can show is that when the workers are proposing, it's a dominant strategy for the workers to reveal their true preferences to a clearinghouse that's going to do this. So the question of is it safe to reveal your preferences? It's going to be an important one in market design because we can't get these good outcomes that we, we can talk about unless we get good information about what people want. And in order to get information about what people want, when you ask them, tell us your preferences, they're going to ask you what are you going to do with those preferences? And if you can't say to them, it's safe for you to tell me your true preferences, you may get different information and worse results.
00:14:50.534 - 00:15:36.414, Speaker A: Now, stability turns out to be important for clearinghouses. When we started doing this work years ago, we had a relatively small set of examples that we could look to in the world of places that had invented clearinghouses that were either stable yes or no or not yes or no. And we could see whether they were still in use. And we got a lot of association. It's a small data set, but a lot of association between stable matchings and those that were still in use but certainly not perfect. And laboratory experiments were helpful in filling that gap. That is, there are a lot of differences, aside from their algorithms, between cities like Edinburgh and Birmingham.
00:15:36.414 - 00:16:30.470, Speaker A: I once gave a talk to british medical administrators and showed this kind of graph back in the day. And what I wanted them to see was that stable matching mechanisms seem to work and unstable ones don't seem to work. But the question I got was, why don't computerized clearinghouses work in England? And I said to them, pardon me? And they said, well, you know, Edinburgh and Cardiff, they're in Scotland and Wales, but, you know, Birmingham. So that's not a crazy question, right? There are other differences between Edinburgh and Birmingham than the way they organize their medical clearinghouses. And that's one of the ways in which laboratory experiments are very useful for us in thinking about these things. But today we have a lot more experience, partly because of the work that my colleagues and I have done. So there are lots of successful, stable matching markets.
00:16:30.470 - 00:17:45.994, Speaker A: These all use varieties of deferred acceptance algorithms, one of which I'll tell you about when we get to the problem of couples. And the one I'm mostly going to focus on today is psychology internships in the US. So let me tell you how they came to use a deferred acceptance algorithm, because when I first started to study them, what I want to tell you is how they came to use a computerized clearinghouse, because when I first studied them, they had a telephone labor market that I'm going to describe to you in gory detail now. But the funny thing about this telephone labor market was hidden inside its rules, and there were elaborate rules, which I'm going to show you was a deferred acceptance algorithm, but the labor market was not producing the behavior that today it enjoys when it uses a computerized deferred acceptance algorithm. So part of what my talk today is about is how come two implementations of the deferred acceptance algorithm should produce very, very different behavior of market participants. Okay, so let me tell you about this. They switched to a deferred acceptance algorithm that I helped design in 1998, but I'm going to tell you about studying them in the early 1990s.
00:17:45.994 - 00:18:17.586, Speaker A: And what they did at that time was they had a selection day. It was the second in, I think, 1991. It was the second Monday in February. And people interviewed, these are clinical psychologists. So they're not mds, but they, they're healthcare workers. They try to make you feel better. Incidentally, one of the ways you know that a market isn't working is the trade literature of that marketplace starts to have complaints about it, and different trade literatures have different kinds of complaints.
00:18:17.586 - 00:18:47.994, Speaker A: So when you look at markets for lawyers, the legal journals that talk about the problems in the markets for lawyers talk about are people following the rules. When you look at the markets for clinical psychologists and they're talking about how the market isn't working, well, the surveys, they do ask people if they found the market very stressful. So these guys had a very stressful market. And the rule was they went on their interviews and then they sat by their telephones on the second Monday in February from 09:00 a.m. To 04:00 p.m. Central standard time. And they answered the phone.
00:18:47.994 - 00:19:30.694, Speaker A: They called and answered the phone. And among the interesting things I observed about this market, aside from that, it was very stressful, was that they had previously, in the seventies, they'd been running this market for 20 years by telephone, but they'd been constantly making changes. And among the changes was they shortened the time. It had been a whole week, and then it had been three days, and then it had been a day and a half. And by the time I looked at it, it was one day, right? It was 7 hours. And so one question is, why were they doing that? And was that the right thing for them to be doing? So that's the mystery I want to solve for you first. So I'm going to introduce the market to you through their rules.
00:19:30.694 - 00:20:03.778, Speaker A: Now, rules are, I'm going to use them today as an entertaining way of telling you about behavior in the markets. Because a good rule of thumb is that no one makes rules against behaviors that no one is exhibiting. The second thing, and this you could see in the documents, is the rules start off very terse. Rule one, rule two, rule three, rule four. But they end up more elaborated. Rule three, a, b, c, and the ABCs get added year after year. And it's sort of to say, when we say that something isn't allowed, let's be more explicit about the things that aren't allowed.
00:20:03.778 - 00:20:34.884, Speaker A: These are things they're seeing. So, for instance, here's rule three that says no internship offers in any form can be extended by agencies before the beginning of selection day. In the first version of the rules, it just said that. And then at some point, you know, item a is added. It says, the only information that agencies may communicate prior to this time is whether the applicant remains under consideration. The spirit of this item precludes any communication of an applicant's status prior to the time above. And then, you know, they have other rules.
00:20:34.884 - 00:21:14.664, Speaker A: The C said internship programs may not solicit information regarding an applicant's ranking of programs. We can't say to you, are we your first choice or her intention to accept or decline an offer of admission until the offer is tendered. And I put a little ha next to that. That's a technical market design term, and it means that this rule is honored in the breach. Everyone breaks it. So this is a rule that says we can't say to you in your interview, by the way, if on match day we were to make you an offer, would you take it? Are we your first choice? Not allowed to ask that. Okay.
00:21:14.664 - 00:21:55.970, Speaker A: Rule four says applicants must reply to all offers no later than closing time. And then there are added rules like agencies may inquire as to the applicant's progress, but under no circumstances, however, may an agency implicitly or explicitly threaten to rescind an offer in a decision if not made fire to the end of election day. So you can tell these are rules that reflect the fact that something about this market is making people nervous. But here in the middle is the deferred acceptance algorithm. Really, clearly, this is the deferred acceptance algorithm. They say this is how you should behave. The title I put in, that's not theirs.
00:21:55.970 - 00:22:28.584, Speaker A: But it says an applicant must respond immediately to each Orford in one of three ways. It can be accepted, rejected, or held. And applicants may hold no more than one active offer at a time. And they added some things to say they really meant that. So you can see that there was probably going to be some problem with people's behavior. Certainly you can see how it'll be tempting to not just immediately reject an offer when you've gotten another one. It might be tempting to hold two offers for a little while, but there it is, the deferred acceptance algorithm.
00:22:28.584 - 00:23:02.674, Speaker A: Now then, the rules that follow say, just what do we mean by an acceptance? So now there's lots of rules I'll go through quickly. But it says an offer of acceptance to an applicant is valid only if the applicant has not already accepted an offer of admission to another program. And then it says, a verbal acceptance is binding. B. Before programs extend an offer, they have to explicitly inquire whether the applicant has already accepted another one. You can see that there are problems here. A program may in no way suggest that an applicant renege on previously accepted offers.
00:23:02.674 - 00:23:49.332, Speaker A: So have you firmly accepted any other job yet? So they're clearly having problems. And then what happens at 04:00? At 04:00 there's an aftermarket. So at 04:00 somewhere I said that somewhere in there it says at 04:00 all the offers are accepted that are accepted are done and all the ones that haven't been accepted are declined. But there are still unemployed people in unfilled positions at 04:00 central standard time. So now they have an exploding offer market. Applicants should be prepared to accept or reject late offers quickly since most other deliberations should have already taken place. Programs may legitimately place short but reasonable deadlines for responses to such late offers.
00:23:49.332 - 00:24:05.420, Speaker A: Smiley faces at the world reasonable. Let's think about what's been happening in this market. At 09:00 I call someone up and they've got till 04:00 I make them an offer. I say, this is Al, we loved you. Everyone loved you. We want to make you an offer. And you say to me, great, thank you.
00:24:05.420 - 00:24:31.326, Speaker A: You might say, I accept, but you might say, I'll get back to you. I'm still hoping to hear from some other places and I'm really delighted and looking forward to the possibility of working with you. So at 10:00 you get a better offer. And following the script, you immediately call me up and you say, al, I got a better offer. And I say, thanks, have a great life. And I call someone else right away and I say to them, talk to you later. Here's the offer I hope you accept.
00:24:31.326 - 00:25:13.386, Speaker A: And he's supposed to let me know by four. He calls me back at three and says, no, thanks. And I immediately call my third choice and I say, we've got an offer. He's supposed to let me know by four. He calls me back at 330 and I call my next offer and I say, you've got half an hour. You're supposed to let me know by four. He calls me back at 355 and I call my next choice and he's got five minutes till 04:00 and now it's after 04:00 and I'm supposed to place a reasonable deadline for responses, right? So my previous reasonable deadline, which was determined by the rules, that was five minutes, no one gets to hang up on an offer after the deadline has passed.
00:25:13.386 - 00:25:45.390, Speaker A: They're all exploding offers. And of course, most of the calls that I'm going to be making, and this is where some of the distress comes from on the parts of firms are going to be the people who say, maybe if I'm lucky, they say, you should have called me earlier, it's 04:00. I just accepted another job. You're too late. So that's what firms are worried about. And then the next set of rules are all about what to do if someone breaks the rules. Applicants who receive offers that do not comply, who you should complain to and what the consequences are.
00:25:45.390 - 00:26:18.298, Speaker A: So a couple of pages of what to do if someone doesn't follow the rules. So these don't look like the rules of a trouble free market. So I showed you a bunch of names of markets that I said, they're organized by deferred acceptance algorithms and they're working fine. But this one was organized by a deferred acceptance algorithm, not a computerized one, and it wasn't working fine at all. So let me tell you some behavioral observations from this market. First, it was a really fast labor market, not computer fast, but really people fast. Offers took about five minutes to deliver.
00:26:18.298 - 00:26:32.844, Speaker A: I sat there with a stopwatch. Sometimes rejections took about a minute. They'd already decided who they were going to make offers to. They would call up. They'd already talked about the terms. If we make you an offer on this day, these will be the terms. So the five minutes was just chitchat.
00:26:32.844 - 00:27:02.318, Speaker A: We really loved you. And the 1 minute you call me and you say, I can't take the job, and I say, okay, thanks a lot, and we immediately make a call to the next person. So if you think about someone calls me up to decline the job I'd previously offered him, that takes a minute. Then I immediately get on the phone. It takes me five minutes to make an offer. So there's a six minute turnaround time. When we try to make offers for assistant professors in universities, you sometimes need permission from a dean before you can take a rejected offer and turn it into a new offer.
00:27:02.318 - 00:27:47.726, Speaker A: So nothing like that here. We're not talking a week or a day, we're talking six minutes. There was enormous pressure on students to indicate at their interviews and before selection day whether they would take an offer if given it. So the form of that question is, are we your first choice? And there was a lot of willingness by students to see, say, if they were a first choice. The group of students that couldn't easily say this were married couples who were looking for two jobs together, because whether you're my first choice depends on whether my wife gets a job near you. So we can take two jobs, and we're going to have to wait for that. So the couples felt that they were at a significant disadvantage from all this pressure to say whether you were first choice because employers paid a lot of attention to who they said were first choice.
00:27:47.726 - 00:28:26.018, Speaker A: I remember sitting in some of these call sessions on selection day, and the two directors would be there with their multiple phones and they'd say, okay, here's our plan. We're going to make offers to numbers in our rank order list to numbers 1357 and twelve. And you'd say to them, I thought 1234 and five was your plan. And they said, well, that's our preferences. But five, seven and twelve have told us that we're their first choice, so they'll accept immediately. So we won't have. So three of our positions won't be hanging out there where there's that hazard that at the end of the day, even though we're a good program, someone might reject us five minutes to the deadline and then we wouldn't be able to fill.
00:28:26.018 - 00:28:57.198, Speaker A: So there was a lot of attention. If you said that I was your first choice, it made it more likely that I would give you an offer. Okay, so there's a deferred acceptance algorithm going on here. I just want to point out to you that it doesn't end like the deferred acceptance algorithm. The deferred acceptance algorithm I showed you ends when no one wants to make any more offers. This one ends when time expires and after time expires. There's this exploding offer market where I'm going to model that as everyone takes the first acceptable job they get offered if they don't already have a job.
00:28:57.198 - 00:29:37.036, Speaker A: So that's straightforward behavior. The reason there are all these rules about acceptances or binding is sometimes you get offered a better job than you accepted at 04:00 and then you take that one too, and then there's all sorts of trouble. So an easy theorem, I've already proved it, is that if the time limit, if 7 hours is like infinity, if it's enough time, then we'll get a stable matching. So you can already guess that 7 hours is not going to be enough time. And that's why there's a problem. We're stopping this deferred acceptance algorithm before it reaches a stable match. How can you investigate that? I didn't have any better way to investigate that than with simulation.
00:29:37.036 - 00:30:02.736, Speaker A: And here's a simple simulation. We ended up running lots of different simulations. But here's 200 workers, 50 firms offers take five minutes, rejections take 1 minute. There are some other calls in there, but they turn out not to matter. These things are the rate determining factor. Let's see what happens when you run that with five minutes and 1 minute, which is around what we observed in the market, the mean time to terminate. Remember, this is a market with 7 hours allowed to it.
00:30:02.736 - 00:30:34.336, Speaker A: The mean time is 18 hours. So it just takes too long. Now, 90% of the students have an offer after an hour, and 99% have an offer after 5 hours. So this is a market in the simulation where there are just 200 students. It's about a one fifth size market. When 99% of the students have offers, there's only two students who don't have offers. Why is it taking so many hours between the time when there's only two left and the end of the market? Well, the answer, of course, is they don't have the right offers yet.
00:30:34.336 - 00:30:55.880, Speaker A: So let's think what happens in this market. Let's just look at the offers and imagine that you were looking at a map of the United States from the air, and every time two guys are linked by a telephone call, it lights up. When you look at that first hour, you see lots of lights lighting up. Just all the lights light up. Everyone is calling everyone. So here's my firm. We have five offers to make.
00:30:55.880 - 00:31:15.992, Speaker A: So we get on the phones. We've got two phones. It takes five minutes to make an offer. Sometimes we get a busy signal. Sometimes we get turned down right away by someone who, we weren't the first offer that morning, but pretty soon we've been making our calls. Pretty soon we put down our phones, and they're silent. And what are we waiting for? Well, our offers are out.
00:31:15.992 - 00:31:47.320, Speaker A: Maybe one's been accepted already. We're waiting for people to call us back with decisions. So even if we had a lot more phones, it wouldn't go any faster. So there we're waiting, and the market undergoes a phase change. Instead of a lot of offers being made in the first hour, many fewer are made in each subsequent hour. So what's happened? Let's look at that map of the United States with the lights indicating the active telephone calls. In the first hour, there are lots of lights, but in the second hour, there are very few.
00:31:47.320 - 00:32:06.722, Speaker A: And what are they doing? Well, our phone rings, and someone says to us, no, thanks, and we immediately put the phone down and call the next person on our list. And it takes us five minutes. We say, ah, you know, it's been such a busy morning. Sorry we couldn't get to you before. We love you. Come work for us. That takes five minutes.
00:32:06.722 - 00:32:48.778, Speaker A: Then we put down the phone. That's taken six minutes from the time we got our rejection to the time we've delivered our new offer. That means you can only move ten links on that chain in an hour. So we went from a big parallel processing, lots of calls, all going at the same time, to sequential processing. All of a sudden it's ten calls an hour moving around the country and there isn't enough time. In 7 hours you have to, in this little simulation, this little model, you had to make almost 900 calls to get to a stable matching, but that could take 40 hours. So when you enforce termination time after 7 hours, they go to exploding offers.
00:32:48.778 - 00:33:35.274, Speaker A: And that gets done much quicker because now you don't have to wait. Everyone accepts the first offer they make, but you end up with lots of blocking pairs. It's not stable because sometimes you take an offer that isn't the best offer you could have gotten, and you might have taken an offer early at 04:00 and a better offer comes along. And of course as soon as people start holding two offers for a little while, then the number of blocking pairs goes way up. So that's why there are all those rules. If there's only a few chains around the country going at ten an hour, and then one of them stops because someone is holding two offers, he's holding up the progress of the whole market, and that can have bad consequences. So that's why they had all those rules about you have to promptly notify people and you can only hold one offer and you have to answer quickly.
00:33:35.274 - 00:34:21.264, Speaker A: So the conclusions for this market, I want to tell you some other things, are that markets can experience congestion offers take time. So the deferred acceptance algorithm is a polynomial time algorithm. This was the fastest real labor market I've ever witnessed. It only took six minutes from a rejection to a new offer that is astonishingly fast. But not fast enough, so you can ask the question, were these guys mistaken? Remember I told you that they had started at five days and then they'd come down to three days and then they'd come down to a day and a half, and now they were down to 7 hours before they adopted a centralized algorithm, they went down to 4 hours. Are they just crazy? The market wasn't long enough and they're making it shorter. They're not crazy at all.
00:34:21.264 - 00:34:56.524, Speaker A: How long is the market? Well, in that little simulation I showed you, it should have been. It needed to be long enough to make 900 offers. That's how long the market is. How many offers can be made? So is five days longer or shorter than one day? Well, they were getting six minute turnaround when they had the one day market. Why were they getting six minute turnaround? Because a seven hour market was short enough that everyone could sit by their telephone. That means when you called me, I was there, and when I called you, you were there when they had the five day market. That wasn't true.
00:34:56.524 - 00:35:38.920, Speaker A: People had to go to clinic, they had to go to class. So the market looked five times as long. But if the response time went from six minutes to 30 minutes, it meant the market would effectively be shorter. So every time you got an answering machine that said, I'm really eager to get your call, and I will call you back as soon as I can, that meant the market had become shorter in a relevant way, which is, how many offers could you get through? So they were trying to make the market faster, and they were doing it by making the duration shorter in order to compress the time. Now, of course, when you go to computers, they now use a deferred acceptance algorithm, and it processes these things very fast. Let me tell you one more thing. It does.
00:35:38.920 - 00:36:08.536, Speaker A: I see I'm running out of time. But this is a computationally simple thing. It goes fast. That really makes a difference. Now, it's a dominant strategy for them to tell you their true preferences. It's not a dominant strategy when someone says, are we your first choice? To answer truthfully, because your first choice may not really like you enough for that to matter. When you say, it's like applying early admissions to college, you want to use your one silver bullet in a way that'll get the most bang for the buck.
00:36:08.536 - 00:36:48.686, Speaker A: So you say to the place that's most likely to care and that you like, you're my first choice. But now that they use a deferred acceptance algorithm, they can state their true preferences. That's safe to do. So the other thing I mentioned earlier, and let me tie up here a little bit, is that there are couples in this market, people who want to get the same vicinity, husband and wife, who want to work in the same vicinity. This is a problem we earlier encountered in the much larger medical match, but that we've done a lot of work on for this match now, too. And here's an algorithm that was invented in the seventies, not by computer scientists. Couples had to be certified by their dean as a legitimate couple.
00:36:48.686 - 00:37:24.054, Speaker A: And once they were certified by their dean, they had to specify one of the members of the couple as the leading member, and the leading member submitted. Both members submitted a preference list just as if they were single. And my first choice, my second choice, my third choice, and then the leading member went through the match, and the following member had his or her list edited to take away places that weren't in the same city. And then the following member went through the match. So this didn't work very well. Couples didn't take the jobs they were assigned to. That caused ripple effects.
00:37:24.054 - 00:37:58.020, Speaker A: Eventually, it caused guys like me to be asked to redesign the match. So why didn't this work well for couples? Well, the iron law of marriage is that you can't be happier than your spouse. So think about. Think about me and my spouse. We consume pairs of jobs. We're an economic agent that needs two jobs. So our first choice might be two jobs in California, and our second choice, two particular jobs in California.
00:37:58.020 - 00:38:30.516, Speaker A: And our second choice might be two particular jobs in Boston, and our third choice might be two particular jobs somewhere else. So when they use this funny algorithm where one person is the leader, that means we might get one good job in California and one bad job in California. And that's not what we wanted. And the iron law of marriage kicks in. So we'd rather have two particular jobs in Boston in that case. So we call up the hospitals in Boston and we say, do you have room for us? And they say, why? Yeah, we didn't think you guys were available because they like us. We're a blocking pair.
00:38:30.516 - 00:38:53.980, Speaker A: We form with them, blocking pairs that are a little more complicated now that we're a couple. Then they call up someone else and they say, sorry, we had a budget shortfall. We don't have all the positions expected to have. We're not going to be able to hire you. So it ripples through the labor market. So one problem is they weren't asking couples for the right form of preferences. It wasn't an expressive language to ask for their preferences.
00:38:53.980 - 00:39:38.596, Speaker A: What are your pairs of jobs? But it turns out, even when you ask for pairs, couples are a hard problem. Deferred acceptance algorithm isn't going to work for couples because think about the problem of me and my wife apply to two jobs in California, and those jobs both like us better than the other applicants, so they hold our applications. Some people get rejected, but not us. Then some of the people who are rejected apply for jobs, and one of them applies for the jobs that's holding my application. And my potential employer likes the new guy better than me, so he rejects me. So now our second choice is two jobs in Boston, but my wife has to be withdrawn from the job that was holding her application so that the two of us can apply to two jobs in Boston. And that presents a potential blocking pair.
00:39:38.596 - 00:40:07.206, Speaker A: It means the algorithm will no longer be one pass, so it can be a computationally hard algorithm. It turns out the set of stable matchings may be empty, and it's np complete to determine whether it is. So it could be a hard problem. Let me not give you examples of that. We developed an algorithm to deal with it. It's not guaranteed to find a stable matching because of course, one might not even exist. It's not even guaranteed to find one when one exists, but it always finds one.
00:40:07.206 - 00:41:02.324, Speaker A: In all those many labor markets I showed you, it turns out not to be hard to find stable matchings. They exist and they're not hard to find. So one puzzle is, how come? Why is this easy? My colleagues and I have been trying to address this by looking at the fact that although the market can have thousands of employers in it, most people don't apply to more than 15, because you have to go on interviews first and things like that. So it's a big market with short lists, which makes the connection sparse in a certain sense. You can look at large markets that have that problem with not too many couples. So there aren't too many couples, and the length of applicants rank order list is small, and couples have long rank order list because they are ranking pairs, but they don't consist of that many different jobs that they've applied to. There's just lots of combinations of them.
00:41:02.324 - 00:41:39.944, Speaker A: When you make a large random graph model of that, I'm not going to have time to tell you about it. You find that in the limit, stable matchings exist. So there's some thought that this works well. And what's going on there is that when the market is large, what makes the stable matchings fail to exist is that the one, remember, it's not a one pass algorithm. So some couples displace other couples, and then you have to try again. What makes stable matchings fail to exist is cycles among couples. We displace you, then you displace us, then we displace you.
00:41:39.944 - 00:42:18.650, Speaker A: Those cycles turn out to be rare. And the reason they turn out to be rare is that in large markets with short lists, there are always going to be some empty positions. So when someone gets displaced, they set in motion a rejection chain. And that rejection chain is much more likely to end when someone applies to a position that was previously empty than when someone bumps the original person out again. So that's the key element of the proof. A corollary is that this particular algorithm that Elliot Parentson and I developed is more and more likely to produce a stable match as the market gets larger. If the number of couples doesn't get too large.
00:42:18.650 - 00:42:46.650, Speaker A: There are a lot of open problems related to this. It would be good to have theorems that weren't limit theorems, theorems that talked about in finite markets. How likely were we to find stable matchings with couples? How about if there are lots of couples? We know little about that. And of course, the fact that this is an np complete problem isn't very helpful. You're going to hear this from economists all the time. We don't want to know about worse cases, we want to know about ordinary cases. And of course there are smoothing results now.
00:42:46.650 - 00:43:33.270, Speaker A: I mean, you guys are doing better and better and telling us the kind of results we need, but not for this problem yet. So let me end with some concluding observations. What do marketplaces do? What do markets do? Well, the first thing a marketplace has to do is it has to attract participants. It has to make the market think. It has to make people want to come to the market so that they can do their transactions there and not do them elsewhere, or not do them at all, or any of those things. Another thing once you have a thick market is you run into a problem of congestion. There are a lot of people in the market, so there are a lot of transactions to evaluate, and it might take time to evaluate transactions or to make offers.
00:43:33.270 - 00:44:13.004, Speaker A: That's what I showed you with the psychology telephone market. And then you want to make the market safe to participate in, safe to come to the market instead of transacting somewhere else, safe to wait until the market opens instead of transacting earlier, safe to reveal relevant information like what your preferences are, because we can't give you what you want if we don't know. And computer assisted marketplaces have been able to help with each of these. The trick to making the psychology market thick was to dealing with the congestion. Their big problem was the congestion. They couldn't process all the offers fast enough to get done on selection day. But of course, with a computer it's no problem.
00:44:13.004 - 00:44:53.726, Speaker A: It doesn't seem like much of a problem anyway. It's a polynomial time algorithm, but it's one of these algorithms that undergoes a phase change. It starts off very parallel and then it becomes very serial. 7 hours wasn't enough, but on the computer there's plenty of time. Once you've made it uncongested, you start making it attractive, and you make it safe for people to make lots of offers so they don't need to know, are we your first choice? So we start getting better information about the preferences. And the better and better the market works, the thicker it is, the more people wait to transact in the market instead of trying to transact earlier. So in.
00:44:53.726 - 00:45:43.564, Speaker A: Oh, and of course, couples. We made it safe for couples to participate. Couples used to not be able to use the results they got from this market, so they'd have to either transact earlier or later. So in ways both simple, just speed and profound, you know, computationally complex computation about couples, a computerized, centralized clearinghouse makes this market work a lot better than it did when it was a telephone market. Thank you. Why don't you recognize questioners? Because I don't know anyone questions. What happens if your references really depend on the other person's preferences? Yeah.
00:45:43.564 - 00:46:21.304, Speaker A: What happens if your preferences depend on how much it can be? Tough. I've designed matches where that is the case, then we have to let the people, sometimes we have to let people see the preferences. That kills the theorem that says it's a dominant strategy to reveal your true preferences. So, in particular, if I will not admit you into my freshman seminar unless you list it as your first choice, it's no longer, if you want to get in, you have to list me as your first choice. And it might, even though I might not be your first choice, it might be good idea for you to do that. So there are matches where that matters and where it's important, and we lose strategy progress.
00:46:27.204 - 00:46:52.244, Speaker B: So I'm a computer scientist in academia, and the way that we handle acquiring new faculty. Incredibly elaborate scheme you described at the end than it is like the Gail Shapley algorithm. Is there a sociological reason why we don't use something like Gail Shapley?
00:46:53.784 - 00:47:37.124, Speaker A: Well, you would have to get a, you'd have to organize a lot of people. You'd have to get a lot of coordination. The question was, why doesn't computer science use a deferred acceptance algorithm to organize its job? Job market. Hiring new medical residents is a lot more like admitting graduate students than it is like hiring faculty, because they don't have to come and give job talks and things like that. So possibly it has to do with the cost of developing a preference list as opposed to deciding. Here, I'll use a computer science word, deciding online who to hire. It's possible that you, you preserve on interviewing costs by interviewing people until you find someone you like and then hiring them.
00:47:37.124 - 00:48:12.518, Speaker A: It's also possible that it would be hard to organize everyone to do that. The algorithm has a lot of appeal because it produces efficient outcomes that are stable. But I spent many years before I went to Harvard. I was many years at the University of Pittsburgh, which is a fine university, but not as elite in the labor market as Harvard is. And over the years I was there, we rose in the reputational rankings quite a bit. And the way we did that is we hired guys who were better than we deserved to hire. And the reason we could hire guys who were better than we deserved to hire is the market was inefficient.
00:48:12.518 - 00:48:30.444, Speaker A: Sometimes a lot of people would cluster around the sparkliest candidates and we would get guys who should have gone to some of those better places, but we made them an offer and the market closed before the better places could move. Make them an offer. So we wouldn't have been eager in those years to go to a more efficient marketplace because we were profiting from the inefficiencies.
00:48:32.064 - 00:48:51.384, Speaker B: Another reason could be that for the computer science job market could be that if my information is correct and current, there is some kind of faculty candidates wiki where people exchange. So there may be too much information where candidates exchange.
00:48:52.604 - 00:49:02.892, Speaker A: There's great variety about the way academic departments hire. In economics, we have centralized interviewing at an annual meeting in early January and then campus flyouts.
00:49:02.908 - 00:49:04.864, Speaker B: But most socio science is.
00:49:07.204 - 00:49:07.772, Speaker A: Curious to.
00:49:07.788 - 00:49:13.704, Speaker B: Know if there's a natural extension beyond couples to couples of couples and higher orders.
00:49:14.004 - 00:49:52.194, Speaker A: Complementarities are tough, and the natural extensions, the things I can reliably guess are true, is that those look like hard problems, and some of them will be genuinely hard, and some won't be. What I'm not at all good at what you guys are computer scientists are good at telling us which problems look hard. And fortunately, it turns out some of those are nevertheless easy. So all these problems look hard, which partly means they don't have nice mathematical structure. So I don't know much about that. But we do deal with complementarities on large scales. When we deal with, say, auctions for spectrum, radio spectrum, where packages have to be put together with all sorts of properties.
00:49:55.694 - 00:49:59.954, Speaker B: Do you ever see markets? And what happens to your algorithms? Do you put money in equations?
00:50:02.414 - 00:50:42.178, Speaker A: How about money? Well, we often see markets with money in them. So, no, it was suppressed in the analysis. What I gave you in this analysis was people have preference over jobs. Presumably the money wage influences those preferences. So what didn't happen, what was absent in the analysis here was the adjustment of wages to help clear prices. It turns out that's not a difficult problem. To add to this, in other words, if you think of, I mean, even with the discrete models, if you think of money as discrete to the nearest penny, then when I make you an offer, I'm making you an offer at a wage.
00:50:42.178 - 00:50:58.134, Speaker A: And when you turn that down, one of the things I could prefer a little less is to make you an offer at a slightly higher wage. And as the wage goes up, I might prefer to make someone else the offer, so that the simple mathematics that I showed you adapts trivially to having wages.
00:51:01.434 - 00:51:12.334, Speaker B: So would the capital problem go away if you where the firms actually submit their list to a couple and the couple make decisions?
00:51:13.074 - 00:51:51.654, Speaker A: Would the couple's problem go away if we had the firm proposing algorithm? Not at all. And the reason it's a different problem, right? So with the worker proposing algorithm, the problem is you have to withdraw workers from firms with the firm proposing algorithm. The problem is I get an offer and my wife gets an offer in a different city, and now I get a second offer, and I don't know which one to reject. I'd have to be able to look ahead and see what I'm looking for is an offer in a city where my wife has an offer. So our temptation, when you look at those, and they are decentralized markets too, our temptation is not to reject anything until we start to get a matched pair. So I get an offer in Boston, and then she gets an offer in St. Louis, and then I get an offer somewhere in Wisconsin, and she gets an offer somewhere in Missouri.
00:51:51.654 - 00:52:18.018, Speaker A: I don't know which ones to reject, because if she were to get an offer in Wisconsin, that would be a good offer for me. So the way those algorithms fail is we just accumulate offers until the algorithm stops, until there's no more progress. And then you have to make people reject some offers. So, no, the problem looks different, but does not go away at all. And of course, the set of stable matchings, if it fails to exist, it'll fail to exist. However you organize the algorithm.
00:52:18.146 - 00:52:33.094, Speaker B: How about the hypothetical case where there is only one hospital per city? And in other words, I offer to couples now and only, would this be a simpler problem?
00:52:33.914 - 00:52:39.254, Speaker A: One per city, I don't think solves it. If there was only one hospital, that would make it a lot simpler.
00:52:54.654 - 00:53:23.574, Speaker B: In the case of markets, how do you approach designed for robustness with respect to graphs, road participants whose goal was to introduce not so much advantage, but inefficiencies.
00:53:26.794 - 00:54:04.028, Speaker A: So the question is, how do we respond to threats? And we respond only. Yeah, we respond only naively to threats. We do worry with application system, things like the common application system for colleges, things like that. We do see lots more applications. It's getting cheaper to make applications without adversaries, without malevolent behavior. We're already seeing that applications themselves. The fact that you apply to my university, conveys much less information than when you had to hand write a letter applying so the expressions of interests become less reliable.
00:54:04.028 - 00:55:02.770, Speaker A: So, for instance, in the economics job market, we've instituted a signaling mechanism. It's easy to apply for 100 jobs, but the American Economic System association will now facilitate the transmission of two signals prior to the interviews, two signals of interest, and that the evidence suggests that that's working to break some of the coordination log jam. Now, how do we stop people from. This is where we thought of attacks. How do we stop people from sending more than two signals? We require them to use the email address that they use on their job market CV, which we can normally find on their department website. There's no point signaling to someone under an alias that they can't figure out who you are. So given that they have to be able to interview you and that there's a system set up for communicating those interviews, we think that no one is pretending to be two different people, but that's sort of relying on real methods of identification that themselves might be subject to attack.
00:55:02.770 - 00:55:37.234, Speaker A: But I think that's not something we've, we've thought about as much as you have. One of the exciting things for computer scientists about market design, of course, is that you get not only to design the markets, but you might get to design the agents. And so that will. The big lesson of market design is strategy. Sets are bigger than you think and all sorts of behaviors show up. If on another day I could tell you about markets for lawyers. Lawyers earn their money by thinking about ways to get around the spirit of the rules while obeying their letter.
00:55:37.234 - 00:56:03.794, Speaker A: So we often have to think about a tax there. So in large markets, that problem becomes small. Thank you.
