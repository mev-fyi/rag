00:00:00.250 - 00:00:30.402, Speaker A: Hey, this is julian and you are on idoblox. And in this video, I'm going to teach you how you can send ether from a regular address to a smart contract. By the way, I created a free email course to teach you how I got my first remote blockchain job. Paid $100,000 a year. So if you want to learn all my secrets, you just have to sign up at this URL. In order to send ether to a smart contract, right, you need to have a function with the payable keyword. The payable keyword.
00:00:30.402 - 00:00:58.000, Speaker A: Specify that a function can accept some ether without this keyword. The function will reject the incoming transfer. Another thing that is important to note is that your function has to be non view. So a regular function that can work with transaction. If you try to send ether to a function that has the view keyword, it's not going to work. So let's create this function. We call it invest.
00:00:58.000 - 00:01:28.470, Speaker A: We make it external and we give it the payable keyword. And at the moment we keep it empty. All we need is a function that has the payable keyword, but we don't need anything inside. And the second function we're going to create is a function to return the balance of the smart contract. And I do this because I want to prove to you that my transfer has worked. So let's do this. So we call our function balance off.
00:01:28.470 - 00:02:04.770, Speaker A: And this is an external function that is view this time because this is going to be read only. And we specify the return type, which is integer because the balance of a smart contract is in an integer type. And here first we're going to cast this keyword. So this referred to the smart contract. But we want to cast this to an address because an address has a field that is called balance. And that's the balance in way of the smart contract. Okay, so now we have our two function.
00:02:04.770 - 00:02:45.922, Speaker A: So you go to on the left to the deploy and run transaction panel. So you need to click on this icon here and you deploy your smart contract with this button. Okay, so let's expand the contract and you're going to see this two button. So invest in red means this is a payable function and balance in blue means this is a view function. So first we going to send some ether with the invest function. And here in the value field you need to specify how many way you want to send. So way, this is a unit that I explained in a past video.
00:02:45.922 - 00:03:26.794, Speaker A: But as a quick refresher, a way is a very small fraction of an ether one way is ten power -18 so ten power -18 ether. So it says like zero, zero, et cetera. 18 time and one at the end ether. So that's a very, very small fraction of an ether. And at the level of the ethereum virtual machine, that's how we manage ether transfer. We don't specify an ether amount, but we specify a way amount. By the way, remix, just for your convenience, allow you to specify your ether transfer with other units including ether.
00:03:26.794 - 00:03:59.382, Speaker A: But this is just for your convenience. Behind the scene it convert everything to way. Okay, so we're going to stay with the way option and let's specify, I don't know, for example, let's say 1000 way. Okay, so that we scroll down and we click on the invest button here. And here you're going to see appearing a transaction. So now we should have 1000 way inside our contract. And to verify this, let's click on balance off and we see 1000 so it has worked properly.
00:03:59.382 - 00:04:18.462, Speaker A: Cool. So let's send another 500 way for example. Okay, so here I replace this input by 500. I click on invest again. So I see my second transaction here. And now I click again on balance and this time I can see 1500. Yeah, everything works fine.
00:04:18.462 - 00:04:57.366, Speaker A: Okay, cool. So the next thing I want to show you is some typical operation you might want to do when you receive ether in a function. So in the invest function, the first thing you might want to do is to check that the value that was sent is above a certain threshold. So for that you can use an if statement. So let's access the value that was sent. So you can do this with MSG value. And if this is inferred to 1000 way, then we're going to stop the execution here and actually even cancel the transaction by using the revert keyword.
00:04:57.366 - 00:05:34.550, Speaker A: So I'm going to do another video on how to handle error in solidity. And I'll talk about revert and require and other stuff. But for now just be aware that this will cancel the transaction and the execution will not continue. Okay, so someone who call this function has to send at least 1000 way. Otherwise this is going to be canceled here. Another typical operation in a payable function is to track how much ether was sent by each address. And for that you're going to need a data structure of type mapping.
00:05:34.550 - 00:06:18.706, Speaker A: It's going to be a mapping of address to integer. So these addresses will be the sender of ether and this integer here will be their balances. So we call this balances and after our if statement. And we're going to access a specific entry of this mapping. So balances of the sender, and we're going to increment its balances with MSG value. And the last thing I'd like to tell you is that in solidity, you can actually use some built in unit for ether transfer. So here, instead of 1000 way, you could specify, for example, one ether.
00:06:18.706 - 00:06:49.166, Speaker A: And you also have some other units. And if you check the documentation of solidity with this link, then you'll see all the built in constants. So you have web, you have Fina Zabo ether, and here you have the equivalence between this unit and ether. All right, so that's it for this video. And in the next video, I show you how you can send ether from its smart contract to a regular address by using the payable address keyword. Thanks for watching. See you.
00:06:49.166 - 00:06:49.900, Speaker A: For the next video.
