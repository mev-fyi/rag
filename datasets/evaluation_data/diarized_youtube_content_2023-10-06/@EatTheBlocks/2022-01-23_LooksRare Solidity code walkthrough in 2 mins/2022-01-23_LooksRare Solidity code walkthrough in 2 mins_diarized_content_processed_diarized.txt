00:00:00.250 - 00:00:35.282, Speaker A: Just a few days after launching, Looksrare already became the biggest NFT exchange by volume in front of OpeNC. In this video I'm going to explain the smart contract code of looksrare. If you are new here. I'm julian and I eat the blocks that help web two developers transition into web three. Looks rare was launched in January 2022 as a more decentralized alternative to OpenSea. It managed to attract a lot of users by doing an airdrop for Opensea users. The smart contract of luxware is not available on GitHub, but you can see it on Etherscan.
00:00:35.282 - 00:01:13.278, Speaker A: This is the main contract of luxware. It executes NFT trades after the buyer and the seller have agreed on the price in the constructor. We instantiate the value of important variables like the addresses of smart contracts we interact with and the fee recipients after. These two functions are for canceling orders looks rare like OpeNC uses a system of hybrid orders where orders are created off chain using ERP 712 signatures and executed on chain. Maker orders are buy or sell orders stored off chain. Taker orders are buy or sell orders executed on chain against maker orders. There are three functions to match maker orders with taker orders.
00:01:13.278 - 00:01:37.514, Speaker A: The first of this function is to match a maker sell order against a taker buy order. If the payment currency is ether or wrap ether. First we do some sanity checks. Then we transfer the payment amount to the smart contract in ether or wrap ether. Then we check the signature of the sell order. There is no need to check the signature of the buyer order since only the buyer can send a buy order. Then we check the payment amount is enough.
00:01:37.514 - 00:02:11.922, Speaker A: Then we save the nons of the order in a mapping to prevent a replay attack of the order. Then we transfer the payment to the seller, the royalties to the NFT creator, and a trading fees to Luke rare. And finally we transfer the NFT to the buyer. There is also another version of the same function for payment currencies different than ETH or wrapped ether. Then there is another version of the match function to match buy orders with sell orders. Then there are a few functions to update some parameters and then some internal function that I use in the order matching function above. So that's it for this walkthrough of the code of Luxra.
00:02:11.922 - 00:02:22.180, Speaker A: There are other smart contracts in Luxra, but the one I show you is the main one. Another exchange to know is Opensea and you can continue with this developer for Opensea on my channel. I will see you there.
