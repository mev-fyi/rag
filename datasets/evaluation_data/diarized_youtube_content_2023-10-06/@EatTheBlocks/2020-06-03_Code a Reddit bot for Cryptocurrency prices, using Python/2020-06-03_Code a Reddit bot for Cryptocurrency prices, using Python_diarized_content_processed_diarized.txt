00:00:00.410 - 00:00:40.950, Speaker A: Sometime when you browse GitHub, you find some cool little piece of code. And that's what happened to me the other day, totally by chance, I found the code I fit Reddit boat for cryptocurrency prices. It fetches the price of ether, computes some statistics, and create a post on Reddit. This is written in Python and it's just about 100 lines of code. In this video, I'm gonna go over the code and explain how it works. If you don't know me, I'm julian and on my channel eat the blogs, I teach blockchain development and how to find your first blockchain job. The first step to code our boat is to connect to Reddit.
00:00:40.950 - 00:01:10.482, Speaker A: Reddit has a very powerful API that allow you to do many stuff. You can connect directly to the API or you can use a client library. And actually using a client library is easier. There are different client libraries written in different languages, but one of the most popular one is written in Python and it's called Prowl. That's the one we're going to use. In order to connect to Reddit with this Library, you need to create a Reddit object like this. So there are two ways to connect.
00:01:10.482 - 00:01:41.166, Speaker A: You can create a read only instance of Reddit by providing this info. So inside your developer dashboard in Reddit you need to create a client for your boat. So that's where you're going to find client ID and client secret. But in our case we don't want a read only read instance because we're going to actually create new hosts. So what we want is authorized Reddit instances. And so in this case you also have to provide a username and a password. So let's see this in the code.
00:01:41.166 - 00:02:16.258, Speaker A: So here there is my script. So first we import the Library and in the main function, so that's where we start everything. So here we create our instance of Reddit. But you can see that the guy who created the script made an error here or he uses an old version of the Library because he doesn't give enough info. So you'll have to correct this. And after you need to select which subreddit you want to work with. So in our case we want to create new post to the if trader subreddit.
00:02:16.258 - 00:03:02.360, Speaker A: And after, in the next line we find the thread where we want to create new post. Here we check all the east trader thread that are hot. So that's basically the most popular and we want thread that are stick it and we have daily in the title and we take the most recent one and we store the reference in the daily variable. So now we are connected to Reddit and the next step is to fetch the price of ether. So our bot will display the current price of ether relative to the all time high, daily, weekly, monthly and yearly. So we need to load historical data. So that's what we're going to do in this function.
00:03:02.360 - 00:03:54.742, Speaker A: So let's scroll up a little bit. And the way we're going to get this historical data is by scraping coin market cap. So scraping means that you're going to load the HTML of a website and after you're going to pass this HTML and find just the info that you need, exactly like you would do in vanilla JavaScript when you need to manipulate the HTML. And here we're going to use a popular Python library for scraping that is called beautiful soup. And so here in this complex code here we basically navigate the HTML of coinmarketcap, for example. Here we find some tr, that means we are navigating a table until we find the information that we need. And after reformat this data and reretune it.
00:03:54.742 - 00:04:42.642, Speaker A: And next we are going to compute the all time high prices for different interval, daily, monthly, et cetera. When we compute the all time high prices, we might have to deal with a lot of data and if we just use pure Python it might be a little bit slow. So instead we're going to use a library called numpy. That's a very popular library for scientific calculation. And so we import this and in this function we're going to calculate the all time high by using numpy. And so we're going to convert our data into a numpy array. So internally numpy is implemented for the critical part with C extension.
00:04:42.642 - 00:05:33.590, Speaker A: So that's very, very fast. And here we calculate the maximum on this array and we transform this into a Python list. So this way we can calculate the all time high in a very efficient and very fast manner. So here if you scroll down in the main function, you can see that we get the data from load historical data. And after we calculate the all time high like this, and we also going to get the current Price of Ether and we're going to combine these with the all time high that we calculated before to get an array of changes. So basically we'll express the current price in percentage of the all time high, daily, weekly, et cetera. Okay, so now we have all the data we need, and next step is to create our post on Reddit.
00:05:33.590 - 00:06:24.854, Speaker A: In order to create a post on Reddit, we need to format our data. So here we are going to create the first line of our post. So we're going to announce the new all time high, and then we're going to create a table with daily, weekly, monthly and yearly all time high as a percentage of the current price. And here that's where we will actually send the post to Reddit. So daily, this is the reference to a Reddit thread that we got before, and we use the reply method and we specify here what's the text of the post. And so we join together the different part of our post. So this part here, the top announcement and also the footer were very, very important.
00:06:24.854 - 00:06:58.402, Speaker A: We specify that we are a boat. And after that, that's it. You've sent a message to Reddit. However, this is not finished because our boat has some problem and you have some homework to fix them. So I told you at the beginning of this video that I haven't written this piece of code. Actually, that's something that I found on GitHub and it's actually pretty old, I think that was committed in 2017. And of course there are some stuff that don't work.
00:06:58.402 - 00:07:58.830, Speaker A: So if you try to run this script like this, it's not going to work and I'm going to tell you why. So one of the first reason is that in this function we are using a URL that doesn't exist anymore. So the API of coinmarketcap is not at this URL. So check out the documentation of the API of Coinmarketcap for that. Second, here in load historical data, we are scraping the historical data from Coinmarketcap. So first of all, it might not work anymore because in general, when you create some scraping code, it doesn't work a long time because the HTML of website can change very fast and every time you need to rebuild your scraping code. And second, in general, you also have some legal problem when you do some scraping because that's against the term of use, the term of service of many website.
00:07:58.830 - 00:08:27.514, Speaker A: They forbidden this. So I'm not sure that Coinmarketcap actually allow this. And finally, I don't even think this is the best way to do it because I think that now the API of Coinmarketcap got better. So instead of bothering yourself or scrapping all this historical data, you might get it directly from the API. Die. Oh yeah, and also, as I mentioned quickly at the beginning, the way they instantiate Reddit is wrong. We are missing some credentials.
00:08:27.514 - 00:08:40.620, Speaker A: So check the documentation of pro. It's going to tell you everything. And if you are interested in blockchain and you want to become a blockchain developer? Check out my free training on how to get your first blockchain job. I'll see you there.
