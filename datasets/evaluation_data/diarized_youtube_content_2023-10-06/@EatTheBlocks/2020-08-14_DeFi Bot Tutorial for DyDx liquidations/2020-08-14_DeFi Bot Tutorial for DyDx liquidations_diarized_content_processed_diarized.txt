00:00:00.330 - 00:01:04.778, Speaker A: Are you interested in building some passive income on the blockchain? Are you interested in learning an investment strategy that is entirely automated? Are you interested in learning about an investment strategy that can be very, very profitable? With this investment strategy, some people made $100,000 in a single transaction, and combined, all these people made several millions in two and 19. This strategy is called liquidations. So with liquidation, you help to maintain the ecosystem of DFI by running bots that close under collateralized positions, and you get rewarded for it. The most profitable liquidation in 2019 were for the DyDX protocol. You earn 5% of the total amount of the position, and for big position, it can add up really quickly. What's great about liquidations is that it sounds complicated, so lots of end users will be scared and won't even try. But it's less complicated than it sounds because you only have to run the boat.
00:01:04.778 - 00:01:48.698, Speaker A: You don't have to code it yourself. So in this video, I will show you how to run a liquidation boat for the DyDX protocol. I will give you step by step instructions, and I will explain every important detail. If you are not super technical and you are struggling to understand the technical documentation on GitHub, this is perfect for you. And I will also explain how the whole liquidation process work using some nice colored graphs. And at the end of the video, I will give you the cherry on top of the cake, because I will reveal how you can do liquidations without any upfront capital. And if you don't know me, I'm Julian, and on my channel, eat the blocks.
00:01:48.698 - 00:02:43.114, Speaker A: I teach blockchain development and how to find your first blockchain job. And before we continue, register for my free training on flash loan. Flash loans are another super cool investment strategy in DeFi. And in this free training, I teach you how you can make profitable flash loans. So we're going to start by explaining what is a DYDX liquidation. So there are two situation where you can do liquidation on DyDX if you are doing margin trading on solo, or if you are doing a leverage perpetual swap. So without going into the detail, the idea is that in these two cases, you are going to borrow some asset in order to do a trade, and at all time, you need to maintain a collateral that exceed the value of the asset that you borrowed.
00:02:43.114 - 00:03:32.158, Speaker A: And when the value of your collateral goes below a certain threshold, that's when the liquidation is going to take place. So for the rest of this explanation, I'm going to focus on liquidation for margin trading, but for perpetual swap, this is extremely similar. So let's say that I'm a borrower, and I borrow some token, and I also provided some collateral. So at the beginning, the value of my collateral is equal to 150% of the value of the borrowed asset. So everything is fine. But in the future, if the value of my collateral changes and goes below 115% of the borrowed asset, that's when I'll enter into dangerous territory and anybody can liquidate my position. So we're going to take a specific example.
00:03:32.158 - 00:04:09.194, Speaker A: So let's say that I borrow 350 die, and for the collateral, I have one ether, which at the current market price is equal to 355 usd. So that's 110% of what I borrowed. We are below the liquidation threshold. So anybody can liquidate my position. So the liquidator will send 100% of the borrowed asset. So that's going to be 350 die, and in exchange, he's going to get 105% of the collateral. So here we can see the balances at the end.
00:04:09.194 - 00:05:02.346, Speaker A: So in the end, after the liquidator has done the liquidation, I don't owe anything anymore. However, I lost a little bit of collateral, and this has been given as a reward to the liquidator. So I only have left zero point 33 ETH, and the liquidator at zero point 96, seven eTH, which is 367 US, which is 70 USD of profit. So it might seem like a very small reward for the liquidator, but if you liquidate positions that are much bigger than this, you can make much more than $70 profit. All you have to do is to be the first one to spot the liquidation opportunity and to have enough capital to reimburse the borrowed asset. So it would be too slow to spot these liquidation opportunities manually. So instead, we'll run a script that's what we call a liquidation boat.
00:05:02.346 - 00:05:38.986, Speaker A: And I will show you this in the next section. Our liquidation boat will run twenty four seven and will regularly pull the DyDX smart contract to know if there are any liquidation opportunities. If there aren't, it does nothing and just wait for the next polling time. And if there are, it will trigger the liquidation process. By sending a transaction to the smart contract of DydX, we could create this liquidation boat ourselves, but that would be.
00:05:39.008 - 00:05:39.898, Speaker B: A lot of work.
00:05:39.984 - 00:06:14.366, Speaker A: So instead, we will use the official liquidation boat of Duidx. That means we won't have to do any coding, but we still have to deploy the liquidation boat. So here is how it's going to work. We will have three parts. The liquidation boat, the ethereum node, and the spot contract. The part we have to manage ourselves is the liquidation boat. We could deploy this liquidation boat on our own laptop, but that's not really ideal because we want to run this boat 24/7 instead, it's better to deploy.
00:06:14.398 - 00:06:15.774, Speaker B: The boat on a server.
00:06:15.902 - 00:06:54.562, Speaker A: So we will deploy the boat on digitalocean, which is a very easy to use hosting provider. This boat will need to interact with the smart contract of Dydx on the Ethereum blockchain, and for that we need to run an ethereum node. Running an ethereum node is not very easy. So we will use quicknode, a service that runs ethereum nodes for you, and expose an API to use their nodes. So that's the high level overview of how the liquidation boot will be deployed. Next, we're going to get our hand dirty and start deploying this boot. But before we can do this, we need to do some prep work.
00:06:54.562 - 00:07:01.010, Speaker A: So in the next section, we will fund the ethereum address that we will use in the liquidation boat.
00:07:04.950 - 00:07:50.206, Speaker B: When we do a liquidation, we will reimburse the ether or the token that was borrowed by the liquidated account. So you need to have some ether or some tokens before the liquidation. So there are three questions. Which tokens do you need to provide? How much do you need in which address? So we're going to start with which tokens you need. Dydx can trade three tokens, die, the most popular stablecoin in D five USDC, another stablecoin, and wrap ether, which is an ES 20 token backed by real ether. So one wrap ether equal one ether, and you can convert back and forth between the two with the spot contract of wrap ether. So let's suppose that we're going to pick Dai.
00:07:50.206 - 00:08:47.266, Speaker B: So with your dai tokens, you can of course liquidate positions where the borrowed asset is DAi, but also USDC or wrapped ether. That's because when you try to liquidate a position where you don't have the asset to be reimbursed, you will take a loan on DyDx using what you already have in DyDX as a collateral. So in the rest of this tutorial, we will use a die to fund our account on DyDX. But if you want, you can also use USDC or wrap ether. So the next question is, how much do you need? When you do a liquidation on DYDX, you need to reimburse the whole position. If you spot a liquidation where you need to reimburse 500 die, but you only have 100, you can do this liquidation. Ultimately, how much you want to put in DyDX is up to you, but you can probably start with a small amount, like maybe 500 die, 1000 die, and later you increase it.
00:08:47.266 - 00:09:02.330, Speaker B: And the last question is, where do you have to send these tokens? Dydx cannot spend your tokens if they are in your own address, so you need to send the tokens to the smart contract of Dydx. And that's what I'm going to show you in the next section.
00:09:06.350 - 00:09:48.450, Speaker A: So first you need to buy some dai. So if you want to buy Dai with credit cards, you can use some centralized exchanges where they sell Dai, such as Coinbase. If you already have crypto like ether, you can buy dai on decentralized exchanges like uniswap. Next, once you have your Dai, you need to make sure that you have an ethereum wallet because you will need it in order to use DyDX. So the most popular one is metamask, which is a chrome extension, but you have many other ones that are supported by Dydx. So you go to the website of DydX, that's Dydx exchange. You click on start trading.
00:09:48.450 - 00:10:23.970, Speaker A: So you will see the trading interface. So it looks a little bit complicated, but don't worry because we're not going to use any of the advanced feature of DyDX. So we go to balances and there'll be a step where it will ask you to connect your ethereum wallet already done it, so I don't need to do it again. And then you click on deposit. So here you need to tick different box agree and logging button. This is kind of on my screen and here it asks me to sign a message on metamask.
00:10:26.250 - 00:11:02.462, Speaker B: And then you'll select here margin account. Here you select the address that you want to send your tokens from. So here we're going to select Dai and below it asks me to enable die. So there is an enable die button cut off on my screen, so you'll see a pop up of metamask. So here I'm not going to do it, but you need to confirm this and once you have done this then you're able to use this amount box here where you specify the amount of Dai you want to send to Dydx for your liquidation. And finally you'll be able to click.
00:11:02.516 - 00:11:04.978, Speaker A: On the deposit button, you'll have another.
00:11:05.064 - 00:11:19.590, Speaker B: Pop up of metamask and after that the DaI are transferred to the smart contract of Dydx and you are finally ready to do liquidations. And the next step is to set up our Ethereum node on Quicknode.
00:11:23.530 - 00:12:03.074, Speaker A: So as I said before, it's not very easy to set up your own Ethereum nodes. So we're going to use a service called Inferra that manages Ethereum nodes for you and expose them with an API so you don't have to manage anything. This is super easy to use and they have a free tier that will be enough for us. By the way, just before in this video I mentioned that in order to do this we will use another service that is called Quicknote. But I just found out that they have temporarily disabled their free tier. So that's why now we are switching to Infira. So you create a free account and.
00:12:03.112 - 00:12:37.678, Speaker B: Inside the dashboard you go to the Ethereum project and you click on create new project. Yes. After we going to scroll down and you're going to see the URL of your endpoints. So that's the URL you can use in order to interact with your ethereum node. So here we are on main net, that's the correct network. So we're going to copy the first URL. So that's this one.
00:12:37.678 - 00:12:48.210, Speaker B: So I put it in my note and we're going to use it after when we configure our liquidation boat. So next we're going to set up our server with digitalocean.
00:12:52.550 - 00:13:24.186, Speaker A: So in this section we are going to provision a server so that we can run our liquidation boat 24/7 without any interruption. So as I mentioned before, there are many hosting provider, but what we want is something very simple. So that's why I picked digitalocean. So you go to digitalocean.com, you create an account. So creating an account is free, but provisioning a server is not. So don't worry, because the kind of server we're going to provision is really cheap.
00:13:24.186 - 00:13:26.350, Speaker A: It's going to be just a couple of bucks per month.
00:13:26.420 - 00:13:57.614, Speaker B: So it's totally fine just to experiment. Now I'm inside my dashboard, so I'm going to droplet. So that's the name they give to the server and I'm going to create a new one. Create droplet. And first I need to choose an image that basically allow you to choose your printing system. And also you can have some pre configured software. So in our case we want a droplet that is pre configured with Docker.
00:13:57.682 - 00:13:59.414, Speaker A: So if you never heard of Docker.
00:13:59.462 - 00:14:52.570, Speaker B: Before, that's basically a solution to very easily deploy software that's a sort of virtual machine where you can just deploy software without having to install and configure 1000 dependencies. So it's really going to make the deployment much easier. So inside the dashboard of digitalocean we go to marketplace and here we choose Docker. So scroll down and we're going to choose here a basic plan. So that's going to be the cheapest. Then here let's see the other option because of course by default it pick an instance that is very expensive, but we can pick the cheapest one. So $5 per month, that should be enough for our purpose.
00:14:52.570 - 00:15:26.840, Speaker B: Add block storage. We don't need this to choose a data center region. So ideally we want a drop lead that is as close as possible from our Ethereum node. And I believe that inferra uses servers in the US. I'm not sure if this is on the east coast or west coast. By default the first region in edible us is on the east coast. So I'm going to choose New York, no VPC, I don't want any of this.
00:15:26.840 - 00:15:54.334, Speaker B: So next very important, the authentication. So I'm going to choose Ssh key. So that's a secure method to connect to your server. If you are on Windows, I recommend to install git for Windows which will give you access to a bash terminal. So that's exactly the same terminal as in Linux or Mac. And with this you'll be able to run the same command that I'm about to show you. And if you are on Linux on macOS, that's fine.
00:15:54.334 - 00:16:30.102, Speaker B: You already have a bash terminal, you don't have anything to install. Next you need to choose your ssh keys. So to make it simple you can consider that it's a sort of password that make your connection to your server secure. So for me, I've already configured my ssh keys before. But if you never created ssh key before, you click on new ssh key. And on the right you will see some instruction to create this key. So here you copy this instruction, you paste it in your terminal, you run it, it's going to create the ssh key.
00:16:30.102 - 00:17:23.382, Speaker B: So you're going to see this prompt in your terminal, it's going to ask you for a passphrase and it's going to generate these two file IDRSA and RDRSI pub. And after you're going to run this command, it's going to display the content of the public key on your terminal. You copy this, you paste it here, give it a name, you click on add ssh key and after you're all set, so we scroll down here, we want to create one droplet. So here I'm going to give it a name that help me to recognize it? Liquidation boat. All right, let me scroll down. Click on create droplet. Okay, so now our server is created.
00:17:23.382 - 00:17:30.220, Speaker B: So in the next section we're going to finally deploy our liquidation boat on our server and configure it.
00:17:33.810 - 00:18:24.394, Speaker A: So in order to deploy and configure our boat, we need to first connect to our digitalocean droplets. And for this we're going to need its ip. So in your digitalocean dashboard, you copy the ip, then you go to your terminal and you're going to run ssh root at the ip you just copied. So that basically means connect to this ip with this user. And so by default, digitalocean create this root user. So since you already added your ssh key into digitalocean, you don't need to enter any password. And when you're going to connect for the first time, ssh is also going to ask you if you want to trust this host.
00:18:24.394 - 00:18:51.074, Speaker A: So you just say yes. So let me clear my screen. So now I'm connected to my digitalocean instance. You can see that the prompt has changed here. So we're going to go to the repo for the liquidator boat of Dydx on GitHub. So this is this organization, this repo, scroll down and we're going to copy paste this command.
00:18:51.202 - 00:19:21.146, Speaker B: Then I paste this in my note because we need to customize it a little bit. So let me explain what's going on here. So here we say, hey Docker. So that's the software that is used to easily run all the software. Docker, I want to run this software here, the liquidator that belong to this organization, UidX protocol. So Docker knows where to find this. And after we're also going to pass to this script a set of environment variables.
00:19:21.146 - 00:20:03.294, Speaker B: So these are basically options. First we need to pass the address and the private key for the account that's going to sign the transaction for liquidation. So that's going to be the same address that we used to send the DAi to Dydx before. So you go to metamask, you choose the same address that we used before for DyDX, and we're going to replace this here for the private key. You can also get it in metamask. So here you click on account detail export private key. You type your metamask password, and after you click on confirm, you will see your private key.
00:20:03.294 - 00:20:26.258, Speaker B: I'm not going to do it. And after here you pass the private key for the Ethereum node URL. Well, you have it just above. Make sure to have space here. So here we have two kind of liquidation enabled. So I mentioned this briefly before. In DyDx we have different kind of liquidations.
00:20:26.258 - 00:20:56.094, Speaker B: The collateralization threshold is slightly different for prop liquidation, but it mostly work the same. And finally, this one means don't liquidate expired account. I don't know what are expired account, but it makes sense to put it false. Oh yeah. One important thing I forgot to mention before is that this address is going to be used to send transaction to do the liquidation on DyDX. That means it will need to cover the gas fee. So for that you need to have some ether on it.
00:20:56.094 - 00:21:40.006, Speaker B: So here, I just use a dummy private key, doesn't match the address, but just to show you. So I copy paste this in the terminal, you run it, and it's going to download the docker image, start the container, and after that your liquidation boat is running. So here you saw an arrow. It's normal because I didn't put the correct private key, but when you configure it properly, it will work well. And so after that, if you run docker container ls, then you will see the docker container where your liquidation boat is running. Okay, so now our liquidation boat is running and it's making some money for us. So that's great.
00:21:40.006 - 00:22:31.062, Speaker B: But there are a couple of pitfalls, and that's what I'm going to talk about in the next section. So let's see the different pitfalls in DyDX liquidation. First, we have a liquidation risk. So like I mentioned before, it's possible to reimburse a position in an asset that you don't have. In this case, you take a loan for the missing asset and use this token to reimburse the position you are trying to liquidate. But now you have another problem because you became a borrower yourself and can also be liquidated if you don't have enough collateral to avoid this. When you run the liquidation boat, you can use two flags to restrict the liquidations you want to participate based on the collateralization ratio that you would have after the liquidation.
00:22:31.062 - 00:23:06.962, Speaker B: So for example, to specify that you want to stay above 150%, you specify 0.5. Next, we also have a risk of failed transaction. So you are not the only one running the liquidation boat. And it's possible that the boat of someone else is faster than you. So whether or not the boat is faster than you, it's going to send its own liquidation transaction first. And when later your transaction finally reaches the smart contract of DYDX, it's too late. The liquidation opportunity is already gone and your transaction will fail.
00:23:06.962 - 00:23:45.758, Speaker B: But you still have to pay for your transaction fees. And with the current gas price that are very high, it can be a non negligible cost. So you need to be willing to accept this risk. I have another video that explain how to be faster than other boats. So very briefly, what you need to know is that you need to run the boat and the Ethereum node on the same server. But that also implies that you run your own ethereum node, and that's expensive. One option would be to buy a physical node like the one of DaP node, but that's probably going to cost you 700 or 800 us dollar.
00:23:45.854 - 00:24:19.946, Speaker A: So now you understand how the liquidation process work. You know how to deploy and how to configure your liquidation boat. You know the pitfalls. So what's next? Well, we still have a problem, because if you really want to make a lot of money with liquidations, you need to target the really big liquidation. I'm talking of $100,000 or more. But what if you don't have that sort of capital? Well, you can use something revolutionary that is called flash loans. With flash loans, you can borrow a huge amount of money on the blockchain without any collateral.
00:24:19.946 - 00:24:40.274, Speaker A: And if you combine flash loans with the liquidation boat I just showed you, sky is the limit. So I have two very helpful resources on flash loan. First, on my website, eat the blogs, I have a free training on profitable loans. And here on YouTube, I have a full playlist about flash loans.
00:24:40.322 - 00:24:41.060, Speaker B: So I'll see you there.
