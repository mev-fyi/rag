00:00:00.250 - 00:00:36.658, Speaker A: On Ethereum, in the Defi world, there is a secret army of people who is making a lot of money, but not a lot of noise. They are the people who do arbitrage and liquidations. Last year, they made millions, and they don't even need to be awake when they make money. All they need to do is to run a liquidation boat, and when they wake up in the morning, they count their money. Sounds too, huh? Well, as you, there is no freelance on the market, and the competition has gotten more intense. So how can you win at this game? Well, you gotta be fast. Actually, you gotta be the fastest.
00:00:36.658 - 00:01:29.034, Speaker A: So in this video, I'm gonna show you how you can be the fastest for liquidations and arbitrage in defi. If you don't know me, I'm Julian, and on my channel, etherblocks, I teach blockchain development and how to find your first blockchain job. First, a quick word on what is liquidation and arbitrage? And let's start with arbitrage. Arbitrage is when the same asset has two different prices at two different place. For example, let's say that ether is priced, I don't know, $230 on Kyber and 235 on uniswap. So what you can do is you buy ether on Kyber, and you resell it on uniswap right away, and you make $5 of profit. And if you buy a lot of ether, it can actually end up being a lot of money.
00:01:29.034 - 00:02:27.654, Speaker A: Usually these opportunities are only temporary, and when they happen, they disappear quickly. So that's why you have to be really fast, and when it comes to liquidation. So this is related to the debt mechanism that we have in defi. For example, on compound, you can borrow some token, but in exchange you have to provide some collateral so that if you don't reimburse what you borrow, your collateral is going to be ceased. The problem is that we need to make sure that the value of the collateral is always superior to the value of what you borrowed. But sometime, because prices of different assets move all the time, it can happen that the value of your collateral falls below the value of the asset that you borrow. And so in this case, anybody has the right to liquidate your position, that means that they will reimburse the part of the missing debt and seize a part of your collateral, but they will get a bonus.
00:02:27.654 - 00:03:09.858, Speaker A: So for compound, this is 5%. For other protocol, this is a different rule. But the point is that the liquidators make money, and everybody can do this. From a high level perspective, it works like this you have to monitor constantly the blockchain for arbitrage opportunities or liquidation opportunities. And as soon as you find an opportunity, you send a transaction to the blockchain and you take the opportunity right away. So now we're going to see from a practical perspective, what are the different method that people use to implement this mechanism. First, I'm going to show you the easiest method for monitoring the blockchain.
00:03:09.858 - 00:03:49.522, Speaker A: Most of the DeFi protocol have an HTP API that you can query in order to interface with the spot contract. And that makes interacting with spot contract way faster. You don't need to study the spot contract and understand the architecture, you just have a very simple HTTP interface. You use it and you get the data that you want, but it poses a problem because this is actually quite slow. Why is this? Okay, so let's try to understand what's the path of the data from the blockchain to your script. So first we start from the Ethereum node. So that's the piece of software that is connected to the blockchain.
00:03:49.522 - 00:04:25.506, Speaker A: Then we go from this Ethereum node to the API. Then we go from the API to the server where you run your script to monitor liquidation and arbitrage opportunity. Then when you spot an opportunity, you send a transaction to the blockchain. So back to the ethereum node. But the problem is that between the Ethereum node and the API, between the API and server, and between the server and the Ethereum node there is a network request. And this is very costly in terms of time. So you actually waste a lot of time.
00:04:25.506 - 00:05:04.714, Speaker A: Can we do better? Yes, we can. We don't have to use an API in order to interact with a smartphone truck. We can interact directly with a smartphone track by using a JavaScript library like Webstery or ether js and directly send our transaction to the blockchain. So when we monitor the blockchain, the data will go from the Ethereum node to the server where we run our arbitrage or liquidation script. And when we find an opportunity, we send a transaction back to the blockchain. So now we just have two network requests instead of three before. That's faster.
00:05:04.714 - 00:05:53.290, Speaker A: But the price we have to pay is more work to understand how to interact with the spot contract. So in general, people don't run their own Ethereum node because that's a bit complicated. So you can use a service like infura or quicknode, and there are many others, but personally I've tried a couple of them and I found that quicknote was actually the fastest and they actually have a tool to compare the speed with other providers. And in terms of setup, using Quicknote is very similar to infra. You create a project in their dashboard and they give you a URL and you just use this URL when you instantiate Webstree and boom, you are connected to the blockchain. And like infra, they also have a free tier. The only thing that I find a little bit annoying compared to infra is that for their free tier, they don't have a websocket.
00:05:53.290 - 00:06:29.570, Speaker A: But this is not finished. We can be even faster. What if we were running our own Ethereum node? Well, in this case we could run our Ethereum node and our monitoring script on the same server. And in this case you don't have any network request. So you get data from your Ethereum node to your migration script. But this is on the same machine, so the communication is super fast. And when your script find an opportunity, it send a transaction to the Ethereum node, but again on the same machine.
00:06:29.570 - 00:07:21.350, Speaker A: So you are really, really fast and you can push it even further by having several machines in different place in the world with this setup. So on each machine you'll have an Ethereum node connected to mainnet and you're monitoring script. And the reason you do this is because the ethereum network is not always perfectly in sync. It can happen that sometime you have some blocks that are only in some part of the network and that haven't reached other part of the network. And so you really want to be the first one to get the up to date information so that you are the first one to find liquidation, opportunity or arbitrage. You execute on them and you win. Arbitrage and acquisition are really cool, but this is also a little bit technical and that's a bit difficult to understand the whole process.
00:07:21.350 - 00:07:40.460, Speaker A: So there is a new thing that is called flash loan that allows to do arbitrage even if you don't have capital. And on my website side of the blogs I have a free training to explain you how you can make profitable flash loan arbitrage. So go register and I will send you all my secrets. I'll see you there.
