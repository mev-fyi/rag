00:00:00.490 - 00:00:27.654, Speaker A: Hello, this is julian and you are on it. The blocks. And in this video I'm going to show you how you can declare and manipulate arrays in solidity. By the way, I created a free email course to teach you how I got my first remote blockchain job, paid $100,000 a year. So if you want to learn all my secrets, you just have to sign up at this URL. Like in JavaScript. In solidity we have arrays that allow as to represent collection of data.
00:00:27.654 - 00:01:08.542, Speaker A: So in smart contract we use arrays very often, and it's very important to understand how they work. The big difference between JavaScript array and solidity arrays is that in solidity an array can only contain elements that have the same type. So for example, in solidity you can have an array of integer or an array of boolean value, but you cannot have an array with both integer and boolean value. All right, enough introduction, let's get into the details. So in solidity there are two kind of arrays. So the first kind is storage arrays. These are arrays that are actually stored inside the blockchain.
00:01:08.542 - 00:01:52.442, Speaker A: So after you execute your function, your array will stay inside the memory of the blockchain. And the second type of array is memory arrays. So memory array is just temporary, it only exists while you are executing a function, but after it disappear. So we're going to learn how we can declare and manipulate these two kind of arrays because they work a little bit differently. And the last thing I'd like to show you is how to accept array arguments and return arrays from function. All right, so let's start with one storage array. So we'll start by declaring an array.
00:01:52.442 - 00:02:42.714, Speaker A: So first you need to declare the type of the value inside the array. So for example, if you are declaring an array of integer, you're going to first mention the integer type. Then you use the square bracket and then you name your array. So for example, my array, if you wanted to have an array of boolean value, then instead of the integer here you will replace it by boolean, for example. So let's use an integer array instead. Okay, so what are the four kind of operation that you can do on an array? So we call this crude for create, read, update and delete. So let's see each of these operation.
00:02:42.714 - 00:03:33.870, Speaker A: So first create. So how can you add an element to an array? So to do this. So first let's assume that we are inside a function because we cannot manipulate arrays outside a function. So we'll call my function foo for example, make it external. Okay? So first we need to reference the array. So you use the variable name my array and then to add a new element you use the dot push method exactly like in JavaScript, and then you give it some element to add to your array. So after this line my array will have its first element equals to two and you can keep doing this.
00:03:33.870 - 00:04:27.022, Speaker A: So you can do my array push three. So the first element will be two, the second element will be three, et cetera, et cetera. And you don't need to manage the length, solidity will arrange everything for you. Okay, so we know how to add an element to an array, but how can we read it? Well, this is very easy. So once again we reference the array by its variable name and we use the square bracket notation and we reference the index of the element that we want to access. For example, if I want to access the first element, then it's going to be my array of zero, because in solidity, like in JavaScript, arrays are zero index. So the first element is index zero, the second element is index one, et cetera, et cetera.
00:04:27.022 - 00:05:12.094, Speaker A: If I do this, then the value I'm going to read is two, but if I do my array of one then I'm going to read three. Okay, so we know how to add an element, we know how to read an element. And now how about updating an element? Well to do this once again, you reference the variable name, then the index at which you want to update. For example, if you want to update the first element that the index is zero, and then you very simply just assign the new value. So here I'm going to update the first element to 20. So now if I read again my array of zero, then this time this is going to be equal to 20. Very easy.
00:05:12.094 - 00:05:54.974, Speaker A: By the way, if you try to access an element that does not exist like my array of 100, then you're going to have an error when you run the smart contract. Okay, and finally the last operation is the delete operation and for that you can use the delete keyword. So delete. Then you specify which value you want to remove. So for example, if you want to remove the second value, that's how you do it. So this delete keyword is a little bit confusing because some people assume that it actually modify the length of the array, but that's not the case. All this keyword does is just reset the value to its default type.
00:05:54.974 - 00:06:29.154, Speaker A: So the default type of an integer is zero. So that means that after you execute this line you can still access my array of one, but this is going to be equal to zero this time because that's the default value for integer. But if that was an array of Boolean, then the default value will be false. So you get the Id. Next, let's see how we can iterate through the values of an array. So that's something that you probably will need to do a lot of time. So for that we're going to use the for loop.
00:06:29.154 - 00:07:03.842, Speaker A: So if you don't know what is a for loop, watch my previous video in this tutorial series. It's on the playlist and I explain what is a for loop. So let's declare a for loop. And first we need to initialize it the counter. So let's declare a variable of type integer that we initialize to zero. Then we specify the stopping condition. So we want I to be incremented until we reach the end of the array and we can access the length of the array with the dot length field.
00:07:03.842 - 00:07:29.718, Speaker A: And after that we make sure to increment I between each pass of the array and inside the for loop. To access each element we're going to reference the array and between square bracket we're going to use the I index. So in this case. So let's say this is the first pass. So I equals zero. So here we are, my array of zero. This is the first element.
00:07:29.718 - 00:08:06.694, Speaker A: Then second pass, I equal one. So this time it's going to be my array of one, et cetera, et cetera, until we've loops through all the values of the array. And the last thing I like to tell you about storage array is that we can subdivide them into two categories. So the category I show you here is dynamic size array. So that means when we declare the array we don't specify any size. And whenever we want to add new element, we can just use the push method and the array, it's going to expand. But it's also possible to specify the size of the array when you declare it.
00:08:06.694 - 00:08:46.758, Speaker A: So here between square bracket instead of nothing, we can put the length of the array. But if we do this, actually we lose access to the push method and that's not really convenient to add entries without this push method. So I don't really see any point of using fixed size array for storage array. However, for the next kind of array, I want to tell you about memory arrays. Then we have no choice because for memory arrays there is no such thing as dynamic size memory array. It has to be declared with a specific size. So let's see how this works.
00:08:46.758 - 00:09:39.686, Speaker A: So now we're going to see memory arrays. So just to be clear, the big difference between memory arrays and storage arrays is that memories arrays are not saved inside the blockchain after you finish your call to a function in your smart contract. So you cannot save data with memory arrays. Okay, so we're going to declare another function for the example, okay, and now I'm going to declare a memory array. So it doesn't make any sense to declare a memory array outside of function as a storage variable here because these are value that are stored inside the blockchain. But memory is not stored inside the blockchain. So we only declare memory array inside function.
00:09:39.686 - 00:10:33.094, Speaker A: So the beginning is exactly the same as for storage array. So you declare the type of the value inside, then you use the square bracket notation and after that you use the memory keyword to indicate that this array will be stored in memory, not inside storage. And after you declare the identifier for your arrays, for example new array, and after that you still need to use the new operator then followed by the type of the value inside your array again, then square bracket notation again. And finally apparenthes with the length of the array. So for example, if your array has ten elements, then here you specify ten. So I know it's a little bit more verbose. It's definitely more complex to declare than a storage array, that's for sure.
00:10:33.094 - 00:11:21.122, Speaker A: So let's see how we can do the full operation. Create, read, update and delete. So to add a value inside our array we cannot use the push method. So if you try to do this, you can see that solidity complaints, it doesn't exist for memory fixed size array. So instead, so you need to use an index notation instead. So here let's say that we want to add a value inside the first element, so new array of zero, and we can say that this is going to be equal to ten and if we want to add a new value to, let's say the element after that. So it's going to be new array of one and maybe this time it's going to be equal to 20, et cetera, et cetera.
00:11:21.122 - 00:12:07.714, Speaker A: So after that to read value from a memory array, this is exactly the same as for a storage array. So you just reference the index after that to update a value. Again, this is like for storage array. So you just reference the index and you assign to the new value. And finally for deleting an element, that's again the same thing as before. So delete new array and then you pass your index just to recap the three main differences between memory arrays and storage array are one, with the memory array, it's just temporary, it's not saved inside the blockchain. Two, you cannot have a dynamic size array which is in memory.
00:12:07.714 - 00:12:59.750, Speaker A: You have to specify what is the length, and the declaration is a little bit more verbose. And third difference, there isn't the push method. When you want to add new value to it, you need to reference the index directly. Okay, and finally, I like to show you how we can accept arrays as argument in function and also written arrays in function. So arrays in function, okay, so let's use another function, let's call it a foo bar, okay, let's make it external. So let's say that we want to accept an array as an argument. So first we declare the type of the array uint and here square bracket.
00:12:59.750 - 00:14:03.510, Speaker A: And if we here directly put the name of our argument, for example my aug, then solidity is not happy because it wants us to specify the memory location. So if this is an external function which can only be called from outside a smart contract, we need to use a memory location that is called call data. So I will do another video on the memory location specifically. But just be aware that with ECNO you need to have this keyword cold data. But if you use another keyword like public for example, then in this case you need to use memory. And also if you use internal, you also need memory. And lastly, if you want to return an array from a function, so you use the returns keyword specified type of the return array and you also need the memory keyword here.
00:14:03.510 - 00:14:19.100, Speaker A: Okay, that's pretty much it. About arrays in solidity in the next video I'm going to show you how to declare and manipulate mappings in solidity, which are another kind of container for your data. Thanks for watching it.
