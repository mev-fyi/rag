00:00:03.600 - 00:00:41.568, Speaker A: What's up, everybody? Good morning, Amsterdam. I am super excited to be here. It's been wonderful to see so many familiar faces at the mixer, at all the events the last couple of days, at conferences. If you weren't here, there were some amazing things. I'm here to present a presentation called a World in a grain of sand, which is a poem written by William Blake, who died in the 18 hundreds. And this is important because he never got to see people drawing small, small letters on a grain of rice. And so when I was thinking about what I was going to title this, I'm american chinese rice felt perfect for me, and I said it should be called a world on a grain of rice.
00:00:41.568 - 00:01:15.944, Speaker A: But this is the poem. So we're going to start with a world in a grain of sand. So, my name is John. I lead the ecosystem engineering team at the Solana foundation. What that really means, we're sort of at the intersection of business, technology and innovation. We get to talk to all the biggest and smallest companies on the Solana network, not to just help them solve their problems and understand Solana, but to figure out what is the common problem amongst all of them. And one of those things that came up all the time was thinking about this prompt.
00:01:15.944 - 00:01:54.918, Speaker A: What would it take to get everything in the world on chain now? Many enterprises start with just small things. They say, hey, we want to do 10,000 x, 10,000 y. But then they get into the bigger conversations around, hey, I have a million users, they all want one thing, right? Or I have tons of people posting social media, that sort of stuff. How is that going to look like on chain? This sounds like it will be expensive, and it sounds like it's going to be really tough. So we guide them through that process. And part of that story was state compression. And I'll be telling you all about state compression today.
00:01:54.918 - 00:02:48.736, Speaker A: Now, when we think about everything in the world on chain, it's also important as engineers to think about, what is that order of magnitude? How are we making these calculations? Something that works for 10,000 is not going to work for what we really want to look for, which is 8 billion. This is the number of grains of rice in the back. I'm just kidding. This is the population of the world today, and it's probably getting bigger as we speak. And so anytime we think about a consumer product, anytime we think about trying to have more things on chain, we have to think about things at the largest possible order of magnitude and work backwards from there. If it doesn't work at this scale at this number, we need to figure something out. So, what is state compression? State compression, to put it very simply, and I'll make sure to make this more complex soon enough, is the ability to sort of verifiably secure data in this Solana ledger.
00:02:48.736 - 00:03:36.444, Speaker A: This is data that shows up in transactions. If you have access to the ledger, you will be able to replay that information. You have all this information. So 2000 nodes, plus all around the world that run on the Solana network have this data available to them, and we can verify that information and use it in the context of a smart contract, or as we call them, programs. And when we think about that, we have to think about accounts, right? Accounts is the prototypical state on the Solana network. This allows us to dramatically actually expand the state available to us on the Solana network. This text is incredibly small, so if you can't read it, I will summarize to you what Vibhu is gracefully telling us, which is scarcity is a lie.
00:03:36.444 - 00:03:57.390, Speaker A: The thing that we want, or the thing that we want to get to, is the ability to put every single asset on chain. We're not sure yet what that's going to look like. He's not prescient. I'm not prescient. We don't know what that's going to look like. But the more things that are on chain, the more composable things are. Blockchains are perfect for composability.
00:03:57.390 - 00:05:33.012, Speaker A: And so when we think about assets on chain, we want as many of them on chain to think about, okay, what are the sort of, like, serendipitous products that can now be built as a result of having things on chain? Now, the most relevant sort of application of state compression today is with nfts. This was prompted, you know, sometime last year, where a very large social media company, I will say, that lets you post instant photos, said, hey, what is the cost economics going to look like if I have millions of my photos on chain, and if I want to sponsor that experience, and I want to provide that to my consumers, so they don't have to think about wallets, they don't have to think about gas, all that sort of stuff, how is this going to work out? So, the first application was nfts, and it has blown my mind how incredible the ecosystem has been in adopting state compression for nfts. I went through a dune query shout out to Andrew Hong for getting the right table set up for me. But I had to dig through this query to figure out all of the latest stats of state compression on Solana, including all of the trees, all of the things. And I'll talk about trees, I'll talk about nfts, but I think you need to understand the order of magnitude of how pervasive this technology is now and today. So there is a thing called trees. I will explain what trees are, but there are 1400 of these trees on Solana.
00:05:33.012 - 00:05:56.744, Speaker A: Now, this is maybe a small number. The bigger number that you might care about is how many nfts there are. So there are 96 million nfts that have been minted with state compression on the Solana network. This is insane. This is an insane amount. I actually asked to see if anybody could mint like 4 million, just to get me to 100 million on this slide. But I'll give you this frame of reference.
00:05:56.744 - 00:06:18.252, Speaker A: If you look at the bottom, you can see this tiny little circle. That tiny little circle is the number of trees. This is the number of nfts that have been minted yet. This is the number of nfts that have been allocated on the Solana network. 2.5 billion nfts can be minted today without increasing the number of trees. That is wild.
00:06:18.252 - 00:07:03.470, Speaker A: That is just too much. Right? And what I think is so cool about this particular number is that it just shows that there is much more room to grow into the different things that we have in the sort of state compression ecosystem. Here's another one again, shout out to Marku, who builds these incredible dashboards. And you can see here on the left, the left is nfts. And Solana. Nfts have been booming for a long time, since August of 2021. And you can see exactly where state compression launched in April of this year, is when state compression went absolutely bonkers.
00:07:03.470 - 00:07:40.820, Speaker A: And you can see here, if you look and you add up all those numbers, that's where you get that 96 million nfts. And they're being used for things all over the place. As an aside, lots of talks about C nfts, compressed nfts, state compression for nfts. I think if we go back to this slide, I think we just call them nfts. Yeah, we agree. Cool. So the other part to note here, and this is really important and relevant for enterprises, is like, what does it even cost to do all that? Right? So I just shouted a bunch of large numbers at you without really talking about exactly what it's going to cost.
00:07:40.820 - 00:08:03.630, Speaker A: But this was. It was really cool to actually do the data analysis to figure out exactly what's going on here. Now, this chart is slightly misleading for two reasons. One is that axis on the left is actually in the thousands. And in fact, these numbers are so wild I couldn't even fit them on a correct graph. I tried to do log scales. I hate log scales for graphs, but I think I'll just give you the chart again.
00:08:03.630 - 00:08:46.550, Speaker A: Here's the table. And you can see exactly how I'm calculating this number, and you can see exactly how this looks like on different chains. So what I want to point out is two things. One is $140 for a million nfts dramatically changes the kinds of constraints and assumptions you can make when you're building products. It means that you can build things in very different ways. And you can do that by subsidizing the consumer experience or providing them the value first without having first having them have to get sold or even understand what Solana is. So this number is, I have a dashboard, I have plenty of spreadsheets.
00:08:46.550 - 00:09:24.192, Speaker A: You can take a look at this, you can verify this yourself on chain, you can see exactly how much this costs. So. And what this sort of leads into is state compression helps you build consumer focused products. We've heard already from a few of them on stage. But here are a lot of the examples of the things that are being built with state compression for nfts and how it's affecting actual businesses. On the bottom left, you see drip has already minted 60 million nfts. To all of the people who are engaging with creators on drip, they have a dashboard that tells you exactly how much it costs.
00:09:24.192 - 00:10:01.130, Speaker A: It cost them 300 sol. This crowd looks like we could find 300 sol. Right? So there's other examples here, like the monstrate team has a photo booth. You can do it on your phone, you take a photo on your camera, they mint it as compressed NFT and they send it to you in a tip link. They can do that on your behalf because it is so cheap to do. You can see this freeze frame image where I got Chris in a very strange pose here, but dialect is using these nfts for all of the chat stickers in their app. And they can do that.
00:10:01.130 - 00:10:44.184, Speaker A: You can mint those stickers and mint those nfts for free. They're handling the cost of the fees and all that sort of stuff. So what we're seeing with state compression is the ability to create products that really help the consumer get value first before having to think about crypto and the blockchain. So let's see, how does state compression actually work? I'm going to be very, very high level for this. I don't know about you, I slept through a lot of my data structures classes in university. So when I heard about merkle trees, I was like, I have no clue what this is. So I'm going to try my best to explain it to you and talk about why that matters.
00:10:44.184 - 00:11:31.486, Speaker A: So in reality, if we take a sort of closer look at state compression, what's happening and how we're able to get this cost savings is we are taking advantage of the data structure that is a merkle tree. It's a big, perfectly balanced binary tree. And in this particular visualization, I'll tell you about how these things fit into the Solana sort of runtime. The merkle tree and a merkle tree is a data structure whereby all of the leaves, which are these green boxes on the bottom, they get recursively hashed on the way up. So the first two ones get hashed together to get their parent. The parent and its sibling gets hashed together to form another parent. And eventually, you take this very large set of things and recursively hash it to one root.
00:11:31.486 - 00:12:23.594, Speaker A: And when I talk about a world and a grain of sand, or a world and a grain of rice, that specific root is the piece that's in an account. And using just that piece of information and the path that you calculate to the leaf, you can do what's called a proof of inclusion. And that is enough to know that this particular leaf belongs to the set. And using that information, we can actually then, and using the actual state compression program, we can make guarantees around the state that has been issued. Because the fingerprint that Merkle root fingerprints the entire tree, we know exactly that this program was the one that issued that state to begin with. Everything on the bottom, the green set of things, those are the leaves. Those are all issued into the Solana ledger as part of the transaction.
00:12:23.594 - 00:13:05.484, Speaker A: So these are transactions and instructions hitting a program and forever being stored. So if you replay the ledger, you'll be able to get access to all this information. So that data availability is what makes this capability only possible on Solana. Now, let's zoom in just a little bit on one of these leaves so that you can understand what exactly is happening here. Oh, sorry, I mixed up my slides. So if you kind of squint at what's happening here, we actually can get about a 600 x improvement on account storage. Even if you limit the amount of information you're putting in the transaction to 300 bytes, if you compare that to the rent exempt amount that you would need to issue that into an account, you can get 600 x on this.
00:13:05.484 - 00:14:01.526, Speaker A: That means that anything that costs the zero, zero, two, sol, or whatever it is that you're having to send today, that now costs a single transaction, which is 5000 lan ports. And this dramatically changes again the kinds of things that you can build. Let's zoom in on that leaf and see exactly what's showing up in the ledger and what's showing up in the transaction. If you can read hexadecimal, you would see that this particular transaction is an NFT, and this is being issued by the bubblegum program. And this hexadecimal can be parsed, because bubblegum has a, it has an idl, it has a schema, and we know that if you parse it in the correct way, it's going to provide you all the information that you would otherwise have in an NFT, including the name, the symbol, the creators, and most importantly, that Uri that goes to some off chain stuff. This works great for nfts. Everyone knows how nfts are structured.
00:14:01.526 - 00:14:58.136, Speaker A: Therefore we can see how proliferated it has been across RPC providers, wallets, consumer DApps, so on and so forth. But remember, this talk isn't about nfts and state compression, it's about state compression. It's about the prompt. How do we get everything in the world on chain? And what you need for that is generalized state compression. You need to have a system whereby it's not just bubblegum, it's not just nfts, it is any arbitrary data should be able to take advantage of that cost savings so that you can use it for all sorts of purposes. Part of that might be creating these really great consumer focused experiences, but there's very highly technical things that can also be enabled with generalized state compression. The Lite protocol team took advantage of this technology to help build what's called private state compression.
00:14:58.136 - 00:15:34.874, Speaker A: That's just one example of something that can be improved dramatically just by thinking about things in a different way. Redacted. NoAA, who I will quote a couple times on this stage today, makes a great point. What compression does is it allows us to scale state horizontally. We're not bound by the account sort of constraints that are present on all the validator nodes today. We can do this across regular commodity hardware, but still guarantee that we can verify that information and use it in the context of a smart contract. There's a whole host of other things that this enables as well.
00:15:34.874 - 00:16:35.374, Speaker A: If you think about the use of pdas for governance votes, man, does it suck to have to be like, hey, I voted, I got to pay some sol, and then I have to remember to go claim this back some other time. That's just a point in time piece of information that we should just be able to issue into the Solana ledger, and then we can tell who voted for what. You can imagine rollups where they publish a Merkel route, that Merkel route that I showed you before, onto the l one, and allow for, if they provide the proofs to eject that state to the l one. You can imagine fully on chain games where their entire game state is now available on chain because they're using state compression and not having to use their own servers for all of the game state. You can imagine a Twitter clone or something like that, where every single leaf is a tweet and something that, I don't know what we call them today, but anything like that, where you need to have consumer scale applications. All of that should be workable with generalized state compression. There's a problem though.
00:16:35.374 - 00:17:12.528, Speaker A: This is a tweet again, redacted, Noah says, starting a support group for devs who have worked with compression. If you or a loved one have been victimized by working with compressed nfts on chain, we are here, you are loved, and that's true, you are loved. But this working with compression on chain is like getting a big hug from a dude that's just cut with glass everywhere. It is very bloody hug. So what we need are tools, we need frameworks, we need APIs. It is rough. There was a lot of glass that got chewed in the process of getting just nfts out.
00:17:12.528 - 00:18:12.802, Speaker A: So what is this going to look like for generalized state? So there's a few things that we need here. One is we need a little bit more academic rigor around the constraints of the system, thinking about standards and specifications, making sure that we have a consistent method of emitting state from smart contracts so that they follow different rules. We need a way for programs to be able to publish schemas themselves, so that we can have arbitrary state that can be indexed by RPCs and other indexers. We need deterministic leaf ids, so that we can treat them like PDA's and still get all of the benefits of the rent and the accounts and the space that we're saving. We need snapshots of those trees so that we can make sure that we can reconstitute them without having to replay from genesis. We need macros for anchor. We need anything and everything to make it so that state compression can be used just like any other account on Solana.
00:18:12.802 - 00:18:58.726, Speaker A: And finally and not least is off chain computation. If you again squint at what we're doing here, you could batch mint 10 billion nfts if you wanted to do the computation off chain and put the root on chain allow people to eject their nfts. We need all those things, but we also need people to do it. And what I'm here to tell you all today is let's make it happen. I'm very happy and excited to announce that the Solana foundation has opened up a request for proposals for any team who takes abundance as their charge. We need anybody and everybody who wants to see everything in the world on chain to come help us make it a reality. You can check out solana.org
00:18:58.726 - 00:19:16.084, Speaker A: grants and you can take a look at the active rfps and with that thank you. I got my dialect on the left, telegram on the right and my twitter tag is John Wong. DM's are open. Thanks everyone.
