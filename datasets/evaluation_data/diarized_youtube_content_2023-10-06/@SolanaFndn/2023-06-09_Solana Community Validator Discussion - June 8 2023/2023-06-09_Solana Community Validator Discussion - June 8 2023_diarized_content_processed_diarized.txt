00:00:01.400 - 00:00:47.714, Speaker A: All right, welcome everyone to the Solana community Validator Discussion June 6, 2023 today we're going to talk about a few things. So the normal validator updates, Steve from Solana Labs is going to be here talking about the Testnet outage and the root cause for that. We'll talk a little bit about some events at breakpoint that are validator specific, basically just to save the date with more information to come in the future. And the last thing will be a plug for the validator educational workshops, and then of course discussion at the end if there's other things people want to bring up. Sorry, 1 second, there's a technical.
00:00:49.894 - 00:00:50.794, Speaker B: Okay.
00:00:56.354 - 00:01:26.938, Speaker A: Okay, I think I'm recording just in case we missed that. Validator updates we're going to talk about the testnet outage, some events for breakpoint that are validator specific, and then the educational workshop. Okay, so first of all mainnet updates, 1.14 is the 114.17 is the recommended version. I think almost everyone's upgraded. There might be some RPC servers that have not been.
00:01:26.938 - 00:02:03.764, Speaker A: So if you haven't seen the announcement by epoch 460, which is about a day and a half away, 1.14 is required. Otherwise your nose will be forked off for the feature activation. For 437 R 62, the process and the schedule are both here. I'll put these in the notes on the call as well, but we can go and check what this feature activation is in the schedule. So click here for the schedule and it'll get tiny. One sec.
00:02:03.764 - 00:03:32.162, Speaker A: Right, so if I search for that feature activation four, three, seven, you can see here that it is the deactivate delinquent instruction that will allow anyone to deactivate stake on a validator that's been delinquent for more than five epochs, I believe so definitely a good thing for the network and should be activated in the next epoch anyway. So that's just a heads up for all operators who are on main net, but especially RPC servers tend to be the ones that are updated a little slower. For anybody who's curious, the process for how feature activations happen, how they like the process for rolling them out to Devnet. Testnet and Mainnet are described here, so you can take a look at that as well. I'll put these links real quick in the notes. There we go. Okay, for Testnet 1.16.0
00:03:32.162 - 00:04:18.378, Speaker A: is now recommended for all Testnet operators. A couple notes for operators. So the accounts index is now on by default. You may experience some high IO because of that, so be aware that's most should mostly happen at startup. If you experience high IO that's kind of sustained through steady state operations, be sure to mention it in validator support or in the Testnet channel depending on the issue. And we could, you know, someone should hopefully be able to debug and help you out or either identify the issue or file a bug against the version. Another thing to note, there's been a lot of issues that people have been having with the system clock, so just be aware of what your system clock is.
00:04:18.378 - 00:05:08.844, Speaker A: Ideally you should be using an NDP server to keep your clock in sync, but if your clock tends to fall behind, which you know most standard hardware clocks do, if you're not using NTP then you might have issues with gossip, issues with updates. Essentially the cluster might not think you're updated. Your version of the software has been updated if you're running an old clock that has drifted behind. So just be aware of that. Check your NDP server, make sure your clock is up to date with the current time. Any questions about this update or about the accounts index change? All right, cool. One other thing.
00:05:08.844 - 00:05:40.218, Speaker A: There was a flag before to enable accounts index. Now that is the default. You don't need the flag anymore. So for all operators that had that for 114 you can remove it through 116. There was a testnet outage over the holiday weekend for the US at least May 27. So big thank you to all the operators who participated in that. The outage, sort of fixing the outage, bringing the network back up.
00:05:40.218 - 00:06:01.954, Speaker A: It was pretty much an operator run restart. There's very minimal involvement from labs and foundations. So well done there. The root cause analysis can be viewed here. And Steve's on the call to answer questions and sort of give an overview of what happened there. So let Steve take it from here.
00:06:07.694 - 00:07:04.394, Speaker C: Sorry, resetting panes. But yeah, I guess you guys probably all saw the documentation so I think that gives a pretty good overview. You know, obviously the, you can dive into the issues to see more details but yeah, 1246 there was one liter, there was a block that was slow to get sent out or maybe initial. Essentially it cost some forking, that kind of Kickstarter thing. So there's a fork and then one side of the fork was able to land votes and then the other side was essentially not landing votes. And there were a couple items that play those bullet points, one of them. So with the feature that had been upgraded on Testnet, we'll send votes over gossip and upcoming leaders in advance of their leader slot.
00:07:04.394 - 00:07:28.096, Speaker C: They'll start collecting votes so they can just plug them all in when it, when it's finally their, their leader slots. But due to some subtle bug, essentially the node was not doing this. It wasn't collecting the votes in advance. So it was like collecting the votes, like when it finally came up. And this essentially led to that. None of those votes landing. That's bullet point number one.
00:07:28.096 - 00:07:58.162, Speaker C: Bullet point number two, there's this mechanism where we refresh votes. So essentially we'll send a vote. If we see that it doesn't land so much later or, you know, later on, we'll try to resend that same boat. But there was a, again, minor, minor bug. There's like a less than or, you know, we were filtering out duplicate votes. So like any, you know, if the slot was less than or equal to. But a refresh vote is going to be on the same slot.
00:07:58.162 - 00:08:32.478, Speaker C: So in that case it would, the slot would be equal. And so essentially those were getting filtered out. And then I guess eventually that kind of led to bullet point number three where some of the refreshes didn't land. And then there's like that 512 block window, essentially like nodes can't vote on that fork anymore. And then at that point, some of those nodes are just kind of stuck. And that kind of showed itself. Like there's, you know, some amount of stake on one fork, some amount of stake on the other.
00:08:32.478 - 00:09:07.560, Speaker C: Again, the one, one fork was voting and they were continuing to land votes. The other fork was basically unable to switch over to the other fork because they couldn't land any votes. But, yeah, again, the important thing to note is, yeah, this was testnet only because this is behind a feature gay. So, yeah, like, mainnet's not vulnerable. And guess one other thing, this is pure speculation, but we're at like 10% delinquency leading up to the event. So I don't know, hypothetically with the refresh votes, there's some bad luck as well. There are leaders that were offline.
00:09:07.560 - 00:09:20.884, Speaker C: So I don't know, maybe the stars line a little bit, but some speculation, maybe if that 10% hadn't been offline, we might have been okay. Who knows? But we found some bugs anyway, so looks like Zan has a question.
00:09:21.554 - 00:09:43.454, Speaker D: Yeah, just to clarify real quick, I understand refresh being broken could cause a problem. Can you? I did. The part I didn't quite understand is if the, some of the voters were on a dead fork for 500 blocks, surely they must have gone past whatever their, you know, their lockout interval was. So why was it they couldn't cast fresh new votes on the other fork to rejoin that one.
00:09:46.654 - 00:09:50.434, Speaker C: That aspect, I'm not.
00:09:54.614 - 00:10:05.214, Speaker D: I mean, was it just. Is it a protocol issue? Was just an implementation detail issue where, like, I don't know, something was wedged and even though they could theoretically switch to their fork, they just weren't sending those votes out?
00:10:05.294 - 00:10:32.374, Speaker C: Yeah, I meant to be honest. I'm not. I would have to double check to give a definitive answer. If Ashwin were here, Ashwin or Brennan, they kind of had the final breakthrough to solve the issue. I think they would both, but they're both out this week, so I got third best person, I guess, but one of them would know for sure. So I'm going to defer an answering there to avoid saying the wrong thing. But let me double check after the call.
00:10:32.834 - 00:10:33.298, Speaker A: Okay.
00:10:33.346 - 00:10:58.102, Speaker D: Because we know that validators only wait for eight for a maximum of lockout of eight. That's the maximum they'll go beyond. So they couldn't be locked out for more than eight. None of those voters could have, if they were following that algorithm, voted such that they would not be able to vote after 256 blocks. So I don't know why they couldn't vote beyond that is the thing I'd like to understand, but I'll wait for you.
00:10:58.198 - 00:11:18.714, Speaker C: Yeah, I mean, we saw, like, looking at the metrics, so, yeah, the refreshes were attempted, but. Yeah, that was an initial question, too, that I had about. Yeah. Why they didn't switch forks. It was explained to me, but I forgot it. So, again, let me just circle back with you just to avoid saying the wrong thing on a recorded.
00:11:23.214 - 00:11:28.354, Speaker A: Okay, thank you. Yep. All right, any other questions about the outage?
00:11:33.334 - 00:11:46.254, Speaker C: So, we do have a few other laps people, too. I don't know if Stephen or Joe or Tower or Jeff or anybody knows the answer offhand, either, but. Or Andrew. If not, I'll do the diligence after.
00:11:47.674 - 00:11:51.146, Speaker E: Are you asking about the 512 block window?
00:11:51.290 - 00:11:55.654, Speaker C: Oh, yeah. Good one. I didn't even see. Yeah. Missed your name. Yeah, yeah. Why.
00:11:55.654 - 00:11:59.002, Speaker C: Why were.
00:11:59.138 - 00:11:59.426, Speaker A: Yeah.
00:11:59.450 - 00:12:21.884, Speaker C: Why were nodes unable to switch over forks? So there was a fork. There were some nodes that were essentially, they wanted to vote on one side. They were unable to land boats on that fork. So the question was, why didn't they switch over to the other fork and avoid, like, the. Essentially, the deadlock that, you know, caused the halt?
00:12:23.264 - 00:13:00.304, Speaker E: So we have a check. We have a slot hash check. So we keep that slot hash for 512 blocks. And so when the new boats come in, we always check whether the. Remember the details, but I think it checks whether this slot has a correct hash in our slot hash history window. So if it's outside that, then we consider this boat is too old and just discard it.
00:13:01.284 - 00:13:11.434, Speaker D: So does that mean that if 512 slots ever progress without a confirmation, no more confirmations are possible because there will never be a slot hash new enough to ever land in a vote again.
00:13:12.094 - 00:13:49.052, Speaker E: So right now you can't vote. Like you can't vote on the slot which is behind the current slot by 512 or more blocks. So that will never land, that will just be discarded. But we are changing this on that pull request, because what we are doing there is that we are sending newer votes on the tip of the fork, which should be more recent, otherwise it would just get stuck there, never proceed. Did that answer your question?
00:13:49.188 - 00:14:10.490, Speaker D: I think so. I think it sounds like the validators were not refreshing their slot hash they would use to submit new votes. They were continuing to use an old slot hash or something like that, which means that none of their votes, once they became. Once that hash reference hash became old enough, they couldn't switch, even though they could because they could pick a new slot hash. They just weren't doing that for whatever reason.
00:14:10.522 - 00:14:12.130, Speaker B: It sounds like what you're saying.
00:14:12.322 - 00:14:19.322, Speaker E: Yes. So we are checking that we are not accepting votes which are too old. It's a safety check.
00:14:19.458 - 00:14:19.794, Speaker A: Ok.
00:14:19.834 - 00:14:20.614, Speaker D: Thank you.
00:14:21.114 - 00:14:21.854, Speaker E: Sure.
00:14:25.794 - 00:14:53.274, Speaker A: Thank you. Any other questions about the outage? Again, just sort of to clarify the point here, this does not affect Mainnet. It's a feature gate that's not activated on Mainnet. So operators on Mainnet should not worry about this being a potential attack vector. All right, get back to the notes. Thank you, Steve. Thank you, Wen, for clarifying.
00:14:53.274 - 00:15:47.684, Speaker A: Okay, a couple other announcements I wanted to point out Breakpoint is happening. Breakpoint 2023 is October 30 to November 3 in Amsterdam. I'd love to see as many of you there as possible, a couple of validator specific tracks that I don't think there's much information online yet, but these are more, save the dates and things to be aware of. So Mev camp, the MeV focus track that's happening actually before the official start of Breakpoint, October 29, is happening again this year, so be aware if you're interested in that. More information should be announced soon. But October 29 before Breakpoint starts is MeV camp. And then this year there's going to be a validator specific track.
00:15:47.684 - 00:16:39.634, Speaker A: Still ironing out the details for this as well. But it will be October 30, so the first official day of breakpoint, there'll be a validator specific track the content and like the exact scheduling we're still figuring out, mostly organized by community members, so I'll have more updates probably in the next few calls, but again, save the date. October 30, validator specific track at breakpoints. Any questions about breakpoint or any of that stuff? All right, cool. Hope to see all of you there. And the last thing I want to talk about is the educational workshops. So there was a workshop on the 31st.
00:16:39.634 - 00:17:12.558, Speaker A: It was part one of a two part series. So this was basically the initial fundamentals and getting set up as a validator for people who are new to operations. Zantetsu and Blake, I think he's here, was also on the call. So thank you all for joining and giving some feedback. I think really good call. Went over a lot of the things you should know and understand before you ever run anything on your server. But this was just part one.
00:17:12.558 - 00:18:08.912, Speaker A: We got all the way up to the point where you are theoretically starting your server, but we didn't actually start it up. Part two will be a quick recap of part one and then really operationalizing your server. So a lot of the things to think about around security, around automatically restarting your validator using systemd, things like that so that you can, oh, and of course monitoring using Watchtower. So things that will make your validator operations better and more stable and, you know, resistant to unknown issues, like if your validator goes down for some reason, you want to know about it. You want to be able to be notified quickly when something like that happens. So that part two will be June 14 on a Wednesday at 1700 UTC. So morning time for people on the west coast in California.
00:18:08.912 - 00:18:59.964, Speaker A: But you know, whatever this is in your time zone. 1700 UTC. And are there any suggestions for future topics for the educational workshops? I'm going to try to keep this going on a monthly basis. So after this one, is there anything people would like to see or talk about? All right, well, if anyone has an idea, please let me know either in discord or in a future call. I think these have been pretty useful and getting shared a lot, so that's great to see. Thank you for all the people who are sharing them. Definitely want to keep it going until, until we find it not useful.
00:18:59.964 - 00:19:22.564, Speaker A: We run out of topics. So any ideas, please let me know before next month. All right. That's all I've got for the agenda. There anything else that people want to bring up, discuss? Yeah, go ahead, Mike.
00:19:24.344 - 00:19:44.404, Speaker F: Tim, tell me if you don't want this to be covered on this call, but Solana seems to have been identified as a security in the SEC action against binance. Is anything going to be said about that? And in particular, anything that would help validators understand how it could impact them?
00:19:44.904 - 00:19:55.714, Speaker A: Yeah, that's something I'm definitely not going to comment on in the call. I think I would defer to our legal team to, you know, give a response. So for now, just no comment.
00:20:01.134 - 00:20:01.934, Speaker F: Thank you.
00:20:02.054 - 00:20:12.954, Speaker A: Thanks. Any other thoughts or questions? Yeah, Andrew, go ahead.
00:20:13.634 - 00:20:30.174, Speaker B: I just wanted to say I do appreciate all the work you're doing here, and I know things can get rough. I know that coming from the Coinbase side at times. So if you ever need any help with anything, we're always here to pitch in.
00:20:31.034 - 00:20:52.946, Speaker A: Great, thank you. I appreciate that. And yeah, love to collaborate on some stuff, too. So thank you. It's always good to hear anybody else? All right, I guess we'll end it there. Thank you all and see you all in two weeks for the later call.
00:20:53.130 - 00:20:54.450, Speaker D: Can I ask one question?
00:20:54.642 - 00:20:55.610, Speaker A: Sorry, go ahead.
00:20:55.722 - 00:21:15.126, Speaker D: Since Coinbase just spoke, if there's ever anything that validators can do as stewards of this network, to give any evidence or demonstration of what the network is and how it works and why it might not be a security, let me know. I'm happy to do anything. So I don't know if that helps. It probably doesn't, but, I mean, I'll.
00:21:15.150 - 00:22:19.394, Speaker B: Keep that in mind. You're certainly an expert, and I love the blog posts that you've had that are almost timeless at this point. But, yeah, I'll reach out if there's ever any questions or any expert opinions that could be shared as far as how the networks work. Because to be honest, from my perspective, and this is my perspective only, not speaking for Coinbase, it's a mess and no one really understands what's going on. So experts like yourself are really key in sharing how these networks work. And the nuances are definitely important. And I can say that firsthand, the details matter, and so people like yourself that know the details, anything you can do to share those publicly and just with your community, is really important and crucial for keeping these things above board and making sure that regulators and all the different bodies that are less well versed in how these things work, making sure that they understand that these things are more tricky than they might think at first.
00:22:27.374 - 00:22:28.474, Speaker A: Yeah, go ahead.
00:22:29.614 - 00:22:51.534, Speaker G: Just a quick one. Out of curiosity, I saw this, that Ben Hawkins joined the team as head of staking what's going to be his scope of responsibilities? Will he attend the calls? Or maybe he interacts with validators in the future. What's the story here, if it's not a secret to share?
00:22:52.514 - 00:22:56.374, Speaker A: Yeah. Oh, sorry. Go ahead. Ben's on the call, so I'll let him respond.
00:22:56.714 - 00:22:57.936, Speaker H: Definitely not a secret.
00:22:58.090 - 00:23:01.396, Speaker G: Yeah, sorry. Yeah, I didn't see the.
00:23:01.540 - 00:24:20.894, Speaker H: No worries at all. Not a secret. We'll kind of, like, Tim, I'll be active in these calls and, you know, and participating right now. Like, kind of my main responsibility is thinking through the delegation program, how should Solana be deploying kind of its treasury to, like, better support, you know, the needs, the network as it is right now. So a lot of that right now is gathering up documentation, gathering up statistics of, like, if we make any changes, we need to understand how does that change the actual network? How do we transition into a new change, and, you know, and what are all the moving pieces to make it happen smoothly and then one of the comms around that. So right now, like, these first few months are probably going to be kind of quiet for me. And then I think, over, like, the next six to twelve or six to 18 months, I think you'll see a lot of the stuff I'm working on right now kind of come to fruition, and hopefully we'll be able to just have more regular, sort of public communication of here's what myself and the foundation are thinking in terms of what are our goals, what is a good network? And I think it'll be more clear in the coming months kind of what I'm doing.
00:24:20.894 - 00:24:22.074, Speaker H: And that's the hope.
00:24:26.494 - 00:24:27.974, Speaker G: Sounds great. Thank you.
00:24:28.094 - 00:24:28.794, Speaker A: Yeah.
00:24:32.294 - 00:24:40.874, Speaker B: Also, this is very much a side point. Zantestu, are those decorations on your wall new? The squiggles, for some reason I remember.
00:24:41.214 - 00:24:57.028, Speaker D: I put those up. Those are like decals I was trying to go for. When I put this office together, I was trying to go for, like, an eighties theme. So I bought these things because they have kind of like an eighties art look. And then I put some. You can't see them. I put some, like, posters on the wall that are.
00:24:57.028 - 00:25:15.244, Speaker D: Because, you know, I'm in Silicon Valley and, you know, I like it used to be 20 years ago, 30 years ago when I started here. You go to people's cubes and you'd see all this decoration and stuff that was kind of valley specific. So I was trying to kind of recreate that, but I'm not an interior decorator, so this is the best I could do.
00:25:16.344 - 00:25:18.844, Speaker B: It's awesome. Yeah. Thanks.
00:25:24.784 - 00:25:36.384, Speaker A: All right, looks like we're all out of questions. Thank you, everybody, for joining. And like I said, two weeks from now will be the later call, so hope to see you all there. Thanks. Bye.
