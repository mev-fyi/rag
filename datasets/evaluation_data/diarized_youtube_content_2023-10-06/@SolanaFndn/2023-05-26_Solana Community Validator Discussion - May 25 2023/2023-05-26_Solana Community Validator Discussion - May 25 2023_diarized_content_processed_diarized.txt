00:00:02.480 - 00:00:34.228, Speaker A: All right, welcome everyone to the Solana Community Validator discussion May 25, 2023 agenda today. So normal validator updates. There's going to be a validator educational workshop next week on Wednesday, and also right after that a community led validator call focusing on validator key management. So definitely worthwhile to check that out. After the updates and announcements, we'll have an open discussion if there's anything else.
00:00:34.276 - 00:00:35.864, Speaker B: People want to bring up, talk about.
00:00:37.044 - 00:01:19.168, Speaker A: So first major update, major win for validators. 96% of stake has adopted 114 17, which is great news. I don't want to jinx it, but the rollout process I think has been a great success so far. 114 has been tested extensively on Testnet, and the slow week by week rollout of 114 I think was a big success for everyone. Happy to hear feedback from anybody on what they thought of the new process, but I think overall feedback has been great. I think the 114 slow rollout progression from 10% to 25% to 100% adoption.
00:01:19.216 - 00:01:21.950, Speaker B: Has been really positive.
00:01:22.142 - 00:01:40.270, Speaker A: So again, any feedback on the process for the release cycle will be great, but I think it's been good so far. Okay, so an overview of the 114 17 release. There is a thread here that I'll put in the notes, so let me.
00:01:40.342 - 00:01:44.034, Speaker B: Copy that or in the chat.
00:01:46.594 - 00:03:00.294, Speaker A: This fed kind of goes into an overview of all things that are in the release. So summarizes everything and then links out to other parts, I guess sub parts of the release, the things that I think are most important for validators. Starting in 114, there is a new flag called enable Accounts Disk Index, which essentially takes the accounts index that previously lived all in memory and puts it on disk, but then has a cache in memory for the more active accounts and the plan is going into 116 for this to be the default. So if anyone has limited memory and performant NVMe SSD's, ideally you have your ledger and your accounts on two separate disks. This might be something you experiment with and see if you get better performance or lower memory requirements from your validator. Another change that I'm sure Zantetsu is interested in is this compact vote state change. So you notice here the compact vote state is sort of a prereq for getting the timely vote credits simd out.
00:03:00.294 - 00:03:47.762, Speaker A: So moving along, you know, slow process but hopefully that is out soon. Oops and the last thing I saw Steve just joined. This is something that Steve brought up in the 114 release. The startup time should be much improved compared to 1.13, so this next slide talks about it. The key takeaway here is as an operator, there's been sort of a advice going around, I think, among operators to blow away account state and just download new snapshot and restart that way. That is just historically not a good practice for the network and for your validator.
00:03:47.762 - 00:03:56.218, Speaker A: But especially now in 114, you should see much better performance if you keep your local state and restart with no.
00:03:56.266 - 00:03:59.514, Speaker B: Snapshot fetch instead of the leading local state.
00:04:00.094 - 00:04:23.590, Speaker A: I did this just as a quick test, so I have a mainnet RPC server. I restarted using no snapshot fetch and preserve local state, and I saw a total time of about twelve minutes to do a restart. With the local state deleted. I saw a total time about 18 minutes, which included five minutes of downloading the new snapshot, then about 13 minutes.
00:04:23.622 - 00:04:25.484, Speaker B: Of catching back up.
00:04:25.784 - 00:04:52.084, Speaker A: So just in this quick test, it's pretty clear that I'm getting better performance with local state. But in general, it's just a good idea to preserve local state, use no snapshot fetch, and just always try to work from your local state instead of getting state from elsewhere. Steve, if there's anything there you want to add, or any additions to that, be helpful, let me know.
00:04:52.934 - 00:05:20.862, Speaker C: I think you basically covered it. The only thing I'll say, there was a bug in 1.13 where like, I guess the GitHub issue isn't linked here, but like essentially you'd replay so many slots and then like accounts DB would do things for like five or ten minutes that'd slow it down. That bug has been resolved. So 113. Absolutely. Like, I get it, you know, validators, you guys are trying to keep your uptime, like minimize restart time, but 1.14,
00:05:20.862 - 00:05:27.534, Speaker C: that bug goes away. So yeah, the, the wipe, the wiper local state for a faster restart is, is fixed.
00:05:27.694 - 00:05:28.158, Speaker B: So.
00:05:28.246 - 00:05:33.114, Speaker C: Echoing. Yeah, you covered it there, Tim, but yeah, echoing that. Go ahead, Zan.
00:05:34.934 - 00:06:14.112, Speaker D: Yeah, sorry, the previous screen, I was just double checking something. So when you mentioned the compact vote state thing, I just want to make it clear that Scott doesn't have anything to do with the timely vote credits. That's not, the compact vote state is really compact vote state update, which is a enhancement to the vote state update transaction, which is supposed to be a replacement for the regular vote transaction. But the vote state update can't be really rolled out until they do this compact thing, because the vote state update transactions end up being just too big and unwieldy. So they have this compression technique to reduce the size of those transactions.
00:06:14.278 - 00:06:14.676, Speaker B: Right.
00:06:14.740 - 00:06:53.774, Speaker D: I mean, I am not a huge fan of this comp, of this vote state update thing. I think it makes tracking vote very difficult because you have to basically run a tower just to figure out what votes have done. And those of us who want to and do run, you know, sites to try to track vote credits and stuff, it makes it very, very difficult to do that because you basically have to run a validator just to know what the state of votes are. And I think there are other ways to solve what compact vote state does, but we can go with that. That's a separate topic, but I just want to make it clear that's not the time we vote credits thing. Time of vote credits did have a change that went in, but it's only mainline, it's not backported, and it's probably not going to get backported anytime soon. And there are actually two changes that have to go for that.
00:06:53.774 - 00:06:56.318, Speaker D: But anyway, just wanted to clarify there.
00:06:56.486 - 00:07:11.206, Speaker A: Okay, well, yeah, maybe this last line was not entirely the point, but feel free to read through the whole summary here. I think it does a decent job of summarizing what Zantetsu just talked about, essentially what compact vote state is and.
00:07:11.310 - 00:07:15.314, Speaker B: Why it was chosen, why it was implemented.
00:07:19.534 - 00:07:39.354, Speaker A: All right, so, yeah, I think these are the major changes that validators are probably interested in. Again, key takeaway here, always preserve local state whenever possible. Once you start your validator for the first time, ideally you should never have to get another remote snapshot again.
00:07:40.054 - 00:07:42.678, Speaker B: But, you know, stuff happens sometimes you.
00:07:42.686 - 00:08:19.596, Speaker C: Do all quick thing there, Tim. I mean, I will say there's a one bug that Jeff Bezad and I are tracking, zantets, who actually hit this with his backup note earlier this week. And so we've been digging pretty deep. So, like, I, I guess there's only ten people in this call, so it's not speaking the broad community, but in case people are watching this, like, if you're, if your node fails to start up, like, if you start your note and it doesn't, like, boom or crash or something, like, definitely let us know. Like, that's, that's not normal. Like, I get it. Like, you want to get your node back online as fast as you can.
00:08:19.596 - 00:08:43.914, Speaker C: Like, you know, white ledger, do whatever, but, like, definitely report those bugs because we, we want to make that better. And, yeah, so, like, please, you know, save off your log, save off your ledger or whatever, and then restart, but, like, file a report, like, ag me in discord, I don't care. We want to fix these things, so please report them. We can't reproduce all these things all the time because we're not running 2000 nodes.
00:08:44.974 - 00:08:46.582, Speaker A: Is there a GitHub issue you want.
00:08:46.598 - 00:08:48.234, Speaker B: To put in here?
00:08:48.814 - 00:09:01.276, Speaker C: I mean, there's a recent one. It's hard to say. Everyone takes everyone. Could be something different. But there is one I'll post in the link right here. I won't take any more time. But, yeah, there's, there's one.
00:09:01.276 - 00:09:24.516, Speaker C: It's. We've narrowed it down. It looks kind of looks like a repair protocol issue, but it could be a multitude of things. Everyone deserves some attention. So, again, if your node fails to catch up on, reboot the, you know, tag, you know, I'm Stevie Z on Discord. Tag me. I want to look into it.
00:09:24.516 - 00:09:27.820, Speaker C: So we're trying to make these things better. So.
00:09:28.012 - 00:09:33.980, Speaker D: So that issue had. It was real. I thought it was just like a jitto thing or some other weird thing. Like a real issue.
00:09:34.132 - 00:10:16.274, Speaker C: No, there's like. I mean, I don't know if you've seen your. I think we tagged you correctly on GitHub, but Jeff and I are looking into it, and there's like, we've seen this intermittently there. We were hitting on one of our nodes, and we kind of dismissed the issue because we were. We actually happened to be running two nodes with the same keys. And basically, when we were running two nodes with the same keys, which means that the node that's trying to catch up was not getting shreds, because the contact info and gas up, basically, one was getting the shreds, one was not. But we actually think there is some non deterministic issue at startup.
00:10:16.274 - 00:10:40.924, Speaker C: I had an idea that hit me earlier this afternoon. I wanted biking after that, so I haven't actually had the time to pursue it yet. But we think there is actually some bug there. But in general, yeah, like the, like, hey, like, if your node doesn't work, just restart it. I get it. But again, please report it. And you would.
00:10:40.924 - 00:10:59.364, Speaker C: We don't want that to be the case moving forward, so let us know. Bug us. Like, that's something we need to work on. It's. Again, even if you restart it in the middle of the night, do it. And then send us a note. Like, hey, I had to do this to get my note running because, yeah, we want to fix those bugs.
00:11:01.064 - 00:11:01.472, Speaker B: Cool.
00:11:01.528 - 00:11:23.854, Speaker A: Yeah, thanks for the note. I put your discord handle in the chat, so if people are having issues, you could tag Stevie Z and Discord, of course, make sure to check validator support first, just like, you know, give the rundown of what's going on. I don't want Steve to get a billion messages about like the wrong version of the software.
00:11:25.554 - 00:11:53.712, Speaker C: Yeah, I mean even then this week, like we're, we're pushing for the version upgrade. So I was happy to help people with wrong versions or dumb things but yeah, like it's good, right? You know there's a whole validator community so everybody helps each other and you know, you know, a lot of people on the call here, you know, also people helping the, you know, the newer validators. So yeah, give us bug reports. We want to fix shit. So don't if something's pissing you off like tell us.
00:11:53.848 - 00:11:55.844, Speaker B: Yep, cool.
00:11:58.624 - 00:12:36.150, Speaker A: Yeah, not much of a Testnet update, pretty much the same as last time. We're now recommending 114 18 for Testnet. There is, or I think there was a feature activation earlier yesterday, last night that forked off nodes that weren't running one, 1418. So if you notice your testnet node is no longer keeping up or on the chain, it's probably because you're on an older version. Make sure you upgrade to 114 18. The 116 release should be cut soon and in some time after that 116 will be recommended for Testnet. I don't have a timeline on that.
00:12:36.150 - 00:13:11.082, Speaker A: Just expect it to be coming in the next x number of weeks. 115 again was abandoned so there will be no 115 release. And I think going forward you can expect to see the same upgrade downgrade, upgrade cycle anytime we go for a new miner version on Mainnet. So the next time we roll out 116 on Mainnet, hopefully we're going to be upgrading from 114 to 116 back down, then back up and just go through that whole process before we do.
00:13:11.098 - 00:13:12.094, Speaker B: It on main net.
00:13:15.314 - 00:13:18.934, Speaker A: Steve says in the comments, 116 sometime next week.
00:13:20.914 - 00:13:23.634, Speaker B: Yeah, hopefully, hopefully, yeah, yeah.
00:13:23.674 - 00:14:17.544, Speaker A: All these, these timelines are obviously dependent on what goes on, but assuming all goes well, next week seems like a good, good target. Okay, next thing I wanted to say, going to have another ValidatOR EDuCational WorkShop next week. I haven't actually done a validator setup just from, you know, from scratch, so I'm going to do that. Obviously that might not be super interesting to a lot of the people on this call if they're more comfortable with running their validator, but it's going to be recorded. It's going to be put in that educational workshop playlist. And I think going forward it'll be a good resource to send out to people if they're getting confused, you know, or just having trouble getting set up. You can always send this playlist which I will throw in the chat as well as a resource in case somebody.
00:14:17.584 - 00:14:21.364, Speaker B: Is asking basic questions.
00:14:26.204 - 00:15:03.044, Speaker A: And then. Yeah, I should mention that's May 31, 1700 UTC. Right after that, at 1800 UTC, will be the community led validator call. And that call is going to be focusing on key management. So Zen Tatsu on the call is going to be talking about Vamp, the program he built for vote account management. And then the squads protocol will also be demoing their, their key management for your validator with their squads multisig. So definitely worthwhile checking that one out as well.
00:15:03.044 - 00:15:12.604, Speaker A: I believe it will be recorded, so we'll put this on YouTube also for, you know, validators who can't make it but want to see the options here.
00:15:14.584 - 00:15:15.248, Speaker B: Yeah.
00:15:15.376 - 00:15:22.604, Speaker A: May 31, Wednesday at 1800 UTC. Zantetza, do you want to say anything about Vamp since you're here?
00:15:25.424 - 00:15:59.306, Speaker D: I mean, not a lot. It's just a tool I made to try to give some feedback to people who are interested in having them, but it's not mandatory. And I think it's. It's nice because it gives better separation of it, of the rights that different keys have. And additionally, it lets me script doing some things that you can't really script very well with the standard client, but I can talk about it in more detail. In the other meeting. I did give a presentation that I thought was fairly comprehensive in one of our meetings here, but I'm happy to talk about it again.
00:15:59.306 - 00:16:08.624, Speaker D: There's some chance I'll integrate this with squads because I had a meeting with them to talk about it, and it may be that the two combined give people some features they want, so that could be upcoming, too.
00:16:09.004 - 00:16:09.916, Speaker B: Okay, cool.
00:16:10.020 - 00:16:16.924, Speaker A: Yeah, I just thought you'd take a minute to plug it, so that sounds great. He'll talk more about that next week.
00:16:16.964 - 00:16:18.384, Speaker B: In the community led call.
00:16:21.644 - 00:16:27.100, Speaker A: And. Yeah, that's all I got. Any other questions or discussion topics people.
00:16:27.132 - 00:16:28.144, Speaker B: Want to bring up?
00:16:38.384 - 00:17:34.542, Speaker A: One thing I know that someone brought up in the discord link roles channel, so I think John Wong is going to be leading that project. I get the sense he's pretty swamped. So I've got a couple tasks I'm going to do there to, like, get the ball rolling on that project. Blake, was it you that asked the question there? No, he just left. So anyway, if. If anyone's curious about the discord link roles, in order to figure out basically who actually is running which validator and how much stake they have on the network, that is something that I'm taking on, at least to get started with a project, John Wong should be able to finish it off. My goal is to have something out there and usable before the next minor release.
00:17:34.542 - 00:17:36.914, Speaker A: So before 116 hits main net.
00:17:40.974 - 00:17:44.078, Speaker B: Cool. Yeah.
00:17:44.126 - 00:17:45.634, Speaker A: Any more questions, thoughts?
00:17:47.374 - 00:17:56.574, Speaker B: We can end early. All right, great.
00:17:57.034 - 00:18:09.654, Speaker A: Thanks, everyone. See you all, hopefully next week for the community call. The validator led community call. Otherwise, the week after that, same time. Sorry, I should say in two weeks. We'll do the earlier call instead of this later one.
00:18:13.674 - 00:18:14.394, Speaker B: Thanks, everybody.
00:18:14.434 - 00:18:15.454, Speaker C: Catch you later, Tim.
00:18:15.794 - 00:18:16.274, Speaker B: Thanks, Steve.
