00:00:02.010 - 00:00:42.698, Speaker A: All right, let's get started. Hello, SBC. Who's excited about mev? Whoo. Hell yeah. So I'm going to be kind of opening up today and talking about why are we all here? What is Mev talking a little bit about my personal journey through Mev, which I've also talked about at Mev Day in Amsterdam. So the first ten minutes of this talk is going to be like a hyperspeed early morning version of that. And then I'm going to talk a little bit about how Flashbot sees some open research challenges, some open research problems, where we want to collaborate more with academics, and also how we view kind of the product landscape in the next, like, let's say six months to a year, and even beyond that.
00:00:42.698 - 00:01:11.986, Speaker A: So let's get started. So we all know before Mev meant anything in blockchain, it was a unit of energy. Milli Electron Volts, mega Electron Volts. I think it depends whether you capitalize the M or not. So here I guess it would be Mega. And so why is this important? Well, Mev is still a unit of energy today in our financial system, and that's what Mev is on a blockchain. And why are we all here? Because we want to know how to deal with all this energy in a way that's constructive for the community and for everyone else.
00:01:11.986 - 00:02:10.098, Speaker A: So I'm going to briefly take you through my journey, my personal journey through mev. Also kind of both through Cornell and through Flashbots, these two different facets of my mev experience. And also talk about some research papers that you might want to check out if you're interested in where mev comes from, the past research problems that are solved or the future problems that are going to kind of be on our horizon. Let's get started. So for me, the first phase of Mev when I fell into this rabbit hole of incentives and financial battles was this paper called Enter the Hydra, which we wrote around 2016, 2017. And this was looking to create a bug bounty program that was decentralized, incentive compatible and robust, so we could have secure smart contracts that were secured by economic value. And you could say, okay, this smart contract has a million dollars of security, and we have a whole infrastructure for doing this without any trusted third parties, which was kind of a first of its kind result in software security.
00:02:10.098 - 00:03:19.286, Speaker A: You can't do that in traditional software without a blockchain. But there's a fly in the ointment, which is if you rely on a bounty based system, on a permissionless network, how do you know that? When you have some alpha about what the exploit is or what the bounty is, and you're playing any kind of security game or mechanism, that you're not just going to have a front running adversary come front run you and then take the money. Instead, it turns out this one technical detail of blockchains and how the transactions are ordered erodes, the entire economic security game that you can build on top and prove that, okay, this contract is secure. And so to solve this, we created this two phase commit reveal with kind of steganographically hidden commits called Lib Submarine. Probably a little too early for its time, but still, in my opinion, an underrated project in Mev. So check it out after that, a natural question is, okay, what about DEXes? So 2017 we had the ICO boom and we had ERC 20 tokens kind of find product market fit and we had an explosion of these DEXes. So in 2017, Me and a bunch of people at Cornell took a look at these DEXes and wrote an article about the flaws and costs of all these DEXes that people were deploying.
00:03:19.286 - 00:04:09.014, Speaker A: And we flagged several issues with these DEXes for the community, including exposure to Arbitrage. So possibly getting a worse price than you would want to or would on a traditional centralized exchange, including minor front running. So the fact that miners have ultimate control to just insert transactions in front of yours and basically own the entire market, including exchange abuse. So if there was someone centralized running infrastructure or order books, they could potentially abuse their positions over users. We also ran our own bot to see whether this was actually a problem and whether kind of the flaws that we discovered were real and found that we were making about a million dollars a year with basically a pre PGA Mev bot. So this was before these opportunities were actually competitive on chain, you just had like one bot, it would take the opportunity, pay however much the fee was, and that was that. And there also wasn't a lot of volume.
00:04:09.014 - 00:05:40.040, Speaker A: So a lot of people would come back and say, well, is this real? Is this a real industry? Is this really going to be something I can spend time on or maybe explore or make a company or a professional career solving if it's such a small market? But that kind of shows you how we tend to underestimate how rapidly these things can take off and grow. So from here, I kind of got a little bit obsessed with Dex design and went down this rabbit hole of trying to warn the ETH community about Dex design and its insecurity. So this was a talk at DevCon Prague, basically, where we talked about transaction ordering and the pitfalls of transaction ordering and how ordering and insertion together kind of comprise this thing we call order optimization at the time or Oo. And this is like what we were claiming is how miners would eventually make a lot of fees because of the size of the incentive to manipulate basically this transaction ordering. So we were warning people like, look, your dex designs not only are vulnerable, but they're also making the entire chain insecure. Because these unpredictable incentives, these degrees of freedom you're handing to the miner, they incentivize reorgs, they incentivize censorship and withholding and all sorts of other nasty kind of network level properties on the one hand. And on the other hand, they're very economically centralizing because it's such a profitable kind of optimization problem because it's such a hard optimization problem to solve, because you need to take risk to solve this optimization problem.
00:05:40.040 - 00:07:09.890, Speaker A: Unfortunately, what you end up with is like a privileged set of actors that are good at this and are able to extract rent in the market and therefore centralize the validator set, politically influence, lobbying on the protocol and all sorts of other negative things that, let's say we wouldn't want an entity like Goldman Sachs doing, right? Like we wouldn't want them having a billion dollar incentive to kind of lobby the ETH protocol. So this was kind of my attempt to warn the community. I felt a little bit crazy at the time, but this is kind of a cool example of the relationship between mev and ordering, which I still think is a hot, unopened topic of discussion today. So after this, this is like very early in my mev journey, I kind of wanted to write all this down and distribute it to people. So that led to all this work called Flashboys 2.0. The early part of that research which was presented in Prague and the definition of mev, the first kind of time mev was used as a term kind of going beyond just ordering optimization or the ordering of transactions and looking at all the minor powers and all the economic implications of the rent in the system. And then in response to this, we also had some work on fair ordering in Byzantine consensus, which is a new line of research that was kind of a response to just the value and the ability to reorder in these economic protocols not being something people had predesigned into BFT consensus.
00:07:09.890 - 00:07:50.370, Speaker A: So we can talk about Flashboys 2.0 a little bit. If you're not familiar with mev, and I assume most people in this room are, but if you're just coming into it, I think this is still a good intro. So what did we do here? We said, okay, we know there are a lot of bots that are extracting mev on the blockchain. Let's figure out what they're doing and let's figure out where this is headed. So we deployed like eight nodes all around the world and had this kind of timing synchronization based observation stack where we just gathered data on what transactions were happening on the mempool and this is what we saw, basically. So this top picture is a picture of a typical PGA gas auction circa around 2018.
00:07:50.370 - 00:08:37.314, Speaker A: So you can see two bots here, the orange and the blue bot are competing for this opportunity. The X axis is the time and this is the bid they're placing to the Miner over time, basically. And we characterize all the game theoretic properties of this game as like continuous time, imperfect information with possible collusion and things like that. And we derived a bunch of game theoretic results kind of about the PGA auction and told the community, like, look, this is a big problem for consensus because you can actually lose consensus security through mev. And we need to find some way to harness this potential energy to do a little bit more than just make our system insecure or erode our consensus. So enter mev. This paper was also the first time the letters mev were ever kind of published into the world.
00:08:37.314 - 00:09:11.158, Speaker A: And this is a direct quote from Flashboys 2.0 on the relationship between what we used to call Oo fees and mev. So Oo fees represent one case of a more general quantifiable value we call minor extractable value. Now maximal extractable value. Anyone who doesn't like that meme, catch me outside. So mev refers to the total amount of ether miners can extract from transaction manipulation within a given time frame, which may include multiple blocks worth of transactions. So this was the first kind of very informal English language definition of mev.
00:09:11.158 - 00:10:07.440, Speaker A: And then we talked about why this is bad for consensus, why having this form of unpredictable fee with extremely high variance and extremely high spikes destabilizes your underlying consensus incentive scheme, basically. So one natural response to this is, okay, ordering is the problem. Let's fix the ordering, and let's come up with some ordering definition and find some protocol to enforce that, because that's what we do in crypto. We figure out what we want, we distill it into a definition, and then we design a protocol. So these two papers out of IC Three also were attempts to kind of go down this line of work. Mahimna Kelkar and several co authors in Ari's group were kind of pushing this, and they came up with something called gamma batch order fairness, which basically says, suppose you have two transactions, TX and TX prime. Then if most nodes essentially receive TX before TX prime, then TX will come before TX prime in the order.
00:10:07.440 - 00:10:46.650, Speaker A: This is fairness. So I think this is a very interesting line of research and constraining and creating protocols around ordering, especially in various deployment settings, in roll ups, in permission settings, in all sorts of types of chains. This is a super underexplored area. There are many limitations we know about also of these definitions. For example, you may not be able to order two transactions. The schemes that you can build on top to satisfy this also need to be proved to be incentive compatible in a rational model and collusion resistant and things like that. So this is an ongoing line of work, still very early days, but very promising.
00:10:46.650 - 00:11:28.418, Speaker A: All right, then, from there, what did we do? We thought about, okay, let's define what mev means. How can we create this definition that unites all these researchers across various fields, across optimization, formal methods, economics, distributed system security. So we wanted something really simple that really any field could kind of take and build tools and a language around to communicate around basically these financial incentives in blockchain in a way that was very blockchain native. So almost like a blockchain native game theory framework. So this is what we came up with. And it basically has these two quantities. The top quantity is EB, EV, sorry, and it has three parameters.
00:11:28.418 - 00:12:29.366, Speaker A: A proposer, a set of basically blocks that the proposer or the player sorry, P is player is allowed to generate and a state S that the system is in that the player cannot change. So there's some state that the player can't manipulate and it looks at the maximum of all possible blocks and takes basically the player's balance across these possible blocks and the difference between the player's balance. So the max difference between the end of the block sequence and the beginning block sequence is the EV for that sequence. And then we look at basically mev saying like, okay, calculate EV over all the valid blocks that a minor can produce and then maximizing that gives you basically this English language quantity, which is how much can a miner increase their balance across a series of blocks? All right, so that was one phase of Mev entering the next phase of Mev. We had a blog post that I wrote. Called Mev. What do which if you haven't read it, please, if there's one thing you do in this talk, I would love to engage with you because I think these ideas are still relevant.
00:12:29.366 - 00:13:09.802, Speaker A: And this blog post had kind of a two part argumentation. One is that mev is fundamental to the types of blockchains, at least permissionless blockchains that we're building. And another one is like, what should we do about it? So why is mev fundamental? I laid out three characteristics of Blockchains that directly lead to Mev. One is cryptographic transcriptability. One is interoperability across different trust domains and the information control basically at the boundary of these trust domains. And another one is permissionless design. So if you have some system that's exchanging value that you want to be truly permissionless, you need to put the money on the table and let the world organize around it.
00:13:09.802 - 00:13:47.970, Speaker A: And that is exactly what mev kind of quantifies. So what do we do about this? Because obviously mev is a complicated thing, right? It leads to certain attacks, it leads to flash loan attacks, it leads to sandwiching, et cetera, et cetera. So this was my prescription. So if you're a DAP developer, think about Mev and limit your Mev to what's required. If you're a user, audit your protocols for mev. With that in mind, if you're an L1 or L two, make sure you think about mev when you're designing your incentives and how that affects the core incentives for validators in your protocol. If you're a validator and this is the most controversial point on this list.
00:13:47.970 - 00:14:56.406, Speaker A: My belief is in a rational security model, you do need to be extracting the maximum Mev to kind of maintain your competitive share of stake against the actors who are willing to do this and maybe have less morals. So if you're operating in a network which is not permissioned, not relying on honesty assumptions, and is relying on rationality, then you're actually contributing to the security of the network by extracting the mev and everyone else mitigate the negative externalities. So try to avoid spam, latency wars, centralized rent extraction like weird politics, all these other consequences of just having these billions of dollars on chain. Okay, so then we enter Flashbots, which was kind of the next phase of this, a company Me and four other people co founded because we thought that it was kind of time to do something about these issues we were seeing in the evolving industry side of the MEB marketplace. So Flashbots has three goals that we laid out in our post announcing its origins. One is to illuminate the dark forest. So we believe that competition is key here and transparency is like the bare minimum, and Mev has the potential to become opaque.
00:14:56.406 - 00:15:29.590, Speaker A: How are these bots working? How much are they extracting? What are the attacks? We don't believe in opacity. We believe you need information symmetry for efficient markets. We also want to democratize Mev extraction. So we want to disincentivize Validators and Mev actors from having to sign social or legal contracts to maximize their revenue. Why? Because this creates asymmetries in how much each Validator in the set can earn and centralizes your system. And we also want to distribute the benefits of Mev. So we want a fair system for both users and Validators and other actors within it.
00:15:29.590 - 00:16:23.240, Speaker A: I'd say we've been really successful at the first two, almost surprisingly successful. And the third one is kind of our next major to do. So why are we all here? And I'm sorry, I'm kind of reusing old slides. So this is not the President's, like two months ago, but we're all here because we're on the precipice of kind of a change in Mev, which is the world going cross chain, the crypto becoming very controversial in kind of the geopolitical landscape, and this all intersecting with these complex financial incentives. So if you're interested on talks that really go deep into these subjects and cover literally every single facet of Mev, from trading to hedge funds to technical side to consensus design to cryptography to any other facet of this diamond, you can imagine. We had an extensive series of talks at this Mev Day event just recently that I think are extremely high quality and topical. So I encourage you to check those out.
00:16:23.240 - 00:17:02.402, Speaker A: And there we also talked about crosschain Mev, which basically has the potential to incentivize Validators across different chains, to collude, to more efficiently extract these financial incentives. And why this is a huge centralizing problem for the system. And we also talked about how in the centralized world, which is orders of magnitude bigger, we still don't know if these actors are behaving honestly or exactly what's going on. So mev is very transparent and it's easy to get caught up in that. But we shouldn't forget about the centralized world and kind of how shady it is in crypto. All right, so let's talk about what we're going to do next about this real quick. So this is a warning kind of to this room.
00:17:02.402 - 00:17:56.134, Speaker A: As academics, as industry partners, as VCs that are funding projects, we're on the precipice of losing the decentralized option for humanity and centralizing all of cryptocurrency through Mev. So there's a real choice for why we're all here. On the one side, we all want to attain understanding as researchers and we want to preserve decentralization for the community because we all owe this community like a debt of gratitude. On the other side, we can't ignore the incentives in this raw financial system we're building to both make money and have parties that attempt to own the centralized stack, possibly in hostile ways. So what I ask for every person here is to decide what you're going to do every day and which one of these axes you're going to be on and have very rigorous and principled reasoning about why that's kind of my ask for you all. I'm going to skip this. So is mev research good or bad for the world? Hard to say so far.
00:17:56.134 - 00:19:13.390, Speaker A: I think it's up to the people in this room. All right, one last thing I want to talk about and then maybe I'll have time for one or two questions or maybe you'll have to catch me after. What are we doing about this at Flashbots? Where are we going next? What are you going to hear about today and how are we continuing this work forward? So there's a number of research issues that we have on our Flashbots research website. Flashbots is a dual research and development project with a balance of kind of academic style crypto research and product development. So we're looking at all these efforts both internally and externally, and we can use help on all of them auction design, economic game theory, computational game theory, and auction incentives, both cryptographic and cryptoeconomic privacy and how it relates to the economics of these systems. Mev in other systems such as ETH two, which I guess is going to be very relevant soon, and L two, a taxonomy of mev. How do we characterize where does various mev come from and what are the good and bad implications of it on the system? Is there such thing as an ethics framework for Mev falls under that as well? Can we achieve features like account abstraction through Mev? How does mev interface with protocol design? And what tools and techniques can we make for protocol designers so that they can design protocols that don't surprise them through the consequences of mev.
00:19:13.390 - 00:20:13.966, Speaker A: How can we optimize mev search so the market is actually efficient and achieves these kind of security properties we're talking about? And how do we think about Flashbots as critical infrastructure and make sure we're not on the critical path of harming any sort of properties we enjoy in cryptocurrency, such as censorship, resistance, or liveness or safety. And on the product side of Flashbots, we're also thinking about constantly, how can we improve this two sided market for mev, for blockspace, whatever you want to call it on our systems. So the way we see this market is as a tension, a compromise between the user and the validator, where the user side wants to minimize and the validator side wants to maximize mev. So people always ask me, oh, Flashbots is maximizing mev. Is that really what you want? Yes. Does Flashbots want to minimize mev? Is Flashbots doing that? Yes. Those two things are actually the same, right? So if you want to design a market, you need to do both, and you need to find some tension in the compromise between these two goals to actually find economic efficiency.
00:20:13.966 - 00:20:50.998, Speaker A: And this is some criteria we're thinking about privacy, decentralization competition at every layer of the stack, transparency tooling for users, economic efficiency, geographic diversity, which is very important for robustness of your validator set and its incentives. Fewer externalities on the network like spam and latency wars and still fewer first party deals with validators which I think are highly corrosive to any blockchain's incentive model. So please join us. I was going to change this to Flashbots net, which you should check it out. Wink, wink. But this is our GitHub. We have everything on here about our research, our product, et cetera.
00:20:50.998 - 00:21:21.800, Speaker A: We hate GitHub, and for obvious reasons, I think in the last few weeks, they've all really failed us. So we're working on that. But bear with us for now and you can check out our information there. All right, thank you very much for listening. And I don't know if we have time for questions. It says I have four minutes left, so maybe I'll take one or two if anyone has questions. Wow, we killed it today.
00:21:25.770 - 00:21:38.200, Speaker B: On the Navy to effectively optimize or not using, please use the microphone. Oh, yeah, sorry.
00:21:39.230 - 00:21:41.020, Speaker A: I can also repeat the question.
00:21:42.750 - 00:21:55.150, Speaker B: All right, so on the mev, what do blog post, you said the user's goal was to optimize for using apps with minimized mev. Is that a reasonable expectation for users, given that they just don't do that in TradFi?
00:21:56.790 - 00:22:47.214, Speaker A: That's a good question. I think the equilibrium in TradFi is very complicated and has a long history of complex incentives. I do think we can do better than that. I also do think the equilibrium in TradFi speaks to some user preferences of, like, I don't want to see a fixed fee on my transactions. I want this certain UX pattern and I think we can't ignore that so we can't escape it. Is it fair to users? Yes and no. I mean, I think that's one of the many obligations the users should really be putting more pressure on the DApps to say do we trust you? What are you all doing about it? And I'm hoping that in TradFi, especially as crypto starts to come into TradFi and we see more mechanisms like we have in crypto bleeding into TradFi, I'm hoping that in the long term iterated game.
00:22:47.214 - 00:23:23.180, Speaker A: This also exists in TradFi where if Robinhood is worse than alternatives, people will switch and things like that. So yes, it is like we can't just fully punt this to the user and say it's only your problem. You also need the l ones to be aware and help the DAP developers build good DApps and help the DAP developers actually build sane mev systems and communicate this to users and help the users then evaluate the claims. So this is the whole kind of loop and I think users are one part and we can't trust them entirely, but we should also respect their preferences. Yeah.
00:23:24.190 - 00:23:31.214, Speaker B: First question you were mentioning for validators, like there's a very corrosive effect of first party deals. Could you explain that a little bit?
00:23:31.412 - 00:24:10.886, Speaker A: Yeah. So basically the TLDR is like when you're reasoning about the economic security of your protocol. Let's say you take like an economically rational model. Oftentimes in crypto you'll use things like stake or hash power or some other resource as a proxy for percentage distribution in this network right. And a proxy for essentially power. So in theory, if you have 20% of power in Bitcoin, you should have about 20% control over the parts of the network that hash power is responsible for. This breaks down at 51%, which is like a well known cliff in theory, or even a little lower if you consider selfish mining.
00:24:10.886 - 00:25:13.402, Speaker A: But in general you want like 5% to have 5%, 10% to have 10%. If you have a curve that's like super nonlinear and super linear in your percentage of hash power, stake, whatever resource people are fighting to accumulate. So let's say there's one actor that knows that if they get 20% of the stake, they can make 80% of the money and everyone else is on this linear curve of if I make 20% of the stake, I make 20% of the money. It just becomes A, impossible to reason about your incentives so you can't prove economic security anymore and B this party that's like, okay, if I can get 20%, then I get 80, and if I have ten, I have ten is hugely incentivized to make this deal to go from ten to 20. And there's like a lot of iterative advantages like this that just end up being like centralization pressure on the network. Other things this plays in on is like latency and geographic centralization. So people colocating for economic efficiency at the expense of distribution of the network, at the expense of the ability to have multiple regulatory jurisdictions instead of a single one, et cetera.
00:25:13.402 - 00:25:23.886, Speaker A: So these are kind of all the small corrosive effects of this, but the TLDR is like, you want to as close to a linear curve as possible, and if not, things just get very weird.
00:25:24.078 - 00:25:31.874, Speaker B: Thank you. Other question. Do you have any thoughts on, for example, the move language and formal verification and the effects with mev on that?
00:25:32.072 - 00:26:02.880, Speaker A: Yeah, so I think formal verification is a great tool, like Clockwork Finance, which is one paper where we defined Mev, is also like, how can we use formal verification tools to prove security of protocols in the context of Mev, where instead of using this Boolean property, you use integer reasoning in a game framework, basically. So I think there's a lot of potential there to build, like estimators static analysis tools. Mev model checkers. Composability provers. This is one facet of how we're going to understand what we're actually building, I think.
00:26:03.410 - 00:26:04.414, Speaker B: Awesome. Thanks.
00:26:04.532 - 00:26:07.790, Speaker A: All right, thank you very much, everyone. Find me offline.
