00:00:00.090 - 00:00:25.442, Speaker A: Here. Awesome. So how's it going, everyone? My name is Luke, and I am here to talk about Ethereum. Mev on Ethereum in 2021. This is your 2021 Ethereum mev wrapped unwrapped by Mev Inspect. Alex has already shouted us out a decent amount, but like we said, the data is from Mev Inspect Pi, which is our open source block inspector at Flashbots. You can find it on GitHub.
00:00:25.442 - 00:01:07.122, Speaker A: If you want to play around with it yourself, or if you want to contribute or just have questions on how to run it, come check us out in Mev Inspect in the Flashbots discord. So let's jump in. Mev on Ethereum in 2021. So it's no secret that Mev got a lot bigger in 2021 on Ethereum. In particular, from our numbers, we saw over $400 million of extracted value on Ethereum in 2021, and this excludes sandwiches, which we know to be another several hundred million dollars of extracted value. There's a huge amount of activity going on. To quantify it a little bit more, from a totals perspective, we saw 1.6
00:01:07.122 - 00:02:02.306, Speaker A: million arbitrages, 809,000 sandwiches, and 20,000 liquidations in terms of minor payment, over $300 million of that went back to miners just in terms of payment for priority to place these extraction opportunities. And so while it's interesting to see all these numbers kind of going up into the right and seeing mev growing as a space in general, what I think is more interesting when we talk about 2021 is what Alex was mentioning in that introduction, which is about the competitiveness and the sort of changing landscape of mev on Ethereum through 2021. So let's dive into that a little bit. So here I've got a chart, and on the bottom, on the X axis is going to be the percentage of profit that was paid to a minor. And so let's say I make one dollars and I pay $0.50. That would be a 50% payment to the minor. That would be that 0.5
00:02:02.306 - 00:03:01.298, Speaker A: that's getting pointed to you right now. On the Y axis, we're going to have the total number of opportunities that paid that percentage of profit to the minor. So it'll be a graph over time graph showing basically the percentage of profit paid to minor spread out, how much are people basically paying, and we're going to look at that for different time segments sort of early on, then going later into the year. So looking at March to May, we can see that in terms of how much of profit is going to miners from extracted opportunities, it's relatively flat. So there's obviously an upward inclination towards like 60% to 90% or so, but there's not a ton of agreement on how much money searchers should be paying as profit to miners. And also there's also a potential sorry, I was checking the chat for a SEC there. There's also a lot of discrepancy in terms of the actual gas usage of the different contracts that are executing all these transactions.
00:03:01.298 - 00:03:51.714, Speaker A: So we see basically this relatively flat distribution in terms of how much people are paying. And we even see this little section near the bottom where people are paying virtually no money back to the miner in order to extract arbitrage. These are definitely the good old days, early days of Flashpots sort of taking off. When we fast forward to mid August, there's a noticeable change happening already. We can see that in general, miners are in general searchers are sort of centering around 80% of profit going to miners with some a little bit over, a little bit under. People who are historically paying maybe a little bit over 90%, 95% are now pulling that down because they realize they can still be competitive while paying less. And then people below 50% are bringing their payments up in order to remain competitive.
00:03:51.714 - 00:04:31.314, Speaker A: And unfortunately for those people who were paying zero, they're now out of luck. They're getting outcompeted by people paying a little bit more. And of course, there's an interesting trend that we can imagine happening here. Let's say that I'm a bot that's sitting solidly at paying 80%. Maybe I decide, okay, I can land, I'm landing on chain maybe 25% of the time with the opportunities I'm trying to get. And maybe if I pay a little bit more, I can beat out the guys who I'm competing against, so I'm going to bid a little bit more, but then of course they're going to get upset, bid themselves a little bit more, et cetera, et cetera. And so it's natural for these little sort of Inchings forward to lead to the price increasing overall for everyone.
00:04:31.314 - 00:05:21.570, Speaker A: If you look at Twitter from that period of time, you can see this is a famous searcher, Xerox 911, saying we often see basically with a long thread talking about how bribes will potentially may or may not converge on 99.99% of profit over time. And then MVV intern actually calls out that the searchers been in the Flashbots discord. Shaming bots that are bidding way too high up, basically saying, hey, you're ruining it for the rest of us, can you pull your bids back down and be a little bit more competitive on gas features, things like that. But unfortunately, shaming in the discord only goes so far. If we look at August to October now, we're well within the 90s in terms of percentage profit paid to miners. If we look at October to now, continuation of the same trend up into 97% of minor payment.
00:05:21.570 - 00:06:04.914, Speaker A: So a huge push upward throughout the year as competitiveness increased. Another way we can look at this is just total searcher profit versus total minor payment over time. There's a clear trend towards minor payment. And so this is talking about when we think about minor priority, how does a minor choose which transactions to prioritize in their ordering? They think about dollars per gas, they have a fixed amount of gas that they can put within a block and they want to maximize the amount of money that they're making based on that amount of gas. And so this is talking a little bit about the money. So if we had the same contract, who's paying a little bit more? But there's this whole other half which is around the gas optimization as well. So let's dig into what the data looks like for people doing that over time as well.
00:06:04.914 - 00:07:04.770, Speaker A: So here's one situation that Alex alluded to a little bit. There's two ways that you can pay the minor for your priority. You can pay either in fee, which is sort of the traditional way that people use ethereum, you pay fees to the miner, which post 1559, or a base fee and then some optional tip amount, or you can pay via something called the Coinbase, which is basically a direct transfer of ETH to the miner's address. And so there's a lot of reasons why you might want to use Coinbase over Tip. And with the adoption of Flashpots increasing in April and May, you can see that there was a steady increase in people using Coinbase, which is the red section. But then as searchers got smart and competition increased, there was an alpha leak that became common knowledge that using gas price for your minor payment is a lot more gas efficient than using Coinbase transfer. And so, as a result, we can see in the data kind of post that tweet the adaptation back, people switching from using Coinbase back and using Tip.
00:07:04.770 - 00:07:41.280, Speaker A: And it actually came at kind of a nice timing because I think probably two weeks later was EIP 1559. So people had to go in and change their logic anyways in order to support the base fee. So they probably thought, well, if I can get a little extra gas by switching over to Tip instead of using Coinbase, I'll just do both at the same time and we'll kind of check both boxes. So Alex already shared these. Shout out to Robert Too for being the Tweet provider for all of us. These are some good ones. So, yeah, increasingly see competition around gas usage in general.
00:07:41.280 - 00:08:42.900, Speaker A: And one interesting question you might ask is can we see this in the data? Then? Can we see the efficiency increasing for people in terms of gas usage over time? When we look at mev opportunities and I was on this for a good hour or so, confused? Check out this graph. So this is the weekly minimum gas used by any arbitrage. You can see there's this giant spike that happened here around August. It's right on August 5 is what it turns out to be, which is known to be the EIP 1559 Adoption day, but it's also the adoption of EIP 35 29, which is a reduction in refunds. So it used to be that you could do all sorts of self destructs on contracts and other sort of gas manipulation techniques in order to reduce the amount of gas that your contract uses. And so people use this to the absolute maximum. And then when it went away, the floor in terms of what was possible in terms of minimum gas use had a huge bounce up.
00:08:42.900 - 00:09:27.458, Speaker A: This graph makes it relatively obvious, but the sort of graphs that oh, and here's you can see the decline that Mev inspect sees on the number of self destruct calls that happened, trace calls, people associated with Mev opportunities. So basically now that there's no benefit, there's no one doing any of their opportunities. But here's a graph where I was looking at it and it was a lot more confusing. But so you can see still that little divot around August 5. One interesting thing, though, is we can see that beyond that point of August 5, there's a rough flattening happening. So you can see the market somewhat sort of reaching a point of max efficiency in terms of extraction of Arbitrages. But you can imagine maybe the trend adjusted for that.
00:09:27.458 - 00:10:10.062, Speaker A: This is not a mathematical adjustment adjusted for that. EIP change looks something like this and it trends a little bit more like what we would expect. Similarly for sandwiches, they have a little bit more of a dramatic situation. You can imagine that the continuation, absent EIP change, would keep the downward movement of gas used. But again, we see that really solid line in terms of people reaching sort of minimal gas usage for extracting the opportunity. I want to talk briefly about a couple I want to drill basically into two types of mev extraction arbitrage to start and see some of the unique things that happened with Arbitrages. So here's total Arbitrages over time.
00:10:10.062 - 00:10:50.940, Speaker A: Extraction is about 10,000 Arbitrages a week on ethereum at the moment, with a slight decline recently. And one of the interesting things to look at with Arbitrages is the share of profit that's being split among searchers. So for the year of 2021, these were the top searchers in terms of net profit that we found and how much money they made and the percentage of the total profit of all extracted Arbitrage value that went to them. So we see some pretty large numbers here. 5.9%, 5%, 6%, et cetera. So it's kind of a small handful of people who are really deep into this who are heavily optimized for this competition, basically.
00:10:50.940 - 00:11:55.214, Speaker A: Here's another graph showing that. This is a graph of how many searchers split the top 95% of profit. So if you said let's take off the 5% tail of remaining people who maybe landed one Arbitrage throughout the year or throughout the month, this is monthly batch. How many people does it take to fill that 95%? We can see that it's roughly doubled over the year, maybe a little more than doubled from about 20 1520 to 50 to 50. Here's another interesting angle to look at Arbitrages from is the number of hops in a captured arbitrage. So you might think that there's sort of competing ideas here where you might think that because people are getting smarter and smarter they might capture longer arbitrages. But at the same time the gas used the profit amount from maybe if I have an arbitrage featuring swapping from one pool to another to another versus one pool to another and back, the profit might not be substantially different enough to justify the gas costs of that additional swap.
00:11:55.214 - 00:12:26.826, Speaker A: And so we can see that there's a relatively substantial increase in two swap arbitrages as compared to the rest of arbitrages. Although I am happy to say that since that slide that Alex used was updated, there has been crowned a new winner of the longest arbitrage on Ethereum, at least that I've found so far, which is 14 hops. So thanks to mev. Inspect for crowning that champion. Congratulations. Now I want to talk about sandwiches a little bit. So here's a graph of sandwiches over time.
00:12:26.826 - 00:13:24.886, Speaker A: This is total sandwiches by protocol and this data is not as clear as we might like it to be. We group all Uniswappy protocols to be into the same bucket. So sushi swap, uniswap v two, pancake swap, et cetera, would all be considered that uniswap v two pair. We can see that the vast majority of sandwich activity happens on those markets compared to something like a uniswap v three, which has activity but substantially less so. Looking at this around April, which is sort of the takeoff period of flashbots adoption in general, you can see that there was a rough doubling of sandwiches in general. And then on May 5, which is the spike of uniswap v three pool adoption with the launch of v three there was a fairly immediate transition of liquidity from v two. You'll have to excuse my photoshop abilities.
00:13:24.886 - 00:14:28.386, Speaker A: This is v two liquidity, uniswap v two liquidity over time. And you can see that the drop in liquidity from uniswap v two correlates pretty heavily with the number of sandwich attacks happening overall in the network. And still even as uniswap v three overtakes v two in terms of total liquidity, it doesn't become the larger source of sandwich attacks. Basically saying that uniswap v three is actually more resilient to sandwich attacks, it seems it's pretty cool. Something else to look at in terms of this decline in sandwich attacks over time that we're seeing is miners and how they're thinking about front runs and sandwich attacks. Back in October, Ethermine announced in the flashbots discord that they will no longer be processing bundles that front run dex trades. And so we wanted to take a look and see here's all the major miners and divided up based on how many sandwiches they've processed over time.
00:14:28.386 - 00:15:06.046, Speaker A: And so we can see Ethermine here sort of holding strong to their commitment. Around October there was a really substantial cut down in the number of sandwiches that they processed and they've since, I think, been refined. I mean, it's an approximate it's hard to detect sandwiches, so it's not the sort of thing they can just flip a switch on. But it looks like they're getting better and better at it in terms of reducing the number of sandwiches that they're processing. And it doesn't look like we're seeing that amongst any other large miners that they're deciding to cut back on sandwiches quite yet. In fact, it looks like F Two pool is taking most of the capacity that used to be attributed to Ethermine. Cool.
00:15:06.046 - 00:15:47.460, Speaker A: And I want to give one last shout out just to some of the other mev that's been extracted that wasn't mentioned. There's been all sorts of long tail mev, such as salmonella attacks, which are attacks on sandwich bots just in time, liquidity ads, all sorts of NFT activity. Um, this is there's there's definitely been a lot more than what we've had the ability to share here. That happened in 2021, but I think we're looking forward to new additions to Mev and Specpy in order to be able to analyze that going forward into the future. That's all I have. Thank you. Awesome.
