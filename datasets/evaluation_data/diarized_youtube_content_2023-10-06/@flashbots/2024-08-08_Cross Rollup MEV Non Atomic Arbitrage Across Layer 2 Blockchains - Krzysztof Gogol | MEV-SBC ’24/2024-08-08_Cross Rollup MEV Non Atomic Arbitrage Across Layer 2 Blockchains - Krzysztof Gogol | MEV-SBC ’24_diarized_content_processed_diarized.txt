00:00:03.480 - 00:00:36.338, Speaker A: Hello everyone. It's great to be here with you. Today. I'm going to tell you a little more about a new thing, which is Crossrolab MMV. I am a researcher at Matterlabs and also a PhD candidate at University of Zurich. And I joining my PhD research is about security and scalability of Defi and simply layer tools. And Mav is where those areas intersect with each other.
00:00:36.338 - 00:01:43.818, Speaker A: I hope that today I also give you some background information why actually people are doing MAv, what you can extract and where, and highlight those new places like l two s where you can look for that. Such those layer tools and the roll ups are becoming more and more and more important. You can see that, I mean, the whole decentralized finance was born on the Ethereum blockchain 2018 with Uniswap being the first exchange. But you can see that over time, mostly because of the high gas fees, that trading volume is moving away from Ethereum to another blockchains. And I mean, it's not only Solana where the trading volume is moving. You can see on this chart that a very big part of the trading volume is moving away from Ethereum to those L2 blockchains that are based on the, based on the Ethereum. Also the Ethereum is currently having roll up centering roadmap.
00:01:43.818 - 00:02:45.006, Speaker A: And this being encouraged by the Ethereum itself to move the user activity to roll ups. When you look at the numbers, there are actually already more swaps, more swap transactions happening at roll ups such as I know, arbitrum or base. Then on the Ethereum mainnet, it just, they are still smaller in volumes, but maybe a very brief repetition about what is arbitrage. Because yeah, the more design exchanges we having, the more l two s we are having. It means there are more trading venues. And the arbitrage is simply a situation where you can buy some cryptocurrency at one exchange for a lower price and sell it at another trading venue for a higher price. And you can see here example where you can buy something at amm like one e for 23 and sell it at binance for $2,400.
00:02:45.006 - 00:03:51.958, Speaker A: And this is simply arbitrage because it's almost risk free, almost risk free reward. And simply what we are asking ourselves in our research paper is, are there price differences between the decentralized exchanges that are located on Ethereum and on the layer tools and also binance? Because in theore, if the market is efficient, the prices everywhere should be equal. This is question number one. Question number two is if there are those differences, how big they are. And can they lead to the arbitrage opportunities? So are those differences in prices big enough to cover the breaching costs, to cover the transaction costs and the other related costs? And then the third thing is actually the most interesting is how to explore those opportunities. So how can we make sure that actually we will be the ones that are exploiting that arbitrage? Mev. And now maybe how MEV is working on Ethereum.
00:03:51.958 - 00:04:47.794, Speaker A: There are generally three types of three types of MV. It's back running, front running, or the combination of the above. And the biggest part of the MV on Ethereum is actually back running, which is when there is a target transaction. And math Searcher wants to put his transaction just after the target, a transaction. And typically the target transaction is a transaction that is, for example, causing a big, it's a big swap on the exchange, causing a big price differences between a Dex and another dex, or sex. And then here we simply want that our transaction will be as close as possible, ideally just after that swap transaction that caused that pricing imbalance. Another application of that mav background is net defi lending.
00:04:47.794 - 00:05:54.906, Speaker A: It's about liquidation. When you want to liquidate the bad debt as soon as possible. It's also linked to the oracle extractable value. And actually, when you look at the numbers, like over 70% of the MAV on Ethereum mainnet is related to the arbitrage. So it's simply looking for that price differences between different trading venues. Also from that arbitrage MAV, over 60% is actually related to the C five Defi arbitrage. So when you are simply trying to exploit the price differences between the dexs on Ethereum and the binance Kraken and other centralized exchanges, and only 30% is actually rate to the cyclic arbitrage within the same network, then the question is, is it the same or will it be the same on the, on the roll ups? Actually, just to make sure that everybody know, everybody knows what the L2 and the roll up is.
00:05:54.906 - 00:07:09.940, Speaker A: I mean, I will be using those words interchangeably, although they are not the same, but they are almost the same, like simply a roll up. And the L2 is a scanning solution where you take complex calculations outside of the ethereum, you those calculations, and then you store back the the results. There are different types of the roll ups, optimistic, zero knowledge, and they typically have the one major component, which is called a sequencer, which is actually super important for the L2 blockchain, because it's the sequencer who is producing the blocks and deciding on the order of a transaction. Within the blog today, almost all of their roll ups and all of their major roll ups are running only one sequencer. That's why there is the problem of a centralized sequencer with the roll ups. And generally we are trusting those centralized sequencers because they are operated by the foundations that are simply standing behind those roll ups. What's actually important as a consequence, we don't have those mev options like flashboard style solutions on layer tools.
00:07:09.940 - 00:07:55.378, Speaker A: I mean, typically when you think about layer tools, you think about two things. So first of all is the Ethereum security and lower gas fees. But those two other components that are also very important when you look at the decentralized finance on air tools, because as I mentioned to you, there are no MAV auctions boost auctions yet. And also the block production is much faster. I mean, on Ethereum it takes between 1012 seconds to produce a block, whereas on a roll up, I mean, depending on the implementation, it's around one, 2 seconds, or sometimes even 200 milliseconds. And this is significantly changing the MMV strategies on air tools. And simply.
00:07:55.378 - 00:09:20.170, Speaker A: Now let's look at the results that we achieved. You can see on this matrix behind me the price comparison between Uniswap v three pools of ETH and USDC. We simply compare the prices for the first half of this year per block frequency between the deployment of Uniswap across Ethereum and it's five major roll ups. And you can see that actually there are some differences. There are like, I mean, one of the biggest differences are on the CK sync, followed by the big differences with bias, then the natural question that you can ask is, are those price differences big enough to cover the cost of extracting them? And also, once you see that there is a price difference between the Uniswap, for example on Cksync and Uniswap on arbitrum, how big the transaction should be. So actually what you can do, you can calculate the size of optimal volume of a transaction that is exploiting those price disparities. I mean, depending on the amm type.
00:09:20.170 - 00:10:02.614, Speaker A: Yeah, the formula is simpler or more complex for the Uniswap V two, it's actually quite simple. Here you can see the transaction volume, which is equaling the, which is size of the transaction volume, which is equaling the price differences between the Dex and saxe. And here you can see actually how much money the arbitrageurs is making. And here you can see that actually it's increasing. Yeah, the bigger the transaction is. But there's always like one point when it's the optimal and it's the highest value. It's also related to the fact that typically, those AMM functions are concave.
00:10:02.614 - 00:10:58.450, Speaker A: And yet, depending on the complexity of that AmM function, you can simply calculate and find those points. And this is simply what we did, what we are doing in our research. And in the first part of that research, we actually compared the prices between the sync swap, which is the largest amm fork of the Uniswap v two, on the Sikasync, with the prices on binance. You can see here above the biggest daily price difference. And here you can see in the blue, actually, how much the arbitrageurs was actually making each day. And I mean, it's rather intuitive that the bigger the price difference, also the higher was the revenue of the arbitrageurs. However, you can see that here is the size of the liquidity pool, or the reserves inside the amm.
00:10:58.450 - 00:12:14.948, Speaker A: And it's playing important role, because you can see that actually, even on the days when the price differences were bigger, but the liquidity pool was lower, like in that case, arbitrageurs were making less money than here on that point, where simply the smaller price difference led to the higher revenues of the arbitrageurs. So, it's very important to look, when you're trying to estimate the profit of the arbitrageurs, to look not only in the price difference, but also how big those liquidity pools are there. And in the next step, we simply make that formula more generalized, also applicable for uniswap V three. And we simply start to compare how much you can extract in profit between different roll ups. And you can see here, because, for example, pools on the Uniswap Zk sync are not too big at that point. Like the profits were rather low compared to the other Uniswap deployments. And here, the highest revenue of the arbitrators are here in this area.
00:12:14.948 - 00:13:50.024, Speaker A: So, between ethereum and the different deployments on arbitrum, and you can see that actually, the cross roll up arbitrage can be even higher between the roll ups than between the binance and another roll ups here, actually, the highest arbitrage we calculated between, or we found, between the binance and ethereum. But yeah, quite often between the roll ups, gross roll ups is actually higher than between a roll up and binance, which is most, actually most of arbitrageurs are doing today. But then, the next question, actually, you can ask yourself, okay, once we know how big is that, we know the price difference, we know how big the profit of the arbitrage can be, then how can we assure that we will win that profit that nobody will front run us? I mean, on Ethereum it's possible, on Ethereum as possible, and the roll ups is not possible. Maybe another important thing is, I forgot to mention, is that you can look here, that those price differences, they last quite long. We simply calculated how much time does it take between their prices at those uniswap deployments and the binance, they become equal with each other. On Ethereum, it's like 31 seconds. On Arbitrum, 7 seconds, another chance more.
00:13:50.024 - 00:14:56.578, Speaker A: But here you also need to remember when you look at those seconds that there is a different block production. Because, I mean, 30 seconds on Ethereum, it's maybe two and a half block, whereas on arbitrum, I mean, 7 seconds means almost 30 blocks, because the block production is much faster. And this has a big impact on the extraction of that arbitrage, Mavden, because typically on a, even not typically, if not always on the l two. When you have a target transaction that is causing some big price differences and you're trying to exploit it, your transaction, your Mav transaction will be in the second block after it. So it's almost impossible, unless you apply some certain strategies to be within the same block. It's also really the fact that the blocks are produced much faster. And then there are two options that you can apply to look for the to exploit the Mav on L two s.
00:14:56.578 - 00:16:02.870, Speaker A: One is when there are dexs within the same blockchain, like in that case, there are like two dexes, for example, on optimism, and you can equal the price between them. Or you can look for like a triangular arbitrage, like between the three different tokens and the pools, and then try to equal those prices in one atomic transaction. And the people are already doing it. You can see how much of such atomic arbitrage was already exploited. But I mean, remember that actually on ethereum, that type of the arbitrage, atomic arbitrage between DExs corresponds only to 30 40% of the total arbitrage. Meaning that if we are compared to the ethereum, still 70% of MAV is not captured here and here. When it comes to the looking for non atomic arbitrage on the l two s, which can be between the l two and the roll up, or between two roll ups, there are three different possibilities.
00:16:02.870 - 00:16:46.090, Speaker A: So one is. But I mean, most of the roll ups don't support that. Yeah, you can take part, you can simply pay a higher gas fees to increase the chances that your transaction will be executed faster. But what actually a lot of people are doing, they are looking for the sequencers that are running their roll ups, and they are simply trying to be as close as possible to that sequencer. So this is the old school approach, known from the traditional finance and highest frequency trading. And another thing that you can try to do, you can simply spam the network with your transactions, because the gas fees are actually super cheap on the roll ups. And I mean, all those things are actually already happening.
00:16:46.090 - 00:17:30.750, Speaker A: Especially that in March this year, the Ethereum underwent a very big, very big upgrade. It was called Dekun upgrade, happened here on the 13 March. It introduced the blobs. And as results, gas fees on the roll ups went down almost to below, which is making doing any transactions on the roll ups super cheap. And because it's so cheap to do transactions on the roll ups, you can simply take a risk of doing that non atomic arbitrage transactions, because even if your transaction is not successful, you run it too late. It can be reverted. You need to pay a gas fee, but the gas fee is so low that you don't risk much.
00:17:30.750 - 00:18:55.052, Speaker A: And you can see that actually the amount of the reverted transactions after that, they could upgrade, increase hugely after that upgrade. And then, actually, I already mentioned that when you are the arbitrageur trying to execute that arbitrage MIV between two roll ups, your biggest risk is that it's called the price of state drift, meaning that you buy, for example, an asset on one roll up, but you don't manage to sell it on another roll up before the price changes. And there are different approaches how it can be mitigated. One of them, which is actively being researched, I think also by flashbots, is about introducing time boost auctions inside the sequencers of rollups, where you'll be simply paying more for getting a super speed for your transaction. I mean, as you are anyway, paying maybe to a defi solver for getting physically close to the sequencer. Why not? It's a doing that simply take part in that boost auction. Another approach is actually using so called shared sequencing, which is under a heavy development within the air to a community.
00:18:55.052 - 00:19:46.470, Speaker A: And such shared sequence is quite important because, let's say, in the final stages of its implementation, it can allow for two things, like one fingers can make simply the transactions across two roll ups atomic. So simply that non atomic arbitrage can become atomic arbitrage. Yeah, eliminating the risk for the arbitrageurs. And also the second thing that such a shared sequencing can bring is the shared liquidity, meaning that you'll be able to reuse pools on different roll ups, or move your reuse on one roll up tokens from another one. This is actually something that we are actively researching at Matterlabs also. Yeah, my colleagues are here who are really studying it. If you are interested, have a chat with us.
00:19:46.470 - 00:19:53.110, Speaker A: And then that was my talk. If you have any questions, feel free to ask.
00:20:00.060 - 00:20:20.680, Speaker B: Yeah, Chris, good to see you again. Just wanted to ask you a question. How much of l two arbitrage is open because your traditional arbitrageurs on l one just don't want to keep liquidity on the chain. So is it really an atomicity problem, or is it an inventory problem for l two arbitrage?
00:20:21.780 - 00:21:04.140, Speaker A: That's actually excellent question. So here, maybe I just underlined one fact, that in those studies, we simply estimated arbitrage that can be exploited. So it's not the arbitrage that people are already exploiting. This is simply what's there and how much time is there. So the question is, why is it so long and why people are not doing it faster? I mean, there are two things. One initial concern was there were not too many well known amms running on the roll ups like Uniswap or Kerv. They are just entering that area.
00:21:04.140 - 00:21:26.806, Speaker A: The second fingers the liquidity. It's still limited at some roll ups. So even if the price differences are big, they maybe represent 20 beeps of a trading volume. It's still for a big arbitrageurs running. I know million dollar companies, it's small. Yeah, small cake, but I mean, but it's growing. So the trading volume is going up.
00:21:26.806 - 00:21:32.010, Speaker A: So I expect that we see those opportunities disappearing faster.
00:21:38.630 - 00:21:45.890, Speaker C: I guess the question is, like, why is DK sync seems to be always, like, lagging or have the greatest price difference? Is this a function of liquidity on the chain?
00:21:47.110 - 00:22:38.840, Speaker A: Yes, yes. But there are also some deeper reasons behind that. So simply, those roll ups, you can see here, they are optimistic roll ups, whereas CK is saying it's the zero knowledge, zero knowledge roll ups, and simply optimistic roll ups. They managed to have more liquidity because for them, achieving EVM compatibility is easier. Whereas for the ZK roll ups that you want to be EVM compatible, it's more difficult to develop EVM. And that simply resulted to the fact that those DeFi protocols came there later. But I mean, what you will get from the CKI rollouts versus optimistic is a faster finality, especially when the sequencers become decentralized.
00:22:38.840 - 00:22:41.820, Speaker A: So there are always some trade offs.
