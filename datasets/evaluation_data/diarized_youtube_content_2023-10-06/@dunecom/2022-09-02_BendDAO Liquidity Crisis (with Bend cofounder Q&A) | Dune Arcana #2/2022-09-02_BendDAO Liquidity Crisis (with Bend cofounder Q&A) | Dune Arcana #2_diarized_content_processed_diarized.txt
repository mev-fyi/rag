00:00:00.200 - 00:00:42.866, Speaker A: Are live. Welcome, everyone. Welcome to our second Dune Arcana session, where we'll be learning how to do unchained data analytics with current trends in the web3 world. So today we'll be talking about bend out liquidity crisis. My name is Jackie, I am aga Perce on Twitter, and with me here, I have the wonderful boxer to help us monitor the chat and a little bit logistics. Today, we might have the bandao team joining us at the very end to answer any questions that you have. Very much looking forward to that part.
00:00:42.866 - 00:01:15.278, Speaker A: So I might be teaching a little bit, teaching a fetch how to swim. So any questions you have, you can ask them at the end. Let me share my screen and let's get to it. All right, let me quickly do this. All right, so, bent out liquidity crisis. About two weeks ago, right, another big crisis started circulating on crypto, Twitter. Something, something, blue chip, NFT, bored apes, something, something, bent out liquidity crisis.
00:01:15.278 - 00:01:58.400, Speaker A: So we started seeing tweets like this where people are talking about serious peril of liquidation. Biggest risk to the NFT market, bandao and board ape, yacht club loan liquidation can nuke the entire NFT market. Bandao has run out of ETh and lenders cannot pull their money out. And also Pentagon, hexagon, autogon, octagon, your money, gone. So I see these tweets and I'm just like, wow. Like, I'm scared, but I'm also confused at the same time. So today we're going to talk about, you know, what is Bendao and why it exists and the liquidity crisis, what is that? And what happened with Bendao's liquidity crisis, and then finally cover some factors that helped to avert this crisis.
00:01:58.400 - 00:02:34.100, Speaker A: So, first, let's talk about what's bent out. Let's take a step back. So, NFTs, especially the blue chip NFTs, like board apes and builtin apes and doodles, right? They are pretty valuable, but they are also highly illiquid. So think about a house that you just bought. It's very nice, you love it, it's very expensive, but you want to do something with it, but you can't. So you don't want to sell your house because you just bought it, right? But you want to be able to, like, get the liquidity from this very valuable thing and do more about it. So, basically, bend out would allow you to do this.
00:02:34.100 - 00:03:26.710, Speaker A: So bend out is a peer to pool lending solution. So, meaning on one side of the equation, we have the blue chip NFT holders, and they will deposit, they will basically deposit their nfts into bandao as a collateral, and in turn, they will borrow ETH, and then they will pay back the ETH with interest. So on the other side, you have the liquidity providers, where they will deposit their ETH into this pool, and then, in turn, they will get rewarded and earn some interest. So, in a nutshell, like, a very simplified version, this is what Bendao does. Bandao is a liquidity solution for the blue tip NFT holders. And you might have heard other competitors, such as NFT Phi, who does more like a peer to peer lending solution for nfts. And recently, we've also seen pseudoswaps.
00:03:26.710 - 00:04:25.182, Speaker A: But, yeah, so let's just to understand Bendao a bit more, and let's walk through an example. All right, so let's say that I have a board ape. I do not, but I dream about having one. So let's say I have a board ape, and currently the floor price is 100 eth, right? And even though these are bluetooth Matisse, they are actually quite volatile, and we can see that through duoanalytics dashboard. So claunch team here has very nicely put together a kind of a chart of the NFT floor price, the median price, and the volume for us. So we can see, like, take. We can see the volume fluctuates, and we can also see that the blue line here, the blue line chart here is the ten percentile of the price, which approximates to the floor price.
00:04:25.182 - 00:04:51.908, Speaker A: So we can see that it actually quite a lot similar for cryptopunks. You see the drops of the drops and then the mutant ape. So you kind of get the idea that these blue chip nfts, while they're blue chip, they're still quite volatile. So you can't really treat them, like, as your house. Okay, so I have one, and now I need liquidity, like we previously talked about. I don't want to sell it, but I need liquidity. Potentially, I want to flip more, you know, monkeys to make more money.
00:04:51.908 - 00:05:22.886, Speaker A: And actually, you probably see this guy around already. So his name is literally Franklin 68, and he talks about how he utilizes bendao to kind of, like, keep flipping and, like, make more money. So, yeah, let's say I want to, like, imitate his strategy and do similar things. So then I come to Bendao, and I want to borrow some money, and then I check the terms and conditions. So bandao has this risk parameter. So in one of them is called loan to value or collateral ratio. So.
00:05:22.886 - 00:05:50.190, Speaker A: So here we see that for the board ape collection, it is 40%. So what does that mean? Meaning that, like, the floor price right now is 100 eth, supposedly. And then I can borrow up to 40% of 100 eth, which is 40 eth in this case. So I check the parameters and. Okay, I decided to borrow 40 eth. All right, awesome. And then next, once I borrow it, I know that I need to pay back the 40 eth with some interest.
00:05:50.190 - 00:06:24.530, Speaker A: Right. So that's something that I know. And another thing that I need to monitor is the health factor of this loan that I took out. So, a health factor. The equation for that is the floor price of the collection times the liquidity threshold. This is another risk parameter that is set by bent out and then divided by the debt with the interest. Okay, so what does that mean for us in this scenario? So the floor price currently, supposedly for ward ape, is 100, and then the liquidation threshold is 90%.
00:06:24.530 - 00:06:49.424, Speaker A: We can check on this other side. I'm going to switch back to the documentation you can actually see. Okay, currently it's actually at 85%, but while we were going through a liquidity crisis, so previously it was actually 90%. So we're going to just use that as an example. And then I borrowed 40 ethan as the principal debts that I have. So 40 e. And then the interest, let's say the interest at the time was 25%.
00:06:49.424 - 00:07:29.334, Speaker A: So times one plus 25%. So using this equation, I calculate that my health factor currently is 1.8. All right, so what exactly does that mean? We can go into that documentation and take a look. So, health factors, as we can see here, there's different levels, but if it's below 1.0, then it's like you're in danger territory. Why is that? Because it says when the health factor in an NFT is below one, anyone can trigger a liquidation in terms of an NFT auction. So that's kind of like when you cannot pay the loan, the mortgage on your house, and then the bank decide to foreclose your house.
00:07:29.334 - 00:07:55.696, Speaker A: It's kind of like that. So, yeah, so I do not. Definitely do not want my health factor to fall below one. On the weekend, we'll talk more about, like, exactly what the, you know, the auction means a little bit later, but for now, just remember I want my health factor to be above one. And right now it's 1.8, so I'm quite happy. And then some time passes, and now there's a warning sign.
00:07:55.696 - 00:08:26.750, Speaker A: Why is that? So the floor price of board ape drops to 60 eth. Right. So, as we have seen, in the previous chart, like the. And these blue chip nfts actually are quite volatile at times, so it drops to 60 eth, and it creates a problem for me. Right, so this is the health factor equation. So instead of 100, I now have 60. So mathematically speaking, like the top part of this equation goes down, then my health factor will go down already, right? And there's another thing, which is the interest rate that I'm paying back.
00:08:26.750 - 00:09:01.472, Speaker A: So the interest, the borrow interest rate is actually tied to the utilization rate of. And let's kind of like explain what that means. So first, let's go into their documentation. So this is a chart that the bandao has about how they determine the model that they use to determine the borrow rate. And the borrow rate is tied with utilization rate. Okay, so what is utilization rate? Utilization rate is the amount of money being loaned out divided by the total liquidity that they have in the pool. So it's like how much liquidity is being utilized in this ETH pool.
00:09:01.472 - 00:09:38.044, Speaker A: So as the utilization goes up, you can see the borrow rate goes up drastically, right? So according to their documentation, we know this. And actually with June, we can see all these data happening. We can track the borrow rate throughout time and utilization throughout time with a doom chart. So here we've written some query and then we can track. Actually, you know, it's a core, it's a positive correlation between the utilization rate and borrow rates. And then we know, kind of like around two weeks ago, right? Like August 19 20th. That's when like all the crazy stuff started happening.
00:09:38.044 - 00:10:17.052, Speaker A: And we can actually see the utilization started like going drastically up. And then the borrow rate also went up to like over 100%. Yeah, so. And why? Why is that happening? So think about it. When we had the floor price drop for these blue chip nfts, there is a market panic, right? And people started losing confidence and the liquidity providers started pulling out their ETH. So remember, the utilization is the amount borrowed divided by the liquidity available. So when the bottom part, when people start pulling out their liquidities, right, the utilization will jack up, but also the interest rate will jack up.
00:10:17.052 - 00:10:50.964, Speaker A: So like this just creates like an unhealthy cycle for band out in this, in this instance. And we'll talk more about that later. But yeah, so for now, we understand coming back to the, to the floor price drop. So for in our scenario, the floor price drops to 60 eth, and then also the interest rate goes up because of the utilization shoots up. And using the same equation, I now have a health factor dangerously close to one. I have a 1.015 health factor, and we know that when the health factor is below one, bad things can happen.
00:10:50.964 - 00:11:16.860, Speaker A: Liquidation can be triggered. So let's. We can go into this one more time to kind of see what is happening. So when it goes into, you know, this liquidation stage, you have a period of time. So previously it was a 48 hours. As the loan borrower, you have 48 hours to either partially pay back your loan or, you know, completely repay, or you will choose to default. So that's as a loan loaner.
00:11:16.860 - 00:11:54.230, Speaker A: As a borrower, that's why you have. And as liquidators, someone has to place a bid to kick off the auction process, and then they are the liquidator. They will in turn start liquidating this loan that you have. So these are the two things that can happen in liquidation. And just one more thing to mention, there is actually some requirement for the bid for these liquidators. So the first bid has to be, the price has to be greater than the total debt. And previously, when the liquidation crisis was happening, the bid also must be 95% of open sea floor price.
00:11:54.230 - 00:12:39.922, Speaker A: So let me just repeat that. So it has to be not only greater than the total debt, but also greater than 95% of the open sea floor price. So as a liquidator, what you're going through in your mind is like, oh, like, the upside might be like 5% if I can indeed be able to, like, sell this liquidated NFT. But also, remember, there's, like, a certain period where your, your, your money is just locked. So if you place a bid and let's say the period is like 48 hours, so basically, you're locking up your bid, the money for your bid, for 48 hours, but the floor price, as we have seen, like, fluctuates. So it could drop while your money is locked with, with Pendao for your bid. So, yeah, so that's something to keep in mind of going back to our example again.
00:12:39.922 - 00:13:18.280, Speaker A: So, you know, I don't want to be liquidated. So I basically go find some money from under my bed, like, behind the wall, and I decide to repay my loan, and I redeem money. So, happy scenario for me. Yes. So that is, in a nutshell, like a walkthrough of what Bendao does as an example. So now with the knowledge of Bendao, let's talk about what is a liquidity crisis. Okay, so liquidity crisis technically happens, means that you don't have enough cash where assets such as cash on hand.
00:13:18.280 - 00:14:13.418, Speaker A: So, you know, think about if you're a bank I'm not saying this is what happened, but if you're a bank, you are. You have depositors putting money in your bank, and then all of a sudden, you know, these depositor market conditions goes down, and then they start losing confidence, and they line up in front of your bank to decide to withdraw, um, their assets, and then you don't have the money to, to give it to them. So that's kind of what happened during the depression, great depression. And that's kind of like a mental picture that you can have for liquidity crisis. Um, and and as for, um, do. As for bend Dow, let's start with some visuals, and we'll, like, dive in with diagrams of, like, what triggered the liquidity crisis and what exactly happened. So let's go into this dashboard, and then let's hone in on this particular visual in front of us.
00:14:13.418 - 00:14:37.708, Speaker A: So in this is a chart area, area graph where the blue represents the amount of available eth in the bend out reserve. And as we can see, you know, there's drastic. This is a zoomed in version between August 19 and 24th. So, as we can see, Jurassic Cliff. Okay, here, Cliff. Here, Cliff. And at some point, they kind of, like, they basically approach zero.
00:14:37.708 - 00:15:10.320, Speaker A: So there was, like, zero eth available to be borrowed and to be paid out. Okay, so that's one visual to help us understand about the liquidity crisis of bent out. Another visual I want us to look at is this one here. We have the total liquidity versus the total borrowed over time since the bendout contract is deployed. So the green area chart represents the total liquidity that we have. That they have. And then the orange represents the total borrowed amount that they have.
00:15:10.320 - 00:15:52.420, Speaker A: All right, so we always, in a healthy situation, we always want the green to be bigger than the orange because we always want more liquidity than that was loaned out. Right. But as you can see, you know, it has been pretty healthy throughout. But then in the liquidity crisis about two weeks ago, what we are seeing, actually, is that the borrowed amount amount exceeded the total liquidity, meaning that on paper, they didn't really have enough eth to cover the amount that's being lent out. So this is going back to the original definition. Like, liquidity crisis occurs when there is a lack of cash or liquid assets. So that's, you know, what's happening.
00:15:52.420 - 00:16:33.812, Speaker A: So, yeah. So take these two images with you mentally, and we will go into a bit more detail with a visual on kind of like, understanding what was happening and why it happened that way. All right, so let's look at here. So some major parties that we should consider are the amount that was borrowed, the amount of liquidity that, that they have. And also another added factor is the collateral value. So kind of like a reminder what collateral value is. When you have an NFT, kind of like a house, you are able to actually have some value with that NFT.
00:16:33.812 - 00:17:23.766, Speaker A: That's why it's used as a collateral, because if you don't pay back your debt, then whoever holds that, in this case banned out, they can decide to auction off this NfT you have, and they can recover some. So there is a value associated with these I collateralized NFT. So that's another factor that we should keep in mind. And then also later on, liquidators are another factor that we will consider. But let's look at the happy scenarios, right? So in happy times, the total amount of liquidity, this green triangle, should always exceed the total amount being borrowed, this orange triangle, right? And that means that there's always enough money to cover the amount of debt that's being lent out. And then also this blue circle here represents the collateral value. So that's like a safety mechanism for bent out.
00:17:23.766 - 00:18:15.058, Speaker A: So that's happy. But in the unhappy times, kind of like in the liquidity crisis that we saw. So first the total amount of liquidity will dwindle. And it did dwindle because we talked price foul, right? People kind of like went into a panic mode and they, people started withdrawing their liquidity from this reserve. So the total liquidity goes down, while the total amount being borrowed not only stays the same, but also it would grow more, because as we have seen previously, the interest rate would occur at a much higher rate than before because the utilization rate goes up, right? So we have the situation where there's more being borrowed that is more than the total liquidity. Not a good thing. But also because the very fact that triggered this means that the collateral value also goes down, right? Because the floor price goes down.
00:18:15.058 - 00:18:57.256, Speaker A: So the value associated with these collateral also dwindles. It shrinks a little bit. So that's what kind of what you have on hand. But what was worse for a few days, for bent down, was that they were kind of counting on auction to work. They were counting that the liquidators will start placing bid to help them recover the value. But they were stuck with these bad debt because nobody was placing a bid, right? So then they in turn started, like, examining what was happening to start incentivize people to start liquidating more or to put in more liquidity, which we'll cover at part three. But basically, at this point, the liquidators didn't have enough incentive to liquidate these bad debts.
00:18:57.256 - 00:19:27.630, Speaker A: So, like, you might. So they were in danger of being stuck with, I believe they call it floating bad debt. Yeah. So that was what was happening with bandao bend down liquidity crisis, and what really triggered it. So now let's get to the part where coming back to here. Right. So being on chain data analyst, we want to be able to also do this ourselves for either Bendel now or, like, for any future protocols that's similar, we want to be able to track the available eth.
00:19:27.630 - 00:20:04.518, Speaker A: So today, we'll build this query together and construct this graph together. So let's start a new query. Let me go to zero, close a few windows. Okay, so I'm going to start a new query, arrive at the query building part. So here I'm going to select V two, because it's powerful, so why not? All right, cool. Awesome. Gonna do this.
00:20:04.518 - 00:20:40.248, Speaker A: All right, so what we're gonna do is track the inflow and the outflow of the money. So whenever we want to track the inflow and outflow of money, we especially like ERC 20. In this case, we can look at this table called ERC 20 event transfer and just like a bit backup if you don't know what ERC 20 is. So in general, there are, like, two token standards that you should know, ERC 20 and ERC 721. ERC 20 is for fungible tokens. So all the. All the coins that you think about, they belong to the ERC 20 group.
00:20:40.248 - 00:21:20.750, Speaker A: And then ERC 721 is for non fungible tokens. So all the nfts. So all these monkeys doodles that you see out in the market. And there's actually a standard of how you should implement these contracts. And if you want to know more, you can go to openzeplin. So you can just search Openzeppelin and then ERC 20, and then you can just read more about, you know, what are the functions that a ERC 20 should call and what are the events that it should emit? But, yeah, so for now, we will actually just do ERC 20 event transfer. We'll just track this.
00:21:20.750 - 00:21:45.516, Speaker A: All right, cool. So it has, like, a few different chains. So I'm just going to select the ethereum chain, because Pendao is on the Ethereum chain. All right, so we are going to. We are interested in the inflow of the money. So, you know, I always just love the select farm part. Get it set up.
00:21:45.516 - 00:22:16.400, Speaker A: Okay. So in order to get the flow, what do we need to do? We need to understand how the money actually flows. Bandao actually has quite an awesome documentation. So if you search for bandao docs and then you can actually go into their device, you can read more about it. But for now, I'm just gonna use like a quick visual to help us understand, like, what was going on in all these contracts so we can track it. Okay, so let's go into this board. I will close these two for now.
00:22:16.400 - 00:22:35.640, Speaker A: All right, cool. So we want to know the inflow, which is the deposit function and event, right. So when that happens, we are. Let me see if I have a pen that I can draw. Okay, cool. So as a depositor, I deposit my Eth into the weth gateway contract. Gateway contract.
00:22:35.640 - 00:23:24.208, Speaker A: And then the wrapped eth will then get sent to the bend weth. Okay, so why do we need to do this? Token of ethereum chain. Right, so in order to do any action, we need to wrap it into wrapped eth or wealth then for, for Benda, specifically, the way Bendao can kind of like keep accounting of like the interest that's accumulating and stuff. It's, it converts into like a token. So it converts the bent weth into a, sorry, it converts the width into a bent width. So what's happening? And this is the part that we are tracking for our inflow. Okay, so now we just need to know the contract address for weth particularly and bend weth.
00:23:24.208 - 00:24:04.364, Speaker A: Okay, so how do we do that? Let's first go to ethereum ether scan, and then we can believe you can just search for. Yeah, so wrapped ether is super searchable. So you can just do that. I'm copying the address of this. So then going back to my queries. So I'm going to filter where, and let's see, so low, see this contract address because we saw on this other part here, right, so it's like weth and bend weth. So here, contract address equals to lower because we need to lowercase the contact address.
00:24:04.364 - 00:24:39.216, Speaker A: Uh, here. Um, yeah, so this is, uh, uh, okay, so another thing is it's sending two, you know, bandwidth, right? So two equals to lower. So we need to find that. Um, and let's see if we can find interest. And I might not be able to find it, which is the part I will, yeah, I will just resort to the documentation. Let's see, so bend tokens. Do I have it here? Nope.
00:24:39.216 - 00:25:11.970, Speaker A: So let me go to one of their contract and just take something. So I'll go contract address for this and I will just take a random transaction. Okay. And then I found the bandwidth that I have. Okay, so I have found the band interest bearing with address. So I will copy that part and then I will go back this part. And so this is bend width.
00:25:11.970 - 00:25:43.120, Speaker A: Okay. And also something to just help us speed up the query is to filter by the event block time. So here I felt here basically, okay, I can check for the bandwidth. So whenever the goes live, right, then I can start tracking. So I can drastically reduce the amount of the block that I'm looking at. So I believe somewhere let me go to the contract address. So go into the contract for band interest bearing with.
00:25:43.120 - 00:26:27.994, Speaker A: Yeah, so I go to the internal transactions tab and I can see that there's like a contract creation being done on the 19 march. So that's what I'm going to filter for anything. Like any event transfer happened beforehand because bandwidth was not even life. So I will do that. So the event block time is greater than or equal to 20220 319. So this is when Bend west was contract was deployed. All right, cool, awesome.
00:26:27.994 - 00:26:57.356, Speaker A: So next part I will just grab what I will need. So first I will need, I want to because I'm trying to build something that is accumulating through time, right. Like it's throughout the time span. So we definitely need to grab this event block time column. And for now I think I'm just gonna do the minute. So I don't care about second. That's too granular for me right now.
00:26:57.356 - 00:27:24.270, Speaker A: So I will truncate to the minute. So this effectively will take that time stamp and truncate it to like every minute. And then I'm going to call this as day for now. And also I want to, I care about the value. So the value is what's being transferred. Right. And then we know this is kind of like eth based and we know the decimal is one is 18 decimals.
00:27:24.270 - 00:27:58.320, Speaker A: But if you don't know, I believe you can just look it up. Yeah, you can just like on, even on etherscan you can you look it up? Yeah, I actually lost the other one, I think. Let's see, we can quickly go back to. Yeah, so you can see that the decimal is 18th and also on dune there's like a token table you can query for and it will tell you how many decimal this token belongs to. So there's quite a lot of ways you can find out the decimal associated with this particular token. So for now we know it's 1818 decimals. So we're just gonna divide it by one.
00:27:58.320 - 00:28:42.136, Speaker A: And this is all because there's no such thing as like decimal in blockchain. So in order to represent decimal, you have to just make it like a really, really big number. So yeah, so this is what I want. But because I was saying that like, you know, every minisecond might be too granular for me and I want it to be every minute. So I want to sum up the inflow for every minute. So I'm going to apply a sum function and then I'm just going to call this column amount. All right, so, and then at the very end I will do a group by so group by one just denotes, just means that it is grouping the whatever value here by the first column.
00:28:42.136 - 00:29:20.350, Speaker A: Okay, so let's run this quickly. So effectively, this part I am tracking in the inflow of the amount of eth. So here, bend width that they have every minute that's available, basically. So now, okay, so now we've got the inflow, right. We care about the outflow, which is why we can get to the net flow part. So going back to visual. So when we have an outflow is when someone starts, decides to withdraw money.
00:29:20.350 - 00:29:58.054, Speaker A: So when a user decides to withdraw money, it would send its bend weth back to the weth gateway. And then in turn the wealth will also trigger something where it's like sending from the bend weth. So this is the part that we're really caring about in our query tracking. So we know it's still the weth contract as the address. And we know instead of the two, like last time up here, we care about the from. Okay, so that's pretty easy. We already have the query mostly written, so we can just do this.
00:29:58.054 - 00:30:19.384, Speaker A: And then we're doing outflow. Right. So here this is, and then instead of a two, it's a from. So I'm sending from to something else. And so here you can see the from is highlighted. It's because from is a keyword. So I am applying these, how do you call it? These, not quotation, but these backstroke, this dot.
00:30:19.384 - 00:30:49.700, Speaker A: So the upper left corner of my keyboard, I'm applying this to make sure that, to escape the keyword, basically. And then because this is an outflow of money. So previously it was positive, so we don't need to say anything. But here it is a negative flow. So I'm putting a negative sign in front of it. And then this part, let's see. So this part will track the minute by minute outflow event for my bend weth token.
00:30:49.700 - 00:31:20.990, Speaker A: And cool. So this all looks fine. So we all have negative amount happy stuff. Okay, so now we're gonna do something called union all. So the union wall basically would help sum up, you have to, that the column has to match up. So we have the column day and we have the column amount. So it will basically sum up the, the column, the values of these.
00:31:20.990 - 00:31:56.496, Speaker A: So effectively, like each day, it will just plus this amount in the inflow. And minus is found in this, this outflow. And then it would derive at the Netanyahu amount. So when I do this, it is the net flow, I guess I will say netflow. Okay, so it's like minute by minute. Whenever there's an event happening, a transfer event happening, whether it's in or out, that is the net for that particular minute. Okay, so now we have the inflows and outflows.
00:31:56.496 - 00:32:49.226, Speaker A: But what we need to do in order to get to this part, right, because we actually care about like cumulatively, what's happening cumulatively from the time up to the bandwidth comes online, what is the cumulative balance of this particular token. So in order to do that, I'm going to do a CTE clause. Okay, so here I will do with Cte as, alright, so here, this part. And then here I am going to do. So select from, okay, Cte st just to make it a little shorter. So t day. So obviously we care about each, the day.
00:32:49.226 - 00:33:15.140, Speaker A: The times here is minute. I should have actually minute. And then I want to know, okay, minute by minute, what was happening, the amount wise. And also this is the part I want to do a cumulative sum, right? I want to do a cumulative sum of the balance. So first I can apply the sum function t dot amount. Okay, so here we are using a windows function. Okay, so a windows function.
00:33:15.140 - 00:33:43.902, Speaker A: So basically this will help us. Let's see what with this, right, so August 180. So essentially we want to have like a separate column where we want to see, okay, 0.5 in the first line, but then the second line will be like 11.3 plus 0.5. So that's like cumulatively, cumulative sum rolling up to the balance. So how we can achieve that is first we want to order by a certain order, and in this instance, we want to order by the time.
00:33:43.902 - 00:34:34.540, Speaker A: So the t day for us. And then we can say rows between unbounded proceeding and current row. So effectively this, the rows between unbounded rows between unbounded proceeding and current row is literally helping you aggregate until your current row. What has happened? So this is the cumulative sum that we need to do. And we'll just call this and yeah, so let's run this. And this is the part where it's like summing up all the individual net flow and then we eventually get to the cumulative. Cumulative balance.
00:34:34.540 - 00:34:57.592, Speaker A: Right. So Tada. We have that already. So we can see, okay, cumulatively, this is what's happening. And then we can even see, okay, up till September 1, these are, you know, what's happening. And so once we have the data results, we can create a visualization. So clicking into new visualization and what do I want to do? I think previously we did an area chart.
00:34:57.592 - 00:35:16.974, Speaker A: So let's just do that. So we can do an area chart, add visualization. So here. And so you're defining the X and Y. So the x is day perfect, the Y. I actually want the EtH balance perfect. And yeah, so here I have my area chart and obviously I can go to make it a bit more.
00:35:16.974 - 00:35:47.330, Speaker A: I can like type the name to be, you know, whatever, it's more readable availability and I can even change the color and stuff. And you get the idea. And then once I'm happy with it, oh, I should save the query and then I will be able to add it to the dashboard. Yeah. So that's how we can get to the part of the borrow in the. Sorry. That's the part where we can get to the available Eth chart.
00:35:47.330 - 00:36:19.722, Speaker A: So next, in order to construct this chart, maybe let's just quickly walk through how we can get the borrow interest rate. And this part, how we can get to it is by reading the documentation. And it has extensive documentation on, I believe I just found borrow interest rate. Let's see. APR guides. Okay. It tells you exactly what's happening and on chain how you're able to get the borrow rates.
00:36:19.722 - 00:36:58.560, Speaker A: So by reading the documentation, you kind of know what contract or what table you should look for. And because Dune already decoded this table, so you can just query nicely from them. So now, because like, we already tackled the part where we are seeing the inflow and outflow of the ETH available in their reserve. So next, let's just see how we can also get the borrow rate throughout the timeline for them. Yeah, so let's first, I will go into here. So as I mentioned, vend is a deep coded project. So here I come to the decoded project.
00:36:58.560 - 00:37:21.888, Speaker A: And then I type Ben. Awesome. And then I find Ben. Right. Okay, so this is the part I need to find, like what is the exact table where, like contract where the method I need to, need to, need to query for. So I know that I'm interacting with lending pool because previously we sold under documentation it's landing pool. And then just going back to this side.
00:37:21.888 - 00:37:44.552, Speaker A: Okay, what do I need? I need some sort of like reserve data stuff. All right, so I back to my query. So let's see, let's see if I can find anything that is related to reserve data. So let's just type for that. Okay. All right, awesome. Awesome.
00:37:44.552 - 00:38:15.908, Speaker A: So I can see that there's an event that I can query from. So they've done an awesome job for data analyst. We can get the reserve data updated. So let's just start another query. So let's call this rate. Okay, so, okay, so same thing. We're going to grab the rate per minute as we previously has done and then aggregate it up into a cum accumulative.
00:38:15.908 - 00:39:03.160, Speaker A: But like, and then like make it so that it's like through throughout the day to put it together on the same chart. Okay, so first let's go into this table and see what we can query for. So from. And then I'm going to select start from bend Ethereum landing pool event reserve data. Okay, awesome. And I mean like by this point I know that there's only wealth in this, but just so, just to illustrate, like how you can get the name of the token if you only know the address. So we can also, there's this table called token Ethereum, ethereum ERc 20.
00:39:03.160 - 00:39:38.248, Speaker A: So if you don't know this, you can just, uh, you can go back to the, you know, search data set one and then you can do like, okay, token ERC 20. Okay. And then you can like select Ethereum and then you basically can get to then this table. So this table, let's just quickly take a look at like the columns in this table. So this table is kind of like a lookup table where you have the address, the contract address and the decimal. Previously we talked about the decimal belonging to this token and it's symbol. So this is like a nice dictionary lookup that you can, you can have.
00:39:38.248 - 00:40:06.900, Speaker A: So we're gonna do this and then we're gonna do that. And then, so the way we can join these two is by the contract address. So we're doing the contract address of this table is equal to this one. Let's call it b. And then let's just go back to Bendell quickly and see the available columns here. Bend. And then lending pool is the contract that I want.
00:40:06.900 - 00:40:26.876, Speaker A: Lending pool is the contract. And then instead of lending pool, we were looking for razor data. Get data updated. Okay, cool. So, awesome. And then here, the column that I'm looking at is reserve. So I will just do b reserve.
00:40:26.876 - 00:40:51.712, Speaker A: So reserve is the column that requires the token contact address. Okay, so what do I actually want? So first, I obviously want the event blockchain. And then we're going to do the same thing where we're truncating it to the minute. So minute and then do this and then just going to be same as days. So. Okay, so next we're truncating. Okay, so next, let's.
00:40:51.712 - 00:41:17.644, Speaker A: Let's find what we need. So we need the availa variable borrow rate. In this case, just reading their documentation, we know that this is the field that we need to. We need to grab. So let's grab this field. However, as we were talking about previously, we are kind of like grouping things together because instead of every timestamps, like seconds, we're grouping up two minutes. So we are aggregating by some sort of function.
00:41:17.644 - 00:42:03.728, Speaker A: So here we're going to use the avg function. So to get an average per that minute as the rate. And. Yeah, so, and then I also want to make sure that I'm looking for, like I was previously saying we should query for. I'm just going to copy paste this from a separate place that we have, given that we're kind of running behind. So, yeah, so we're truncating the day to be greater than March 22 because I was looking at someone else's query. Basically, this is the second day that Bendel came alive.
00:42:03.728 - 00:42:24.480, Speaker A: And then the logic there is like, we don't want this to be volatile. So we're starting to track the rate from the second day. But obviously, like, we can do this for whatever, like the March 19 or whatnot. But here I'm just filtering for a time that's reasonable. And then we're going to do a group by one. And then just because I know I'm like looking for. Let's see.
00:42:24.480 - 00:42:49.390, Speaker A: And then here, I will grab the rate. Sorry. Symbol in. All right, so this should work. What's happening? Let's see. Syntax. Syntax error.
00:42:49.390 - 00:43:05.540, Speaker A: Near t, left. Join on. Sorry. Third try. Third time. Really near. Ah, I am forgetting these.
00:43:05.540 - 00:43:24.444, Speaker A: Live query running. All right, looks like it's running. Okay, while it's running. Something else to denote. Something else to denote. Right. So these rate looks like crazy high numbers.
00:43:24.444 - 00:43:58.550, Speaker A: So again, we're going to, like, go back to the documentation side and somewhere in the documentation actually tells us that the rate is denoted by. It also has a decimal. So it's like the 29 is decimal. So what we need to do here is to divide it by the 29th. So one e to the 29th. And then also, because we kind of went 8%, so we can times it by 100. So to get that percent.
00:43:58.550 - 00:44:29.090, Speaker A: So we are going to rename this as borrow rate. All right, so now we should have a more reasonable borrow rate that aligns with what we are expecting. Yes. Awesome. Awesome. So now we have the rate. And then one last thing to get to this particular chart where we're having the borrow array side by side with the balance is that we will join this two tables that we just put together.
00:44:29.090 - 00:45:05.930, Speaker A: So we're going to do a left join right on rate. I will call this r equals to the D day. And then let's just make a nice order by one. And then we are going to have the borrow rate right here. So we're going to call it rate borrow rate. Awesome. All right, so once it.
00:45:05.930 - 00:45:40.744, Speaker A: Sorry, it probably was too small for you guys. Apologies. So once we have this, now we have both the Eth balance and the borrow rate. And there's some null there because we started, we decided to, you know, start tracking the rates a little bit later than when the bench was deployed, but effectively can see the borrow rate side by side. And then. So one last thing that we can do here is to add the borrow rate right here and then make this a line chart. And obviously, it is like a less than one all the time.
00:45:40.744 - 00:46:12.830, Speaker A: So it's going to be super small. So we're going to enable a right axis, and then we're going to do the borrow rate on the right axis. And. Yeah, so now we have constructed this chart where we are also able to start tracking the available ETH side by side by the borrow rate. Yeah. So that is the query that we're building together today. And lastly, before I turn it over to question and answer, let's just quickly wrap up with, you know, what happened after the crisis.
00:46:12.830 - 00:46:30.974, Speaker A: Obviously, by now we know that the crisis was avoided. So what factors that contributed to that, we know that floor price was a big factor. Right. So the floor price actually went up, which we can also, again, track it with June data. But you can see, I picked a few examples. You can see. Okay, it actually went up.
00:46:30.974 - 00:46:49.682, Speaker A: Went up. Went up. Okay, awesome. So the floor price went up. And then also they've decided to implement a few proposals to help with the mechanism, the protocol mechanism. So first, they remove the limitation that the first bit has to be 95% of the floor price. Right.
00:46:49.682 - 00:47:19.416, Speaker A: So this effectively really helps people like incentivize them to get like bigger profits, they will actually go liquidate. And also what you were mentioning, when someone place a bid and try to liquidate, they lock up their money for a period of the time. So this was actually 48 hours. So now they're gradually doing it to, to 24 hours and even less than, like, they're gradually easing into 4 hours. That was the proposal. So currently it's down from 48 hours to 24 hours. So these are the two incentive for the liquidators.
00:47:19.416 - 00:47:51.148, Speaker A: And then also they bumped up the incentive for liquidity providers. So they have a base rate plus some variable rate for whenever you provide liquidity. So they bumped up the rate to 20%. So that's another thing. And also to just make the whole like, protocol healthier, they actually proposed and started lowering the liquidity threshold. So remember the health factor equation we saw earlier, the liquidity threshold was 90%, and now it's lower to 85% and they're going to gradually lower it to 70%. So effectively the NFTs will default earlier.
00:47:51.148 - 00:48:12.450, Speaker A: So it will kind of be like less risky for the people who provide the liquidities. Yeah. So that's a, that is all from our side today about what happened with Bendao's liquidity crisis. And now we will welcome the team to be on the stage and they can help answer any questions that you guys have.
00:48:19.190 - 00:48:20.330, Speaker B: Let's do this.
00:48:21.030 - 00:48:21.770, Speaker A: Sure.
00:48:23.430 - 00:48:58.570, Speaker B: Yeah. Hello. Hello. First of all, my brain is exploding and I think the chat's mind has exploded as well because we got absolutely zero questions, which is a bit sad, but yeah. We have with us a Dunewizard, who has done great work on Bendao and one of the co founders of Bentow. So welcome, you two guys. Very happy to be able to host you here and kind of, kind of get your thoughts on the whole situation.
00:48:58.570 - 00:49:07.134, Speaker B: Can you guys both. Okay, there you are.
00:49:07.302 - 00:50:33.910, Speaker C: Yes, hello. I'm zero and I started building the, I think around the first few days when the contract was implemented, and at most founders for quite a few months and I think a few days ago and even before, during the kind of crisis stress testing to the project as well. So let's get back to the doom dashboard. So I considered and we do think that we should be looking more utility and more people behind it.
00:50:37.450 - 00:50:56.160, Speaker A: Nice, nice. Thanks for sharing your thoughts. Yeah, it was absolutely mental. When I saw your dashboard, I'm like, wow, this is like really nice and a really nice angle to really understand what is happening with like, what does Pendel does and what is happening with Bendel so it was very nice to look at for your dashboard as well.
00:50:59.220 - 00:51:25.630, Speaker B: Maybe can you, can you share some thoughts around the liquidation thresholds and the change that have been implemented now? Because before it didn't seem to work too well. The market was losing a lot of confidence. How do you guys plan to make this better in the future? Any thoughts that you can share there?
00:51:30.730 - 00:51:49.490, Speaker C: Yeah, like how does the simulation, what are the importance of implementing BFu nine and Bf ten and the. Maybe I could discuss.
00:51:54.630 - 00:52:07.860, Speaker B: Yeah, if he's even with us. I haven't heard him yet. Are you with us? It doesn't really seem like.
00:52:10.680 - 00:53:31.950, Speaker D: Yeah. And so let me just use the stress for the change, right? Oh yeah. Let me think how to, how to use those. Before we learn a lot of the bonding curve from the hua and we build the empty back loan protocol. But based on the rv, the bonding curve and the threshold before is 60 threshold, the decreasing threshold is 90 90%. And to be honest, we learned that from Avi and we know we do not study more, but after the liquidity crisis, we got a lot of attention feedback from the community and one of the community members, they post the proposal, the BIP nine, and they recommend us to change the liquidity threshold lower because the NFT asset is different from the year 20 asset. You know, the liquidity is totally different.
00:53:31.950 - 00:54:35.524, Speaker D: And we remember that is Monday and we see the proposal on the forum and have internal discussion immediately. And then we accept the suggestion from the community and then change the, change. The threshold will lower down the liquidation threshold. But you know, the liquidation, the liquidity crisis is so suddenly and we face, you know, the liquidity, liquidity situation. So initially we decided lower down the equitation threshold from the 19 to 17 directory. But later we got extra more feedback from the community. You know, the lower down is too fast and that will treat more blue chip NFT assets will be oxygen and liquidated.
00:54:35.524 - 00:55:00.940, Speaker D: Furthermore. So we discussed again and proposed the vip time. So we lower down from the 90% to the 80%, but we spread it in one month and every week we will lower down a little bit. So that is the situation.
00:55:02.530 - 00:55:27.870, Speaker A: Got it? Got it. So from your side, curious what you think the biggest factor that contributed to the crisis being averted this time? Because we were talking about the threshold, talking about the floor price going up and also the auction period and removing the 95% auction limit. Just curious on your thoughts on what is the biggest factor that contributed to crisis being averted here.
00:55:28.880 - 00:56:25.384, Speaker D: Yeah, that is a good question. And from our perspective, we think we say we improve some factors. First thing is, initially we realized that the yeast deposit, they withdraw the yeast because they can raise some bad debt on the bundle. But no one knows exactly how much the bad debt is. So we improve the UI display firstly and display how much the diet and how much the auction on the band. Currently I think that is the first thing we need. You know, everyone knows the DeFi is more transparent than the traditional file, but not any.
00:56:25.384 - 00:56:51.644, Speaker D: Not everyone know the key factor. You know, I think the east deposit, they concern very much about how much the bad on the bend dog. So we improve that. That is the first thing. The second thing is the oxen from the oxen side. Yeah, that is the lesson we learned from. From this liquidative phrase as well.
00:56:51.644 - 00:57:53.552, Speaker D: Because initially we learned the auction process from Aave. The aavE, their auxin is, you know, is for the Yasi 20 and we copy the auction process to the vendor. But when the liquidity crisis happen under the auxin participant is not easy because the barrier is high. You offer the price at least higher than the 90% of the diet. So it will limit the oxygen, it will limit the beater offer and we remove the barrier firstly. And then the bidder will be more easier as long as you offer the price higher than the debt itself and the bidder will be affected immediately. And that is one thing.
00:57:53.552 - 00:58:45.970, Speaker D: Another thing is we shorten the liquidation protection time. The time is 48 hours. And then we sorted from the 48 hours to 24 hours. And that will improve the bid efficiency as well. So after we did this, we think we how to say we can get the trust from the deposit and the liquidity from the community. And one more thing is more interesting and another crypto found in ESA this stay in Singapore, they post a proposal to invest Bendel with unguarantee 110 thousand. Yes, as the liquidity.
00:58:45.970 - 00:59:12.380, Speaker D: I think that is one more thing to help us build to go to the trust from the community and the liquidity provider. So basically it's comprehensive process and. But we learn a lot of lessons from the liquidity phrases and yeah, that is the basic situation.
00:59:14.080 - 00:59:25.820, Speaker A: Nice. Awesome. We have a question from. I will try to display it. Have you changed robot debt strategy after the crisis?
00:59:26.810 - 01:00:05.320, Speaker D: Yeah, that is a good question. Currently there is a proposal at discussion on the forum. You can take a look at look at it and it's from the community member. It is in the proposal. A subdoo is proposed to process a bandage depth and the subdoor will just use the extra fund from. From the outside. At the same time and then we'll carry 10% of the protocol income as the treasury.
01:00:05.320 - 01:00:27.860, Speaker D: Together we will take the potential debt and that is maybe, you know, maybe a good solution to process or change the bad debt strategy and make it moving forward.
01:00:28.800 - 01:00:34.700, Speaker B: So you're basically thinking about kind of outsourcing the bad debt to a subdao.
01:00:35.800 - 01:01:26.230, Speaker D: I think outsourcing is not accurate. Basically the subdao is, you know, is belong to the vendor as well. But yeah, it's true. We plan to introduce more liquidity provider and outside investor to help us to take or process bad debt because currently the protocol income is not enough to process or take the bad debt and vendor because it's 100% owned by the community. And all the protocol income will be distributed to the v bank holders. So we change the bad damage strategy, including two sides. One is instill small liquidity provider investor outside.
01:01:26.230 - 01:02:11.010, Speaker D: Another side is we will reallocate the protocol income before we redistribute all the protocol income to the reibund holders. And. But after the proposal, we suggest allocate 20% of the, how to say not 20%, it's about 70% of the protocol income will be distributed to the v band and 30% of the protocol income will be tapped to the subdow treasury and for the furthermore bad debt, you know, process.
01:02:12.310 - 01:02:18.090, Speaker B: Okay, that seems like a very reasonable decision. I'm happy to hear that.
01:02:20.550 - 01:02:25.010, Speaker D: Not easy, but luckily we fixed it.
01:02:25.910 - 01:02:47.010, Speaker B: Yeah, there's one more question here. So do you think bank runs is an inherent problem of a pool model compared to the p two, p NFT lending model? So I guess like comparing NFT fi, which is like peer to like strictly peer to peer with this, your model, like maybe you have some thoughts there.
01:02:49.590 - 01:03:33.438, Speaker D: Yeah, that is a hard question, to be honest. Basically I agree with your, your opinion. The bank runs is, you know, as long as you run a bank and you have, you know, you have no right to print money. Right. And the bank run will be happening anyway. Yeah, we can't issue XC to the lenders, but I think it's how to say we focus on improved NFT liquidity. That is our target and that is why we build the vendor, the NFT market.
01:03:33.438 - 01:04:28.780, Speaker D: We think they need more liquidity to, you know, to learn this industry. And anyway, Bando is just one participant in the NFT industry. And when the whole empty industry, they face the liquidity problem and Bando will suffer from it as well. So I think that, I think, yeah, you can say the bank runs is inherent problem of the bendel, but the liquidity problem is not belong to bend off. Bendao aims to resolve the liquidity problem. And so we need to work together to launch the empty industry and industry, and we improve the liquidity. So that is.
01:04:28.780 - 01:04:32.500, Speaker D: I want to say what I want to say.
01:04:33.040 - 01:05:38.800, Speaker B: Yeah, I see. I guess like the, the more, like, all of these liquidation processes and kind of like, the more experience you have, the more you can basically prevent serious stuff from happening. So it may be good that this happened now and not when there's way more assets under management, because I think the changes that you have now implemented make it way less likely for investors to lose confidence, because before you said yourself, you just copied the other model, and that doesn't really work. For ERC 721, I was a depositor into this ETH pool, and I would have been scared as well, because the liquidation mechanism didn't seem too efficient. But now, going forward with these adjusted parameters of only requiring 24 hours and raising the minimum bid to 80% of the floor price, that sounds like a lot more reasonable. So I very much look forward to the future of bandao. I think these are really good adjustments.
01:05:40.020 - 01:05:49.080, Speaker D: Yeah. Thank you. I agree with you. I agree with you. I think what I say, if you cannot kill Bendel, you will make Bando more stronger.
01:05:54.820 - 01:06:13.170, Speaker B: One last question, maybe, and then we can end this one. So do you think, Ben, token emissions are sustainable long term? When will those shoot off? Shut off? Shut off? And what do you think the impact to borrow lend interest in the protocol will be?
01:06:14.470 - 01:07:16.140, Speaker D: Yeah, I think this question is about the token incentive, right. To the lenders and, yeah, initially, the token incentive to the lender and the borrower on the bundle is lasting five years. And so I think that in crypto circle, I think that is long enough. And after the incentive is finished, how to impact the borrow and lend interest? To be honest, I'm not sure, but I think in five years, Bendo will help a lot, you know, will help a lot to the empty industry in the liquidity improvement and the NFT asset, you know, the value discovery. So, yeah, we will focus on what we are building currently. So, yeah, I don't know what will happen in five years.
01:07:18.960 - 01:08:17.526, Speaker B: Yeah, also, like, I just looked at your website and actually, the ETH deposit APR, like the native kind of mechanism, the interest rate just for depositing is higher in ETH terms. So from the actual protocol revenue than it is for the bandao, like Bend, how do you say, subsidization, basically, like the token emissions that you are giving to these people. So I don't know, it seems like this will go through the classic cycle of like there will be token emissions and that attracts some like liquidity mercenaries but like over time like I think the usefulness of this product will prove itself and then like if there's tony emissions or not, like it won't really matter. So yeah, thanks so much for joining us. This was really insightful. Really, really cool to get to chat with you and get your insights on this whole saga and what you'll do going forward. Thank you agapeste for the great presentation.
01:08:17.526 - 01:08:46.497, Speaker B: Thank you zero arrow for the great dashboards that we certainly utilized a lot in creating this lesson. Really great pioneer work done on Dune here and maybe I'll drop the link to the dashboard in the chat in a second and give this man all the stars like he deserves them and yeah, thanks so much everyone for coming and this is it from us. Bye bye.
01:08:46.553 - 01:08:47.377, Speaker D: Yeah, thank you.
01:08:47.473 - 01:08:48.149, Speaker A: Bye.
01:08:48.649 - 01:08:50.569, Speaker D: Thank you. Thank.
