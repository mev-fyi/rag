00:00:00.170 - 00:00:40.410, Speaker A: Due to just the fact that every order is on their individual price curve. You don't have this concept of uniform price clearing. You don't have this concept of matching people directly, peer to peer and aggregating demand and supply. And so in a hyper tokenized world with fragmented liquidity, I think we will see batch auctions play out another advantage over this mechanism. And yeah, it's basically now up to us to demonstrate and show how, for example, with amms, maybe liquidations, really, that concept of having one price per token per block gives significantly more mev protection than just individual dutch orders.
00:00:42.910 - 00:01:15.314, Speaker B: What's up, everyone? Welcome back to another episode of Zero X Research. Before we dive into today's episode, I want to give a quick word from our sponsor, Hexens, the most hardcore security team in web three. Pioneering in ZK and novel cryptography, Hex isn't trusted by its tier one protocols such as Polygon. Working on their new ZkavM, we've also got mantle risk, zero, Lido, one inch, newbank, and more. You'll hear about them more a little bit later in the show, but be sure to stop by their booth at 832 at permissionless. And don't forget to mention Zero X research when you do so you can get a discounted quote. You'll hear more about them later in the show.
00:01:15.314 - 00:01:57.940, Speaker B: But first, as always, we're joined by two blockworks research analysts, Ren and Westy. Not this time to talk about a hot seat cool throne segment, but instead we are going to rift on friends tech, the thing everyone is talking about on crypto Twitter. Today is August 21, and we've got a great interview lined up with Felix, the technical lead at Cowswap. But again, before we jump into the friends tech talk, I do want to shout out our conference in Austin, Texas. It's permissionless, and it is the world's largest DFI and crypto native conference, bringing together builders, researchers, investors, and more people in the industry from all around the world into one place. And we would love to see you there. Westy, why don't I kick it over to you to talk about friendstech and what it's all about?
00:01:58.870 - 00:02:58.840, Speaker C: Yeah, absolutely. I've been having a lot of fun this week, but yeah, basically to give an overview. It's a new social crypto site that allows users to buy and sell shares of associated Twitter accounts or x accounts, and in return, you basically get access to an inat chat with the user. It's a progressive web app that's designed for users to basically access the site via their mobile device, their iPhone, their Android, et cetera, download it to their homepage. And that's sort of a way to have it feel a native mobile experience while actually bypassing a lot of Apple's restrictions when it comes to their App Store, because they're pretty restrictive when it comes to crypto, even allowing them to be on their App Store, as well as taking a cut from potential fees as well. So it sort of bypasses that, and it's taken crypto, Twitter by storm. It's onboarded, I think, close to 100,000 accounts, maybe more than 80,000 at this point.
00:02:58.840 - 00:03:45.800, Speaker C: And I think a lot of that is obviously due to teasing an airdrop with points based on factors such as invite codes, trading volume, et cetera. And yeah, they're able to onboard a ton of accounts, I think as a result of onboarding some large CT accounts, which then had them post about their experience, which then onboarded their followers and eventually made its way to celebrities like faze banks. And I think people are sort of realizing the power of this platform and the fact that they can earn trading fees based on how people trade their shares. And, yeah, it's been a crazy experience in the past week. I don't know if I can pass this off to Ren because I know you have a bunch of numbers on how much volume we've seen in the past week.
00:03:46.490 - 00:04:27.246, Speaker D: Yeah. So since inception, there's been roughly 32 million in shares bought, 25 million in shares sold. So that equates to a total trading volume of, give it, 60 million or so. The total value of all profiles is 21 million, with the top ten profiles being worth 4.1 million. The top profile right now is Racer, which is the creator of friends Tech. His portfolio is worth a coup, 777,000, although he's not the highest earner, so there's probably been less trading happening on his shares, but, yeah, it's been a wildly profitable and wildly successful protocol.
00:04:27.246 - 00:04:48.934, Speaker D: So far, it's managed to generate 2.8 million in protocol fees, apparently 56.8 million in protocol inflow. And if I had to guess, that's probably around 25% to 30% of base's total TVL. So it's definitely like a significant contributor to base. And there's been 1.44 million in cumulative transactions.
00:04:48.934 - 00:05:18.450, Speaker D: I don't know how much of those cumulative transactions are bought. I would guess a decent amount considering every large account gets bought, it or MEV immediately upon signing up, but definitely still respectable numbers nonetheless. And from a cash flow perspective, like a lot of people mostly large accounts have been completely raking. Kobe has made 142,000. Haska has made 98,000. Racer almost 100,000. Suju himself has made roughly 60,000.
00:05:18.450 - 00:05:44.140, Speaker D: Maybe he can pay off some of those three AC creditors with that. But, yeah, all things considered, it's been a crazy one week. I think it remains to be seen whether this sustains. I think a lot of crypto natives are betting on non crypto individuals to come on, whether that's sports stars, gaming stars, your models, or your favorite only fans, creator, whoever. But, yeah, exciting times.
00:05:44.590 - 00:06:22.098, Speaker E: Yeah, it's really interesting that we've seen this so far, and the way that the accounts earn fees is kind of interesting to me. So you're buying and selling shares of an account, which don't really give you, like, ownership of an account in any meaningful capacity. They just give you this gated access to a really shitty private chat. But it's interesting that obviously there's trading volume that goes on with those transactions, and then there's, I think, a 10% fee in total. Half goes to the protocol itself, all the other half. So 5% each goes to the actual account. So that's, like, how these fees actually get generated for the user.
00:06:22.098 - 00:07:08.290, Speaker E: So it is kind of interesting that there is some profit mechanism for the creator themselves. I think this is directionally correct. Kind of my framework for this right now is this is, like, a great proof of concept, but largely will need to be heavily iterated on. And what I'm battling with is like, okay, if this is really some perfect be all, end all solution, why not just integrate this into Twitter or x, formerly Twitter, and I could see them going this route now, every time I've mentioned that to someone or tweeted about it, the immediate response is like, oh, these are under registered securities. And I just think that is such a middle of the curve take. I don't know. I just don't see this getting regulated.
00:07:08.290 - 00:07:12.360, Speaker E: Like it's a stock of a legal ownership to the cash flows of a business.
00:07:15.530 - 00:07:40.782, Speaker C: Yeah, I would agree with that as well. It is a weird gray area, for sure, because I could see why someone could look at that, like, trading shares of an account. It kind of looks like a security. But I think you're right in that the way it's actually set up, obviously, I'm not a lawyer, but just the way that I see it is that if it's based on trading fees of the shares and not on the actual individual output of that creator, then I think it's completely fine.
00:07:40.836 - 00:08:03.030, Speaker E: But what do I definitely a bad name. I think you're just inviting unwanted attention by naming them shares. But even if you just. Maybe you can probably draw lines to how it does look like a true share of a business. But that's just like, objectively not what's happening here. I don't know. This is just not trying to buy ownership in the future cash flows of a person.
00:08:03.030 - 00:08:40.718, Speaker E: It's just like buying a community pass to that person. Which goes to, let's dissect what you actually get by buying a share in someone today. If you buy a share of an account, you just get, like I said, a private chat sort of thing, where it's sort of like dming, except if you have multiple people that own shares, you can ask the one person. Let's say everyone here has a share of westy. We can all ask Westy a question in this chat. But, Sam, you can't see my questions, and I can't see your questions, but westy can see them both. And we can both see, it's like, I don't even know if that's intentional.
00:08:40.718 - 00:09:12.800, Speaker E: I think that's just like, it's just a broken product, right? You know, I get it. Launch an MVP, get to market, try to build up some hype, see if there's even any level of product market fit, and then iterate on it, which that's probably the best way to get a product out the door. But in my opinion, if they don't start trying to fix this app, they're going to kind of miss their window of opportunity. When I'm trying to want to love this thing, but every time I open the app, something's wrong and it's a different thing every time. And I'm like, all right, what are we doing here?
00:09:14.210 - 00:10:20.354, Speaker D: I agree with going back to Dan's point about it being directionally correct. However, I do think that's sort of like two different subset of users, right? There's one subset which is kind of creators. The people who are probably using Patreon today, YouTube people, Twitch, streamers maybe, and then the other subset is influencers. I feel like an app like friends tech, especially with its sort of pricing curve, is much more suited for influencers, right? There's a lot of people that are out there right now basically saying, oh, yeah, why wouldn't only fans creator come onto friends tech? And they can rake in a huge amount of trading fees? But to me, I don't think that's their business model. Their business model is dependent on the constant cash flows that they're able to generate from only fans subscriber. Right? And that's kind of what they're banking on. Whereas if they move over, you're banking on trading volume, which I don't think will always be able to sustain, especially for a prolonged period of time.
00:10:20.354 - 00:10:53.130, Speaker D: And once that fizzles out, you're just going to be left with no value as a creator there. However, I think the alternative side of this coin is for influencers, right? They sort of thrive and live off that attention. People want to collect the clout. People want to belong, like, whoever the next biggest superstar is. Imagine if you got an up and coming actor early on. And I don't know, I do think there's definitely some interesting. I don't know if integrations is the right word, but, like, real world privileges.
00:10:53.130 - 00:11:40.346, Speaker D: If you buy a share of Brad Pitt, you get to meet him for the next film, like know, or you get to walk the red carpet with him or like something city like that. But yeah, I think the difference between creators and influencers is pretty apparent for me and their sort of use case for fence tech. I do think it'll be interesting to see how shares, or the value of shares, respond to real world events. I don't know. For example, imagine if Will Smith was on this app, right? And then we replayed the Oscar last year's where he slapped Chris rock on stage, and I don't know, it would be hilarious seeing everyone dump his shares for 1 hour straight. I think that'd be pretty funny. But, yeah, I am really looking forward to what the next wave of users that are onboarded onto fence tech is going to look like.
00:11:40.346 - 00:11:45.680, Speaker D: And I think that will be fairly telling, to be honest, of how sustainable this app will be.
00:11:47.410 - 00:12:32.218, Speaker E: I think they've actually done a pretty good job of this is trying to abstract away the fact that ETH is even a number on your screen. Like, the value of other people's shares is denominated on the home screen in like, honestly, the only way you really see Eth is like, on your own wallet in the home tab or something like that, or your profile tab. But I want to see them take that a step further. If you really want your everyday Joe to log in and start buying their friends and socializing on this app, I think you got to completely remove the ETH nominations away from it. And I tested something like this on my friends. I was like, what do you guys think? Completely normal, non crypto friends. I was like, what do you guys think about this? And they were all like, what the hell they had zero interest.
00:12:32.218 - 00:12:44.560, Speaker E: So I also think crypto Twitter is like, oh, this is our consumer app. This is our breakup moment. Buckle up. I'm like, all right. Most people probably don't want to financialize Twitter, to be completely honest.
00:12:45.490 - 00:13:11.900, Speaker C: The funny thing is, I've actually heard the opposite argument, that instead of denominating in dollars, we should denominate in ETH. Because when you think back to nfts, a lot of people were able to just shell out thousands of dollars because, oh, it was one ETh or a couple ETH or it didn't look like you're really shelling out all that much. But in us dollars terms, you actually were. And if people actually saw the amount that they were spending, they wouldn't spend as much. So there is sort of that two sided sword to that.
00:13:12.670 - 00:13:51.494, Speaker D: I would also echo dander a little. In terms of the echo chamber on Twitter, I'm not entirely sure this is a new paradigm yet. I know there's probably 100,000 active addresses, but if you look at the profiles of the most number of shares held or the most number of holders, that's Kobe, and he has 157 holders. That's like 0.1% of the human population. Even if that number was 1000, I wouldn't think that's very impressive in the grand scheme of a consumer app. Maybe if that number was like 10,000, I'll be like, okay, yeah, this thing has an x.
00:13:51.494 - 00:14:00.390, Speaker D: But 157 is nowhere close to sort of the first actual consumer app in crypto that's going to be widely adopted.
00:14:01.150 - 00:14:42.678, Speaker C: I mean, to me, I think the issue with that number specifically is the bonding curve that they used and the fact that you have to buy a full share of someone's account in order to have access. Whereas if they had some sort of smooth bonding curve, you could have fractional ownership over these shares, and I think you would see a lot more holders of something like Kobe or the top accounts, where it costs two eth to buy a share, which most people aren't going to throw out to a new application. Right. But if you could buy 0.1 eth of Kobe, I'm sure a lot of people would do that. Right? So I think that's one step. But to me, I think this is a worthwhile experiment as a whole.
00:14:42.678 - 00:15:52.366, Speaker C: Yes, I definitely don't think this is the end state, but I think there's two key things when it comes to creating a new social network that crypto allows to do a lot better. And I think we're sort of seeing inklings of this. I think one is like bootstrapping a new user base. That's like the biggest issue with new social networks is how do you get your first user base that loves the product and gets other people on board, and using crypto, using a token airdrop, in this case, using a community within CT that loves to try out new products, you automatically have an easy bootstrapping mechanism for your social network. And then you also have a second big property, which is sort of an addictive nature to the application, which we can debate whether that's like a good thing for the users or for society. But I think it's pretty self explanatory that the apps that people use the most are the most addictive. And in the same way that how on Instagram, how likes and how retweets, how they sort of hit your dopaminergic system, you can think of speculation and the fact that your account is associated, its price goes up and down.
00:15:52.366 - 00:16:09.700, Speaker C: That is really addictive to users. And so I think using crypto in both those ways allow it to flourish as social apps. And so while this is not the end state, I think it shows what could be possible, and I think people are going to take this and iterate on it.
00:16:10.150 - 00:16:13.682, Speaker E: No, I'm definitely not googling dopaminergic right now.
00:16:13.816 - 00:16:49.774, Speaker D: The next logical step here is someone creates a protocol that issues zero day to expiry options on friends doc that shares, and then we run back turbo. Speaking briefly on derivatives, there have been derivatives that have been popping up around friendstock tech. The two major ones are Avo and hyperliquid. Both of them have released friends perps, which represents the total market cap of all of their profiles. On Friends tech, it hasn't been a huge amount of volume. On AVO, the 24 hours volume is 470,000. On hyperliquid, the 24 hours volume is 3.6
00:16:49.774 - 00:17:08.106, Speaker D: million. One has an open interest of 80,000. Hyperliquid has an open interest of 1.1 million. But the demand too long is definitely there. AVO has a 1 hour funding rate of 1.62%, which equates to 14,000% annualized.
00:17:08.106 - 00:17:43.422, Speaker D: Same thing for hybrid liquid. They have an annualized funding rate of 5600%. So you are paying a hefty, hefty amount to go along right now, however, I do think that it makes sense. I feel like friends tech will probably keep going for a bit more as long as people write the narrative of whatever target audience they think is going to come and onboard into friends tech. So we'll see. It seems like a relatively asymmetric trade. It seems like a trade similar to if someone made a perp on stablecoin market cap.
00:17:43.422 - 00:17:57.160, Speaker D: That should be like a no brainer long over the long term, it kind of feels like that, but yeah, I'll positive someone else to talk about fractionalization bonding curves and where it might go from here.
00:17:59.930 - 00:18:53.570, Speaker E: I think you need this super steep bonding curve to kick start things, right? Because if Kobe was trading at like $10 or something, this would have never gone anywhere. And you kind of need those original big set of big numbers to draw eyeballs and get that initial wave of attention. Mind you, I definitely think you need to make it affordable for nobody's bought, I don't know, not nobody. But throwing $2,000 at this just to start playing is obviously not that lucrative or engaging to most people. So if you truly want a consumer app, it just needs the affordable entry barrier. But that's been a notorious problem for almost every crypto game, and I don't really know how to solve it. Because let's say you either do fractional shares or you just flatten the curve extremely then that doesn't price out whales because they just buy a larger number of the underlying the units.
00:18:53.570 - 00:19:24.080, Speaker E: So it's still kind of hard to figure out a way where you can actually keep it affordable for new people to come in. Because let's say it only took 150 shares to hit two eth in the current bonding amm or the bonding curve. Well, let's say you made that. So it took 100,000 shares to get to two e. If someone wanted to buy that much, they still could. So I don't know. I don't really know if there's a great solution there, but that's definitely one issue that I think we need to keep kind of hacking away and solving at.
00:19:25.430 - 00:19:48.470, Speaker B: If you fractionalize the shares, then wouldn't that person, the creator, have to be super attentive to every single shareholder? I don't even get what the argument is here. To me, the value of it is like being within a group of 100 people who can hit up Grace and Alan to have a conversation, you know what I mean? I feel like the value proposition at that point is completely ruined.
00:19:49.370 - 00:20:19.300, Speaker C: I mean, most people are going to be buying in fractionally to get exposure to the price they're not actually getting in a group chat. So I think in order to do it, I think that's a great point, though, and that if you were to fractionalize it, you'd need to have a full share, at least to have access to the chat or whatever. So it allows for there to be a pricing of one share, which prices you into a chat, while also being able to buy a fraction to get exposure to the price.
00:20:19.990 - 00:21:03.362, Speaker D: Yeah, this also doesn't feel that different from stock splits in tradfi. Most big tech companies, once the stock reaches a certain ridiculous number, like $1,000, they'll do like a six to one, or like one to six stock split. Like Apple, Disney, all of the big companies have done that. But I do like the idea of, like, sure, you can fractionalize it. That makes it a lot easier for new participants to come in and buy shares, but you still need to retain a certain amount in order to interact with the profile. And I feel like there's actually a pretty good amount of customization that friendstech could do there, like letting the creator or the person choose what that number is, whether that's like 0.1 e.
00:21:03.362 - 00:21:10.050, Speaker D: If you're not as big, you're like a casual twitch streamer, or like ten shares if you're like a superstar.
00:21:12.630 - 00:22:27.542, Speaker E: Yeah, I think that makes sense to me. I think there's also one narrative that kind of got misconstrued pretty quickly, which was just the fact that somebody, I think it was like Banteg or whatever, scraped a GitHub and put together a list of Twitter account names linked with the funding address that got picked up by a news media outlet and circulated as, oh, there was a data privacy breach or something along these lines, and that is just not what happened here. And honestly, people that were taking the side of, oh, this is like a doxing, what are you doing? You're kind of just exposing yourself for not really knowing how a transparent ledger blockchain works. So if you fund an address with a different wallet, that is a transaction that appears on the blockchain that anybody can query at any point in time. And there is forever into perpetuity as long as there is one ethereum node running evidence of this transaction. So it shouldn't come as too big of a surprise to anybody in the space that, yes, when you fund an address with another wallet, people will find who that previous wallet was. So, not totally surprising, but for some reason, that did come up as a narrative.
00:22:27.542 - 00:22:57.522, Speaker E: But nonetheless, I think there's actually two winners here, ethereum itself and Coinbase. So ethereum itself is a little bit obvious, but I know this was people using Ethereum as money. And even if you're denominating it in dollars. At the end of the day, the transactional asset is still eth. And this is again, just putting another leg on the pedestal of the ETH is money narrative. And that's probably why ETh has the value that it has. It doesn't have to do anything with the profitability of its block space or things of that nature.
00:22:57.522 - 00:23:49.570, Speaker E: There's no DCF to run. As John Charb likes to point out, ETH is gradually becoming native Internet money, and there's a market for that. And then Coinbase as well. All this activity is happening on base, their new l two. And I think that's just kind of got to get them excited if you're seeing this, and I think they're less than a month, maybe three weeks into on chain summer and the release of this protocol, they got to be fired up to see this level of activity and being a consumer based app, right? Because eventually you got to think Coinbase doesn't want to expand into more crypto natives. But beyond that as well. And actually, right before this podcast, I saw that Coinbase just announced a minority stake in circle, and they're going to be launching USDC on six additional chains.
00:23:49.570 - 00:24:05.290, Speaker E: You'd have to imagine that's noble. And base will be getting native USDC. So expanding the Coinbase empire onto base and bringing more cash flows through those reserve asset yields. So pretty exciting for both Ethereum and Coinbase.
00:24:07.230 - 00:24:07.594, Speaker A: Yeah.
00:24:07.632 - 00:24:37.686, Speaker B: To add to your base optimism, that's kind of a pun I didn't mean to do, but there you go. I saw that base actually surpassed arbitram and optimism and daily transactions just before we hopped on this call, which is obviously, I think, like a third to half of that transaction activity is friends tech. And I find it kind of ironic because they're doing this on chain summer promotional movement, and I don't think friends tech was a part of that partnership. Correct me if I'm wrong, but kind of cool to see like a grassroots project actually take off like this.
00:24:37.708 - 00:24:38.520, Speaker C: For sure.
00:24:39.850 - 00:25:00.140, Speaker D: Yeah. Just to add on to the data side of things, Tom Wan from 21 shares pointed out a pretty interesting metric. Arbitram currently has an e penetration rate of 1.85%. In terms of addresses. That number is 1.15 for optimism. That number is zero point 25% for base.
00:25:00.140 - 00:25:23.970, Speaker D: But if you look at how long it took each of these chains to reach a zero point 25% penetration, it took arbitram nine months. It took optimism eight months, and it took base one month. And I would argue market conditions are probably worse right now than when arbitram and optimism first launched. So it's pretty interesting to see these metrics.
00:25:24.970 - 00:25:33.240, Speaker E: Is that metric the percentage of all Ethereum addresses that have transacted on the l two?
00:25:33.930 - 00:25:38.666, Speaker D: Yeah. Number of addresses on Ethereum that have transacted on the l two s? Yeah.
00:25:38.768 - 00:25:41.130, Speaker E: That's a cool stat. Tom won the goat.
00:25:42.590 - 00:26:18.710, Speaker C: I think it's also important to note that in Q three, base has had 25% higher profit than arbitrum, which has had, I think, like 5% more profit than optimism. That's mostly a result of low l one costs in comparison to these other roll ups. And I think in the past couple of days they've actually surpassed the revenues, like the transaction fees from arbitrary optimism by a large magnitude. So definitely gaining a lot of adoption and reaping the rewards.
00:26:20.410 - 00:26:54.240, Speaker D: Just a quick note to go back to Dan's point on privacy just now. I do think I have some slight privacy concerns with friends tech concerning the fact you need to put in your phone number to receive that two FA code. That feels like a pretty big attack vector, especially if they're keeping these phone numbers and linking it to your profile. Simsols are pretty common these days. And the other thing is that it can tweet and comment from your Twitter account. Right. I feel like there's potential for some really bad things to happen there.
00:26:54.240 - 00:27:09.960, Speaker D: For example, like the french tech database or whatever server they use gets hacked and suddenly you have every single one of the largest Twitter accounts and you have access to their accounts and you can tweet from them. You could cause some pretty serious carnage there. So I would just be wary there.
00:27:10.330 - 00:27:22.700, Speaker E: Yeah, it's a good flag, Randy. You can actually revoke the Twitter permissions from friends tech and still use the app totally fine. So yeah, definitely good call out there and would recommend everyone doing that.
00:27:24.190 - 00:28:00.754, Speaker B: Also, we didn't share any details earlier on the airdrop, but basically it's 100 million points that they say are going to be useful for something in the future. And they're going to be distributed every Friday with the snapshot taken at Thursday at 11:59 p.m.. UTC. And they're changing the criteria every single week, so it can't be gamed as easily. And they're trying to encourage people to just use the platform as you should. But again, I think this is a great testament to kind of taking a page from the blur playbook, a little bit like incentivizing user behavior, honestly, trying to get people to break shit, to be quite frankly. And it's crypto native people so we're used to terrible ux.
00:28:00.754 - 00:28:25.838, Speaker B: So maybe the argument and strategy here is they really just wanted to onboard us because they knew we'd be super engaged and really good product testers and they're kind of getting the application ready for mainstream usage in six months once the airdrop actually concludes. So kind of an interesting strategy. We're seeing people change up their airdrop formulas quite a bit since blur did their kind of novel mechanism a while back.
00:28:26.004 - 00:29:23.210, Speaker D: Just going back to another point, in terms of winners, I think one of the largest winners are the MeV bots. These bots have been sniping profile launches whenever someone signs up. So how it works is a Twitter user signs up and then as soon as that account is created and funded, the MEV bot recognizes that and comes in before anyone else to buy. And then after a lot of people come in and buy because it's a big account, it dumps on those buyers. Looking at ASXN right now, the largest trader by PNL is a sniping bot, and he's generated 260 e in profits since launch. So this guy is eating a lot. And then, yeah, apparently there was sort of like a quirk invasive sequencer that allowed this MeV bot to get the same block inclusion on new shares listed.
00:29:23.210 - 00:29:40.040, Speaker D: And apparently what happened is that the RPC provider for friend tech was accidentally sharing their entire transaction pool or their mempool. So you could pretty easily background anyone else's new accountants and their shares in the same block. They were created before anyone else.
00:29:40.730 - 00:30:24.898, Speaker E: Yeah, that's going to have to get cleaned up for this to scale as like, it just feels like this dumb thing we have to deal with. But I think it was maybe FUBaR who tweeted this. And they had a pretty decent way to at least patch some of it to some degree is like, maybe for the first hour, first x time window right after the account is created, only active Twitter followers can purchase the shares or something of that nature, but definitely need to get some guardrails in place to prevent the boding of this. For sure. That's probably a good place to hang up the cleats and move on to our interview again. We have a great, great interview with Felix from Cowswap today, diving into the technical analysis of how that protocol works. So without further ado, let's dive right in.
00:30:24.898 - 00:31:03.586, Speaker E: All right, everyone, we are joined today by Felix, the technical lead at Cow protocol to jam on all things cow protocol, cow swap, MeV Blocker, and the likes of the MeV, the dark forest itself. So Felix, thanks a ton for joining. Know, we tend to have a podcast that's geared towards people that aren't necessarily beginners. It doesn't tend to be beginner friendly. But given the subsector of crypto that you guys are operating within, I do want to ask the question I hate the most of. Like can you quickly give us just a high level overview of what coincidence of wants really are and what the Cal protocol is and how that kind of fits into cowswap itself?
00:31:03.688 - 00:32:48.414, Speaker A: Question was, what are coincidence of wants? Basically, a coincidence of want is an economic phenomenon where one party would like to purchase an asset that another party wants to sell, and the other party wants to buy another asset that the first party wants to sell. So we basically have this coincidence of people wanting the exact opposite of one another. And the nice thing about this case is that those people can then trade directly with one another, peer to peer, rather than going through either a medium of exchange such as money, where maybe I sell my stuff for dollars and then go to another store and buy the other thing for dollars, or in the crypto space. Also, liquidity providers, amms, anyone, market makers that basically always provide a price for a good a and of course take some fee or some spread for that service. And how that ties into crypto, or how that ties into decentralized exchanges in general, is that I would say maybe not the primary selling point of cowswap, which I would say is mev protection, but one extra efficiency gain over some of the other solutions that are out there that are also trying to prevent or mitigate MeV, is that on Ethereum, basically it becomes extremely cheap to create assets to create tokens. You might have your own project token, or even the US dollar has been tokenized many times, different tokens representing the exact same real world asset. And so this kind of cambrian explosion of token space makes the liquidity, or the market in general very, very fragmented.
00:32:48.414 - 00:33:42.814, Speaker A: So instead of having in the traditional stock market, where all your stocks are denominated in USD, you on Ethereum have some markets that are primarily denominated in ETH, maybe some others in USDC, maybe some others in USDT, there is no common numerator. And so you have this explosion of different markets. And in order to create liquidity between all different token pairs, you need these market makers that step in, or amms that step in and provide this liquidity. However, if you can take a holistic approach and let's say once per block, get the entire, I guess, preference expression of the world, I would like to buy this for that. I would like to buy this for that. What you can actually do, you can re aggregate that fragmented liquidity space and find those coincidence of ones. So let's say I want to buy some euro stablecoin for a dollar coin and Sam wants to buy some web bitcoin for the dollar stablecoin.
00:33:42.814 - 00:34:32.802, Speaker A: And maybe Dan, you want to buy the euro stablecoin with web bitcoin. Then even though there is no in the traditional world right now we would have to go to an Amm and each of us do that trade individually. But in a perfect coincidence of world or barter economy or it's also sometimes called is we can actually trade peer to peer directly with one another. And in that case we save of course the spread that the market maker charges. We save also on gas fees for updating the amms three times. And then most importantly, we also don't fall back to some of the other drawbacks that amms have, namely maximal extractable value mev and basically the problem of setting the correct slippage and not getting front run or sandwiched by these nanobots, how they are called.
00:34:32.936 - 00:34:46.418, Speaker F: Okay, yeah, and I feel like what ties closely to that is the concept of batch auctions and cowswap. Can you kind of explain how those work? And maybe it'd be helpful to walk through what a traditional transaction looks like for a trader on Uniswap versus someone using cowswap.
00:34:46.514 - 00:35:54.378, Speaker A: Yeah, for, and maybe I'll talk about Uniswap, the traditional version, not necessarily Uniswap X, which has been recently announced. We can then also go a little bit into more detail on what is the difference between those two models. But traditionally if you want to trade token a for token b on Ethereum, you go directly to an AmM interface or maybe to a Dex aggregator such as paraswap one inch for example, and say I wanted to sell token a for token b. And the algorithm will find you the best on chain route for your trade and will basically give you back a transaction that you, with your metamask account will submit to the blockchain to execute that trade. Now there is this asynchronous aspect to you receiving the optimal route from whatever API you're using and you actually sending that transaction into the mempool, and then that transaction getting mined. And during that time prices can change because of that. Either if your route is no longer available, you might be willing to take that failed transaction cost and eat the loss and basically try again.
00:35:54.378 - 00:36:21.670, Speaker A: Or you're actually saying, well, I'm fine. If the price moves 0.5% against me, I still want to make this trade. But the key part is you commit to a specific route, a specific execution path, and you own the trade execution. Now, on cowswap, what you do is you simply sign trade intent, an off chain message that says, I want to sell token a for token b, and here's my limit price. But I don't care exactly how it is executed. I don't care if you route it through Uniswap or through balancer, or through sushiswap.
00:36:21.670 - 00:37:37.710, Speaker A: My intent is trade token a for token b, and then you hand off that intent to a decentralized network of matching engines, or how we call them, solvers that compete for finding the best concrete execution path for you at the time that your order is being made valid and to the point of batch auction. One thing to create these coincidence of wants, we basically don't have everybody trade individually by themselves, but we aggregate for now, every 30 seconds, roughly, trades are being. All the trades that are placed into the API within a 32nd window roughly are placed into the same batch down. Longer term, down the line, we want to have one batch per block. So everything that happened in the last 12 seconds before the last block was, after the last block was emitted, basically becomes available for solvers to compete for in the batch option for the next block. So solvers basically find a solution to that batch of orders and the solver that is able to solve the batch optimally. And we can talk a little bit about how optimality is derived, but basically it's price improvement on your limit price receives the right to execute the batch.
00:37:37.710 - 00:38:16.060, Speaker A: And also that privilege also comes with the responsibility of executing the batch. So that solver that won the off chain competition has committed to a price that it is able to give to the user on chain. And so everything comes to slippage. Tolerance comes to revert costs, all these kind of risks, these complexities of managing your own transaction are now taken care of by a professional entity who is much more like mev bot or searcher, capable of foreseeing price changes, capable of knowing maybe what's happening on binance at the same time, and so can take care of these complexities much better than the average user can.
00:38:16.910 - 00:38:37.890, Speaker E: Now this is getting fun, because there's a lot to unpack here. So you mentioned that solvers are working to create or define how is the optimal solution defined here, because that's ultimately what determines which swaps will get filled. So let's dive a little deeper there. What conditions need to be met that create the optimal batch.
00:38:38.230 - 00:39:15.230, Speaker A: Yeah. So basically, what users place in the batch auction are just plain old limit orders. And so a limit order has a limit price. And so that limit price is a hard guarantee that is enforced by the settlement contract. The system is not able to match your trade at a price that is worse than your limit price. And that's kind of similar to when you trade on uniswap directly and you set a slippage tolerance, and then an MEB bot sandwiches you and basically exhausts your slippage tolerance, and you get traded exactly at your limit price. Now, the thing on top, the price improvement on top of your limit price is what we call surplus.
00:39:15.230 - 00:40:03.600, Speaker A: And surplus is basically what solvers optimize for. And so, if I am a malicious or somewhat value extracting solver, and I want to settle you at the limit price, okay, I can submit a proposal for this batch that settles you at your limit price. But another solver that proposes a solution with price improvement will automatically score higher in the ranking criteria than the initial solver. And the protocol will basically grant the rights to execute the batch eventually to the highest bidding solver. And so that off chain competition ensures that your limit price is not just kind of a worst price guarantee, but it's also something that then has this incentive to be approved upon. And whatever party improves upon the most gets the right to fill you.
00:40:08.050 - 00:40:22.850, Speaker E: This sounds a lot like the traditional mev boost auction, right, where builders are working to solve transactions for the proposers. And so what is the incentive for these solvers in this case? Are they taking a portion of the surplus?
00:40:23.910 - 00:41:38.182, Speaker A: Yeah, I think one thing that's actually interesting when we compare the system to mev boost is maybe one thing that I actually didn't mention about batch auctions is that if there's two people trading the same asset in the same batch, so let's say I'm selling ether for USDC, and Dan, you're selling ether for USDC. Then the protocol enforces that there is only one price per token per batch. So if we end up in the same batch, we get cleared, and we trade the same asset, we get cleared at exactly the same price. There's no concept of maybe you placed your order before mine, or there's no concept of first come, first served or some kind of ordering fair ordering. There's just uniform price clearing one price per token per batch. And kind of what that achieves is it, at least in our mind, removes all kinds of mev. Because if you think about what is the highest paying block in mev boost, or what are the things that currently builders and searchers optimize for, is to create as much price difference as possible for the same asset within the same block, because that ultimately allows the searcher or builder to buy the asset at the lowest price and sell it at the highest price, and basically therefore make this risk free intra block profit.
00:41:38.182 - 00:42:34.346, Speaker A: And so, in a way, searchers and solvers actually solve a somewhat similar problem, but the outcome is actually completely the opposite. If you're really good at solving the mev boost or the PBS problem, you'll create blocks where for the same asset, you'll have prices diverging one, two, 3% as much as you can. Whereas on cowswap, if there's two people trading the same asset, you actually need to have a uniform price clearing. So no difference between buy and asks. And so, yes, while the optimization problem is somewhat similar, the outcome is actually completely the opposite. And it leads to the fact that unsophisticated users that don't know how to maybe boost their way and get priority over other transactions in this pseudo first come, first served mechanism that is currently the public mempool, which of course is not first come, first served, because you can just outbid other people. But the least, very few people actually know how to do this properly.
00:42:34.346 - 00:42:45.840, Speaker A: And so the cowswap mechanism allows you to be protected despite and not having to worry about all these games that are being played in the dark forest in the mempool right now.
00:42:46.290 - 00:42:46.762, Speaker C: Interesting.
00:42:46.836 - 00:43:08.086, Speaker F: Yeah, I like that comparison that you made there, Dan, with Mevboost. But it's ironic that you get exactly the opposite outcome, like you mentioned, Felix, but, so it sounds like you need a very competitive solver market in order for this to probably work at its best. So how does that look today? Is it permissionless to join the solver network? What kind of expertise do you so.
00:43:08.188 - 00:43:59.274, Speaker A: And actually, Dan, I didn't answer your question. What are the incentives for the solvers? Right? And so, in its very purest form, the mechanism allows solvers to take a cut from the optimal route that they find, and basically they just compete on who takes the lowest cut in the end. So if I were a private market maker, and I can buy ether on finance for $1,900, then maybe I sell it to you for $1,901 and make one dollars profit. And as long as no other solver sells it for 1900 to you, then I win and I can make this profit. So there is like this aspect of potentially, and in its purest form, a race to the bottom, but it is specifically to bootstrap the solver network and solver competition. And now maybe with one inch fusion and unisopex, a lot more participants are moving into the space. But when we came out two years ago, we really had to think about, okay, there's this chicken and egg problem.
00:43:59.274 - 00:45:08.480, Speaker A: How do we bootstrap that decentralized network of matching engines is basically what the cow protocol token was partially used for. We created this competition with a reward, and basically solvers receive cow tokens for performing the task of finding the best solution. And we've strapped a network of, I think today we are 1516 solvers, which is quite good. And now, of course, with other participants entering the space, we also are thinking about maybe this mechanism needs to be changed or revisited or maybe even reversed. Maybe there's even the non toxicity of the flow that kaustop attracts might make it actually worthwhile for solvers to pay the protocol for getting access to that order flow rather than being paid by the protocol. Or maybe some hybrid mechanism similar to EIP 1559, where in times of high demand, Ethereum is deflationary, and in times of low demand it's inflationary. So yeah, we were still working on the tokenomics there, but roughly, that is the idea on how to develop that network, on how we bootstrapped it in the first place.
00:45:09.090 - 00:45:12.400, Speaker E: Okay, super interesting. And I'm curious, in your mind.
00:45:14.370 - 00:45:14.734, Speaker D: What.
00:45:14.772 - 00:45:35.154, Speaker E: Type of candidate is like an excellent person or entity to come be a solver? Is it somebody with maybe a ton of order flows to, say, a Dex aggregator that didn't want to get into this game? You mentioned uniswapx and one inch fusion are kind of pushing this direction. But if there was another Dex aggregator, like, hey, maybe we just go run a solver on, like, would that be beneficial if they're coming with this order flow?
00:45:35.282 - 00:46:40.198, Speaker A: Yeah, we actually had a solver team which had a very good algorithm to solve the optimal routing problem for all types of convex liquidity on Ethereum. And they were thinking about creating a Dex aggregator or becoming a solver. And basically the advantage is you don't have to worry about the end user and user experience and building a product a front end, which is a very different job actually, to being a very efficient routing or matching engine. And so that team tapped into cow protocol, became a solver, and basically received a lot of volume from day one, and is basically now expanding to, of course, other protocols as well. But yeah, was basically able to create a fully working product and business without having to worry about the end user and product experience and user experience. And so if you ask me, kind of what is the qualities you need? I would say we're still figuring out kind of how to make the most of the complementaries of the different skill sets that are needed right now. I would say you need kind of three skill sets.
00:46:40.198 - 00:47:46.626, Speaker A: One is an excellent knowledge of on chain liquidity. So a way to model all the different liquidity sources on chain, may it be curve, may it be uniswap, maybe whatever next AmM comes out in the next couple of months. And be fast at integrating those and routing optimally through the on chain liquidity. You also should have at least some connections, or maybe even be a market maker yourself to access off chain liquidity and centralized exchange liquidity, maybe liquidity from other chains like layer two, so that you can bridge liquidity into that batch auction that you can source from other venues in order to be competitive. And then at the end of the day, you also should be quite knowledgeable about the transaction lifecycle and basically how to make sure that you set your slippage tolerance correctly. Maybe predict what will be the price impact on the top pools given the action that you see in the real world in the last five, six, 7 seconds. So having kind of that predictive knowledge so that you don't get your slippage tolerance exhausted and basically yourself front run by other bots in the system is quite important.
00:47:46.626 - 00:47:59.640, Speaker A: So what we've seen in the past is actually searchers or participants that run searcher bot operations also do quite well in running solvers, because the skill set is quite similar.
00:48:00.650 - 00:48:18.954, Speaker E: Okay, that makes a ton of sense here. And so I'm curious, if I'm a solver and I create the solved route for a specific batch, do I have the ability to include my own transactions in that batch? Because I could see a world where you could create this solved path, and then maybe there's like a back run.
00:48:18.992 - 00:49:08.726, Speaker A: Potential there, so you can include your own liquidity into your solutions. Yes, private liquidity from the solver. However, those orders don't count as native cowswap orders, so they will not contribute to the optimization criterion. So if you are sending an order on your behalf into your solution, it doesn't count towards the surplus that is being computed. Basically, the assumption is that only orders that every solver has seen, and for that, the system also relies on some data availability guarantees. Basically, we need to have a canonical view of what is the batch, and only the orders that are in the batch visible to everyone, do contribute in the end to that surplus to the optimization criterion. So you can improve prices, but you have to improve the prices for the user.
00:49:08.726 - 00:49:13.126, Speaker A: If you improve prices for yourself, it doesn't really make a difference in the competition.
00:49:13.318 - 00:49:26.500, Speaker E: Okay, that seems like a good protection mechanism. And then you also earlier mentioned that currently the batches are running every 30 seconds or so, but you want to try to trend that down towards every block. What's the barrier there? Like, how do you get from the current state to that end state?
00:49:30.070 - 00:50:25.374, Speaker A: A lot of it is actually technical depth in our infrastructure just right now. The way that the solvers have evolved from the very early days where we implemented a bunch of baseline Dex aggregator, solver and then gnosis. Once we spun out of gnosis, gnosis continued to run those has just caused a bunch of overhead when it comes to assembling the auction. And in the beginning we always thought like 30 seconds is actually fine because we want to increase the chances for these coincidence of ones. The longer we wait, the more likelihood there are of multiple orders ending up in the same batch and thus getting these positive network effects. But we realized pretty quickly that users are actually at least they want to have the choice. They're quite annoyed by the time that calsop takes for them to have the happy moose sound to basically get their order traded.
00:50:25.374 - 00:51:01.278, Speaker A: And so we definitely want to move down to a one batch per block model and then potentially have order types where the user can say, please don't match me against on chain liquidity. Just leave me in there until a coincidence of once appears. I'm not time sensitive. I have like stablecoin, stablecoin swap that I'm fine if it takes 24 hours to match. But yeah, I think technically just speeding up both the expectations on the solver side. So some of the solvers run algorithms that don't really run well in less than, let's say 5 seconds or less than a second even. Although clearly it's possible.
00:51:01.278 - 00:51:12.274, Speaker A: Looking at builder and searcher algorithms to solve this problem in subseconds is just like something that hasn't been quite prioritized yet. But yeah, we hope to get there soon.
00:51:12.392 - 00:51:23.874, Speaker F: So I saw you tweet a couple of days ago that you think a lot of mev problems can be solved at the application layer. Can you kind of peel that back an extra layer and explain why and maybe dive a little bit into mev blocker?
00:51:24.002 - 00:52:57.818, Speaker A: When we look at kind of the most commonly talked about solution to mev, I think, which is coming from flashbots. And the team has done tremendous work on illuminating people and educating people about the problem, foreseeing the negative externalities and building tools, at least for the negative externalities, circumvent those. I think what this did to the extraction itself was probably bad for the user, but at least for the network, it did reduce the other problems you would otherwise have. But basically their focus is on building an extra communication channel between the user, the basically person owning the transaction, or owning the ultimately with swab, and maybe also the intent and the validator that is actually responsible for creating the block and having a richer expression language for what the optimal block looks like, rather than just this priority first price gas auction that we used to have. But then, if you think about where mev actually comes from, where it stems from, I think it really stems from the application layer. And I don't want to be judgmental towards the uniswap mechanism, but at gnosis, back in the day when we were looking into prediction markets, we were also thinking about modeling markets between different outcome tokens via constant product formula. And one of the things we saw was that, well, okay, if you have this mechanism and there's multiple trades happening in the same block, then the ordering of those trades matters.
00:52:57.818 - 00:53:44.222, Speaker A: And as the validator, you have the ultimate control over this ordering, and so you can take advantage of the trades and manipulate prices. And so for us it was like, well, this is not a mechanism that will be long term sustainable. And so then gnosis went into dutch auctions, and later on batch auctions, which is where cow protocol came out. You know, Uniswap is a great invention, has solved a lot of problems, but basically that mechanism in itself is flawed, and that DAP is creating the MEV. And we think that by just having a single price per token per block and building an exchange that enforces, at least for your exchange, there's only one price per token per block. You can reduce a ton of mev. The other type of MeV that's currently very much discussed is LVR loss versus rebalancing.
00:53:44.222 - 00:54:58.886, Speaker A: Basically liquidity providers that are trading at stale prices and getting run over by ARP bots that are just equilibriating the prices they see on binance and therefore causing a loss at least, versus if that liquidity provider was to implement that strategy, kind of off chain themselves can also be solved by having one price per token per block. If we can get the amms to trade as part of the batch and have them accrue surplus, just like user trades do, there will just be a single equilibrium price per token and that equilibrium price will be what the new current, the up to date binance price is and not what the binance price was 12 seconds ago. The other main source for MEV, I think, is liquidations. When some collateralized debt position runs underwater, then it needs to be liquidated. That in and of itself can be modeled as a stop loss order. Of course, you need then a reliable either oracle or, like, understanding of what the current price is. But assuming 90% of all Dex trading volume would be handled through a batch auction that settles with uniform price clearing, then that uniform clearing price could also signal that a loan is underwater, needs to be liquidated, and therefore becomes liquidatable in that same batch.
00:54:58.886 - 00:55:37.954, Speaker A: And so LVR liquidations and swap MEV for me, can all be solved with this type of mechanism. And if we look then at what's left there, I think there's, of course, still a bunch of other sources of MeV. But really, most of them, I think, can be solved by rethinking the mechanism and building a Dap that is not exposing this kind of extractable value. And then the question is, what do we really need to solve at the infrastructure layer? Right? Why do we need this extra communication channel if it's really just for, I guess, front running a hack or some other very exotic types of Mev?
00:55:38.082 - 00:56:15.170, Speaker E: I want to give a quick shout out to Hexins as we explore today's blockchain landscape. Let's take a moment to recognize them. As a premier cybersecurity provider in web three, Hexins is trusted by tier one projects like Polygon, including a security review on their new polygon, ZKE, EVM, Mantle, Risk, zero, Lido, one inch, newbank, and more. Get a deep dive into your technology stack with the most comprehensive analysis and cybersecurity consulting, Hexons not only uses widely known methodologies and flows, but discovers and introduces new ones on a day to day basis. With over $55 billion secured, they cover everything from smart contracts to blockchain to web two pen tests.
00:56:15.750 - 00:56:22.966, Speaker F: Yeah, there's been nearly $7 billion of total value hacked in crypto's nascent history, so it's safe to say your team has a lot on the line.
00:56:23.068 - 00:56:23.894, Speaker B: Don't skimp out.
00:56:23.932 - 00:56:42.342, Speaker F: Take your security seriously and reach out to Hexans. Don't forget to mention zero x research for a free web two pen test with your partnership, and reach out to Hexans at Hexins IO. Find them in the links in the show notes, or reach out to them at permissionless. They'll be at booth 832. But without further ado, let's get back to today's episode.
00:56:42.406 - 00:57:03.986, Speaker E: Okay. And one of the things you mentioned there was sort of that core principle of one price per token per block. And I know you guys recently put out a research paper on this, so I'm curious, what were the key findings? Is it truly possible to build that amm that has this as a core principle? And why exactly does that reduce the LVR experience by lps? I'm not sure I'm following there.
00:57:04.168 - 00:57:49.522, Speaker A: Yeah, of course. Sorry. Let me try to back up a little bit. So the reason that LVR basically is created or comes into play is that we only get a new Ethereum block every 12 seconds. And so at the end of each block, once the last transaction is is included, we can assume that right now, the state of all the amms on Ethereum is perfectly in equilibrium with the outside state of the world, right? Like, if the price of ether is 1900 on binance, then the price of ether will be 1900 plus minus lp fees and gaff costs. But let's assume no friction will be pretty much 1900 on Ethereum as well. But then 12 seconds pass, and in those 12 seconds, a lot can happen in the real world.
00:57:49.522 - 00:58:57.670, Speaker A: So maybe the price of binance goes up to 19 five because there's some big news incorporated, or even if it just goes up by 1%, that might already be significant and create an arbitrage opportunity on chain. And now all those lps are still, the next block gets mined, and all those lps are still stuck at the old price at 1900. And so me, as a block builder, as a validator, whoever has control over the first transaction that gets included in the next block is actually able to access that liquidity at the old, outdated, stale price and move it to the new. Let's say Binance authored fair price of ether. And so if the price moves from 1900 to 1910, let's say the average price that I pay as an arbitra roughly is 19 five on a uniswap amm. So I'm making, compared to Binance, I make a $5 profit. And of course, in order to get that first slot, I need to probably pay 99%, if not more of my profit to the validator to actually give me that slot.
00:58:57.670 - 01:00:06.570, Speaker A: The first slot in the block. But yeah, long story short is that the LP basically traded at 19 five, although it was pretty clear that the fair price was 1910. So the LP lost $5. The arbitrager made like pennies, and the validator got a lot of money because it was able to auction off the first slot profitably. Now, if we assume that every token just has one price per block, and that price reflects the entire or at least majority of the on chain demand and supply for that token in that block, we could build an amm that doesn't trade at the average price or according to its x times Y equals k curve, but instead also trades at the uniform clearing price. And so if the batch auction decides that the fair price in our new block was 1910, then the Amm would also only be willing to trade at 1910. And so even in the complete absence of any other traders, an arbitrator would then be able to go in and say, okay, I want to trade against this amm.
01:00:06.570 - 01:00:49.798, Speaker A: So basically, the AMm is willing to trade anywhere between 19 1910. But the way that you decide who gets to trade against the AMm is not by who comes first, but by who creates the highest improvement, price improvement over the minimum price. The AM M is willing to accept 1900, or then on average it would be 1905, of course. But basically, if an arbitrager comes in and says, I want to trade against the AM at 19 six, that's fine, they can do it. But another arbitrager can come in and say, I want to trade at 19 seven, that's fine, they get priority. Because in cow protocol, we don't prioritize by who gets first, but by who does the most price improvement. And so again, in equilibrium, arbitragers will bid themselves up maybe to 19 nine and $0.99,
01:00:49.798 - 01:01:30.726, Speaker A: but the difference being the arbitrage still makes $0.01. Nothing changed there. The difference being that now no longer the validator gets the 4.99 of bribe, but instead that price improvement is forwarded to the liquidity provider, the passive amm that before was being value extracted. So again, we have this shift from value from the validators whose job is just to secure the chain and propose blocks, to the actual true, and at least in our minds, true beneficiary of that value. For swaps, it's the user for liquidity provision, it's the LP provider. And that kind of is the core idea of building cow native amms into the batch auction.
01:01:30.838 - 01:01:53.594, Speaker E: That was an excellent description. I really appreciate the depth there. And so this to me seems like a very intriguing solution. My question is, how is the amm price aware of the auction? What is the connection between the amm's, the input that actually goes into the formula there, and how? The auction, I guess, pushes that message to the amm.
01:01:53.722 - 01:02:17.080, Speaker A: Yeah. So you model the amm basically just like another cowswap user or trader that has a limit order, but it's not a step function limit order. It's basically an x times y equals k. Curved limit order. So the amm says, I'm willing to buy. My current price is 1900. And for every amount, I can tell you what price I'm willing for every amount out.
01:02:17.080 - 01:03:03.842, Speaker A: I tell you how much in I want to receive. So, basically, I can model my curve as basically a convex limit order in a way, like, not a step function. I want to trade 100 for five, but it's more like if you give me this, I give you that. And so this is what the amm gets modeled into the system, and then it just enters into the batch as a regular participant where solvers are maximizing price improvement. And so, sure, I can match them at their limit price, but as long as there's one honest solver that's trying to improve the price, they will have an advantage over the remaining solvers. And so, in equilibrium, we end up shifting that arbitrage value that is currently bid for the first slot to price improvement that gets distributed to the amm.
01:03:03.906 - 01:03:14.780, Speaker E: Okay, now this is getting even more interesting. So I'm curious if you guys have built this in, like, a test environment or if this is something we can expect to see a launch later, sometime next year.
01:03:15.470 - 01:03:44.306, Speaker A: Yeah. So we are a small team, and we already talked about one batch per block and kind of the resource constraints that we have and the technical that we have on that front. So it's something that we're extremely excited about. We've published a research paper. We've run some back tests. We would like to look further into this and build it out. I think we are currently talking to at least one team more closely to maybe help building this out.
01:03:44.306 - 01:04:19.920, Speaker A: I think building an amm, there's a lot more to it than just inventing the mechanism. I think we can provide the batch part, we can provide the contact to solvers, and also have an idea of how to solve the mathematical problem in some sense and give guidance there. But really, building a proper amm product with deposits and withdrawals and all the experience that goes into that is at least right now, something that we're still looking for some help for. But, yeah, we think this is a promising idea and basically looking to make it a reality, but I can't commit to it right now.
01:04:20.850 - 01:04:38.722, Speaker F: Yeah, you can't do everything yourself in crypto. You'd get spread incredibly thin if you tried, but that's super exciting. I did want to switch gears a little bit and just get your take on Uniswap X. I mean, you guys have been working on similar things for quite some time, and I feel like you guys got some positive confirmation with their v four strategy.
01:04:38.866 - 01:05:34.818, Speaker A: I first and foremost think it's great validation and something that we've been talking for I think two years about that users should not send raw transactions to the public mem pool. That is something that is too complicated for the average user to manage and deal with. Users should send trade intents, and then we should have professional entities that compete for fulfilling those intents and find the best execution for users. And seeing both one engine uniswap enter that game, I think is a huge validation and a sign how good of an also innovation department we have. And now I think it's up to us to keep pushing the envelope and keep innovating. I think the user experience is very similar. Of course you don't have the moose sound if you trade on Uniswap, but you're signing a message and you have some mechanism that, at least in theory, guarantees you pretty good execution.
01:05:34.818 - 01:06:39.910, Speaker A: I think where the two mechanisms then differ a lot is that uniswap access dutch order approach is, I think, quite good for mitigating MeV for every individual order, in that it basically makes your slippage tolerance adaptable over time. So the problem, like where most of the at least sandwiching or swap MeV comes from, is that Ethereum is asynchronous. So prices might change between the time that I send a transaction out and the transaction getting mined. So either I want my transaction to fail, or I say I'm okay with some price change, but usually I have to say upfront, I'm okay with x percent price change. And then what will magically happen, thanks to MeV, is that full x percent will be exhausted. And so Uniswap X now said, okay, instead of defining a full x percent slippage tolerance from 0 second onwards, let's have an incremental slippage tolerance. So you start with a price that's maybe at what you would expect, or even slightly above what you would expect, and then that price decays over time down to your maximum slippage tolerance.
01:06:39.910 - 01:07:53.010, Speaker A: And so as soon as some they call it filler or some solver or some searcher is able to actually give you that price, maybe pocketing a little bit of value on their end, they have an incentive to go ahead and fill your order rather than waiting. Everyone would have to collude to basically wait for your maximum slippage tolerance to be reached and then being able to extract you. So it's a nice mechanism to protect each and individual's users slippage tolerance. The problem with the mechanism is that it has very limited upside in that even if the price changes between blocks and becomes more favorable for you, there's no incentive for the filler to pass any of that price improvement on to the user. So assume your current dutch order price is 19 two, and in the next block it will be 19 one, and the price on binance goes from 1900 to 1910. Then in the next block filler will come and fill you, but they will fill you at 19 one, even though the fair price would have been 1910. In cowswap we have this mechanism where if some solver was willing to give you 19 819, nine, or even 1910, they would have won and have this incentive to improve the price for you.
01:07:53.010 - 01:08:37.022, Speaker A: In uniswap x, there's then still this race. Whoever gets in first, whoever bribes the validator the most to match you at 19 one will get the right to do so. So you have limited upside. And then due to the lack of batching or even, I think the protocol theoretically would allow a filler to settle two orders in the same transaction, if I read the contracts correctly. But due to just the fact that every order is on their individual price curve, you don't have this concept of uniform price clearing. You don't have this concept of matching people directly peer to peer and aggregating demand and supply. And so in a hyper tokenized world with fragmented liquidity, I think we will see batch auctions play out another advantage over this mechanism.
01:08:37.022 - 01:08:55.282, Speaker A: And yeah, it's basically now up to us to demonstrate and show how, for example, with amms, maybe liquidations. Really, that concept of having one price per token, per block gives significantly more mev protection than just individual dutch orders per trade.
01:08:55.346 - 01:09:19.646, Speaker E: I want to get your take here on a slightly different question on the same topic. And when it comes to these order flow auctions, what matters more? Is it the underlying tech, or is it the protocol branding? Because, for example, I think one inch has a lot less robust of a ofa than cowswap, yet it does see a significant amount of volume. So I'm curious, how do you think about the trade off there between the tech and the branding itself?
01:09:19.828 - 01:10:08.586, Speaker A: Yeah, I mean, I'm a technologist, I'm probably overly naive, overthinking. If you build a better mechanism, they will come the last two and a half years taught us otherwise. It's not just enough to have a better mechanism or to even have a good mechanism. People were coming to Gausva, but at conferences, when we talk to people, they say the most differentiating factor is the moose sound and that the UI looks super cool and that's the market. The market tells you what the market wants. But, yeah, so branding, having that direct contact with the end user, I think is extremely important for a product to be successful. I think also the first mover advantage, we noticed that with meth blocker, quite significantly, if you're the first product in the space, you have a certain advantage.
01:10:08.586 - 01:10:46.330, Speaker A: And then even if you change your mechanism later on to adopt the mechanism that you see somewhere else that might be working better, you then have kind of that user base that is loyal to your brand, loyal to your product. I think at Cowswap we still have to do a better job at really highlighting what are the key differentiating factors and why users should care and why they matter. But given the state of crypto right now, branding and convenience is definitely quite important. But my hope is, in the long run, if we want crypto to grow another ten or 100 x, the better tech will win.
01:10:46.480 - 01:11:32.182, Speaker E: I tend to think that last statement there is quite correct. And I think we over index on the importance of today's branding in our industry, given how nascent it is. And it's like, okay, well, if we 100 x, the amount of people that come into this space, are they all still going to go hit the uniswap front end? I would tend to think not. And that these better solutions that now exist kind of tend to capture some of that flow. But, yeah, it'll be interesting to see how that dynamic kind of spins out. But one of the other things kind of in this same realm that I wanted to hit on was just like the idea of the post swap hooks or the cow hooks that you guys have created, that kind of gives the ability to do more than just swaps and is like, what's next on the roadmap? Is it just continued building in that direction?
01:11:32.326 - 01:12:16.994, Speaker A: Yeah. So for cowhooks, this was actually one feature that we launched without a clear, it's a protocol feature. We launch without a very clear vision of what will be the first user facing product to incorporate it. The idea really was that, well, right now, the intent that users express when they trade on cowswap is swap limit order. But what if we can upgrade that intent expression language to do x, then swap, then do y. So really having like a pre hook or a pre interaction, then have your swap and then have a post hook and a post interaction. And just some ideas that we are looking into is, well, as a pre interaction you could, for example, set a gasless approval.
01:12:16.994 - 01:13:03.266, Speaker A: So for permittable tokens you could just in time, basically then mine the approval. Just before you trade, you could unstake a token. I think there are some tokens where you cannot really swap the staked version of it. You first need to unstake it, but then you can swap the unstaked version and restake immediately. So theoretically you could just unstake, swap, restake in a single transaction and then never have to do those steps separately. I think bridging to another chain is also a very common thing that people do after a swap. So theoretically what these hooks allow you to do is say, okay, I want to trade on main net, but I want to have my proceeds on gnosis chain or in polygon or some other l two, and then you'll swap and bridge kind of atomically in the same transaction.
01:13:03.266 - 01:14:06.262, Speaker A: And the nice thing is that you only pay gas again, you only pay for that interaction once your trade goes through. You don't have to worry about failed transactions or even managing gas. Like you don't pay in eth, you pay in the cell token that you're swapping with. So if you have a new address and you, for example, get allocated a token airdrop, or maybe you have an old address that you already wiped and you get some retractive airdrop there, you can, in theory now claim, approve, swap, and bridge the proceeds somewhere else in one atomic intent without needing to have any eth on that account. So yeah, that's on the protocol side, kind of what is possible with it on the cowswap UI side, I think things we will see quite soonish is the option to gaslessly approve tokens. And I think we're also experimenting with some bridging solutions. So maybe we'll see a way of bridging proceeds to another chain as part of the UI.
01:14:06.262 - 01:14:27.582, Speaker A: But yeah, we also have a grants program, so for any ideas, anybody whether wants to build on top of the protocol, may it be on the Amm side, may it be on the hook side. We are definitely sponsoring teams, individuals, projects that want to build on top of cowswap. And really, I think for hooks specifically, the possibilities are endless. And there's a lot of really cool things you can build with it. Nice.
01:14:27.636 - 01:14:43.640, Speaker F: Yeah, that's a good call out too. We'll be sure to link to that in the show notes. We'll get it from you after the call. But I did want to get your take too, on just the dow to Dow side of using cowswap. I know you guys have had some success there, so I was hoping you could shed some light and maybe some of the other use cases that you thought of.
01:14:44.330 - 01:15:24.174, Speaker A: Yeah. So for Dao specifically, one thing that daos have trouble with is that coupling of here's a trade I want to do, and then sometime later I'm going to do that trade. If you look at most dows, they create a proposal, okay, we want to diversify our treasury. We want to do this trade. And then there's a discussion on the proposal. And then maybe somebody proposes a transaction, a concrete transaction. So they might go to, I don't know, one inch and say, like, okay, what's the best way to convert eth into staked ether right now? Or some stablecoin for diversification? And then there's a route.
01:15:24.174 - 01:15:56.766, Speaker A: Okay, cool, let's use that route. And then they propose that transaction and have the Dow vote on it. Depending on the Dow, voting periods might last from a day to a week. And so the price, and probably also, for sure the route and very likely also the price will have changed. The Dow is really in a difficult situation that they can't really set. What slippage tolerance are they going to set? What will be the price of ether, for example, in a week from now? Nobody really knows. And if you set 10% slippage tolerance and the price goes 5% in your favor, you can be sure that some mev bot will eat the entire 15% away from you.
01:15:56.766 - 01:16:49.114, Speaker A: So really like this intent expression paradigm that we introduced, we thought is particularly powerful, where there's this disconnect between having the intent and executing the intent. So another use case for that is multi signature wallets. If you have a safe or some other smart contract wallet with multiple signers, you might be sitting, even if it's your phone and your laptop, it might take you a couple of minutes to go from your phone to your laptop. Or if you're in a team setup, it might take a couple of minutes or even hours for your other signers to wake up and sign that transaction. The optimal route between you proposing the transaction and then the transaction ending up on chain is huge, and things change in that time. So it's much more powerful to just set an intent. Basically say, I want to trade that token for that other token, have a reasonable guarantee that you get best price execution.
01:16:49.114 - 01:17:26.860, Speaker A: So this mechanism that improves basically tries to get as much surplus for you as possible so you can set slippage tolerance that is actually reasonable for Dow specifically. We even had a grant proposal that introduced another module which can do a just in time oracle check. So if you really want to make a trade a week in the future, and you're not comfortable setting a 20 30% slippage tolerance, there is a technical solution to that as well, called milkman. But yeah, basically the asynchronosity of somebody wanting to make a trade and the trade actually happening is where cowswap's intent mechanism really comes to play.
01:17:27.710 - 01:17:38.750, Speaker E: And I know, on that same note, I know curve and yearn both use cowswap for processing their harvests and fee collections. Is that something that they do through MEv blocker, the RPC endpoint?
01:17:39.090 - 01:18:43.522, Speaker A: No. So I think urine pioneered it on basically, and curve is now following suite. Basically, protocols can pretty permissionlessly place these types of orders, and especially if the amounts are relatively small, there is off chain bonds that solvers are posting in order to make sure that they're not misbehaving. And so we have some other soft guarantees on best price execution, which we sometimes refer to as ebbo. So whatever is the best price that can be seen on Ethereum's public liquidity. So looking at balance or looking at sushiswap, uniswap, and curve, although curve, I think right now is not part of the Ebbo store definition, solvers are not allowed to match you at a price that's worse than that. And so what these daos can do is really like post limit orders that say, okay, I just want to sell this token and just give me whatever the best price is for it.
01:18:43.522 - 01:19:40.546, Speaker A: And it really allows you to automate the fee harvesting process and make it completely permissionless in that anyone can trigger the harvest, it will create an order on cowswap. And then there's this smart order type, which might be going a little bit more too far here, but we allow, like a smart contract. This goes a little bit back into the AMM discussion we had earlier. So smart contracts can place regular limit orders just like a for b at this price. But theoretically, smart contracts can also place arbitrary, complex expressions of, I always want to have 50% of my balance in that token and 50% of my balance in that token. And then solvers that know about this smart contract can basically use ERC 1271. So smart contract signature verification to then issue trades on behalf of that smart contract.
01:19:40.546 - 01:20:32.470, Speaker A: So if it sees that a smart contract is basically imbalanced, a solver can say, oh, I know that the smart contract would like to trade and basically initiate the rebalance or initiate the fee harvest on behalf of that smart contract. And so you can really build completely autonomous trading agents which run without any input from external bots or what in the past you might have used searchers for and put like some MeV bounty on it. If you trigger this transaction, then I'll pay you some reward and then some MeV bot will pick it up. But basically with cowswap, you can both benefit from best price execution as well as having this competition on what is the least amount of bribe I need to pay to get this trade through and therefore have fully autonomous systems at the best possible price.
01:20:32.540 - 01:21:06.962, Speaker E: That's incredible. Yeah, I loved your viewpoints there as well. And so it's cool to see that dow to dow relationship. I think we should be hopeful that that continues to grow out into the future. Yeah, no, that's great to see. And so when it comes to maybe a bit more of a random question here, but there was a recent governance proposal, CIP 28, to move 450 eth, so the cow treasury core unit to earn yield. What are your thoughts around treasury management as a Dow and how you have to manage that to keep the continuation of the protocol going?
01:21:07.016 - 01:21:58.322, Speaker A: So right now we are partnering with Kapatki, who is also a Nosis spinoff for treasury management. And I think this works well for active treasury management. So when basically you're chasing yields, the Kapaki team is extremely reliable, professional, and technically knowledgeable. So it's an absolute pleasure to work with them long term. I think there's certain dow treasury operations that I would like to see more increasingly moving into these kind of autonomous smart orders, as we'd like to call them. So not your active treasury management, where you're chasing the most safe and yet profitable yield. I think those will also still be used by or executed by professional treasury management companies.
01:21:58.322 - 01:22:38.080, Speaker A: But if you want to have a certain diversification between different stablecoins or different liquid staking token derivatives, then you can express those as smart orders and basically have cow protocol take care of that rebalancing for you. And, yeah, I think right now we're still more in the kind of active phase and want to make sure that we generate as much revenue as possible also from the treasury. But I would assume us to also pioneer and build some proof of concepts on how a completely passive autonomous treasury management solution could look like.
01:22:38.770 - 01:22:55.486, Speaker F: Yeah, we are certainly in the early innings of dows, that's for sure. Just go on any forum and you can see it pretty easily. But Felix, this has been a fantastic conversation. Thanks so much for joining us. Do you want to share with the people where they can find you? Learn more about cowswap and cow protocol.
01:22:55.518 - 01:23:26.282, Speaker A: In, I mean, cow Phi is our landing page swap. Cow Phi is the user interface that is mostly used for connecting to cow protocol. It's the one that has the happy moo at the end of your are on. We have a big discord community. We're quite active as well. I myself on Twitter and we have at cowswap and at Meth blocker on Twitter as well. And yeah, we're also going to a lot of Ethereum conferences, hackathons.
01:23:26.282 - 01:23:36.442, Speaker A: So yeah, always happy to connect to the community and also to builders and convince people to build more on batch auctions with uniform price clearing.
01:23:36.506 - 01:23:49.250, Speaker E: Yeah, you guys are building some great things as well. So yeah, if there's a builder out there, I hope we can connect someone to you because I want to see a lot of these things in production. So be sure to include that link in the show notes as long as the other links you mentioned. But thanks again, Felix. This is a great discussion.
