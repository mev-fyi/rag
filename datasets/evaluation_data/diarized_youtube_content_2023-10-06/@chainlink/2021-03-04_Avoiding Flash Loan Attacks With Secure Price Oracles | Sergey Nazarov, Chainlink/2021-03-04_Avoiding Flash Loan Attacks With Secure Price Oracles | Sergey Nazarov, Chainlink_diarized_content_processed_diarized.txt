00:00:04.010 - 00:00:30.630, Speaker A: There has been a conversation that's been going around on the Internet, on Twitter, crypto Twitter, about the faulty oracles that might be behind the next crypto hacks. Look, Defi has been suffering lots of hacks, and oracles could be part of that. Can you please tell me about how the industry has been recently hit with several attacks using flash loans? And can you please tell me about just what a flash loan is first and how chainly can prevent those attacks?
00:00:32.170 - 00:01:24.534, Speaker B: Sure. So the nature of the issue here is really people's exposure to data sources and price oracle mechanisms that can be manipulated. So the flash loan is really the tool that makes a certain attack vector possible. It allows anybody with relatively little funds to become well capitalized. And these types of attacks, these types of oracle manipulation attacks require capital. So what a flash loan really does is it makes any one participant or any one adversary a really well capitalized adversary for a small amount of transactions, for a small amount of blocks. And that's really not the problem, because the attack could be carried out by any well capitalized adversary or anybody who could become well capitalized through whatever other means, whether it's a flash loan or something else.
00:01:24.534 - 00:02:33.914, Speaker B: The true nature of the attack is that there's a single price data provider. There's a single exchange in the cases we're seeing right now in DeFi, basically for the sake of ease and speed of development, there has been some cases where people have used on chain dexes. So on chain decentralized exchanges, and basically exchange infrastructure to retrieve the price that triggers their DeFi application. Now, there's two very large problems here. The first very large problem is that you're using a single exchange to derive your prices. That in and of itself is a very large problem. It actually doesn't matter that much if it's a single exchange as an on chain dex or a single exchange as a very well known off chain, centralized exchange, because those consistently have all kinds of price issues, flash crashes, market manipulations for their thinly traded market.
00:02:33.914 - 00:03:12.214, Speaker B: The problem here is one that we've been talking about since 2008. We put out a lot of information about it in 2018. We put out a lot of information about it in 2019. And it's now coming to pass pretty much exactly step by step, the way we predicted. So the real nature of the problem is not even on chain dexes, it's using a single exchange. You don't want to use a single exchange for a price oracle, period. And the reason is that that single exchange, while it might have high amounts of volume trading volume on one day, the next day or the week after, that volume could shift to a different exchange.
00:03:12.214 - 00:04:23.834, Speaker B: And now all someone has to do is manipulate that one exchange's order book, which means they don't even need to know how to code. These attacks right now don't even really require people to be very good at software development or hacks or anything. They just require people to have enough money to manipulate a price on a single exchange that people thought would be secure, which is the whole point of highly reliable oracle mechanisms. It's that a single exchange won't be secure, whether it's decentralized as a dex or whether it's centralized as a single exchange. So that's the first fundamental problem that goes beyond Dexes and beyond flash loans. The version that we're seeing is the simplest version of this attack, where some people have chosen to use on chain dexes, and on chain dexes are exposed, and on chain kind of price discovery mechanisms of all kind are exposed to flash loans because flash loans are on chain and the price discovery mechanism is on chain. So not only is there a mistake, a fundamental mistake, in hey, I'll just use one exchange and it'll be fine, but then there's a second mistake in, hey, I'll use an onchain price discovery mechanism.
00:04:23.834 - 00:05:13.866, Speaker B: How could that go wrong? Well, it turns out that the permissionless nature of those mechanisms means that people can go get flash loans and manipulate the price. But at the end of the day, what four of the five kind of flash loan related attacks that recently happened were about. They were about using the flash loan as a mechanism to manipulate a thinly traded and easy to manipulate on chain price discovery source. Conversely, in Chainlink's case, we source data from hundreds of exchanges. So we provide something called market coverage. And I spoke about this in depth at the Ethereum presentation at the Ethereal conference earlier this year. And we released also earlier this year a very long blog post called the importance of data quality in DeFi.
00:05:13.866 - 00:06:34.426, Speaker B: I suggest that people interested in these topics and problems watch that presentation. I begin digging more into these problems somewhere in the middle of it, if you want to skip the first part, and then also the importance of data quality in DeFi towards the middle or the end of the presentation, we actually have caution messages that expressly tell people not to use a single exchange as their price source. Right now, if there's a DeFi protocol that's using one or two or three exchanges, they are taking serious risk with user funds, because the more sophisticated version of this attack is to look at the protocols that use one or two or three exchanges. And instead of manipulating one exchange, which is obviously easier. Right. The more advanced version of this attack is the manipulation of the two, three, or four exchanges that a DeFi protocol relies on to source their price data. And we absolutely know that's possible because we look at price data on a daily basis from the crypto markets to provide insight and assurances that the data that we're sourcing from over ten different data providers that cover hundreds of different cryptocurrency exchanges is representing the world in accurate market coverage based way.
00:06:34.426 - 00:08:07.830, Speaker B: And the people right now that have a single oracle, whether it's a centralized exchange or on chain Dex, if it's an on chain Dex, they should immediately call an internal meeting and discuss the risks and their level of comfort with those risks. If it's a centralized exchange and it has large volume, they should seriously consider what the manipulable nature of that volume is. Has that volume ever dropped and become able to get manipulated? And if it hasn't, how do the other attack vectors fit in there? Because they definitely fit in there, such as flash crashes and various other things that happen on the best exchanges. And then the third category of people that I think should think very deeply are the people that say, I have two to five exchanges that I'm connected to directly. And that means I've successfully created market coverage over all of the crypto landscape where price discovery could happen. That is a serious miscalculation that I think that people relying on anywhere from their two to five single oracles going to their two to five exchanges, that they happen to like the day when they made the oracle, and that they're not monitoring for manipulation or volume shifts to exchanges that aren't covered, is something that people should very seriously review, because the next more sophisticated version of this attack is not I manipulate a single price oracle. It's I manipulate a single exchange, and therefore the price, all I need to do is manipulate two or three exchanges, and I manipulate the price.
00:08:07.900 - 00:08:08.520, Speaker A: Right?
00:08:08.890 - 00:08:35.890, Speaker B: And once again, this is something that unfortunately is coming and that our system was architected to be completely resistant to from the beginning by sourcing data from hundreds of exchanges, effectively creating market coverage, effectively making sure that the only way that someone can manipulate the price is by actually changing the global price, which is the actual price, and therefore the DeFi protocol is still reflective of reality.
00:08:36.630 - 00:08:42.450, Speaker A: Real quick question before we get off today. How much of DeFi is exposed to these attacks?
00:08:45.690 - 00:09:31.458, Speaker B: Unfortunately, it's a substantial portion of DeFi unfortunately, I see two dynamics. One dynamic is that there are people that for the sake of speed, they spend time on security audits, smart contract audits, which is very good. But then on the oracle side of it, they kind of say, oh, you know, I can get a price here, and it's fine. And it's an on chain price discovery mechanism, like a pool or a Dex or whatever it is, and they kind of say, it'll be have. They're well known. They function well. Just because a Dex or an onchain price discovery mechanism functions for its purposes doesn't mean it's a manipulation resistance price discovery mechanism for you to put the value of your DFI protocol against.
00:09:31.544 - 00:09:32.226, Speaker A: Right.
00:09:32.408 - 00:11:25.590, Speaker B: And this is the thing that people need to really understand, because for the sake of speed, if you have anywhere over a million dollars or even over $500,000 in your DFI protocol and you're using an on chain price discovery mechanism, I think that people should seriously look at the risks and seriously look at how they tweak that. The second category that's actually more concerning for me are the people who have consistently tried to bake their own oracles, and they have one or two developers working on it. Those developers don't have a background in secure system design or distributed systems or cryptography, and they've never built a data product. And what they basically have was one developer trying to build a data provider that creates market coverage, which they usually do through saying, oh, I'm just going to have one to three exchanges as my data source, and then also build an oracle mechanism at the same time, both of which are immensely difficult problems that we have well over 70, 80 people working on with oversight from people like re jewels, who used to be the chief scientist of RSA. So these are not trivial problems. These are very serious problems, both of them. How do I properly source data to accurately represent market prices in the crypto landscape, and then how do I securely deliver that data? Both really big problems and the people that continue to bake their own oracles with an understaffed, underresourced kind of system that continues to rely on one or two or three single exchanges that they happen to like because they think those exchanges are great exchanges, they might be great exchanges, they might be great places for people to exchange cryptocurrency.
00:11:25.590 - 00:12:54.620, Speaker B: It doesn't mean that they're immune to manipulation. It doesn't mean that somebody with enough resources can't go there and manipulate the price on those one or two exchanges and therefore manipulate the price, controlling the DeFi protocol in which user funds are held. And so I think that what we all want to avoid as an industry is any kind of larger failure. And what we want to do is make sure that people designing these in the early stages, in the middle stages, and in the late stages all consider the data quality, the collection of data sources feeding their price, and the oracle mechanism generating that kind of input into a chain. And both of those are very big problems that need to be seriously thought through. If they want to discuss it with us at Chainlink, we're glad to simply give them an overview of what the risks are and what are the key considerations they should be making of a security perspective, and then they can make their own informed decision about how they want to approach those risks. But at this point, using a single on chain price discovery mechanism, especially in, on chain decks that can get manipulated by flash loans or even an off chain centralized exchange, or even two or three of them, I think, is a serious risk that people should seriously reconsider and that we're glad to discuss with them and glad to think through in more detail whenever they'd like.
