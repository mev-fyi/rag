00:00:00.090 - 00:00:18.110, Speaker A: When I think about decentralized finance and what we're trying to achieve, we can't just kind of iterate in our small world. We have to kind of innovate and push beyond it. I'm extremely bullish AMMS as like a market structure, but I think that there are also other market structures that could exist in the future and that I think we also want to discover them and have them be part of the Uniswap ecosystem.
00:00:20.530 - 00:00:47.846, Speaker B: Bienvenue Bankless bankless Nation it is that time of year again. EthCC. The Ethereum Community Conference in Paris, France. All the teams, all the projects, all the protocols saved some of their biggest announcements for EthCC, except for the ones saving it for permissionless, of course. You might remember last year ECC was marked by the time in which three teams all had the first Zkevm. Yeah, that was a year ago at ECC. And today the day I'm recording.
00:00:47.846 - 00:01:32.490, Speaker B: This Sunday, the day before ECC begins, we already have a massive release out of Uniswap labs. A brand new protocol called Uniswap X, a new half of Uniswap that complements the rest of the Uniswap protocol, the yin to the yang of Uniswap's V one through four. Something brand new that fills in the picture of the Uniswap project. Seriously, the best way to describe this is that it's the other half of Uniswap. It's the half of Uniswap that is meant to make Uniswap the best place for swappers to swap tokens. Today on the show, we have Hayden Adams the day before he gives his ETH mainstage talk releasing Uniswap X into the wild. What is uniswap x.
00:01:32.490 - 00:02:46.538, Speaker B: I'm glad you asked. Uniswap X is a protocol for competitive order execution in DFI is a protocol that exists on top of Uniswap's one through four, as well as all the other liquidity sources in DFI that ensures that the market produces the best possible order execution for anyone looking to swap tokens using Uniswap X. The idea behind Uniswap X is that it maximally protects swappers ahead of mev, extractors ahead of arbitragers ahead of frontrunners to ensure that the average Joe who just wants to swap some tokens gets the best possible deal that the market will allow for. In this episode with Hayden, we go under the hood of Uniswap X what it is, how it works and why it's needed. So you'll learn about uniswap x and how it uses a Dutch auction to maximize swapper returns. How this Dutch auction mechanism also ensures that mev is maximally retained by swappers. Also how uniswap x massively reduces bridge risk and almost entirely abstracts away Bridging altogether, freeing up capital to not have to be stuck inside of bridges where it's vulnerable, and also how uniswap X formalizes a new kind of player in the game of making trading in DeFi maximally efficient.
00:02:46.538 - 00:03:21.222, Speaker B: As a disclosure, of course, Uniswap is a sponsor of Bankless, and Bankless also does hold some Uni tokens, which you can see all the details of as well as all of our other disclosures@bankless.com disclosures. So let's go and get talking to Hayden Adams all about this new Uniswap X Protocol. But first, we're going to talk about our preferred centralized exchange for crypto in 2023 kraken. Because you got to get your fiat boomer bucks into the world of crypto somehow. So use Kraken again, our preferred exchange in 2023. If you do not have an account with Kraken, consider clicking the link in the show notes to sign up with one today, kraken Pro has easily become the best crypto trading platform in the industry.
00:03:21.222 - 00:03:52.694, Speaker B: The place I use to check the charts and the crypto prices, even when I'm not looking to place a trade. On Kraken Pro, you'll have access to advanced charting tools, real time market data, and lightning fast trade execution, all inside their spiffy new modular interface. Kraken's new customizable modular layout lets you tailor your trading experience to suit your needs. Pick and choose your favorite modules and place them anywhere you want in your screen. With Kraken Pro, you have that power whether you are a seasoned pro or just starting out. Join thousands of traders who trust Kraken Pro for their crypto trading needs. Visit pro kraken.com
00:03:52.694 - 00:04:18.254, Speaker B: to get started today. Introducing Polygon 20, the value layer for the Internet. For too long, the limitations of blockchains have held back app development and stifled user adoption. The Internet allows anyone to create and exchange information. What's missing is a value layer that lets anyone exchange, store and program value. That's where Polygon 20 comes in. Polygon Labs has unveiled a series of innovations that will radically alter the Polygon ecosystem and web Three as a whole.
00:04:18.254 - 00:04:53.494, Speaker B: By leveraging groundbreaking ZK innovations such as Polygon, ZKE EVM the next iteration of the best in class Plonky two proving system and a first of its kind. ZK powered interoperability layer, Polygon 20 will give users and devs unlimited scalability and unified liquidity. Right now, there is a polygon improvement proposal regarding a potential ZK powered upgrade of Polygon proof of stake. If approved, Polygon proof of stake would become a layer two ZKE EVM validium. So make your voice heard on this proposal. By joining the Polygon discord today, you have a chance to help the polygon community give the Internet the value layer it deserves. Bonjour bankless nation.
00:04:53.494 - 00:05:02.922, Speaker B: It is the Sunday before ECC, and I'm here with Hayden Adams, who has yet another announcement out of the Uniswap ecosystem. Hayden, what's going on, man? How you doing?
00:05:02.976 - 00:05:49.510, Speaker A: Bonjour great to be here. First time in Paris and first time at ECC, but yeah, Uniswap, we keep cranking out the hits. Been pretty busy, hard at work, and most recently, we announced Uniswap V Four, which is new version of the Uniswap Protocol and currently being built in public. And it basically makes it easier for people to create customized liquidity pools. We talked about this last time, hooks, and what you start to see is there's this thing called the routing problem. And as AMMS get more flexible and basically what happens is routing gets harder over time and routing was already actually pretty hard. So today we have hundreds of thousands of tokens.
00:05:49.510 - 00:06:49.450, Speaker A: We have four versions of the protocol, we have multiple chains, we have other liquidity sources. And then you also start to think about things like mev and trade offs between slippage and latency and best execution. And it starts to get really complicated. And definitely with Uniswap V Four and hooks, it actually gets even one step more complicated, right? And traditionally today we have our current open source, we call it the Auto router, which optimizes routing across Uniswap V Three, V Two. And what we've been working on today, I guess a long build up, is what we call Uniswap X, which is a Dutch auction based protocol for routing and aggregating liquidity. And we think it's really powerful and we think it will help provide it. Basically one, improves prices, but also has a bunch of UX benefits, allows for gas free trading, no slippage on failed transactions.
00:06:49.450 - 00:06:58.420, Speaker A: It starts to internalize some mev and provides a bunch of other cool features. I don't know if I say the other big one.
00:06:59.030 - 00:07:31.622, Speaker B: We'll get to every single bit here. And for the bankless listeners out there that aren't familiar, ECC is the place where you announce things, is where announcements comes to be. And like I said, this is the Sunday before, so we're going to be seeing a slew of announcements coming out and we're getting the first one here with Uniswap X, which is this new thing. This is the thing that Uniswap is announcing, this thing called Uniswap X. But I want to actually set more of the stage. And you did a good job, but I want to make sure that we are talking about the problem being addressed here. Uniswap is cool because every single token gets its own exchange, it gets its own pool.
00:07:31.622 - 00:08:34.990, Speaker B: Same thing with Uniswap V Two, v Three made it even more complex, if you will, with this concentrated liquidity. And then when we had you on not too long ago, like four weeks ago or something about Uniswap V four, that whole thing, uniswap V Four was even more expressivity in uniswap pools, more complexity. And the big takeaway, I called it Uniswap's hook centric roadmap to go in parallel with Ethereum's roll up centric roadmap where Ethereum is doing this thing where it's pushing complexity to the edges. It's like, hey, roll ups, you do all the execution stuff and we will just settle. And Uniswap is kind of doing something similar with its hooks and Uniswap V Four, it's, hey, there's a world of expressivity and features and different ways of constructing a pool that we want to enable Uniswap pool builders AMMS to be able to build. And what I think you're leading up to is like, that's all great. We have as much expressivity as we need in uniswap pools, except we're still left with a bunch of complexity, even though it's been pushed to the margins.
00:08:34.990 - 00:08:48.630, Speaker B: And uniswap as a base is simple, the complexity still exists. There's so many pools now. Pools are different, there are different standards of pools. And so uniswap X is a solution to harness all of that complexity, would you say?
00:08:48.700 - 00:09:49.158, Speaker A: Yeah, and I'd say also when I was on last time, we talked about different ways of achieving decentralization. And the most pure form of decentralization is like automation. And you should automate what you can automate with immutable smart contracts and then the next level of achieving decentralization and we talk about this more in the lens of governance, but the next level is just like incentivization and then markets. And if you have a competitive market structure where people are incentivized to do what they should do, then that's more decentralized than something that needs to be governed, which is like the third tier. And for that you achieve that through just like greater distribution of governance rights. And so what we're talking about here is taking the routing we've already talked about this in the context of the protocol, which is highly decentralized. And what we're trying to do is do that for the routing problem, which is people tend to think about AMMS as both swapping and routing, as well as liquidity provision, all bundled together routing.
00:09:49.254 - 00:09:51.290, Speaker B: Swapping and liquidity provisions.
00:09:51.630 - 00:10:49.510, Speaker A: Yeah, swapping. How do you route the swaps through liquidity? But people think of it as like, okay, you have the AMM and you try to find the best price through it. But I think you can start to unbundle them a bit, right? Because today most interfaces have different strategies for how they route through pools, right? And there's various aggregators and they're trying to find every possible liquidity source. There's a uniswap UI, which today basically just has trez discover across uniswap pools. And what we're trying to do here with Uniswap X is create a competitive marketplace for routing. It's almost a way of achieving more efficiency through decentralization. The more people that can participate in finding the best routes, discovering the best routes, discovering the best pools, discovering all the different liquidity, the better prices you can get in the long run if you can create a competitive marketplace.
00:10:49.510 - 00:11:00.398, Speaker A: And so what we're trying to do with Uniswap X is create a competitive marketplace for routing across liquidity. And that liquidity can be on chain, it can be off chain. But yeah, that's essentially what we're trying.
00:11:00.404 - 00:11:55.118, Speaker B: To do here, creating a competitive marketplace for routing. So with this explode like Uniswap, even its earliest days in V one was an explosion of pools. The cool thing about Uniswap is you can list any token, and that only got furthered with uniswap V two, V three, and V four. Now we have pools all over the place. And so the routing problem maybe to define the routing problem is that with all of these pools and all these different sources of liquidity, getting the best price for your trade is a computational problem because there's so many pools out there. And so I think what you're trying to do with Uniswap X, a marketplace for competitive order routing, is you're just giving that up to the market and saying, hey, market. Instead of the uniswap router being the thing that manages all of that complexity, you're just giving it up to the marketplace and allowing routers to come in and service that role to make sure that traders and swappers get the best liquidity, get the best offer.
00:11:55.204 - 00:12:43.594, Speaker A: Yes. And I think the thing I'd add to that is that because we're doing this on a blockchain, it starts to touch on a bunch of other problems in complexity. Right? You could do this in TradFi if you think about purely in TradFi terms. And it's like just like optimizing routes, but we also deal with things like gas and then we deal with things like the fact that validators exist and they get to choose the order of transactions within a given block. And that starts to take us into what people call I only found out recently that it was rebranded from minor extractable value to maximal extractable value. But then it takes you into mev territory, gas optimizations and latency, and there's all these other things as well. Another thing is that there's also another area of price improvement is batching.
00:12:43.594 - 00:13:34.014, Speaker A: People talk about batching all the time. If people are trading in the same direction at the same time, if you just route it through a uniswap pool in the back of the uniswap pool, right, then that's less optimal than netting it all together. So by creating kind of a competitive marketplace for it where people are competing in an auction, it basically forces people to find the most sophisticated strategies that offer the most price improvement. And so sometimes it might mean executing multiple transactions at the same time. And in that way you're saving some gas costs and you're also maybe internalizing some of the price improvement for swappers. But yeah, look, the real goal is to deliver value to users at the end of the day. And then the other thing I'll mention is that, again, because we're on blockchains, there's a bunch of UX implications of just like gas.
00:13:34.014 - 00:14:21.230, Speaker A: So with Uniswap X, orders are off chain signatures that are then rather than signing transactions that are sent directly to the chain, users sign off chain signatures that express their intent as is a word of the moment in crypto. And that is sort of an auction of a price decaying auction. And then people are competing as soon as the price hits a point where people are willing to fill it, the fillers, a new class participant, are submitting it to the chain. And those fillers look similar to the block builders of today. And likely will be a lot of overlap or similar to the trading firms and arbitragers. And because orders just start off as off chain signatures, you also get benefits. Like if your transaction is going to fail, it never gets submitted.
00:14:21.230 - 00:14:44.294, Speaker A: And also just like being able to abstract away gas for users. So if I want to swap USDC for Dai, I don't want to think about ETH as an input. Right. Today when you swap USD for a Dai, your ETH balance goes down a little bit here with Uniswap X, you just sign a message, someone else pays the ETH and that's reflected in the price that you get. So there's a bunch of other benefits as well. But yeah, there is. The first thing you said as well.
00:14:44.332 - 00:15:07.870, Speaker B: Yeah, there's a lot of things under the hood there that I want to unpack, like the gas, the mev, all of that kind of stuff. But really, just to start at the very, very top, how is this different? And just to make sure that we're setting the table appropriately, how is this different from a Dex aggregator or some of the other liquidity optimizer services that are out there? If we take a peek under the hood, how should people think about this in its new form?
00:15:07.940 - 00:15:50.886, Speaker A: Yeah, I say that for most Dex aggregators and forTOs where there is prior work and there's other teams that are attempting to do things that are categorically similar. But in terms of the traditional model for a Dex aggregator, what people are doing is just like you have a single team that is integrating liquidity sources one by one, and in doing that, you're hoping to get as much liquidity coverage as possible. That was like the kind of traditional Dex aggregator. There's definitely various experiments like Kaswap Infusion and stuff that get into closer territory to what we're doing with Uniswap X. But here, rather than trying to manually find all the liquidity sources here, we're basically saying anyone can do that and they're competing against each other. And so it's a marketplace.
00:15:50.998 - 00:15:53.674, Speaker B: It's a little bit more Meta than a Dex aggregator.
00:15:53.722 - 00:16:03.050, Speaker A: So a Dex aggregator, there was a uniswap Meta was one name we considered, but naming things is hard and I think Meta kind of ruined.
00:16:03.130 - 00:16:40.038, Speaker B: Meta is now taken. That box has been checked. Okay, so a Dex aggregator provides a singular solution to getting the best liquidity and that is their solution. And what you're saying is, in order to improve that product, the teams behind every Dex aggregator needs to serially manually, one by one, integrate with liquidity pools and in order to improve their product. And what you're saying is Uniswap X is not that. It is actually a place for all of those solutions to compete in the marketplace. And maybe at this point, complexity around uniswap is so large that knowing the correct way of producing the best outcome is perhaps impossible.
00:16:40.038 - 00:16:42.106, Speaker B: Which is why you need to leave it up to the free market.
00:16:42.208 - 00:16:53.546, Speaker A: Yeah, that's definitely it. And there's also other liquidity sources that can start to be integrated there as well. I'd also add that signed off chain order based auctions are like a really powerful primitive.
00:16:53.738 - 00:17:09.266, Speaker B: Let's dive down into that. So if I go to uniswap, I sign a transaction, I broadcast it to Ethereum in twelve to 24 seconds, it gets included in the blockchain. That is the current uniswap user experience that people are used to. With Uniswap X, we have this new thing. Can you unpack that a little bit?
00:17:09.288 - 00:17:46.334, Speaker A: Yeah, I think that something that's funny is that actually every like, you already have an auction happening every transaction, right? Because there's like an auction for blockspace, but people are competing to like I'd say, that one thing that's interesting is that if you imagine there's like a price curve and then there's a gas price curve. And today, whether or not your order gets included is based purely on the gas price curve, not the asset price curve. And so this combines everything. You just have the price curve. The nice thing is it kind of combines the gas and the price into a single thing, which is part of it. But yeah, users sign off chain orders they're broadcast, and they can be broadcast.
00:17:46.382 - 00:17:51.086, Speaker B: In variety of ways, signing off chain orders as opposed to signing a transaction.
00:17:51.198 - 00:18:47.810, Speaker A: People have talked about these for a long time, like meta transactions or sponsored transactions, all these it's like a similar category of things, but we're like bundling the gas auction of it, getting included in a block with the price auction of trying to optimize your price at the same time. And so there's like a nice efficiency thing there where sometimes, for example, in the past and definitely things improved a lot with 1159 EIP, 1159. But sometimes in the past, for example, your transaction would wait until the gas dropped a significant amount to get included. But in that time, the token that you were selling also dropped. And so it would have been better for you to pay more gas sooner, but your transaction has no awareness of and that's where when people talk about mev awareness, if the fee that you're paying has no awareness of the transaction that you're doing, then you're really not optimizing. And so part of this is around that there's also just like a gas, there's like a UX benefit. People don't like thinking about gas.
00:18:47.810 - 00:19:28.340, Speaker A: When I'm trading USDC for Dai, I just don't want to think about ETH. And it's confusing. And that's something that confuses users a lot. I think something that maybe makes Uniswap a little bit unique in not totally unique, but somewhat unique in how we are able to develop and design things is we just have a lot of users and we hear a lot from them. And some of how we approach solving problems is we're like, okay, what is holding us back today? What are our users struggling with right now? And that's part of what led to us creating a wallet, is our users were struggling with Wallet UX. And it's part of what led to some of our design decisions here, is just like, how do we continue to push things forward?
00:19:28.790 - 00:20:27.914, Speaker B: I want to drill down on this off chain order thing just a little bit more because I think it's a great microcosm for the solutions being put forth by Uniswap X as a whole to begin with. So in Uniswap in its current form, like I said, I sign a transaction, I broadcast that transaction. The gas fee that I pay is hard coded into that transaction and that is independent from the trade that I'm making. And so these are two different variables that are not talking to each other and can produce suboptimal results because maybe, like you said, the token moves against me. In the time that I tried to save $2 of gas, I lost $15 off my trade exactly with signing an off chain order, which is signing a transaction but not broadcasting it and just leaving it for somebody, a filler, a taker to take and fulfill that. They are allowed to combine the computation between optimizing for gas fees and optimizing for the actual swap. And so they take that complexity and do that computation to produce the best outcome.
00:20:27.914 - 00:20:50.810, Speaker B: And because it was left off chain, it was assigned an off chain order, some sort of off chain service provider, some filler who's managing this order routing and all the other complexity. They're able to manage the complexity between the gas and the swap to produce a better outcome for a user. And that's just like one piece of many pieces of combined complexity that allows for a better swapping experience, for sure.
00:20:50.960 - 00:21:37.626, Speaker A: Something I'll add is that that might be like, oh, there's an off chance, what does that mean for decentralization? But I think it's worth noting that today the way it works is there's no magic, like user signs that goes straight to the chain right there's. Like, we have mem pools, we have block builders, we have infura infura, we have all these things in between. And what we're trying to do is say, let's optimize what's in between to optimize for the best outcomes for users. Because today block builders aren't optimizing to give users the most money, they're optimizing to take the most money for themselves. And actually, funny enough, a lot of that money is going to ETH holders through efficient mev auctions. So actually ETH holders are making a lot of that profit, but we ultimately want to give a lot of that value back to swappers. I know we like ETH, but we.
00:21:37.648 - 00:21:42.326, Speaker B: Also like UX and value retention by end users.
00:21:42.438 - 00:21:58.866, Speaker A: I also mentioned that I mentioned off chain orders, like signed off chain orders as like a general primitive. I think something that's really empowerful with uniswap X is it actually opens up a world for cross chain swapping as well. So today we're launching it depends on.
00:21:58.888 - 00:22:00.830, Speaker B: When this gets hopefully on Monday.
00:22:00.910 - 00:22:02.622, Speaker A: Yeah. Monday.
00:22:02.766 - 00:22:04.514, Speaker B: The United States time.
00:22:04.552 - 00:22:50.482, Speaker A: Yeah, July 17, something like that. There's going to be like an opt in beta. People can sign up to or people can opt in in the UI to start having some small percentage of their orders route through this. We're starting small. It's only for certain pairs, for certain trade sizes, et cetera, so that we can continue to give time for more fillers to come into the ecosystem and continue optimizing how we parameterize the system. But today we'll have a version that's just like on main net, on Ethereum, but in the long run we can really make this cross chain. And you can sign orders that are this method of signed off chain orders is really powerful and expressive and allows for really good user experience and efficient cross chain swapping as well.
00:22:50.482 - 00:22:58.590, Speaker A: And so not today, but maybe hopefully later in this year we'll see cross chain trading and that will also be really cool.
00:22:58.680 - 00:23:25.998, Speaker B: I want to try and define the landscape of what uniswap is now because we have on chain, on Ethereum and the layer twos, we have uniswaps one through four, which are AMMS. And then now we also have uniswap X, which is an order routing protocol. It's another protocol. And so this is a new protocol. This is not an AMM. This is actually something completely new compared to all the uniswaps one through four. This is not a uniswap five.
00:23:25.998 - 00:23:27.422, Speaker B: This is something completely different.
00:23:27.476 - 00:23:29.450, Speaker A: This is a parallel and complementary.
00:23:29.530 - 00:24:05.514, Speaker B: Parallel and complementary. Like the pieces fit really, really well together. But I really want to kind of carve out what the definition is of uniswap X. I'm going to do my best and you can correct me because I'm only get so far. Uniswap X is a protocol, an open ended protocol for service providers, fillers, trade executors to come and fulfill the best trade according the parameters of a swapper. So a swapper comes to uniswap X and they say, hey, I want to do something. And uniswap X puts that into a package that fillers can all compete on.
00:24:05.514 - 00:24:29.698, Speaker B: And so it's like a protocol. What do protocols do? They bundle things in easy to manage packages of information so that other service providers, fillers, swappers, liquidity providers, whatever in the ethereum ecosystem can all come and compete on that vector of providing that one swapper, the best swap possible. And this is again complementary with uniswaps one through four, but is a completely different protocol, correct?
00:24:29.784 - 00:25:09.658, Speaker A: Yeah, I mean, look, yeah, you could start to think of AMMS as ways of creating liquidity, building on top of liquidity as a building block there's like on chain integrations and it's just a really cool, expressive and efficient on chain way of providing liquidity. But I'd say that naive routing solutions through AMMS in the long term are not going to make it. You kind of need your routing solutions to be aware of things like mev aware of kind of more expressive in user intents. And so you could think of this as we already have a routing layer, we already have this thing we call the auto router. We also have this thing we call client side routing. So we have a virtual in our web app today. You can actually toggle between two types of routing.
00:25:09.658 - 00:25:53.786, Speaker A: I don't know if you know that, but there's a client side which basically turns off the API entirely and just speaks directly to the chain that's maximally provable. But to make it better for users you kind of need to have smarter routing. And so we have this smart order router, auto router thing we call and that is a little bit faster and discovers more routes. But there's an API behind it and it's open source. I would think of this as a protocol that lives in that domain, not as a protocol that lives in the AMM. We already have this, the routing side of the system already exists and we're just kind of know updating it with a new protocol. And I'll also mention that Uniswap X does have there's like on chain smart contracts that settle orders.
00:25:53.786 - 00:26:13.566, Speaker A: They're immutable actually open source GPL, open source and then there's, you know, and then you have like front ends that broadcast orders fillers that have to discover those broadcasted yeah, and then the fillers basically can submit them directly to the smart contracts.
00:26:13.678 - 00:26:43.510, Speaker B: So I think what Uniswap X is really doing is they're enabling a new type of player in the uniswap arena. So we have swappers already. Most people listening to this are swappers, some people listening to this might be liquidity providers and they are providing liquidity into the AMM. So we have the AMMS which are uniswaps one through four. We have the liquidity providers, we have the swappers, the traders who trade on Uniswap. But now Uniswap X is enabling this new type of player called a filler.
00:26:43.670 - 00:27:19.946, Speaker A: Yeah, I think it's worth noting that they're not new. We just have a routing system that is aware of them, right, formalizing them. We're formalizing them in a way that can put constraints on them because right now what they do is you can think of them as today as the people that do the most advanced trading strategies, the people that do a lot of the arbitrage, the block builders, the mev extractors, right? And what we're trying to do is put constraints on them and take value that would go to them and give them back to the swappers. So the players exist, we're just formalizing them and we're having them compete with each other in a way that tries to drive as much value back to swappers as possible.
00:27:20.128 - 00:27:37.886, Speaker B: So swappers the people who trade on Uniswap just to trade tokens meme. Tokens, USDC ether are now going to be pointed towards Uniswap X. So to trade on Uniswap now in the future, now with Uniswap X means to be trading through Uniswap X, correct?
00:27:37.988 - 00:28:00.486, Speaker A: Well, first the routing system we're going to build is going to direct your order wherever it thinks will get you the best price. And so especially at launch with the beta, a lot of orders will just drout through our existing routing system. I'd say that over time, probably more volume will go through Uniswap X. But I think that over time, also most Uniswap X volume will go through Uniswap, the AMM protocol, right?
00:28:00.508 - 00:28:18.058, Speaker B: So uniswap x people will trade on uniswap they can use Uniswap X, and then Uniswap X in its nascent time will just say, oh, you know what's most efficient? The uniswap order router. But as it develops and grows and matures, it might find better pricing and better just sources over time.
00:28:18.224 - 00:29:04.342, Speaker A: But for what it's worth, we're already in that world, which is today, if you don't get best prices going to uniswap, then people will go somewhere else. And so there's always other liquidities. I think that the goal of uniswap the AMM is to have the best liquidity in the most assets possible. And I think that Uniswap V Four is like a really powerful way of achieving that. And I'd say that it's so funny. One thing that's really interesting is when I was developing Uniswap V one way back in the day, the mental framework was like, do AMMS have a place in this world? The frame wasn't like, I'm going to build the best AMM that's going to take over all the liquidity. This is like a new way to do liquidity creation.
00:29:04.342 - 00:29:42.946, Speaker A: And I wonder if it will work and have a place in the world. And I think we saw that it does. And it's like a really efficient, cool way of creating liquidity and unlocks some really powerful new things, like the ability for anyone to create liquidity at any anyone can create liquidity. Not anyone can create liquidity as efficiently or effectively as Citadel, but anyone can do it at some level, right? And that's why a lot of the earliest pools that were big on uniswap were like these longer tail pools that were struggling to get exchange listings, et cetera. MKR and Dai were very big in the early days because it was like the only place to trade them. And so AMMS are like, have these new unlocks. They're like, oh, anyone can provide liquidity.
00:29:42.946 - 00:30:32.920, Speaker A: It also has on chain integrations, which are money Legos, like a really big unlock. I think that when I think about decentralized finance and what we're trying to achieve, we can't just kind of iterate in our small world. We have to kind of innovate and push beyond it. And I'd say that I think that AMMS are going to be like I'm extremely bullish AMMS as like a market structure. But I think that there are also other market structures that could exist in the future. And then I think we also want to discover them and have them be part of the uniswap ecosystem and have them be complementary. And so you could think of this as like, oh, some volume might go elsewhere, but that volume might go elsewhere anyway because if uniswap isn't offering the best prices and so I'd say that other liquidity sources are going to exist whether or not we are aware of them and look for them.
00:30:32.920 - 00:30:57.018, Speaker A: Also worth mentioning that today uniswap has a pretty the funny thing is that we've actually seen this play out in aggregators. Uniswap still is like the largest liquidity source for every aggregator that's out there, even though they all have private market makers, other liquidity sources. And I think that the sort of network effects that can build up around v four will also be really helpful.
00:30:57.194 - 00:31:03.158, Speaker B: So what you're saying with all of that is that uniswap x is not a uniswap maximalist protocol.
00:31:03.354 - 00:31:59.746, Speaker A: Well, it has the word uniswap. I'd say that I don't want to go that far. I'm pretty AMM maxi in many ways, but I'd say that it's expressive and starts to push the uniswap ecosystem to go beyond strictly AMMS. But I'd say that it still is also the best way to route across AMMS, which is I think, really important for anything that is lost to other liquidity sources. There's also gains, I think, in routing efficiency. And also really importantly when you start to think around, when we jump back to that hooks problem, one of the biggest questions that we got after the sort of announcement of our vision for uniswap e four was like, okay, I'm a team, I create a hook and how do I make sure that people front end? One of the nice things about uniswap is if I create a pool, I know that routing is going to be discovered in routing engines. If I create a new hook that has some new, let's say it has like TWAM in it.
00:31:59.746 - 00:33:01.202, Speaker A: TWAM. If you're routing through a TWAM pool, you need to be aware of the TWAM component because that affects the price you get and you can't just look at the liquidity. Or if I create some other custom hook, how do I know that maybe people are afraid that it's not safe and they have to audit it and they take some time to audit and they don't care about me. How does my liquidity get discovered? And this is like the solution to that, right? It's like if someone creates a new custom pool, a new custom hook, rather than needing uniswap Labs team to audit their hook and integrate it into our front end, which is not the ideal process, let's say maybe we're going to be in a world where there's a million hooks. Right now, we already have hundreds of thousands of pools. We're going to be in a world that has millions, probably eventually hundreds of millions of pools, and you can't have a single kind of team just does routing. And so you can think of this as like now all you need is to find one filler who's willing to integrate your hook.
00:33:01.202 - 00:33:33.982, Speaker A: And then that hook is represented in the liquidity that you find in front ends, like uniswap front end. So someone can not only create their liquidity pool on uniswap, they can find one of any filler in the world that's willing to include that hook. And then from day, you know immediately that liquidity is represented in the uniswap UI. And so I think that you could think of it as adversarial, but I kind of think of it as almost strictly required to make it work in the long run. And so, yeah, pretty excited.
00:33:34.126 - 00:34:03.670, Speaker B: MetaMask has something new. Introducing MetaMask portfolio. MetaMask Portfolio is the best way to view your crypto portfolio from a holistic level. See everything across all the chains all at once. In your portfolio, MetaMask will report the aggregate value of all the assets in your MetaMask wallets and even the other wallets you import, too. But MetaMask Portfolio isn't just a passive portfolio viewer. It is a place to do all of the money verbs that make DeFi so powerful you can buy, swap, bridge, and stake your crypto assets.
00:34:03.670 - 00:34:41.762, Speaker B: So not only is MetaMask the easiest place to see your wallets in aggregate, but it's also a powerful battlestation for all of your DFI moves. So go check out your MetaMask portfolio because it's waiting for you to open it up. Check it out at portfolio MetaMask IO Arbitrum is accelerating the web3 landscape with a suite of secure Ethereum scaling solutions. Hundreds of projects have already deployed onto Arbitrum One. With a flourishing DFI and NFT ecosystem, Arbitrum Nova is quickly becoming a Web three gaming hub. And social DApps like Reddit are also calling Arbitrum home. And now Arbitrum Orbit allows you to use arbitrum's secure scaling technology to build your own layer three, giving you access to interoperable customizable permissions.
00:34:41.762 - 00:35:30.422, Speaker B: With dedicated throughput all of these technologies leverage the security and decentralization of Ethereum and provide a builder experience that's intuitive familiar and fully EVM compatible. Faster transaction speeds, and significantly lower gas fees. Are you a dev but you don't know solidity? With Stylus Arbitrum's upcoming proposal for a programming environment upgrade, developers can write smart contracts in Rust, C, C and many more coding languages. Arbitrum empowers you to explore and build without compromise. Visit Arbitrum. IO, where you can join the community, dive into the developer docs, bridge your assets, and start building your first app on Arbitrum. Mantle, formerly known as Bitdao, is the first Dowled web3 ecosystem, all built on top of Mantle's first core product, the Mantle Network, a brand new high performance Ethereum layer two built using the Op stack but uses Eigen layer's data availability solution instead.
00:35:30.422 - 00:36:21.958, Speaker B: Of the expensive ethereum layer one. Not only does this reduce Mantle network's gas fees by 80%, but it also reduces gas fee volatility, providing a more stable foundation for Mantle's applications. The Mantle Treasury is one of the biggest Dow owned Treasuries, which is seeding an ecosystem of projects from all around the web3 space for Mantle. Mantle already has subcommunities from around web3 onboarded like Game Seven for web3 gaming and buybit for TVL and Liquidity and onram. So if you want to build on the Mantle network, mantle is offering a grants program that provides milestone based funding to promising projects that help expand, secure and decentralize Mantle. If you want to get started working with the first Dowled Layer Two ecosystem, check out Mantle at Mantle XYZ and follow them on Twitter at zero xmantle. I think this is just overall a really good, elegant lesson as to how markets harness complexity really, really well.
00:36:21.958 - 00:36:56.222, Speaker B: There'd be no way where one single player could manage all of this complexity with all these different pools versus the competition of just like how just like, oh, it's too complex, just make the market deal with it. I want to run through how Uniswap X actually works. I mean, we've talked a lot about the contours of it, but maybe we can run through the lifecycle of a transaction and how Uniswap X actually ensures that that transaction gets the best actual output of whatever it's trying to do possible. So maybe you can run us through Uniswap X under the hood.
00:36:56.286 - 00:37:04.180, Speaker A: Yeah. So, I mean, I guess we can start with the uniswap front end for swappers. In the uniswap front end, it actually looks and feels very similar. Okay.
00:37:05.190 - 00:37:06.822, Speaker B: No new skills are required here.
00:37:06.876 - 00:37:38.814, Speaker A: No new skills. Hopefully fewer skills in the long run. But when you go to you choose the tokens you want to trade, you click like swap. The first difference is actually that you'll see that there's no gas for your swap. I'll caveat that there is still like one initial approve per token of the permit contract. We created these permit contracts that you've probably seen that will basically allow any signature to do signature. Any token that you approve on this contract can now do signature based approvals forever for you.
00:37:38.814 - 00:38:22.026, Speaker A: So that's like what permit is, and this is building on top of that. So you do have to do an approved transaction every once in a while for new tokens that you haven't traded. And that does cost gas, and there's no way to avoid that unless the token itself includes gas with signatures or you're using a smart contract wallet. But for tokens that do have signature based approvals, eventually anyway, once we have our token approvals, which is our from that point on, you make a swap and instead of paying gas and instead of signing a transaction, if you're using MetaMask, it looks a little different. You swap wallet than a regular transaction. It just says you're just like signing a signature. So you sign a signature and then at that moment, it feels very similar.
00:38:22.026 - 00:38:37.214, Speaker A: It then goes to a pending transaction state for the user. One noticeable difference is that when you sign a transaction, you can immediately go to Ether Scan and start waiting for it. Here, it's just an off chain signature. So the order hasn't been executed. We don't know what the transaction hash will be yet.
00:38:37.252 - 00:38:41.614, Speaker B: Right. At this point, it's not even in the mem pool. It's in the pre mem pool.
00:38:41.662 - 00:39:13.706, Speaker A: Yeah. At this point, the order is broadcast to a network of fillers from the front end, and there's an API for that. And then it's similar to our auto routers. There's an API and the order is broadcast to a network of fillers. And I'm going to start with the base case and then mention that there's like an optimal there's an additional ability to parameterize through RFQ. But just like the base case of a Guda order, you sign an option order, it's broadcast. Your order is basically like a decaying price auction.
00:39:13.706 - 00:39:32.370, Speaker A: So at the moment you sign it, you're willing to accept one price, and then the price goes down a little bit over time and what, that gets filled? Yeah. So you start at like maybe it starts at a little bit above the price you expect, then it decays over time. And what that does is the moment that it's worth it for someone to fill, they will. And so that's like what creates a competition. Right.
00:39:32.440 - 00:39:42.486, Speaker B: And that's what in theory, produces the best possible outcome. Because so long as somebody is some rational actor is saying, hey, that's profitable, I'll do that. You'll get the first profitable actor that'll do that.
00:39:42.508 - 00:40:14.542, Speaker A: Yeah, the person who's willing to take the lowest margin or has the best strategy, and they're competing against other people and they want to make sure they get it, so they try to give the best price. And then at that moment, the filler not you submits the transaction, meaning they're paying the gas. And then what that does is it pulls your tokens out of your wallet. You've approved it. There's a smart contract that you fill through, and it enforces that they can only take the tokens out of your wallet if they send you the required amount of tokens based on the moment at which it executes. Right. Because there's like a timestamp component and that's about it.
00:40:14.542 - 00:40:47.370, Speaker A: You sign an order, the first filler that's willing to fill it takes it and submits it on chain and pays the gas. And that does the transaction. I think that something that starts to happen here is you think about latency. So back in the day, pre 1159 unisoft transactions used to take like a few minutes sometimes. People were like, the gas markets weren't very good or very efficient. Today it's a little bit faster. About 75% of uniswap trades execute in the first block after they sign it and about 90% in the second block by the end of the second block.
00:40:47.370 - 00:42:04.802, Speaker A: I think that there's definitely a need for the auctions to happen very quickly and so there's an optional component for this system optional at a smart contract level, right? UIs can do whatever that allows you to layer an RFQ on top of it, which basically means you use an RFQ system, right. Request for quote they're called where you ask a bunch of people what is the best price you'll give me? And you use that to inform what the actual market price is rather than guessing. When you're parameterizing the auction to incentivize people to give you their best quotes, you do have to give them something sort of in return. And so the way that that looks in the smart contracts is if you use the optional RFQ parameterization then basically there's like a slight priority given to the RFQ winner for the first, maybe few blocks. So what it looks like is like I sign my order if I'm doing a transaction with an RFQ, I ask the best quote, I sign an order that says this person can fill at their quote anyone can fill if they have real price improvement, they can fill and they can come in before them. But there's like some margin of price improvement that they have to offer. So you can't offer like one way higher, it's like you have to offer like maybe 0.5%
00:42:04.802 - 00:42:36.240, Speaker A: higher, something like that. So there is still a public auction component where someone can come in with price improvement and outcompete the RFQ winner, which is important. But there is like, for a few blocks, a slight priority given to RFQ winner, which allows you to basically get very efficient, very fast price discovery. And in that way, maybe most transactions that include the RFQ can execute maybe in one to two blocks as opposed to if you weren't using the RFQ, maybe it would take like five to ten blocks or something like that.
00:42:36.610 - 00:42:44.634, Speaker B: Yeah, with this model, this decreasing price auction, which is a Dutch auction which has existed from the 17 hundreds, which is why we know it's a really good primitive.
00:42:44.682 - 00:42:45.920, Speaker A: Do you know where it comes from?
00:42:47.650 - 00:42:48.430, Speaker B: The Dutch?
00:42:48.510 - 00:42:50.782, Speaker A: Yes, but do you know from tulip auction?
00:42:50.926 - 00:42:53.774, Speaker B: Yeah, whenever I see it Dutch, I'm like was it the tulips?
00:42:53.822 - 00:42:57.490, Speaker A: Yeah, it was the tulips. It was the tulips, yeah, it was flower auctions.
00:42:57.570 - 00:43:20.890, Speaker B: We'll put a pin in that one. First tulips, now dogs. You have the option of extending the time or slowing down the decreasing price for a very long time. Like you could go up to ten blocks or you could go up to ten days for whoever wants to do that, for whatever reason. What would be the advantage for extending that period of time? Why would someone do that?
00:43:20.960 - 00:44:05.242, Speaker A: Yeah, I'd say that one thing is if you don't want to depend on this RFQ system, or if the RFQ system is not optimal for whatever reason for your trade, some people might just be comfortable. Part of it is there's sort of an assumption in what I'm saying that users need their transaction to execute in the same one to two blocks. And I think a lot of users that's really important, and it's like a reason that when we build things at Uniswap, we have to consider what our users care about. Having this RFQ component allows it for users who want their trade to execute in the next block. It allows that. But if users are comfortable waiting, like a minute or two, definitely there's a lot of debates you could get into about whether or not there's price improvement. It probably depends on the size of the order.
00:44:05.376 - 00:44:05.706, Speaker B: All right.
00:44:05.728 - 00:45:05.078, Speaker A: If you're making, like, a large order, giving some people time to source liquidity can optimize the price. So waiting a little bit longer, giving more time for it to propagate more people discover it, et cetera. There is risk that the price moves against you during that time, and not if you have an order that executes more slowly. There is risk you are taking on price, risk that maybe the trade will go down, the price will go down, not up for the token you're selling. And so it's not like, strictly better, but it does let you remove the RFQ system. And I'd say that waiting one to two minutes, you're not really expecting too much price movement, and it might actually optimize price a little bit. But it's such a kind of interesting design in trade off space that it's like I'd also mention that one reason that might actually be is that batching within the system, if you have orders that execute slowly, maybe someone else makes an order in another direction within that time, and then it's more efficient to net against them.
00:45:05.078 - 00:45:21.214, Speaker A: Something that maybe people ever know is like, the story. Not everyone, but most people know the story of Carl and my first friend in the space, and he gets me into Amens. I don't know if you know, the first three people in order that I met in the space were Carl, then Phil Dyan, then Dan Robinson.
00:45:21.262 - 00:45:22.686, Speaker B: Those are pretty good lineup.
00:45:22.798 - 00:45:56.000, Speaker A: Good lineup. So the second person I met in this space was Phil and the co founder of Flashbots and, like, mev, inventor of the term mev, I believe, discoverer of mev. Yeah, he released, like, the Flash Boys 2.0 paper. So we've been talking about this design space since well before. And the first kind of version of Unispot, right, is like, oh, I mean, yeah, this leaks mev, kind of. I mean, we didn't have the word mev yet, but he's, you know, and he sent me a paper by this guy, Eric Bootish called.
00:45:56.000 - 00:46:58.798, Speaker A: It was something like frequent batch auctions, something trading, arms race. Frequent batch basically gets into the whole Flash Boys 2.0 and basically postulates that if time is continuous, if you treat time as like a continuous thing, then these HFT games are inevitable. That there's always people front running is inevitable if time happens. In order to create fairer systems that don't favor an arms race, you kind of have to break time up into discrete intervals and do batching within those intervals. And definitely there have been earlier attempts at it in ethereum but I think there's often UX issues around it. So I think what we're partially trying to do is experiment with and explore this trade off space of how do we create fairer outcomes that don't have maximize power in the most sophisticated traders in the world? Purely.
00:46:58.798 - 00:47:10.082, Speaker A: And I think part of that is starting to enable things to be executed in batch and starting to be more aware of things. Like mev, I don't even remember a question you asked at this point. I'm kind of just ranting.
00:47:10.146 - 00:47:20.814, Speaker B: But we were going through how did just the lifecycle of a token and then also just the time for why someone would extend out a long period of blocks.
00:47:20.882 - 00:48:03.460, Speaker A: Yeah, all that to say users have their preferences for how their order if someone really cares about executing their order immediately, they probably are going to get a slightly less optimized trade because they have to kind of rely on you can't very efficiently discover the auctions, allow you to efficiently discover the right price. But the slower if the auction is too fast, it's not very efficient. You have to know how to parameterize your auction and so the faster you need it to converge, in some ways there's less time for optimization and so like, yeah, slower orders over time might just let you get more optimal prices where you feel better about there not being someone who's extracting some.
