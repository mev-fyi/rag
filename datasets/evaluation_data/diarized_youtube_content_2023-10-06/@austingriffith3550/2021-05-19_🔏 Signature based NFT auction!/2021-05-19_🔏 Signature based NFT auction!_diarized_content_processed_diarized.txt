00:00:00.410 - 00:00:08.334, Speaker A: We're recording. Happy bow tie Friday. I'm Austin Griffith. We're here with some dudes. We're going to build some stuff or we're going to show some stuff off.
00:00:08.372 - 00:00:08.814, Speaker B: Right.
00:00:08.932 - 00:00:12.250, Speaker A: We're looking at NFT signature.
00:00:12.330 - 00:00:12.810, Speaker B: Signature.
00:00:12.890 - 00:00:14.622, Speaker A: Signature based, yeah. Awesome.
00:00:14.676 - 00:00:15.920, Speaker B: Signature based, yeah.
00:00:16.370 - 00:00:18.880, Speaker A: Take it away. Let me set you so you can share.
00:00:20.130 - 00:00:27.186, Speaker B: Yeah. Okay. All right. So it's working. Yep.
00:00:27.218 - 00:00:28.040, Speaker A: We've got.
00:00:30.330 - 00:01:13.714, Speaker B: So basically, so we already built an NFT auction and the idea for this project was to make it signature based so that bidders can make bids off chain by signing the transaction, basically, and submitting into their back end. So basically they don't pay gas in order to make a bid. So that was a challenge and we just tried to build the thing. Yeah. So how this works, let me kick off and then virash can. So let's give it some. Yeah.
00:01:13.714 - 00:01:24.630, Speaker B: So basically this project is a fork of buyer mint NFT branch and in order to start, we should mint an NFT. So let's start with minting.
00:01:26.730 - 00:01:56.930, Speaker A: So there's a simple NFT example branch and that's where it starts. And that just gives you a gallery and a script to mint nfts. And then there's the buyer mints, which pushes the minting off to the buyer when they buy from the gallery. And then you guys did an NFT auction, gallery on top of that. And then I think this is a signature based version of the NFT auction. So we're like four branches on the tree deep into an NFT thing.
00:01:57.080 - 00:02:27.690, Speaker B: That's awesome. Yeah. So after we mint an NFT, we can start an auction if we own this NFT, basically. And let me just open another window with another wallet. So we see how UI differs if we use two different accounts. So in this account we just see that this NFT is owned by this user and we can't start an auction, basically because we don't own this NFT. So let's try to start an auction.
00:02:27.690 - 00:02:43.442, Speaker B: So we should put a minimum of bid. Let's say that minimum bit that we can make is 0.2 e. And let's say that our auction will be just for testing purposes. Let's say it's 180 seconds. So three minutes.
00:02:43.496 - 00:02:46.754, Speaker A: Basically that's a local host auction. A quick.
00:02:46.792 - 00:03:11.180, Speaker B: Yeah, local host auction. Also it's deployed on rinkib. You can think later, but it's a bit slow. So for demonstration purposes we're just doing it on localhost. But feel free to go to link being tested. So let's start an auction. Let's see how it goes.
00:03:11.180 - 00:03:14.250, Speaker B: So we're sending a transaction.
00:03:15.550 - 00:03:26.062, Speaker A: So one transaction to mint the NFT. And now the owner of the NFT, this green guy, sends another transaction to open up the auction. Is that yes?
00:03:26.196 - 00:03:50.630, Speaker B: Yep. So there are two transactions. We basically opened an auction for this. Yeah. And since we're selling this item, we can't make bids, basically because we're selling it. But as another user here, we can make a bid, basically. And the idea is that we make these bids off chain without spending any gas.
00:03:50.630 - 00:04:10.300, Speaker B: So let's grab some funds. There we go. And in order to make bits, we should make sure that this user actually has some if. So we should stake some if. But you can withdraw it.
00:04:11.570 - 00:04:39.410, Speaker A: Exactly. So there is a transaction on the bidder side also to get established with the system. But then once a bidder is staked in and on the other side you've opened it up, then it's signature based. It's sort of like when you see a bidding war and all of those are transactions on main net. It's like all that gas just being burned for nothing. Right. It's that bidding war that this achieves.
00:04:39.410 - 00:04:51.900, Speaker A: All of those signature based bids can kind of happen without paying gas, but you do have to kind of lock up eth into the system. And I think that's a good kind of disclaimer to add to it.
00:04:52.430 - 00:04:57.766, Speaker B: Yeah, sure. Basically the idea. So let's take some eth. We better hurry.
00:04:57.798 - 00:04:59.450, Speaker A: We've got 180 seconds.
00:05:00.270 - 00:05:08.366, Speaker B: Oh, yeah. Okay. Sorry. Yeah. So we have some e. Here we go. Let's put a bit like 0.4.
00:05:08.366 - 00:05:17.214, Speaker B: So it exceeds 0.2. So it's very fine. Let's place a bid. All right. So here we go. We made a bit and we didn't.
00:05:17.262 - 00:05:24.740, Speaker A: See any pop ups. No notifications for transactions. I'm assuming there's a back end there. So we sign something and drop it to a back end.
00:05:25.370 - 00:05:57.040, Speaker B: Yeah, keep going. Okay. Yeah. Okay. There is a back end running on localhost 8.1, basically, and it keeps track of every. Basically this is the off chain signature and we store information about each of them.
00:05:57.040 - 00:06:04.900, Speaker B: Okay. So hopefully this auction is going to end soon.
00:06:08.470 - 00:06:15.682, Speaker A: Yeah. So the end of the auction is going to be the most interesting. There's Adam popping in and popping out later.
00:06:15.736 - 00:06:16.450, Speaker B: Adam.
00:06:18.390 - 00:06:46.350, Speaker A: The closing of the auction, this is like the most important part. So there's something where we're going to have to turn in a signature and we're going to have to prove it. But there's multiple signatures out there and we have to think about what are the possibilities of someone turning in the wrong one or somehow trying to stop someone from turning it in and then having some kind of grace period. So this part right here is the most interesting on the back end, but on the front end we should just see, oh, this guy wins the auction and that's the end of it. But we should dive into how it works a little bit, probably.
00:06:46.500 - 00:06:58.770, Speaker B: So probably we can jump to the code later so we can explain how it works. Perfect. Yeah. So auction has ended and we can pick a winner. Basically there's only one person, one bid.
00:07:00.070 - 00:07:24.250, Speaker A: So there's a settlement process right here. Where can anyone make this transaction? I guess we'll see it in the back end. There we go. There were off chain signatures. And then there's one last transaction at the end and it looked like it was the green guy. The seller put that transaction in, turned that signature in and sold the NFT and earned some eth.
00:07:24.670 - 00:07:31.840, Speaker B: Yeah, that's basically we can, we now own this NFT and we can start a new auction, basically because we are now the.
00:07:36.690 - 00:07:54.734, Speaker A: Do the incognito. No, never mind. We sent it from one to the other. The most fun thing on the very first NFT example is having an incognito window and sending the NFT from your window to that window, like seeing it show up. But this is so far beyond that. We just auctioned it off to the other one with off chain signatures. It's even cooler.
00:07:54.782 - 00:07:55.380, Speaker B: Yeah.
00:07:56.390 - 00:08:13.100, Speaker A: Let's jump into the smart contract real quick. Let's look at that piece where the auction settles and figure out just kind of like, is there a grace period? How long is the grace period? Yeah. Cool. Oh man, I love the Dracula theme. So good.
00:08:13.870 - 00:08:20.554, Speaker B: Yeah. So maybe virash, can you explain how works?
00:08:20.752 - 00:08:49.390, Speaker C: Yeah, so basically there is an execute sale method which gets called when you have to pick a winner. Before that, it's just like you start off this execute sale method, right, when you have to pick a winner at the end of the auction. So basically right now the seller can only call this. Right, but we can obviously be flexible about it in the future will be able to pick.
00:08:49.480 - 00:08:49.974, Speaker B: Right.
00:08:50.092 - 00:09:24.510, Speaker C: And then basically there is an EIP 1271 signature verification happening. So basically the seller will, while broadcasting the transaction, he'll broadcast the bidder details along with the signature, along with their signature as well. And then that signature gets verified whether it's correct or not. And then at the end ETH is transferred to the seller. Right. And the winning bidder gets the NFT in exchange.
00:09:26.470 - 00:10:03.630, Speaker A: I was thinking of it like a state channel where there could be some dispute resolution. But in this case, the seller is incentivized to close the loop. The seller picks whichever signature they want and they turn it in, but they're incentivized to pick the best one and just go with it. Right. So I feel like in this case, we don't really have to worry about any disputes because it's just the seller is presented with the list of signatures and they pick the best one and they put it on chain and they're incentivized to do that because they're about to make Eth on their NFT dope. I think I get it. Yeah.
00:10:03.630 - 00:10:05.520, Speaker A: Anything to add to that? That's awesome.
00:10:07.650 - 00:10:23.138, Speaker C: Just to add. I think this is just a version one where we just pick one winner out of many bidders. I mean, we can obviously gamify it further with grace period and multiple winners and NFT price playing a major role. Bigger than this.
00:10:23.224 - 00:10:23.714, Speaker B: Right?
00:10:23.832 - 00:10:32.550, Speaker C: Obviously in the second iterations of this. But yeah, initially it's just an extended version of a dutch option with off chain signature.
00:10:33.930 - 00:10:56.240, Speaker B: I also would like to add that basically this shows a very powerful idea of how we can improve the yields, the overall user experience, and onboarding of users. Because we don't spend any gas, we don't require people to have eth on their wallets and just improves, onboarding becomes much better.
00:10:57.890 - 00:11:23.000, Speaker A: It seems like this would be a perfect fit for something on Mainnet. We should be starting to think about what little we should try doing this on Mainnet just as a demonstration, like showing people that maybe we have hundreds of bids, right? We all get together and do hundreds of bids off chain and then one person wins at the end and we end up only putting the few transactions on to. But then we have a big bidding more to try it out or something. That might be fun.
00:11:24.730 - 00:11:29.080, Speaker B: Yeah, because we already have everything to do.
00:11:29.690 - 00:11:33.890, Speaker A: Awesome. Well, good work, guys. Great work, man. Signature based NFT auction.
