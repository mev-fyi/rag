00:00:00.410 - 00:00:55.594, Speaker A: This is part two of fee growth initialized, and in this video, we will again calculate fk minus f zero when tick I lower is initialized, and tick I upper is not initialized. Just a reminder that Fk represents the fee growth inside at time k, so f zero will represent the fee growth inside at time t zero. And for reminder, this is the equation that we'll be using to calculate fee inside two ticks I lower and I upper. Now, this equation splits into three parts, whether the current tick IFC is less than tick I lower, if it's in between the two ticks, or if it's above the two ticks. So we'll be using these equations again. Okay, so let's start with the case of when the current tick IFC is less than tick I lower. Imagine the case where the current tick I OFC is less than tick I lower, and in this case, tick I lower is already initialized, and tick I upper is not initialized.
00:00:55.594 - 00:01:46.078, Speaker A: Since we're assuming that tick I lower was already initialized, we'll label this as fl. Fl is equal to f out of tick I lower at time t zero. And how about the fee growth? Well, let's imagine that the fee growth at time t zero is over here, f g zero, and at time t one, it crossed over, ticked over, and at time t two, it's in between tick I lower and tick I upper. Now, what we want to calculate is the fee growth inside these two ticks, il and iu at time t two. So to begin with, we need to calculate the fee growth inside at time t zero. So this is when the fee growth is over here at Fg zero. Now, to calculate fee growth inside at time t zero, remember that the current tick I see right now is less than tick I lower.
00:01:46.078 - 00:02:09.270, Speaker A: So you'll need to scroll up and then use this equation. So going back down, this is equal to f alpha by lower. Minus f alpha I upper. F alpha by lower. Since it's already been initialized, it is equal to fl and f alphab I upper. It's not initialized yet, so it is equal to zero. Okay, let's do the same for at time t two.
00:02:09.270 - 00:02:37.886, Speaker A: At time t two, let's calculate fee growth inside. Now, notice that at this point, the current tick will be in between tick I lower and I upper. Okay, so, scoring back up, we'll be using this equation. So this is equal to f of g two minus f alpha by lower minus f alpha I upper. The first part, f g two, is simply equal to f g two. How about f alpha by lower. Well, notice that now at time t one it crossed over.
00:02:37.886 - 00:03:12.154, Speaker A: So we will need to apply the algorithm that updates f alpha by lower. We do this by assigning f alpha by lower to be f of g one minus the previous f alpha by lower, which is fl. So this will be the new f alphab I lower and f alphab I upper remains the same. So it's still equal to zero. So this is f two. Okay, and to calculate the fee growth inside, we will need to do f two minus f zero. The first part, f two is equal to f g two minus f of g zero minus fl.
00:03:12.154 - 00:03:49.526, Speaker A: This equation is simply this equation. And f zero is equal to fl. Okay, so let's simplify this equation. Well, notice that the minus fl over here and the minus minus fl over here cancels out and we're simply left with fg two minus fg one. Okay, does this equation make sense? Well, let's take a look at this graph. Looking at it visually, we expect the fee growth inside this position between il and iu to be the difference in height between fg two and fg one. Or simply fg two minus fg one and which is equal to this equation over here.
00:03:49.526 - 00:04:13.742, Speaker A: So this is the fee growth inside. In this situation, let's move on. Consider the case where the current tick IOC is in between tick I lower and I upper. And again, we're assuming that lower tick is initialized and has the value fl. However, upper tick is not initialized, so it is equal to zero. At time t zero. Fee growth is over here.
00:04:13.742 - 00:04:40.018, Speaker A: At time t one. The fee growth crosses over tick I upper and at time t two, we want to calculate fee growth inside tick I lower and I upper. Again, we start by calculating f of zero. At time t zero. We can see that the current tick is in between tick I lower and tick I upper. So the equation that we'll be using to calculate phi growth inside is this one. F g zero minus f alta by lower minus f alta by upper.
00:04:40.018 - 00:05:00.890, Speaker A: The first part is simply equal to f g zero. How about f alto I lower? Well, this is equal to fl. And how about f altob I upper? Well, since it's not initialized yet, it is equal to zero. So this is the equation for f zero. Okay, let's do the same for f two. At time t two, we're going to calculate phi growth inside. At time t two.
00:05:00.890 - 00:05:25.874, Speaker A: The current tick will be above tick I upper. So the equation that we'll be using is this one. Okay, so let's start by calculating f alphab I upper. Notice that at time t one fee growth crossed over tick I upper. So f out of I upper will be equal to f of g one. How about f out of I lower? Well, since it has not changed, it is still equal to fl. So this is f two.
00:05:25.874 - 00:06:03.550, Speaker A: And again, to get the fee growth inside il and iu, what we need to do is take f two minus f zero. This is equal to f g one minus fl that we got from here. And then minus f g zero minus fl, which you get from here. We can simplify the equation. The fls cancel out and we're left with fg one minus f g zero. And looking at the graph, we can double check that the fee growth inside is the difference between the height f g one and fg zero, which is equal to fg one minus fg zero. Okay, so let's move on to the last case when the current tick ifc is greater than tick I upper.
00:06:03.550 - 00:06:53.994, Speaker A: So consider the case when the current tick ifc is above tick I upper and again the lower tick is initialized and has the value fl. And now when we initialize this position, we apply the rule that if the tick to be initialized is below the current fee growth, then we set this tick to be equal to the current fee growth. So at time t zero, the fee growth will be at Fg zero. And since tick I upper is below this fee growth, we initialize this tick to be equal to Fg zero. And let's say that at time t one, the current fee growth crossed below tick I upper, and at time two it will be over here. And what we're going to do is again calculate the fee growth inside at time t two. At time t zero, fee growth inside will be equal to this equation.
00:06:53.994 - 00:07:42.062, Speaker A: F alpha by upper will be initialized to f g zero and f alpha by lower will be equal to fl. Okay, notice that at tan key two, the current tick will be between tick I lower and tick I upper. Here's the equation that we'll need to apply. The first part is equal to f g two. How about f alpha by lower? Well, f alpha by lower has not changed and it is still equal to fl. And how about f alto by upper? Well, notice that tick iupper was initialized as f g zero and at time t one, the current tick crossed below this tick. So we apply the algorithm that updates f alpha by and what we need to do is take fg one minus the previous f alpha by the previous f alphabi will be f g zero so we get f g one minus f g zero.
00:07:42.062 - 00:08:23.214, Speaker A: This is f alpha by upper. Okay, so now that we have these two values of f two and f zero, we can calculate f two minus f zero. To calculate the phi growth inside this position, f two minus f zero. F two will be equal to this expression, and f zero will be equal to this expression. Now, this is a long equation, but we can see that the fl cancels out with the minus minus fl, and the minus minus f g zero cancels out with minus f g zero. So we're left with f g two minus f g one. And we can double check, looking at this graph, that the fee growth inside is the difference between fg two minus fg one.
00:08:23.214 - 00:08:46.500, Speaker A: So this is the fee growth inside in this situation. So in this video, we calculated the fee growth inside when tick I lower is initialized and tick I upper is not initialized. In the next video, we'll do the opposite. We'll calculate fee growth inside when tick I lower is not initialized and iupper is initialized. Thanks for watching and see you in the next video.
