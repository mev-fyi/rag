00:00:00.250 - 00:00:34.630, Speaker A: In this video, I'm going to show you two ways to derive the spot price of a constant product amm, such as Uniswap B two and b three. Let's say that there are x amount of token A and y amount of token b inside the amm. We'll define p as the spot price of token b in terms of token A. In other words, the exchange rate from token A to token B. If I have one token A, then how much is it worth? In token B, this spot price p is given by y divided by x. The amount of token b divided by the amount of token a. Let's see why p is equal to y divided by x.
00:00:34.630 - 00:01:11.058, Speaker A: I'll show you why this is so in two ways. From geometry perspective and from calculus, let's see why p is equal to Y divided by x. From geometry, let's say that we're trading on this curve x times y equals k. So imagine uniswap B two, or uniswap B three. At the moment, there are x amount of token A and y amount of token B. So the current price is over here. If we were to do a trade from token A to token B, then we would put in some x amount of tokens that you can see over here, and in return we get this much amount of token B.
00:01:11.058 - 00:01:41.258, Speaker A: The slope of this green line is dy divided by dx. If we were to do a smaller trade, let's say that we put in dx amount of token A. Then the amount of token B that we'll get is again dy. The slope of this line will look like this if we were to do an even smaller trade. Starting here, the amount of token a that we'll put in is dx in orange. Then the amount of token B that we'll get is dy in orange. And the slope of the line is what you see over here.
00:01:41.258 - 00:02:34.222, Speaker A: Notice that as we make dx smaller and smaller, the slope dy divided by dx starts to look like the tangent line of this curve. Is there an equation for this slope as dx approaches zero? When we do a trade on the x times y equals k curve, this equation must hold the current amount of token a plus the amount of token a that comes in times. The current amount of token b minus the amount of token B that goes out must equal to k. From this equation, using simple algebra, we can derive that dy dx is equal to y divided by x plus dx. So all of these slope dy dx dy dx over here and dy dx over here is always equal to y divided by x plus dx. As dx goes to zero. You can see that the slope dy divided by dx approaches y divided by x.
00:02:34.222 - 00:03:07.462, Speaker A: And you can see this in the expression over here as dx goes to zero. This expression on the right y divided by x plus dx. This dx goes to zero. So the expression approaches y divided by x. So the spot price of token b in terms of token a p is equal to y divided by x. This is a geometric approach to seeing that the spot price p is equal to y divided by x. Let's take a look at another way to derive this same equation using calculus y is p equal to y divided by x.
00:03:07.462 - 00:03:40.298, Speaker A: Using calculus, we will start with the equation x times y equals k. We can rewrite this equation above. As y is equal to f of x, a function of x is equal to k divided by x. Let's find the derivative of f f prime again, f of x is equal to k divided by x. From calculus one, we know that f prime of x is equal to minus k divided by x square. We also know that k is equal to x times y. So we'll replace k with x times y and we get the final equation.
00:03:40.298 - 00:04:08.340, Speaker A: F prime of x is equal to minus y divided by x. Derivative of f describes the slope of function f at x. And this equation over here says that the derivative f at any point x is equal to minus y divided by x. We have a minus here, since y is the amount of token that goes out. And this calculus approach of deriving the spot price agrees with our geometric approach that we derived over here.
