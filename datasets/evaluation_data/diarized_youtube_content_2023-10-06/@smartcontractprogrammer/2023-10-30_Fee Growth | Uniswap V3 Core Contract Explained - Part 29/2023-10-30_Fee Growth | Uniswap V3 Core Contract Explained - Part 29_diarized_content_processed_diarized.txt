00:00:00.330 - 00:00:40.338, Speaker A: In the previous video, we came up with the equation for the amount of fees earned by Alice. Given that Alice has some liquidity s in a position. The important takeaway from the previous video is that if we keep track of this part of the equation, then we'll be able to calculate fees for any users. So in this video, we'll talk about fee growth. Let's say that over time, multiple swaps collect fee f of I up and y in liquidity l by at time t ofyte, where I will range from zero to n. All this means is that over some time, phi f of I was collected at liquidity l by we define fee growth. We will name this fog.
00:00:40.338 - 00:01:05.306, Speaker A: This will be equal to the sum of fee collected divided by the liquidity. In short, we will write this as a summation of f of I over l by. Let me give you an example of how to visualize fee growth. We'll graph fee growth on token y. On the horizontal axis, we'll map the ticks. As the ticks increase to the right, the price also increases. And as the tick decreases to the left, price also decreases.
00:01:05.306 - 00:01:34.890, Speaker A: On the vertical axis, we'll map the fee growth. As people trade on the amm, the fee growth will increase. Let's say that a swap of token Y to token x collects fee on token Y. For example, we see this example where the fee growth increases. So this would be over here, over here, over here, and over here. Fee growth only increases when we collect some fee and we're only collecting fee for token Y. So this is why we only see the fee growth increasing when we do a swap from token Y to token x.
00:01:34.890 - 00:02:08.422, Speaker A: So I'm going to explain again. As we do a swap from token Y to token X, it collects fee on token y. So fee growth will increase and also the current tick will move to the right. On the other hand, what happens if we do a swap from token X to token Y? Since there's no fee collected on token Y, fee growth will remain the same. However, the current tick will move to the left. And you can see this illustrated when we do a swap from token X to token y. For example, here we can see that the fee growth remains the same and the same for over here and over here there was a swap from token x to token y.
00:02:08.422 - 00:02:45.714, Speaker A: However, no fee was collected on token y, so fee growth remained the same. So this is how I would visualize fee growth. Now for this example, I showed you the fee growth on token y, and to visualize the fee growth on token x, you would flip this diagram. When there's a swap from token x to token y, fee growth on token x will increase. And when there's a swap from token y to token x, then fee growth on token X will remain the same. Let's look at some more examples of fee growth. So let's say that there was a swap and a collective fee of f zero and f one from time t zero to t one.
00:02:45.714 - 00:03:14.714, Speaker A: Here's liquidity l zero and L1. And let's say that this swap collected fee f zero and f one. And again, notice that fee growth increased. So now, after the swap, the current fee growth will be over here. Now, as a note here, I am mapping two things on the vertical axis. One, I am mapping the liquidity, and I am also mapping fee growth. The units of fee growth and liquidity are different, so you cannot compare the height of fee growth with the height of the liquidity here.
00:03:14.714 - 00:03:47.374, Speaker A: I'm just trying to visualize that a swap happened and the liquidity during the swap looked like this, and fee growth increased. Okay, so from this swap, let's calculate fee growth f of g. Well, on the first swap, it collected f zero at liquidity l zero. So we put f zero divided by l zero. In the next liquidity, at l one, it collected f of one. So to this, we add f one divided by l one. And this is what the fee growth will look like after there was a swap, and the swap collected f zero and f one of fees.
00:03:47.374 - 00:04:28.898, Speaker A: Let's say that some time has passed and the swap collected fees of f two, f three, and f four from liquidity l two, l three and l four. Now, previously fee growth, we stopped over here and in between from before to now. Let's say that there was a swap of token x, token y, so the price will move to the left. However, there is no increase in fee growth. So let's say that the current fee growth will be over here, and then from over here, there was a swap that collected f two, f three, and f four. So the current fee growth will be over here, and this will be equal to the previous fee growth, which we calculated in the previous example. And to this, we'll need to add the fee growth of f two, f three, and f four.
00:04:28.898 - 00:05:14.746, Speaker A: So we'll add f two divided by l two, f three divided by l three, and f four divided by l four. Okay, for the last example, let's generalize this to some arbitrary time t of n. In the previous example, we left off at f four. Let's say that after f four, there was a swap from token x to token y, and this shifted the current price over to the left. Then let's also say that afterwards there was another swap that swung the price over to the right, and along the way it collected fees all the way up to f of n. So now the current fee growth will be the summation of all the fees divided by the liquidity at the time the fee was collected. F zero divided by l zero plus f one divided by l one plus all the way up to fn divided by ln.
00:05:14.746 - 00:05:17.900, Speaker A: This is how fee growth is tracked in unison. B three.
