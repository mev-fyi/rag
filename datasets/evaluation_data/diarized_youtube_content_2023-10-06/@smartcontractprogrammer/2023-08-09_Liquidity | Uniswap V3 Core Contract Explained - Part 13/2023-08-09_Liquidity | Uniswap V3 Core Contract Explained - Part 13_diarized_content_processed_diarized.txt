00:00:00.170 - 00:00:37.554, Speaker A: Here is the equation for the real reserves. Again, using this equation, we can solve for the amount of token x and the month of token y given the liquidity and the price ranges p of A and p of B. Now, using these equation, we can also solve for liquidity. Given the amount of token x, or the amount of token y and the price ranges p of A and p of b, we can solve for liquidity l. Let's say that we have the concentrated liquidity curve and the price ranges p of A and p of B. And we also say that the current price p is less than P of A. For the price to swing from p of a to p of b, this much amount of token x will have to exit the pool.
00:00:37.554 - 00:01:28.610, Speaker A: In other words, when the current price p is less than or equal to p of A, and for the price to swing from P of A to p of B, we're going to need this much amount of token x. Using the equation from the previous video, we know that given the liquidity and the price ranges p of A and p of b, this equation calculates the amount of tokens that are needed between p of A and p of B. But how about if we knew the amount of tokens that we want to put in the price ranges p of A and p of b, and the current price p was less than or equal to p of A, then using this equation, we can also calculate liquidity. It's a simple math. All we have to do is solve for L using this equation. So first, notice that I can factor out the L. So what I'm going to do is bring the L over here, remove this l, put a one over here, put another one over here, and this expression will be inside the parentheses.
00:01:28.610 - 00:02:18.082, Speaker A: And to solve for L, all we have to do is now divide this so that this will come to the bottom and we would have the l on the right, and we get the equation that calculates the liquidity L. If we knew the amount of tokens that we want to put in and the price ranges p of a and p of b, we can do something similar to calculate the liquidity when the current price p is greater than or equal to p of B. So as you can see from here, the current price p is greater than p of B. For the price to swing from p of B to p of A, this much amount of token y will exit the pool. In other words, we're going to need this much amount of token Y. And again, from the previous video, we know that if we know the liquidity L and the price ranges p of b and p of A. Then we can calculate the amount of tokens that is needed between these price ranges.
00:02:18.082 - 00:02:48.722, Speaker A: And using this equation, we can also solve for liquidity. Let's say that we know the amount of token Y that we want to put in, and the price ranges p of b and p of A. And the current price p is greater than or equal to p of B. And in that case, what will be the liquidity? Well, we can solve for this equation to find what liquidity is. All we have to do is solve for this equation. So first, I'm going to factor out the L on the right side of the equation. So what we get will be L times the square root of p of b, minus square root of p of A.
00:02:48.722 - 00:03:56.326, Speaker A: And now to solve for l, all we have to do is divide both sides of the equation by this expression. So, I'll bring this over to the left, and we get that l is equal to delta Y over square root of p of B minus square root of p of A. This equation tells us that if we know the amount of token Y that we want to put in and the price ranges, and that the current price is greater than or equal to P of B, then we can use this equation to calculate liquidity. How about when the current price P is between the price ranges P of A and p of B? How do we calculate liquidity? The main idea to calculate the liquidity is that we require that the liquidity between p and P of B and between p and P of A to be the same. For the price to swing from the current price p to p of B, this much amount of token X will exit the pool. In other words, we need delta X amount of liquidity from p to P of B, and likewise for the price to swing from the current price p to P of A, this much amount of token Y will exit the pool. So again, this means that we need delta Y of liquidity from the price P to P of A.
00:03:56.326 - 00:04:33.058, Speaker A: Now, what we're going to do is we're going to apply the equations that we derived here. So copy this and then paste it here. And also we'll apply this equation. So copy this and then paste it here. So what we're going to do is require that the liquidity between p to p of b be equal to the liquidity from p to p of a. So I'll say l to b equal to. Well, what is the liquidity between the price p and p of B? Well, we can use this equation between the price ranges p and p of b, the lower price will be p.
00:04:33.058 - 00:05:04.550, Speaker A: So instead of p of a, this will be simply b. And then I'll bring this over to here. Liquidity between the price p to p of b will be equal to this equation. And likewise, what is the liquidity between p to p of a? Well, in this case, we can use this equation. And again we ask the question, in this case, what is the price ranges? The price ranges are p and p of a. So here we'll replace p of b with simply p. And finally, we bring this equation over here.
00:05:04.550 - 00:05:48.980, Speaker A: So when the current price p is between the price ranges p of a and p of b, then this is the equation we need to solve to calculate liquidity. Using this equation, we can answer three questions. What is the liquidity l. Well, if we know the amount of token next to put in, then we can calculate this to calculate liquidity. Or if we know the amount of token y that we want to put in, then we can calculate this to again calculate the liquidity. Another question might be, what is the amount of token y to put in between the price ranges p of a and p of b? If we know the amount of token x that we want to put in, then we can solve this equation to calculate the amount of token y that is needed. And likewise, if we know the amount of token y that we want to put in, then we can solve for delta x to calculate the amount of x that is needed.
