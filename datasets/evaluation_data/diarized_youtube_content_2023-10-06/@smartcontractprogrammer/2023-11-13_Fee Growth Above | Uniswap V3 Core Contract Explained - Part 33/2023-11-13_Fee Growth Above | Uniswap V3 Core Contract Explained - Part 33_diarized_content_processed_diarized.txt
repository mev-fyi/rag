00:00:00.250 - 00:00:28.034, Speaker A: Similar to what we did for fee growth below. In this video, we'll find the equation for phi growth above. Let's start with definitions. We'll say f of g of k is equal to phi growth of token y at some time tk and we'll also define f of a to be equal to phi growth of token y above some tick I. We'll graph an example of phi growth zigzagging tick I. The horizontal axis represents tick. If we decrease the tick, then this means that the price decreases.
00:00:28.034 - 00:00:54.594, Speaker A: And if we increase the tick to the right, then this means that the price also increases. Remember, the vertical axis will represent fee growth as the current tick moves from left to right and right to left. This means that the price changed. This also means that there was a swap. So fee growth will grow. So over time you'll see that the fee growth will zigzag from left to right, right to left, and also move upwards. As the fee growth moves upward over time, we'll calculate fob.
00:00:54.594 - 00:01:27.654, Speaker A: Let's begin by imagining that at some time t of zero, the fee growth crossed tick I. We'll label this as f of g zero. And let's say that the current tick is somewhere over here. And let's say that the current fee growth will be somewhere over here. Now the question is, what would f of a be after t of zero and before t of one? Again, recall that f of a is fee growth of token y above tick I. So what we want to find is the height of this red rectangle. This represents the current fee growth above tick I.
00:01:27.654 - 00:02:08.726, Speaker A: Okay, so what is the height of this red rectangle? Well, we know that the starting height will be f of g of zero. How about the ending height? Well, the ending height will be f of g, the current phi growth. So the difference will be the height which is f of g minus f of g zero. Moving on, let's say that at time t one, the fee growth crossed below tick I. So now the current tick is below tick I, and we want to calculate what is the fee growth above at this time. So at t one, what is fee growth above? Well, again, what we need to calculate is the height of this red rectangle. Well, the height of this red rectangle is f of g one minus f of g zero.
00:02:08.726 - 00:02:48.798, Speaker A: At time t two. Let's say that the current tick crossed over tick I, so now it is above tick I. In this case, what would f of a be? Well, what we need to do now is find the height of this red rectangle, and then also add the height of this red rectangle. We know what the height of this red rectangle is. So all we have to do is calculate the height of this red rectangle. Well, the current tick is over here, and the current fee growth will be over here. If we minus the current fee growth from fog two, which will be over here, we get the height of this red rectangle, take the height of this red rectangle, and then add it with the height of this rectangle.
00:02:48.798 - 00:03:16.666, Speaker A: Then we'll get the current phi growth above. So at time t two, f of a will be equal to fog. The current phi growth minus f of g two, which you see over here. So f of g minus f of g two will be the height of this red rectangle. And then to this, we add f of g one minus f of g zero, the height of this red rectangle at time t three. Let's say that the current tick crossed below tick I. And again, let's compute f of a.
00:03:16.666 - 00:04:00.594, Speaker A: Well, we know that the sum of the height of these rectangles has not changed. So all we have to do is replace this fog with fog three. So f of a at time key three will be equal to fog three. This fog three replaces the fog from above, and then the rest of the equation are the same. This equation again represents the sum of the height of these two rectangles. Lastly, let's say that at time t four, the current tick went above tick I, the fee growth when it crossed tick I, we will label it as f of g four. And now, what is f of a? Well, what we need to do again is to the previous sum of the height of the red rectangles, we'll need to add this height.
00:04:00.594 - 00:04:32.990, Speaker A: Well, this height will be f of g minus f of g four. So f of a at time t four will be equal to f of g minus f of g four, the height of this rectangle. And to this, we add the previous sums. Height of this and height of this, which you can see over here. F of g three minus f of g two plus f of g one, minus f of g zero. Now that we computed f of a for different times, we can now come up with an equation so similar to what we did for fee growth. Below, we'll define this equation.
00:04:32.990 - 00:05:04.526, Speaker A: What this equation is describing is we're taking these terms and then taking the absolute value of them. So what we're going to do next is we're going to rewrite this in terms of f of o of n and f of g. So let's write f of a in terms of f of o of n. So on the left I have f of a from the example above. And on the right we'll write f of a in terms of f of o. Let's start with f of a at time t zero. At time t zero, we have minus fog zero.
00:05:04.526 - 00:05:33.142, Speaker A: This is equal to minus f of o of zero. And to this we add fog. So we have plus fog at time one, we have f o g one minus f of g zero. We know that the fee growth is always increasing. So f of g one minus f of g zero is greater than or equal to zero. So, rewriting this in terms of f of o of one, we get that this expression is simply equal to f of o one. At time t two, we have this part equal to f of o two.
00:05:33.142 - 00:06:14.322, Speaker A: Now, if we evaluate the terms minus f of g two plus f of g one, we know that f of g two is greater than or equal to f of g one. So these two terms are either negative or equal to zero. And we also know that f of g zero is either negative or equal to zero. So when we add nonpositive number with a nonpositive term, then the sum of it is also nonpositive. So to f of o two, we add a minus sign, and we also have a f of g two term here. So we add f of g at time t two f of a will be equal to minus f of two plus f of g at time t three. Similar to what we did for t one, these terms will simply be equal to f of o three.
00:06:14.322 - 00:06:45.398, Speaker A: You could check the map for yourself. That f of g three minus f of g two is greater than or equal to zero, and f of g one minus f of g zero is greater than or equal to zero. And for time t four f of a will be equal to minus f of o of four plus f of g. You can check that these terms are negative. And we know that f of o of four is always greater than or equal to zero. Since we're taking the absolute value and we need to turn this into negative. So we put a minus sign, and then the extra term f of g, we add it.
00:06:45.398 - 00:07:32.186, Speaker A: So at time t four f of a will be equal to minus f of o of four plus f of G. This is similar to the pattern that we saw for phi growth below. Okay, with this in mind, let's now derive the equation for f of a in terms of f of o. Okay, let's find the equation for f of a in terms of f of o and f of g, we will define I of c to be equal to the current tick at time t, where this time will be between t of k and less than t of k plus one and we're going to find the equation for f of A. Now, this equation splits into two parts. When the current tick I of c is greater than or equal to tick I and when the current tick I of c is less than tick I. Let's start with the case when the current tick ifc is greater than or equal to tick I.
00:07:32.186 - 00:08:27.146, Speaker A: Looking at this graph, the time current tick if C is greater than tick I. This means that the current tick will be be here, here, or here. At time t zero, we know that the current tick I crossed above tick I and at time t one, it went below tick I. So, between time t zero and t one, current tick will be above tick I and at this point of time f of a is described by this equation. The next time that the current tick ifc crosses above tick I is over here. At time t two, the current tick crosses above tick I and at time t three, it goes below tick I. So, in between time t two and t three, current tick will be over here and f of a between time t two and t three is described by this equation.
00:08:27.146 - 00:09:07.834, Speaker A: And lastly, in this example, the last time that the current tick crosses above tick I is over here and this is after time t four. After time t four, f of a is described by this equation. So, on this table, the time when current tick I of c is above tick I is either this, this, or this equation. We see that all three of these equations have the four minus fo of something plus f of g. At time t zero, this something will be zero. At time t two, this something will be two, and at time t four, this something will be four. So now we can generalize this.
00:09:07.834 - 00:09:54.698, Speaker A: When the current tick I of c is greater than or equal to tick I, we know that f of a will be equal to f of g minus fo of k. This is an equation that we generalize by looking at this, this, and this equation. Okay, how about when the current tick I of c is less than tick I? Going back to the graph, the first place that we see current tick ifc less than tick I is over here. The next time we see it is between over here and the last time we see it is over here. In the first place, phi growth above f of a will be equal to zero. How do I know this? At this point, there is no red rectangles so the height of the sum of the red rectangles is also equal to zero. How about at this point? At this point, time is between t one and t two.
00:09:54.698 - 00:10:43.738, Speaker A: Between time t one and t two, f of a is described by this equation. This represents the height of this red rectangle and the last place in this example where the current tick I of c is less than tick I is over here. This corresponds to time between t three and t four and between t three and t four. F of a is described by this equation. Fo of three and fo of three represents the sum of the height of this rectangle and this red rectangle. To summarize, when the currentic I of c is less than tick I, f of a was either this or this equation. We can see a pattern here that when the current tick ifc is less than tick I, it takes on the form of f above something which you see over here.
00:10:43.738 - 00:11:18.854, Speaker A: And again, fable of something which you see over here. This something is indexed by time. So at time t three, this something is equal to three and at time t one, this something is equal to one. Okay, so let's summarize what we observed so far. When the current tick I of c is less than I, f of a will be equal to f of o of k. This is what we observed for here and here. So we now have all of the equations that are needed to calculate the fee growth inside two ticks f of b, f of a, and f of o.
00:11:18.854 - 00:11:25.780, Speaker A: Starting from the next video, I'll explain how to initialize f of o so that the equation for fee growth inside is always correct.
