00:00:00.650 - 00:01:05.614, Speaker A: To calculate the exponential moving average for a regular interval, for example, let's say every 1 second we calculate the exponential moving average. The first exponential moving average, we set it to the price at time t equals zero, and for all times after that, we calculate the exponential moving average by multiplying the price at time t by some constant alpha and then adding it with one minus alpha times the previous exponential moving average, where alpha is between zero and one. When we expand this exponential moving average, it turns out to look like this. The previous prices are multiplied by a power of one minus a. For example, here it is multiplied by one minus a. The price before that is multiplied by one minus a raised to the power of two, and the one before that will be multiplied by one minus a raised to the power of three, and so on, all the way to the first price that we started taking the moving average. Again, this is the calculation for moving average for a regular interval, for example, every 1 second.
00:01:05.614 - 00:02:13.330, Speaker A: But how do we take an exponential moving average for an irregular interval? For example, let's say that a price of a stock goes up and down, up and down and up and down, and we want to take the moving average at t zero, at t one, at t two, and at some point tn now notice that the intervals between t zero and t one and between t one and t two are not the same. These are irregular intervals, and this will be the same for between t two and t three, t three and t four, and so on all the way up to tn the intervals between each time t zero, t one, t two, all the way up to tn might not be the same. For example, the interval between t zero and t one might be 1 second. However, the interval between t one and t two might be 5 seconds for our irregular interval. How will we calculate the moving average? We will define m star t to be equal to the moving average with irregular intervals at time t. The first moving average is easy to compute. M star of t zero, we set it to the price at t zero, similar to how we calculated the moving average for regular intervals.
00:02:13.330 - 00:03:07.142, Speaker A: For the irregular interval, the moving average m star at time t of I, we set it equal to some number alpha of t of I times the price at t of I plus one minus alpha to the t of I multiplied by the previous exponential moving average for an irregular interval, m star of t of I minus one. Again, this alpha of t of I will be between zero and one. The alpha that we saw for the regular interval, it was a constant. However, here, alpha of t of I will depend on the time interval, it will depend on the time interval between the last time we measure the exponential moving average and the current time where we are taking the exponential moving average. For example, alpha t of I between t zero and t one will be different from alpha t of I between t one and t two. I'll explain how this alpha t of I is defined later in the video. For now, I'm going to show you.
00:03:07.142 - 00:03:55.702, Speaker A: When we expand this equation, it looks similar to the equation for the regular intervals. So what I'm going to do is first copy this, and we're going to expand the previous exponential moving average, m star of t of I minus one. So what is m star of t of I minus one? Well, we can apply the same definition except for m of t of I minus one. So this will become m star of t of I minus one. Likewise, over here, alpha of t of I minus one. The price will be the previous price p of t of I minus one plus this will be alpha of t of I minus one, and the previous exponential moving average of m star of t of I minus one will be m star of t of I minus two. So that is the equation for m star of t of I minus one.
00:03:55.702 - 00:04:37.090, Speaker A: And we're going to replace this over here with this equation. So what's going to happen is we're going to multiply one minus alpha t of I minus one with this equation. So this becomes we multiply the first part plus we multiply the second part also by one minus alpha t of I. And this will be the equation for the exponential moving average when we expanded m star of t of I minus one. And we can repeat the same process of expanding the previous exponential moving average. And when you expand everything out, you'll get an Equation that looks like this. All of the terms will be multiplied by some form of one minus alpha of t of I.
00:04:37.090 - 00:05:40.798, Speaker A: For example, let's take a look at the last two entries of this exponential moving average. The one before the last will be multiplied by one minus alpha t of I times one minus alpha t of I minus one, all the way down to one minus alpha t of two. And the last term again will be multiplied by one minus alpha t of I times one minus alpha t of I minus one, all the way down to one minus alpha t of one, and then multiplied by the price at t zero. What we're seeing here is that as the price is further back in history, that price is being multiplied by more terms of one minus alpha t of I's. This is similar to what we observed for the regular interval. If I scroll up where the older prices were multiplied by a higher price of one minus alpha, and we can see a similar thing happening here. As the price gets older, it is multiplied by more terms of one minus alpha t of I, and each of these alpha t of I's vary depending on the time interval between when this exponential moving average was updated.
00:05:40.798 - 00:06:38.950, Speaker A: Also note that for this equation, if all of the time intervals are the same, for example, all of the time intervals are 1 second, then all of these alpha t of I's will be same. In other words, they will be a constant, and this equation will look exactly like this equation for the regular interval. Earlier I mentioned that these alpha t of I should depend on the time interval between when the last exponential moving average was updated. But how should we pick this alpha of t of I? What we're going to do is we're going to pick alpha t of I so that it decays exponentially. We also want to pick this alpha t of I so that when the time between the last time we calculated the exponential moving average and the current time that we update the exponential moving average are small. For example, let's say that the time difference is really close to zero. Then what we want is that the current exponential moving average should be close to the previous exponential moving average.
00:06:38.950 - 00:07:40.926, Speaker A: On the other hand, let's say that there's a really long time between the last exponential moving average and the current exponential moving average that we're going to be calculating. The time difference is large. In that case, we want the exponential moving average to be close to the current price. So those are the two properties that we'll keep in mind when we're picking this alpha of t of I. The first property that we discuss is that we want to pick alpha t of I such that one minus alpha t of I exponentially decays between the two time intervals, previous time t of I minus one and the current time t of I, and we'll define dt of I to be this time difference between the current time and the previous time we took the exponential moving average. Now, why did I say one minus alpha t of I here? You'll see later that by defining it this way, we'll have the property that when dt of I is close to zero, the current exponential moving average will be close to the previous exponential moving average. And when dt of I is really large, then the exponential moving average will be close to the current price.
00:07:40.926 - 00:08:18.298, Speaker A: Let's take a look at how we want this alpha t of I to exponentially decay. We'll pick alpha T of I so that one minus alpha t of I decays exponentially. When the time interval between the previous exponential moving average and the current exponential moving average is equal to zero, we'll set one minus alpha t of I to be equal to one. In other words, alpha t of I is equal to zero. Let's say that after some fixed interval h, we want this one minus alpha t of I to be equal to 0.5 and after another time h has elapsed. In other words, the time will now be two h.
00:08:18.298 - 00:08:49.590, Speaker A: We want this one minus alpha t of I to be half the value of the previous value. The previous value was 0.5, and at two h, we want this value to be half of that. So that will be zero point 25. And then after another time step of h, we want one minus alpha t of I to be half of the previous, which will be zero point 25 divided by two. So this will be zero point 125. And after another time step h, we want the value to be half of what the value was at three h.
00:08:49.590 - 00:09:21.102, Speaker A: In other words, one minus alpha t of I has the value every h seconds. So we can define one minus alpha t of I to be equal to 0.5 raised to the power of dti divided by h. And you can see here that every time dti is equal to some multiple of h, we'll be multiplying 0.5 by some power. For example, when dt of I is equal to h, h divided by h is one. So one minus alpha t of I will be equal to 0.5
00:09:21.102 - 00:09:59.430, Speaker A: raised to the power of one, which is equal to 0.5. When dt of I is equal to two h, two h divided by h will be equal to two. So that will be 0.5 raised to the power of two, which will be equal to one four. We can rewrite this with base e, and this will be equal to e raised to the natural log of zero five multiplied by dti divided by h. So this will be the equation that we're going to be using to pick alpha of t of I. So earlier I mentioned that when dt of I is close to zero, we wanted the current exponential moving average to be close to the previous exponential moving average.
00:09:59.430 - 00:10:25.602, Speaker A: And when DtI was really large, we wanted the current exponential moving average to be close to the current price. Let's see if that property holds. When we define one minus alpha t of I to be equal to this equation. So when dt of I is a small number, when it is close to zero. So this part, dt of I will be close to zero. E raised to some power that is close to zero. For example, let's say zero.
00:10:25.602 - 00:11:11.618, Speaker A: So this number over here will be close to one. In other words, one minus alpha t of I will be close to one. So one minus alpha t of I will be close to one. And this means that alpha t of I must be close to zero. So if we scroll back up, if alpha t of I is close to zero, and this part will be close to one, then we have the property that the current exponential moving average will be close to the previous exponential moving average. So when one minus alpha t of I is close to one, then the current exponential moving average will be close to the previous exponential moving average. Likewise, when dt of I is a really large number, then let's plug this dt of I inside here.
00:11:11.618 - 00:11:37.418, Speaker A: Dt of I multiplied by h will be a really large number. However, the natural log of 0.5 will be negative. So here what we're doing is multiplying e by some large negative number. So this means that this whole thing will be close to zero. One minus alpha t of I will be close to zero. So again, going back to our exponential moving average, one minus alpha t of I will be close to zero.
00:11:37.418 - 00:12:15.734, Speaker A: This means that alpha t of I will be close to one. So the current exponential moving average will be close to some number that is close to one multiplied by the current price. Plus some number that is close to zero multiplied by the previous exponential moving average. So this whole thing will be close to the current price. When the time interval between the previous exponential moving average and the current exponential moving average, this will be dt of I is really large. Then one minus alpha t of I will be close to zero. So the current exponential moving average will be close to the current price.
00:12:15.734 - 00:13:15.846, Speaker A: So there you have it. We picked alpha t abi so that it decays exponentially. And when the time interval is close to zero, then the previous exponential moving average is close to the current exponential moving average. And when the time interval is large, the current exponential moving average is close to the current price. But why did we say that this one minus alpha t of I should exponentially decay? Why didn't we choose one minus alpha t of I so that it decays linearly? Or we could have picked one minus alpha t of I so that it will be equal to one until some time interval and then just drop off to zero. Why did we pick one minus alpha t of I to exponentially decay? Well, we picked exponential decay because it comes with some nice mathematical property, path independent decay rate. What this means is that the moving average m star t of I decays at the same rate independent of the number of updates in an interval.
00:13:15.846 - 00:14:05.820, Speaker A: Given some time interval, whether you take an exponential moving average twice or ten times, the oldest exponential moving average will decay at the same rate. Let's take a look at an example again. We have a price of a stock going up and down, up and down. And in the first case, let's say we'll take the exponential moving average at t zero and then later at t two. And then in case two, we'll take the exponential moving at t zero, t one, and t two. After we take the two exponential moving average, we'll compare the oldest exponential moving average and the decay rate of that exponential moving average. You'll see that the decay rate of the oldest exponential moving average will be the same whether you update the exponential moving average at t zero, t one and t two, or at t zero, and then at t two.
00:14:05.820 - 00:14:54.170, Speaker A: So for the first case, we'll take the exponential moving average at t equals t zero, and then later at t equals t two. So the exponential moving average at t two, we will just apply the equation and we get this equation where this one minus alpha tick of two, we simply apply this equation over here, and the time intervals will be t zero and t two. So this will be the decay rate of the oldest exponential moving average m star of t zero. Now let's compute the exponential moving average for case two. For case two. Again, we'll start with the definition and then we get this. For the exponential moving average at time t two, let's expand the exponential moving average at t one.
00:14:54.170 - 00:15:35.510, Speaker A: Again, for case two, we're updating the exponential moving average at t zero, t one and then t two. So that is why you see exponential moving average at t one. If we expand this equation, we'll get this equation. All I did was expanded this term and then multiply the terms by one minus alpha t of two. And let's compute the decay rate for m star of t zero. So this term, what is one minus alpha t of two times one minus alpha t of one? Well, one minus alpha t of two will be equal to e raised the natural log of 0.5 multiplied by the interval t two minus t one divided by H.
00:15:35.510 - 00:16:23.110, Speaker A: And likewise, one minus alpha t of one will be equal to e raised to the natural log of zero five multiplied by the time intervals t one minus t zero divided by H. For exponents having the same base we can take the powers and then simply add them. And we get that this will be equal to e raised to the natural log of 0.5 multiplied by these terms, and then adding these terms up, notice that we have a minus t one over here and a plus t one over here, and these two terms cancel out. And what we're left with is we are left with e raised to the natural log of 0.5 multiplied by t two minus t zero divided by h. So this will be the decay rate for one minus alpha t two multiplied by one minus alpha t one.
00:16:23.110 - 00:17:08.486, Speaker A: And let's compare the decay rate that we computed here and the decay rate that we computed for case one. You can see that these two, this one over here and this one over here are the same. So what we saw was that between the time interval t zero and t two, whether we updated the exponential moving average once after t zero. So this will be at t two, or whether we updated it twice, t one, and then later at t two, the decay rate on the oldest exponential moving average, m star t zero, is the same. This number over here. So, in this video, I showed you how to calculate the exponential moving average for an irregular interval. And you will use this equation over here.
00:17:08.486 - 00:17:37.740, Speaker A: Now, for irregular intervals, we had to pick alpha t of I that varies with the interval. And how we picked this alpha t of I is we said that one minus alpha t of I should exponentially decay. And we came up with this equation. The reason why we said that this one minus alpha t of I should decay exponentially is that because the x exponential moving average will decay at the same rate in a given interval, independent of the number of updates. So.
