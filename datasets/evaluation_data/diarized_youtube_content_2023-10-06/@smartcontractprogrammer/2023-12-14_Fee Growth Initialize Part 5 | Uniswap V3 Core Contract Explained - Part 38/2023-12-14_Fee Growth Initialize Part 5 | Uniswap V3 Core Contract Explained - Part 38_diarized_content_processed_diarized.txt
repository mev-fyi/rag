00:00:00.330 - 00:00:39.666, Speaker A: This will be the last case that we'll consider when the fee growth is initialized. In this case, we will say that both tick I lower and tick iupper are initialized. And again, we will calculate fk minus f zero to calculate the fee growth inside these two ticks. Since the two ticks are initialized, we'll label them as fl and fu. Fl will be the f out of I lower at time t zero, and likewise, fu will be the f out of tick I upper at time t zero. Let's consider the case when a position is created when the current tick I of c is less than tick I lower. So again, as a reminder, tick I lower and tick iupper are initialized.
00:00:39.666 - 00:01:08.418, Speaker A: Tick I lower is initialized to fl, and tick I upper is initialized to fu at time t zero. Let's say that the fee growth is over here. At time t one, the fee growth crosses above tick I lower, and at time t two, the fee growth is over here. And at this point we want to calculate the fee growth inside tick I lower and I upper. Now, to do this, we'll need to calculate two values, f zero and f two. Let's start with f zero. So here's the equation that we'll need to use.
00:01:08.418 - 00:01:35.382, Speaker A: And again, this is because the current tick I will see at time t zero will be over here below tick I lower. So we'll need to calculate this equation. This is equal to f out of I lower is equal to. Well, it's initialized to fl, so this is equal to fl. And likewise, f out of I upper is initialized to fu. Okay, next, let's calculate f two. At time t two, the current tick I of c is in between tick I lower and I upper.
00:01:35.382 - 00:02:02.850, Speaker A: And this is the equation that we will need to calculate. This is equal to f g two is equal to fg two. How about f out of I lower? Well, since at time t one, the phi growth crossed over tick I lower. So we apply the update rule to fee growth of I lower. And we get that the f al to by lower is now equal to fg one minus fl. How about f alto by upper? Well, it has not changed, so it's still equal to fu. And we're now ready to calculate f two minus f zero.
00:02:02.850 - 00:02:33.226, Speaker A: And again, this will give us the fee growth inside tick I lower and tick I upper. F two is equal to this thing over here. And this part is equal to f zero. From here we can see that fl and fu cancels out with this fl and fu. And we're simply left with fg two minus fg one. And looking at the graph, we can see that the phi growth inside these two tick is the difference of the height fg two and fg one. So this equation and this graph matches.
00:02:33.226 - 00:02:59.062, Speaker A: Okay, let's move on. For the next case, let's calculate fee growth inside. When the current tick I of c is in between tick I lower and I upper. So at time t zero, we have fee growth in between the two ticks I lower and I upper. At time t one, it crosses above tick I upper and at time t two, the fee growth is over. Here we want to calculate fee growth inside tick I lower and I upper. At time t two.
00:02:59.062 - 00:03:39.218, Speaker A: To begin with, we again calculate f zero. Since at time t zero, the current tick will be in between these two ticks I lower and I upper. This is the equation that we'll need to use. This is equal to f g zero, f alphabi lower will be initialized to fl and f alta by upper is initialized to fu. How about at time t two? Well, this is the equation that we'll need to use, and this is equal to. If you look at over here, we can see that at time t one, the fee growth crossed above tick I upper. So at time t two, f out of I upper will be equal to f g one minus fu, and f out of I lower will be equal to fl.
00:03:39.218 - 00:04:14.418, Speaker A: Okay, we're now ready to calculate f two minus f zero. Here is f two, and here is f zero. Again, we can see that the fu and the fl terms cancel out with the fl and the fu terms inside here. And we get that f two minus f zero is equal to f g one minus fg zero. And again, looking at the picture, the fee growth inside these two ticks are the difference between fg one and fg zero. So this equation matches with this picture. Okay, for the final case, consider the case when the current tick I of c is greater than tick I upper.
00:04:14.418 - 00:04:51.894, Speaker A: When this position of tick I lower and I upper is initialized. So at this point, the current tick I ofc will be above tick iupper. Here's fee growth at time t zero. And let's say at time t one, it crosses below tick I upper, and at time t two, the fee growth is in between tick I lower and I upper. To calculate the fee growth inside this position, we'll start by calculating f zero, the fee growth inside at time t zero. So this is equal to. Here's the equation that we'll need to use and again, we're using this equation because at time t zero, the current tick is c is above tick I upper.
00:04:51.894 - 00:05:28.798, Speaker A: The first part, f alpha by upper is initialized to fu. The second part, f alpha by lower is initialized to fl. Okay, let's move on to f two. Phi growth inside at time t two and again at time t two, the phi growth is in between the two ticks I lower and I upper. Here's the equation that we need to use and this is equal to f g two is equal to f g two. F alphabi lower has not changed so it still equals fl and f alphabi upper is equal to this term. This is because at time t one, the fee growth crossed below tick I upper.
00:05:28.798 - 00:05:56.094, Speaker A: So we need to apply the update rule for f out. What we do is take the fee growth and then minus it with the previous f out. The previous f out is fu, so we get f g one minus fu. Okay, we're now ready to calculate f two minus f zero. And again, this will give us the fee growth inside this position. Here is f two and here is f zero. The fl and the fu terms cancel out and we're left with f g two minus f g one.
00:05:56.094 - 00:06:16.020, Speaker A: And again, looking at the graph, we can see that the fee growth inside this position is the difference between fg two minus fg one. That completes the calculation for fee growth inside for all cases, whether tick I lower and or tick I upper is initialized or not. In the next video, we'll summarize what we've calculated so far.
