00:00:00.250 - 00:00:27.906, Speaker A: In unison B three. If you know the average price of one token, then the average price of the other token will be one over that. Let's say P of X is the price of token. Next, in terms of Y, and P of Y is the price of token y in terms of X, if we know the average price of token Y, then the average price of token X will be one over the average price of token Y. Let's see how this is true. Let's say that P of Y is equal to 1.1 to some tick.
00:00:27.906 - 00:01:03.998, Speaker A: Then we know that P of X is equal to one over p of Y. We can rewrite this as one over 1.1 to the t here we're just replacing P of Y with what we have defined over here. Now, if we have one over some base raised to the x, then this is equal to the base raised to the minus X. So using this fact, this equation is equal to 1.1 raised to the minus t. In other words, if we define T of X to be tick for x and T of Y to be equal to tick for Y, then T of x is equal to minus t of Y.
00:01:03.998 - 00:01:41.498, Speaker A: You can see this to be true over here. The tick for Y is equal to T and the tick for x is equal to minus t. Once we know this fact, we're now ready to derive this equation that the price average of token x is equal to one over the average price of token y. We'll say that the average tick for token y is given by this formula over here. This is the same formula that we have seen in several videos in the past. All this is doing is taking the time weighted average of ticks. In this case, the average price of token y will be equal to 1.1
00:01:41.498 - 00:02:05.394, Speaker A: raised to the average tick of y. The average tick of token y is given by this formula. So, we'll expand this variable and we get this equation. Okay, now let's compute the average price of token x. By definition, this will be equal to 1.1 raised to the average tick of token x. Now, earlier we derived that the tick for x is equal to the negative of tick for y.
00:02:05.394 - 00:02:48.754, Speaker A: So knowing this fact, we can get the average tick for token x by replacing each of these ti with a negative, and we will get that the average tick for token X will be equal to the negative of average tick for token y. We can apply this fact to this equation over here and we get that 1.1 raised to the average tick of x is equal to 1.1 raised to the negative average tick of token y. Now, using this algebraic rule, we can also apply it here. And we get that 1.1 raised to the minus average tick of token y is equal to one over 1.1
00:02:48.754 - 00:03:17.306, Speaker A: raised to the average take of token y. And of course, by definition, this is equal to the average price of token y. So there you have it. We have derived that the average price of token x is equal to one over the average price of token y. Now this is only true in uniswap B three. This may not be true in uniswap B two. So let me show you an example where the average price of token x is not equal to one over the average price of token y in unisoft B two.
00:03:17.306 - 00:04:08.362, Speaker A: A quick review of how unisop B two calculates a time weighted average price of token y is equal to taking each price, multiplying it by the duration, summing it all up, and then dividing it by the whole duration. In this case, let's compute one over the average price of token Y. Well, we're just going to be flipping this equation at the top so we get duration divided by the sum of prices multiplied by the durations. So now I want to show you that this expression may not necessarily equal to the price average of token X. The price average of token X will be the summation of all prices of token X multiplied by the duration. Sum it all up, and then divided by the duration. Let's say that the price of token y is 3000 in 1 second, and the next second, the price of token Y is 1000.
00:04:08.362 - 00:04:47.958, Speaker A: In this case, one over the price average of token y will be equal to two. Since the duration is two, 3000 for the first second and 1000 for the next second. So that will be 3000 plus 1000. This is equal to two over 4000, or simply one over 2000. Okay, let's now compute the price average of token X. The average price of token X will be equal to one over 3000 plus one over 1000 divided by the duration two. Here we're seeing one over 3001 over 1000 from the fact that price of token X is equal to one over the price of token y.
00:04:47.958 - 00:05:16.430, Speaker A: If the price of token y is 3000, then the price of token X is one over 3000. And likewise, if the price of token Y is 1000, then the price of token X will be one over 1000. Let's compute this expression. This will be equal to 4000 over 3000. Multiplied by 1000. That will be 3 million over two. We can cancel out the three zeros and we get that this expression is equal to eight over 3000.
00:05:16.430 - 00:05:44.900, Speaker A: Okay, so the one over the average price of token y is equal to one over 2000. And we also found out that the average price of token X is equal to eight over 3000. And you can see that these two are not equal. So in other words, in unisop B two, the average price of token X may not necessarily be equal to one over the average price of token y. However, in unisop b three, this fact is true.
