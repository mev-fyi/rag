00:00:00.250 - 00:00:31.654, Speaker A: Let's code the gases. Token transfer contract First, I imported an interface called IERC 20 permit. This is a standard ERC 20 interface with some additional feature. The standard ERC 20 do not have a function called permit, but this one does. So I've declared it here. Okay, going back to our main contract, so we're gonna write a function called send function send. This will be external and we'll figure out what input we'll need to pass to execute this function.
00:00:31.654 - 00:01:29.578, Speaker A: First what we need to do is call permit and later we will figure out the parameters that we'll need to pass to the function permit. You'll need to call permit so that the sender approves this contract to spend some amount plus fee. Amount will be sent to a receiver and the fee will be sent to whoever execute this function. Message sender. Next we'll transfer the amount amount that you see over here to the receiver and we'll do that by calling transfer from from sender to receiver for some amount and then lastly we'll transfer over the fee to message sender transfer from sender to message sender for the amount fee. These are the three functions that we'll need to implement. Let's fill in some inputs that we know that we're going to need to call this function.
00:01:29.578 - 00:02:21.834, Speaker A: First we'll need the address of the token address token. Next we'll need the address of the sender and the receiver address. Sender address receiver the amount to send to the receiver un amount and the amount of fee to send to message sender the account that's going to be executing this function unfee. And then next we'll pass in the parameters that we need to pass to the function permit. So let's take a look at the function permit here I have an ERC 20 permit contract which I've copied over from soulmate and if I scroll up here is the function permit and I'll copy the parameters and then paste it here. Okay, so these are the parameters that we need to call the function permit. I'll paste it here.
00:02:21.834 - 00:02:55.050, Speaker A: The owner will be the sender, so we're not going to need this. The spender will be this contract, so we're also not going to need this. Input value will be amount plus fee, so we won't need this deadline. This is the deadline for the last time. The signature will be valid and we will need this. So paste this here and the signatures for the permit function brs which we will need. Okay, so these are the parameters that we'll pass to the function send first let's call the function permit.
00:02:55.050 - 00:04:05.782, Speaker A: So I'll say IRC 20 permit at the token permit. I'm going to go back to that erc 20 permit function and then I'll copy the inputs again and then paste it here and again. These are the parameters that we'll need to pass to permit the first address owner this will be sender, the spender will be address this value. The amount that the sender approves this contract will be amount plus fee deadline will be the deadline passed from the input and the signatures brns okay, that completes the function to call permit by calling this function, the sender approves this contract to spend amount plus fee amount of the token and these are the parameters for the signature. The signature is valid until this deadline and this is the signature. By calling this function, the sender approves this contract to spend this amount without the sender having to call the function approve on the token contract. Okay, let's move on so we're done with permit.
00:04:05.782 - 00:04:49.300, Speaker A: Next let's call transfer from so this will be IERC 20 permit token transfer from sender to receiver for the amount and then next we'll transfer the fees. So again IRC 20 permit token transfer from sender to message sender the fees okay, this completes the function send for the guest list token transfer let's compile this contract. So I'll open my terminal and then I'll type forge build and a contract compiles and that completes this video. In the next video we'll write a test using foundry to test this gases token transfer contract by.
