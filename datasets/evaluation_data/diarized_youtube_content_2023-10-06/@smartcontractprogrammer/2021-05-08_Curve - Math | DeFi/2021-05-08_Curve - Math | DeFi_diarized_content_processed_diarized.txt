00:00:00.730 - 00:00:39.538, Speaker A: If I were to trade tokens on uniswap, for example, from Dai to USDC, the amount of tokens that I would get in return is calculated by a simple equation. Times y equals k. However, if I were to do the same trade using curb, then the equation is more complex. So in this video, I'm going to explain how the last equation is derived, and in the process you'll have a better understanding of how price on curve is determined. We will start with simple ideas and build our way up to this equation. Imagine we have an exchange where one die can be traded for one USDC. This can be expressed using x plus y equals c.
00:00:39.538 - 00:01:21.110, Speaker A: This is the graph of x plus y equals c. Let's say we start out here with 50 die and 50 USDC. So in this case, x will equal 50, y will equal 50, so Rc will equal 100. Now, if I were to sell 20 die for USDC, since one die is trading for one USDC, I put in 20 die, so I get 20 USDC. And you can see that happening in this graph. We started out with 50 and we added 20 die. So the amount of USDC that needs to be inside here is 30 50 -30 is 20, so we get back 20 USDC.
00:01:21.110 - 00:01:58.606, Speaker A: Likewise, let's say that we start out with 50 50 and I sell 30 of my USDC. Then the amount of die that needs to be inside the pool is 2050 -20 is 30. So I get back 30 die. Notice that in all cases, the total amount of tokens remain the same, 100. Initially, we have 50 50, which is 100. After a trade we have 70 30, which is again 100, and after another trade, we have 80 20, which is again 100. And that is what is expressed here in this equation.
00:01:58.606 - 00:02:38.826, Speaker A: It says that the total amount of token x and token y must always equal a constant. However, in the real world, the price of die is not exactly equal to the price of USDC. For example, one die might equal $1.01, whereas USDC might equal 99 cent. In this case, what ends up happening is that everyone sells their USDC for die, because you can buy something that is worth $1.01 by paying only 99 cent, and you make a two cent profit. So we also want to use an equation that says the price of DaI is not exactly equal to the price of USDC.
00:02:38.826 - 00:03:09.670, Speaker A: And we can do that by using the equation x times y equals k. The graph will look something like this. Basically, this graph says that the less token there is, the more expensive it gets. Now, curve finance combines these two graphs. The constant sum curve x plus y equals c, and the constant product curve x times y equals k. And you'll get a curve that is flat in the middle and behaves more like uniswap on the extreme end. Let's try creating this curve.
00:03:09.670 - 00:03:45.054, Speaker A: We'll start with the condition that says x plus y equals a constant d. And we also use the constant product formula x times y equals d over two to the power of two. Combining the two equations above, we get the equation below. However, plotting this equation, we get a graph that looks like this. It still looks like the curve of a uniswap and not something like this, where it is flat in the middle. Well, we can accomplish this by amplifying this part of the equation. So, we multiply this part of the equation by a variable.
00:03:45.054 - 00:04:23.690, Speaker A: We'll name it Chi. And we get this equation over here. When the variable chi is equal to zero, these two part of the equation cancel out and we're left with x times y equals some constant. So this equation becomes a constant product curve. On the other hand, when chi is a really big number, these two part of the equation become relatively small to this and this part of the equation. So we're left with an equation that looks like a constant product curve. You can see here how increasing chi makes the curve more and more flat.
00:04:23.690 - 00:05:14.690, Speaker A: Now, when Chi is big, the curve for this equation flattens out. But this is also true when x plus y is big. So we want to express that when chi is big, the curve is flat, and when chi is small, it looks like the constant product curve, regardless of how big or small this number is. And we can do that by taking these two part of the equation, and we normalize it by dividing this part by d. We can rewrite this as this equation over here, and then we'll update the equation above. So now our EQUATION looks like this, and this is exactly the same equation that is mentioned in the curve white paper. Furthermore, in the curve white paper, we take this equation, set chi equal to this equation, and finally, we arrive at this equation.
00:05:14.690 - 00:06:01.760, Speaker A: Doing the same thing to the equation that we derived. We set chi equal to this variable, and the equation above becomes this. This equation can be reduced and it becomes this. Comparing the two equation, the one that we derived, and the one mentioned in the curve by paper, you can see that these two equations are exactly the same. So let's now summarize how we got here. We started off with some constraints. X plus y equals d and x times y equals d over two to the power of two and then we said we wanted to amplify the effect of x plus y equals d, so we multiply it by chi and we also wanted to normalize x plus y by d.
00:06:01.760 - 00:06:33.380, Speaker A: So we multiply d on both side of the equation. As mentioned in the curve by paper, we set chi equal to this variable and we get this equation. Graphing this equation, you'll get the curve used in curve finance. When a is equal to zero, you'll get the constant product curve, and when a is big, you'll get the constant sum curve. This video was based on a blog. I'll put the links in the descriptions below, so check it out. Thanks for watching.
