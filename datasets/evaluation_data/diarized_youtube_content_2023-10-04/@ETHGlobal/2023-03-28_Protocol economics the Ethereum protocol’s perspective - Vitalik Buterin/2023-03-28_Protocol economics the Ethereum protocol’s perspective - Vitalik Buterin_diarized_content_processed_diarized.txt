00:00:06.090 - 00:00:12.430, Speaker A: So we have Vitalik up next he is going to be speaking on protocol economics, the Ethereum protocols perspective.
00:00:14.210 - 00:00:18.160, Speaker B: Okay, thank you guys. Are you guys hearing me well?
00:00:19.410 - 00:00:20.974, Speaker A: Yep, we can hear you.
00:00:21.172 - 00:00:55.040, Speaker B: Okay, perfect. So what I wanted to give today is a brief overview of what protocol economics looks like in general and focusing on Ethereum and some of the changes that have happened to both the ethereum protocol and the ethereum application. Ecosystem over time and touch on some of the issues of how that interacts with some of the things that might happen with both the ethereum protocol and the ethereum application ecosystem in the future.
00:00:55.040 - 00:01:49.520, Speaker B: So some of the protocol economics questions that matter this is pretty basic. So one is what are the incentives facing users? Two is what are the incentives that are facing consensus actors? So meaning miners and validators what is the behavior of the chain, both average case behavior and extreme case behavior and how does the behavior of the chain affect incentives at the application layer? So for example, if an application depends on the chain working in a particular way for its incentives then if the chain ends up suddenly working some differently because of an attack then that might cause the application to have some problems. And how do applications affect any of the incentives? Incentives basic users incentives, basic census actors incentives to do things that might break the chain and all of this stuff.
00:01:49.520 - 00:02:28.806, Speaker B: So there's some pretty complex interactions between all of these, right? So users send transactions to the chain, users read data from the chain, the state of applications lives on the chain and so you could say the state affects the or the chain affects the state of applications. Applications give incentives to users and applications are the reason why users send transactions that have particular strings of data instead of other particular strings of data. Consentus actors maintain the stability of the chain and the chain provides some intentional in protocol incentives to Consentus actors.
00:02:28.806 - 00:03:14.438, Speaker B: So this includes mining rewards, validating rewards, various fancy and protocol defined rewards. It also includes penalties and applications also provide more incentives, right? So there's in protocol incentives and then there's also extra protocol incentives and ultimately this whole mev situation is a situation about extra protocol incentives that arise mostly accidentally and how they end up affecting some of the incentives to run the chain. So some of the risks to watch out for are one, I think, and the one that we've focused on for the longest is just the incentive for validators to act correctly instead of acting incorrectly.
00:03:14.438 - 00:03:41.874, Speaker B: And in particular, the incentive to keep advancing the chain instead of trying to 51% attack or for example, trying to censor the chain. Right. And the kind of battle between the users incentive which just is the transaction fee and now just a priority fee to get included in the chain versus potential bribes to Censor and Light.
00:03:41.874 - 00:04:46.342, Speaker B: Bribes to Censor happen accidentally or bribes to Censor or something might happen intentionally and trying to set economics so that the user incentive has the upper hand and so that side incentives don't have the upper hand. Right? A lot of that was a big part of the discussion in things like PBS censorship resistance but aside from that there is also economies of scale in incentives and one example is that if user incentives are complex then that might lead to wallet centralization, right? So for example, pre EIP 1559 the incentives facing users in terms of how the user sets the gas price were pretty complicated and a user got a pretty complicated trade off curve between getting their transaction included quickly and waiting a very variable and unknown amount of time for their transaction to get included. And this both caused a huge amount of dead weight loss because a lot of users waited for their transaction to get included for no good reason.
00:04:46.342 - 00:05:20.418, Speaker B: And it also, I think, made it harder to create wallets and probably ended up contributing somewhat to dissuading new wallets from getting created. Post EIP one five nine incentives for users are generally a lot simpler. You just set a reasonably high max space fee and then you set the priority fee to some probably constant number or if there is an active situation going on, you could set it to something higher using a much number algorithm and you get penalized much less.
00:05:20.418 - 00:05:48.826, Speaker B: But generally the situation is simpler for users. We also see economies of scale for consensus actors, right? And that leads to consensus centralization. So if the strategies that consensus actors see are something that's constantly complex and shifting and especially requires access to proprietary information and all of these things, then that's going to be really bad for solar staking, it's going to be really bad for decentralized pooling even.
00:05:48.826 - 00:06:32.934, Speaker B: It's even going to be really bad for small centralized pools and so it's just going to lead to big pool domination, right? And I think we even saw near the end of the proof of work era, ethereum centralized pool domination was something that started to get pretty bad, right? We got to the point where two mining pools were enough to get over 50% and bitcoin is like a little better than ethereum proof of work but it wasn't that much better than ethereum proof of work and I think we want to really make sure that proof of stake goes in a healthy direction as well. And then finally, incentives to have low latency are also a different kind of centralization incentive because they are a geographic concentration incentive. They're also a cloud computing incentive.
00:06:32.934 - 00:07:03.630, Speaker B: And both of those things actually contribute to jurisdiction risk, which is another really important and big risk to the credible neutrality of a blockchain, as I think we've seen over the past year. So a lot of this started basically with the rise of DFI, right? So burst mev meaning kind of these opportunities to grab up a large amount of money by being the final actor that constructs a block. A lot of those actually existed even all the way back in 2017.
00:07:03.630 - 00:07:50.126, Speaker B: So there are these pretty famous ICOs that happened in 2017. The picture on the left is a graph, graphing the gas price and it got to an extremely high number and there was just like a huge amount of dead weight loss. I think this was specifically during the basic attention token ICO and had there been mev collection infrastructure at the time, that could have just been collected by whatever mining pool was sophisticated enough to have that infrastructure, right? But realistically at the time there were just not enough of these incidents to probably justify paying the fixed cost of building the infrastructure to try to capture all this mev.
00:07:50.126 - 00:08:42.434, Speaker B: But then in 2019, 2020, we had DPI Summer and at that time we had basically the start of essentially permanent combination of kind of ongoing mev that would happen pretty much every block and even bigger and even crazier spikes than we saw in 2017. Right? And that created economies of scale for consensus actors which ended up creating the necessity for things like TBS to try to kind of split up the economies of scale heavy role so that the remaining role would not be so economies of scale heavy. And the chart on the right is daily extracted mev gross profit, which shows how mev is a constant, but at the same time it is very spiky EAP one five nine.
00:08:42.434 - 00:09:10.874, Speaker B: Right? So that greatly reduced waiting times for users and it also greatly reduced the incentive to use complex gas price strategies as I mentioned, which reduces barrier sentry for wallets. The merge actually reduced waiting times for users even further and I think there's going to be some research on that coming out fairly soon and that's something that's going to improve further over time. The merge actually does a lot of strange things at the same time.
00:09:10.874 - 00:09:34.574, Speaker B: Right, so the merge, first of all, it completely changes the class of participants maintaining consensus, which means that the side incentives of people maintaining consensus change a lot. Before it was miners, now it's ETH stakers. Miners tended to be a group that was kind of off in their own corner and often not even very loyal to ethereum because they would jump between ethereum and other protocols.
00:09:34.574 - 00:10:03.486, Speaker B: Now there were some miners that were definitely very loyal to ethereum but there were also others that were not. And it's people that had access to hardware whose main expertise was in things like hardware. Meanwhile, ETH stakers on the other hand, are a subset of ETH holders and ETH holders tend to have less sophistication and hardware, but they also tend to be more integrated into the ethereum ecosystem in other ways.
00:10:03.486 - 00:10:52.478, Speaker B: And there is complicated effects, I think from the change of what kinds of people are doing the mining to what kinds of people are doing ETH Staking on average, right? So I know a lot of miners actually ended up becoming ETH stakers and so a lot of actors carried over from one side to the, you know, on average, the composition did change a lot. The merge also made reorg attacks vastly harder. So there's this piece from myself and Giorgios from almost two years ago that talks about how reorgs after the merge are going to get much harder and then just also a very different incentive landscape in terms of things like centralization and joining a staking pool and what kind of pools are even possible and all of these issues, right? So the merge changed a lot.
00:10:52.478 - 00:11:28.290, Speaker B: And I think the merge is one of those things where even ten years from now, if someone asks what kinds of effects did the merge have? As the Apocryphal quote about the French Revolution goes, the correct response is going to be it's too early to tell. So that's existing changes now, upcoming changes, withdrawals are going to get enabled in the next hard fork, then stuff going beyond that. Single secret leader elections, different types of in protocol, PPS, and finally single SWAT finality.
00:11:28.290 - 00:11:44.730, Speaker B: So withdrawals, basically two consequences, right? People can withdraw and so people will withdraw and that reduces the total amount of ETH staked. But then also people can withdraw. And so people become more confident that if they stake, they'll get their money back, which leads to more east getting staked.
00:11:44.730 - 00:11:59.170, Speaker B: Which one of these dominates, we have no idea. Could go either way, though. Ultimately, I think the main practical consequence of this is going to be a change to the total amount of Staking and possibly also a change to the composition of stakers.
00:11:59.170 - 00:12:24.460, Speaker B: My hope is that for solar stakers, things are going to become more friendly and withdrawals are going to kind of reduce the premium that pools have, because currently pools have this premium that they're the only way to get liquidity. And with withdrawals you're going to be able to withdraw and get your money back in a couple of days. So it'll be interesting to see what kinds of consequences that has.
00:12:24.460 - 00:12:48.814, Speaker B: But single secret leader elections, these are interesting, right? So only the proposer will know that they are the proposer before the block is produced. And though the proposer could voluntarily reveal that info and even prove that they're going to be the proposer. So the intended effect of all this is to reduce the dos risk against proposers, right? If no one knows who you are until the block is created, then there's nothing that can be dossed.
00:12:48.814 - 00:13:27.258, Speaker B: And once you reveal who you are by creating the block, well, the block is already out there. And so even if everyone dosses you, well, the block is already out there and it is going to join the chain. But there is this interesting research question of are there unintended effects and in particular, especially in the combination of PBS, would there be incentives for proposers to pre reveal their identity to anyone? I'll skip over PBS for now because I feel like everyone is going to be talking about PBS and it's probably the kind of primary subject over the next few years in some sense, but it's a fascinating rabbit hole.
00:13:27.258 - 00:13:48.630, Speaker B: And then single SWAT finality, right? So single SWAT finality basically means instead of blocks finalizing after two epochs, every SWAT is just going to immediately finalize a block. With the exception of these special cases where you have an inactivity leak, single swap finality means even more reorg security. It might make Ethereum more bridge friendly.
00:13:48.630 - 00:14:23.230, Speaker B: But as we'll get into with layer two pre confirmations, single slot finality will not be de facto single slot for a lot of users and I think that's going to be an interesting nuance. So finally the switch to layer two and protocol economics. Right? So how does the rise of layer twos affect the incentives facing specifically actors in the protocol at layer one? A lot that depends on how the whole layer two thing plays out.
00:14:23.230 - 00:14:42.870, Speaker B: Right, so one is sequencing style. So on ETH research, Justin Drake made this post about what he calls based roll ups. Basically roll ups that just do let layer one directly do the sequencing for them versus some kind of layer two controlled sequencing where you have a layer two defined sequencer auction and all of these things.
00:14:42.870 - 00:14:57.862, Speaker B: What percent of layer one DFI will move to layer twos? If the answer is zero, layer twos have no impact. If the answer is 100%, then everything depends on how the layer twos work and then the answer could be somewhere between zero and 100%. Fraud proof windows and censorship.
00:14:57.862 - 00:15:36.598, Speaker B: That's a pretty simple one. Pre confirmations that we'll talk about. And then this kind of final question, which is will a switch where a lot of activity moves to layer two S make layer one economics more boring, possibly by insulating the layer one from the side effects of some activity? Or will it make it less boring by creating more complicated interaction effects? So, based roll ups, right, so when I made my post on roll ups about two years ago, one of the things that I zoomed in on is basically this question of in a roll up you have these batches that kind of take a lot of transactions and commit them into the layer one.
00:15:36.598 - 00:15:48.054, Speaker B: And the question is like who has the right to submit a batch? Option one is total anarchy. Anyone can submit a batch at any time. And here I said this is the simplest approach, but it has important drawbacks.
00:15:48.054 - 00:16:13.454, Speaker B: Particularly there's a risk that multiple participants will generate an attempt to submit batches in parallel. Only one of them will get included. This leads to a wasted effort in generating proofs and wasted gas and publishing batches to chain with PBS, a lot of these costs really get reduced, especially the gas costs get reduced, right? Because you can make the gas payment of a batch conditional on that batch get included and getting correctly processed.
00:16:13.454 - 00:16:28.866, Speaker B: And this is something that you will have to work through the builder ecosystem in order to do. But if the builder exists, then you can do it. And so suddenly what I call the total anarchy approach or what Justin calls the base roll up approach suddenly becomes viable.
00:16:28.866 - 00:16:49.838, Speaker B: But then there's these also other approaches, right? Centralized sequencers, you could do sequencer auctions, you could do DPOs voting, you could do random selection from a set. You can combine sequencer options with DPOs voting to remove the sequencer if they're abusive in some way that layer one doesn't detect but still really matters to users. So there's a lot of options that are not based.
00:16:49.838 - 00:17:31.990, Speaker B: And there's an interesting question of like do roll ups want to be based or not? Could layer twos absorb complex layer one mev? If roll ups are based, then they can't, right? Because layer two mev just becomes layer one mev because the layer one PBS system just does sequencing for the layer twos. If a large part of layer one DeFi stays on layer one, then also no if there are other complicated interaction effects. So like for example, if rapid layer one transaction inclusion helps layer two arbitrage and whoever the first transaction is to get included ends up just becoming the first that successfully can do a particular layer two arbitrage.
00:17:31.990 - 00:17:49.710, Speaker B: Or if there is other interaction effects, then maybe no and otherwise maybe, right? And this is one of those interesting research questions. Fraud and censorship pretty easy. If you could censor a chain for a week and that chain doesn't socially rework you, then you can steal from optimistic roll ups.
00:17:49.710 - 00:18:33.494, Speaker B: But I would argue this is not too interesting because there's like much shorter term censorship attacks that are more realistic that can seriously hurt DeFi, right? If you can only censor for an hour, then you can do a huge amount of mev extraction on all kinds of DeFi projects like roll ups or uniswap like systems, potentially even liquidations. You might even be able to force liquidate people and prevent them from filling up their CDPs and you could do all kinds of stuff, right? And that's also something that's worth thinking about. But that's not a layer two specific problem, right? It exists on layer one or layer two pre confirmations.
00:18:33.494 - 00:18:52.978, Speaker B: So users generally want faster confirmations than even 12 seconds. And a lot of roll ups are not even doing 12 seconds because they want to save on fees. And also single SWAT finality might end up increasing the SWAT time maybe from 12 seconds to 32 seconds.
00:18:52.978 - 00:19:35.614, Speaker B: And so what a lot of roll ups are thinking about is doing these pre confirmations, right? So you have an off chain pre confirmation protocol that pre confirms layer two blocks. And then eventually you have a badge that kind of submits these roll up blocks and then possibly some compact proof of the pre confirmation into a layer one block, all of that gets verified and then that actually solidifies the block at layer one, right? And so with this, even if you have single slot finality at layer one, the user's experience is that step one, their transaction gets accepted into a layer two block. Step two, the layer two block gets pre confirmed.
00:19:35.614 - 00:19:58.422, Speaker B: And then finally step three, it gets confirmed on layer one. So arguably this is a point in favor of SSF because if everyone's using layer twos and layer twos have pre confirmations, then it's okay for layer one to have loggers a lot times and the loggers a lot times generally make SSF easier. But still you have two tiers of confirmation.
00:19:58.422 - 00:20:21.122, Speaker B: And I think the two tiers of confirmation thing might be fundamental because layer one is not willing to centralize as much as layer two. And so layer two confirmations are always going to be faster. Like there's just always going to be some kind of curve where the user's knowledge of how confirmed their transaction is doesn't just jump from zero to 100% immediately, it kind of goes up over time.
00:20:21.122 - 00:20:45.238, Speaker B: And so you have some notion of pre confirmation. That's inevitable. Now notice that layer two pre confirmations are incompatible with based roll ups, right? A roll up cannot be based if it has pre confirmations because while the submission protocol has to force the system to respect to the pre confirmation mechanism and a set of layer two blocks that does not respect pre confirmations, it has to just reject.
00:20:45.238 - 00:21:38.214, Speaker B: Right? And ultimately it would be the layer two and the pre confirmation system that collects most of the NVV instead of layer one, right? So based roll ups cannot pre confirm, which is I think an important thing unless you do some kind of layer one universal pre confirm, which could be interesting. Will layer one be more boring or less boring? I mean, my hope what I would love to see is for layer one to be more boring, but this is not guaranteed, right? Layer two could absorb functionality and risk or layer two could create complicated interaction effects between layer one and layer two. And I think ultimately we need more analysis of a fully approached layer two world and I think mev economics with layer two is in mind are just a really fascinating research topic that will probably continue to need a lot more people thinking about for years.
00:21:38.214 - 00:21:39.960, Speaker B: So thank you.
00:21:42.290 - 00:21:55.770, Speaker A: Awesome. Thank you vitalik for the great talk. And that actually perfectly segues into our next talk by Hasu who is going to be talking about decentralizing sequencers and PBS in the context of roll ups.
